/*! For license information please see 61306ce4438d1e592477-app.js.LICENSE.txt */
(()=>{var e={2575:function(e,t,n){(function(){"use strict";var e;function t(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var i,r="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},s=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g];for(var t=0;t<e.length;++t){var i=e[t];if(i&&i.Math==Math)return i}throw Error("Cannot find global object")}(this);function o(e,t){if(t)e:{var n=s;e=e.split(".");for(var i=0;i<e.length-1;i++){var o=e[i];if(!(o in n))break e;n=n[o]}(t=t(i=n[e=e[e.length-1]]))!=i&&null!=t&&r(n,e,{configurable:!0,writable:!0,value:t})}}function a(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function l(e){var n="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return n?n.call(e):{next:t(e)}}function c(e){if(!(e instanceof Array)){e=l(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}if(o("Symbol",(function(e){function t(e,t){this.g=e,r(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.g};var n=0;return function e(i){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t("jscomp_symbol_"+(i||"")+"_"+n++,i)}})),o("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var n="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),i=0;i<n.length;i++){var o=s[n[i]];"function"==typeof o&&"function"!=typeof o.prototype[e]&&r(o.prototype,e,{configurable:!0,writable:!0,value:function(){return a(t(this))}})}return e})),"function"==typeof Object.setPrototypeOf)i=Object.setPrototypeOf;else{var u;e:{var h={};try{h.__proto__={a:!0},u=h.a;break e}catch(M){}u=!1}i=u?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var d=i;function p(){this.u=!1,this.h=null,this.Ka=void 0,this.g=1,this.da=0,this.i=null}function f(e){if(e.u)throw new TypeError("Generator is already running");e.u=!0}function m(e,t){e.i={Wa:t,$a:!0},e.g=e.da}function g(e,t){return e.g=3,{value:t}}function v(e){this.g=new p,this.h=e}function y(e,t,n,i){try{var r=t.call(e.g.h,n);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return e.g.u=!1,r;var s=r.value}catch(t){return e.g.h=null,m(e.g,t),b(e)}return e.g.h=null,i.call(e.g,s),b(e)}function b(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.u=!1,{value:t.value,done:!1}}catch(t){e.g.Ka=void 0,m(e.g,t)}if(e.g.u=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.$a)throw t.Wa;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function w(e){this.next=function(t){return f(e.g),e.g.h?t=y(e,e.g.h.next,t,e.g.O):(e.g.O(t),t=b(e)),t},this.throw=function(t){return f(e.g),e.g.h?t=y(e,e.g.h.throw,t,e.g.O):(m(e.g,t),t=b(e)),t},this.return=function(t){return function(e,t){f(e.g);var n=e.g.h;return n?y(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),b(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function E(e,t){return t=new w(new v(t)),d&&e.prototype&&d(t,e.prototype),t}p.prototype.O=function(e){this.Ka=e},p.prototype.return=function(e){this.i={return:e},this.g=this.da},Array.from||(Array.from=function(e){return[].slice.call(e)}),Object.assign||(Object.assign=function(e){for(var t,n=[].slice.call(arguments,1),i=0;i<n.length;i++)if(t=n[i])for(var r=e,s=Object.keys(t),o=0;o<s.length;o++){var a=s[o];r[a]=t[a]}return e});var _=setTimeout;function x(){}function S(e){if(!(this instanceof S))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this.N=0,this.Ea=!1,this.I=void 0,this.ba=[],L(e,this)}function T(e,t){for(;3===e.N;)e=e.I;0===e.N?e.ba.push(t):(e.Ea=!0,B((function(){var n=1===e.N?t.bb:t.cb;if(null===n)(1===e.N?k:C)(t.promise,e.I);else{try{var i=n(e.I)}catch(e){return void C(t.promise,e)}k(t.promise,i)}})))}function k(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof S)return e.N=3,e.I=t,void P(e);if("function"==typeof n)return void L(function(e,t){return function(){e.apply(t,arguments)}}(n,t),e)}e.N=1,e.I=t,P(e)}catch(t){C(e,t)}}function C(e,t){e.N=2,e.I=t,P(e)}function P(e){2===e.N&&0===e.ba.length&&B((function(){e.Ea||"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e.I)}));for(var t=0,n=e.ba.length;t<n;t++)T(e,e.ba[t]);e.ba=null}function I(e,t,n){this.bb="function"==typeof e?e:null,this.cb="function"==typeof t?t:null,this.promise=n}function L(e,t){var n=!1;try{e((function(e){n||(n=!0,k(t,e))}),(function(e){n||(n=!0,C(t,e))}))}catch(e){n||(n=!0,C(t,e))}}function A(e){return e&&"object"==typeof e&&e.constructor===S?e:new S((function(t){t(e)}))}S.prototype.catch=function(e){return this.then(null,e)},S.prototype.then=function(e,t){var n=new this.constructor(x);return T(this,new I(e,t,n)),n},S.prototype.finally=function(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))};var M,O,N,D,R,j,B="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){_(e,0)};if(!window.Promise){window.Promise=S,S.prototype.then=S.prototype.then,S.all=function(e){return new S((function(t,n){function i(e,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var a=o.then;if("function"==typeof a)return void a.call(o,(function(t){i(e,t)}),n)}r[e]=o,0==--s&&t(r)}catch(e){n(e)}}if(!e||void 0===e.length)return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);for(var s=r.length,o=0;o<r.length;o++)i(o,r[o])}))},S.race=function(e){return new S((function(t,n){if(!e||void 0===e.length)return n(new TypeError("Promise.race accepts an array"));for(var i=0,r=e.length;i<r;i++)A(e[i]).then(t,n)}))},S.resolve=A,S.reject=function(e){return new S((function(t,n){n(e)}))};var U=document.createTextNode(""),$=[];new MutationObserver((function(){for(var e=$.length,t=0;t<e;t++)$[t]();$.splice(0,e)})).observe(U,{characterData:!0}),B=function(e){$.push(e),U.textContent=0<U.textContent.length?"":"a"}}!function(e,t){if(!(t in e)){var i=typeof n.g==typeof i?window:n.g,r=0,s=String(Math.random()),o="__symbol@@"+s,a=e.getOwnPropertyNames,l=e.getOwnPropertyDescriptor,c=e.create,u=e.keys,h=e.freeze||e,d=e.defineProperty,p=e.defineProperties,f=l(e,"getOwnPropertyNames"),m=e.prototype,g=m.hasOwnProperty,v=m.propertyIsEnumerable,y=m.toString,b=function(e,t,n){g.call(e,o)||d(e,o,{enumerable:!1,configurable:!1,writable:!1,value:{}}),e[o]["@@"+t]=n},w=function(e,t){var n=c(e);return a(t).forEach((function(e){S.call(t,e)&&L(n,e,t[e])})),n},E=function(){},_=function(e){return e!=o&&!g.call(C,e)},x=function(e){return e!=o&&g.call(C,e)},S=function(e){var t=String(e);return x(t)?g.call(this,t)&&!!this[o]&&this[o]["@@"+t]:v.call(this,e)},T=function(t){return d(m,t,{enumerable:!1,configurable:!0,get:E,set:function(e){M(this,t,{enumerable:!1,configurable:!0,writable:!0,value:e}),b(this,t,!0)}}),C[t]=d(e(t),"constructor",P),h(C[t])},k=function e(t){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return T("__symbol:".concat(t||"",s,++r))},C=c(null),P={value:k},I=function(e){return C[e]},L=function(e,t,n){var i=String(t);if(x(i)){if(t=M,n.enumerable){var r=c(n);r.enumerable=!1}else r=n;t(e,i,r),b(e,i,!!n.enumerable)}else d(e,t,n);return e},A=function(e){return a(e).filter(x).map(I)};f.value=L,d(e,"defineProperty",f),f.value=A,d(e,t,f),f.value=function(e){return a(e).filter(_)},d(e,"getOwnPropertyNames",f),f.value=function(e,t){var n=A(t);return n.length?u(t).concat(n).forEach((function(n){S.call(t,n)&&L(e,n,t[n])})):p(e,t),e},d(e,"defineProperties",f),f.value=S,d(m,"propertyIsEnumerable",f),f.value=k,d(i,"Symbol",f),f.value=function(e){return(e="__symbol:".concat("__symbol:",e,s))in m?C[e]:T(e)},d(k,"for",f),f.value=function(e){if(_(e))throw new TypeError(e+" is not a symbol");if(g.call(C,e)&&"__symbol:"===(e=e.slice(10)).slice(0,10)&&(e=e.slice(10))!==s)return 0<(e=e.slice(0,e.length-s.length)).length?e:void 0},d(k,"keyFor",f),f.value=function(e,t){var n=l(e,t);return n&&x(t)&&(n.enumerable=S.call(e,t)),n},d(e,"getOwnPropertyDescriptor",f),f.value=function(e,t){return 1===arguments.length||void 0===t?c(e):w(e,t)},d(e,"create",f),f.value=function(){var e=y.call(this);return"[object String]"===e&&x(this)?"[object Symbol]":e},d(m,"toString",f);try{if(!0!==c(d({},"__symbol:",{get:function(){return d(this,"__symbol:",{value:!0})["__symbol:"]}}))["__symbol:"])throw"IE11";var M=d}catch(e){M=function(e,t,n){var i=l(m,t);delete m[t],d(e,t,n),d(m,t,i)}}}}(Object,"getOwnPropertySymbols"),M=Object,O=Symbol,D=M.defineProperty,R=M.prototype,j=R.toString,"iterator match replace search split hasInstance isConcatSpreadable unscopables species toPrimitive toStringTag".split(" ").forEach((function(e){e in O||(D(O,e,{value:O(e)}),"toStringTag"===e&&((N=M.getOwnPropertyDescriptor(R,"toString")).value=function(){var e=j.call(this),t=null==this?this:this[O.toStringTag];return null==t?e:"[object "+t+"]"},D(R,"toString",N)))})),function(e,t,n){function i(){return this}t[e]||(t[e]=function(){var t=0,n=this,r={next:function(){var e=n.length<=t;return e?{done:e}:{done:e,value:n[t++]}}};return r[e]=i,r}),n[e]||(n[e]=function(){var t=String.fromCodePoint,n=this,r=0,s=n.length,o={next:function(){var e=s<=r,i=e?"":t(n.codePointAt(r));return r+=i.length,e?{done:e}:{done:e,value:i}}};return o[e]=i,o})}(Symbol.iterator,Array.prototype,String.prototype);var F=Object.prototype.toString;Object.prototype.toString=function(){return void 0===this?"[object Undefined]":null===this?"[object Null]":F.call(this)},Object.keys=function(e){return Object.getOwnPropertyNames(e).filter((function(t){return(t=Object.getOwnPropertyDescriptor(e,t))&&t.enumerable}))},String.prototype[Symbol.iterator]&&String.prototype.codePointAt||(String.prototype[Symbol.iterator]=function e(){var t,n=this;return E(e,(function(e){if(1==e.g&&(t=0),3!=e.g)return t<n.length?e=g(e,n[t]):(e.g=0,e=void 0),e;t++,e.g=2}))}),Set.prototype[Symbol.iterator]||(Set.prototype[Symbol.iterator]=function e(){var t,n,i=this;return E(e,(function(e){if(1==e.g&&(t=[],i.forEach((function(e){t.push(e)})),n=0),3!=e.g)return n<t.length?e=g(e,t[n]):(e.g=0,e=void 0),e;n++,e.g=2}))}),Map.prototype[Symbol.iterator]||(Map.prototype[Symbol.iterator]=function e(){var t,n,i=this;return E(e,(function(e){if(1==e.g&&(t=[],i.forEach((function(e,n){t.push([n,e])})),n=0),3!=e.g)return n<t.length?e=g(e,t[n]):(e.g=0,e=void 0),e;n++,e.g=2}))});var H=document.createEvent("Event");if(H.initEvent("foo",!0,!0),H.preventDefault(),!H.defaultPrevented){var q=Event.prototype.preventDefault;Event.prototype.preventDefault=function(){this.cancelable&&(q.call(this),Object.defineProperty(this,"defaultPrevented",{get:function(){return!0},configurable:!0}))}}var V=/Trident/.test(navigator.userAgent);if(!window.Event||V&&"function"!=typeof window.Event){var z=window.Event;if(window.Event=function(e,t){t=t||{};var n=document.createEvent("Event");return n.initEvent(e,!!t.bubbles,!!t.cancelable),n},z){for(var G in z)window.Event[G]=z[G];window.Event.prototype=z.prototype}}if((!window.CustomEvent||V&&"function"!=typeof window.CustomEvent)&&(window.CustomEvent=function(e,t){t=t||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!!t.bubbles,!!t.cancelable,t.detail),n},window.CustomEvent.prototype=window.Event.prototype),!window.MouseEvent||V&&"function"!=typeof window.MouseEvent){var K=window.MouseEvent;if(window.MouseEvent=function(e,t){t=t||{};var n=document.createEvent("MouseEvent");return n.initMouseEvent(e,!!t.bubbles,!!t.cancelable,t.view||window,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget),n},K)for(var W in K)window.MouseEvent[W]=K[W];window.MouseEvent.prototype=K.prototype}Object.getOwnPropertyDescriptor(Node.prototype,"baseURI")||Object.defineProperty(Node.prototype,"baseURI",{get:function(){var e=(this.ownerDocument||this).querySelector("base[href]");return e&&e.href||window.location.href},configurable:!0,enumerable:!0});var X,J,Y=Element.prototype,Q=null!==(X=Object.getOwnPropertyDescriptor(Y,"attributes"))&&void 0!==X?X:Object.getOwnPropertyDescriptor(Node.prototype,"attributes"),Z=null!==(J=null==Q?void 0:Q.get)&&void 0!==J?J:function(){return this.attributes},ee=Array.prototype.map;Y.hasOwnProperty("getAttributeNames")||(Y.getAttributeNames=function(){return ee.call(Z.call(this),(function(e){return e.name}))});var te,ne=Element.prototype;ne.hasOwnProperty("matches")||(ne.matches=null!==(te=ne.webkitMatchesSelector)&&void 0!==te?te:ne.msMatchesSelector);var ie=Node.prototype.appendChild;function re(e){(e=e.prototype).hasOwnProperty("append")||Object.defineProperty(e,"append",{configurable:!0,enumerable:!0,writable:!0,value:function(e){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];for(n=(t=l(t)).next();!n.done;n=t.next())n=n.value,ie.call(this,"string"==typeof n?document.createTextNode(n):n)}})}re(Document),re(DocumentFragment),re(Element);var se,oe,ae=Node.prototype.insertBefore,le=null!==(oe=null===(se=Object.getOwnPropertyDescriptor(Node.prototype,"firstChild"))||void 0===se?void 0:se.get)&&void 0!==oe?oe:function(){return this.firstChild};function ce(e){(e=e.prototype).hasOwnProperty("prepend")||Object.defineProperty(e,"prepend",{configurable:!0,enumerable:!0,writable:!0,value:function(e){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];n=le.call(this);for(var i=(t=l(t)).next();!i.done;i=t.next())i=i.value,ae.call(this,"string"==typeof i?document.createTextNode(i):i,n)}})}ce(Document),ce(DocumentFragment),ce(Element);var ue,he,de=Node.prototype.appendChild,pe=Node.prototype.removeChild,fe=null!==(he=null===(ue=Object.getOwnPropertyDescriptor(Node.prototype,"firstChild"))||void 0===ue?void 0:ue.get)&&void 0!==he?he:function(){return this.firstChild};function me(e){(e=e.prototype).hasOwnProperty("replaceChildren")||Object.defineProperty(e,"replaceChildren",{configurable:!0,enumerable:!0,writable:!0,value:function(e){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];for(;null!==(n=fe.call(this));)pe.call(this,n);for(n=(t=l(t)).next();!n.done;n=t.next())n=n.value,de.call(this,"string"==typeof n?document.createTextNode(n):n)}})}me(Document),me(DocumentFragment),me(Element);var ge,ve,ye,be,we=Node.prototype.insertBefore,Ee=null!==(ve=null===(ge=Object.getOwnPropertyDescriptor(Node.prototype,"parentNode"))||void 0===ge?void 0:ge.get)&&void 0!==ve?ve:function(){return this.parentNode},_e=null!==(be=null===(ye=Object.getOwnPropertyDescriptor(Node.prototype,"nextSibling"))||void 0===ye?void 0:ye.get)&&void 0!==be?be:function(){return this.nextSibling};function xe(e){(e=e.prototype).hasOwnProperty("after")||Object.defineProperty(e,"after",{configurable:!0,enumerable:!0,writable:!0,value:function(e){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];if(null!==(n=Ee.call(this)))for(var i=_e.call(this),r=(t=l(t)).next();!r.done;r=t.next())r=r.value,we.call(n,"string"==typeof r?document.createTextNode(r):r,i)}})}xe(CharacterData),xe(Element);var Se,Te,ke=Node.prototype.insertBefore,Ce=null!==(Te=null===(Se=Object.getOwnPropertyDescriptor(Node.prototype,"parentNode"))||void 0===Se?void 0:Se.get)&&void 0!==Te?Te:function(){return this.parentNode};function Pe(e){(e=e.prototype).hasOwnProperty("before")||Object.defineProperty(e,"before",{configurable:!0,enumerable:!0,writable:!0,value:function(e){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];if(null!==(n=Ce.call(this)))for(var i=(t=l(t)).next();!i.done;i=t.next())i=i.value,ke.call(n,"string"==typeof i?document.createTextNode(i):i,this)}})}Pe(CharacterData),Pe(Element);var Ie,Le,Ae=Node.prototype.removeChild,Me=null!==(Le=null===(Ie=Object.getOwnPropertyDescriptor(Node.prototype,"parentNode"))||void 0===Ie?void 0:Ie.get)&&void 0!==Le?Le:function(){return this.parentNode};function Oe(e){(e=e.prototype).hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=Me.call(this);e&&Ae.call(e,this)}})}Oe(CharacterData),Oe(Element);var Ne,De,Re=Node.prototype.insertBefore,je=Node.prototype.removeChild,Be=null!==(De=null===(Ne=Object.getOwnPropertyDescriptor(Node.prototype,"parentNode"))||void 0===Ne?void 0:Ne.get)&&void 0!==De?De:function(){return this.parentNode};function Ue(e){(e=e.prototype).hasOwnProperty("replaceWith")||Object.defineProperty(e,"replaceWith",{configurable:!0,enumerable:!0,writable:!0,value:function(e){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];if(null!==(n=Be.call(this))){for(var i=(t=l(t)).next();!i.done;i=t.next())i=i.value,Re.call(n,"string"==typeof i?document.createTextNode(i):i,this);je.call(n,this)}}})}Ue(CharacterData),Ue(Element);var $e=window.Element.prototype,Fe=window.HTMLElement.prototype,He=window.SVGElement.prototype;!Fe.hasOwnProperty("classList")||$e.hasOwnProperty("classList")||He.hasOwnProperty("classList")||Object.defineProperty($e,"classList",Object.getOwnPropertyDescriptor(Fe,"classList"));var qe=document.createElement("style");qe.textContent="body {transition: opacity ease-in 0.2s; } \nbody[unresolved] {opacity: 0; display: block; overflow: hidden; position: relative; } \n";var Ve=document.querySelector("head");Ve.insertBefore(qe,Ve.firstChild);var ze=window;ze.WebComponents=ze.WebComponents||{flags:{}};var Ge=document.querySelector('script[src*="webcomponents-bundle"]'),Ke=/wc-(.+)/,We={};if(!We.noOpts){if(location.search.slice(1).split("&").forEach((function(e){var t;(e=e.split("="))[0]&&(t=e[0].match(Ke))&&(We[t[1]]=e[1]||!0)})),Ge)for(var Xe=0,Je=void 0;Je=Ge.attributes[Xe];Xe++)"src"!==Je.name&&(We[Je.name]=Je.value||!0);var Ye={};We.log&&We.log.split&&We.log.split(",").forEach((function(e){Ye[e]=!0})),We.log=Ye}ze.WebComponents.flags=We;var Qe=We.shadydom;if(Qe){ze.ShadyDOM=ze.ShadyDOM||{},ze.ShadyDOM.force=Qe;var Ze=We.noPatch;ze.ShadyDOM.noPatch="true"===Ze||Ze}var et=We.register||We.ce;function tt(){}function nt(e){return e.__shady||(e.__shady=new tt),e.__shady}function it(e){return e&&e.__shady}et&&window.customElements&&(ze.customElements.forcePolyfill=et),function(){function e(){}function t(e,t){if(!e.childNodes.length)return[];switch(e.nodeType){case Node.DOCUMENT_NODE:return m.call(e,t);case Node.DOCUMENT_FRAGMENT_NODE:return g.call(e,t);default:return f.call(e,t)}}var n="undefined"==typeof HTMLTemplateElement,i=!(document.createDocumentFragment().cloneNode()instanceof DocumentFragment),r=!1;/Trident/.test(navigator.userAgent)&&function(){function e(e,t){if(e instanceof DocumentFragment)for(var i;i=e.firstChild;)n.call(this,i,t);else n.call(this,e,t);return e}r=!0;var t=Node.prototype.cloneNode;Node.prototype.cloneNode=function(e){return e=t.call(this,e),this instanceof DocumentFragment&&(e.__proto__=DocumentFragment.prototype),e},DocumentFragment.prototype.querySelectorAll=HTMLElement.prototype.querySelectorAll,DocumentFragment.prototype.querySelector=HTMLElement.prototype.querySelector,Object.defineProperties(DocumentFragment.prototype,{nodeType:{get:function(){return Node.DOCUMENT_FRAGMENT_NODE},configurable:!0},localName:{get:function(){},configurable:!0},nodeName:{get:function(){return"#document-fragment"},configurable:!0}});var n=Node.prototype.insertBefore;Node.prototype.insertBefore=e;var i=Node.prototype.appendChild;Node.prototype.appendChild=function(t){return t instanceof DocumentFragment?e.call(this,t,null):i.call(this,t),t};var s=Node.prototype.removeChild,o=Node.prototype.replaceChild;Node.prototype.replaceChild=function(t,n){return t instanceof DocumentFragment?(e.call(this,t,n),s.call(this,n)):o.call(this,t,n),n},Document.prototype.createDocumentFragment=function(){var e=this.createElement("df");return e.__proto__=DocumentFragment.prototype,e};var a=Document.prototype.importNode;Document.prototype.importNode=function(e,t){return t=a.call(this,e,t||!1),e instanceof DocumentFragment&&(t.__proto__=DocumentFragment.prototype),t}}();var s=Node.prototype.cloneNode,o=Document.prototype.createElement,a=Document.prototype.importNode,l=Node.prototype.removeChild,c=Node.prototype.appendChild,u=Node.prototype.replaceChild,h=DOMParser.prototype.parseFromString,d=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML")||{get:function(){return this.innerHTML},set:function(e){this.innerHTML=e}},p=Object.getOwnPropertyDescriptor(window.Node.prototype,"childNodes")||{get:function(){return this.childNodes}},f=Element.prototype.querySelectorAll,m=Document.prototype.querySelectorAll,g=DocumentFragment.prototype.querySelectorAll,v=function(){if(!n){var e=document.createElement("template"),t=document.createElement("template");return t.content.appendChild(document.createElement("div")),e.content.appendChild(t),0===(e=e.cloneNode(!0)).content.childNodes.length||0===e.content.firstChild.content.childNodes.length||i}}();if(n){var y=document.implementation.createHTMLDocument("template"),b=!0,w=document.createElement("style");w.textContent="template{display:none;}";var E=document.head;E.insertBefore(w,E.firstElementChild),e.prototype=Object.create(HTMLElement.prototype);var _=!document.createElement("div").hasOwnProperty("innerHTML");e.Z=function(t){if(!t.content&&t.namespaceURI===document.documentElement.namespaceURI){t.content=y.createDocumentFragment();for(var n;n=t.firstChild;)c.call(t.content,n);if(_)t.__proto__=e.prototype;else if(t.cloneNode=function(t){return e.sa(this,t)},b)try{S(t),T(t)}catch(e){b=!1}e.bootstrap(t.content)}};var x={option:["select"],thead:["table"],col:["colgroup","table"],tr:["tbody","table"],th:["tr","tbody","table"],td:["tr","tbody","table"]},S=function(t){Object.defineProperty(t,"innerHTML",{get:function(){return A(this)},set:function(t){var n=x[(/<([a-z][^/\0>\x20\t\r\n\f]+)/i.exec(t)||["",""])[1].toLowerCase()];if(n)for(var i=0;i<n.length;i++)t="<"+n[i]+">"+t+"</"+n[i]+">";for(y.body.innerHTML=t,e.bootstrap(y);this.content.firstChild;)l.call(this.content,this.content.firstChild);if(t=y.body,n)for(i=0;i<n.length;i++)t=t.lastChild;for(;t.firstChild;)c.call(this.content,t.firstChild)},configurable:!0})},T=function(e){Object.defineProperty(e,"outerHTML",{get:function(){return"<template>"+this.innerHTML+"</template>"},set:function(e){if(!this.parentNode)throw Error("Failed to set the 'outerHTML' property on 'Element': This element has no parent node.");for(y.body.innerHTML=e,e=this.ownerDocument.createDocumentFragment();y.body.firstChild;)c.call(e,y.body.firstChild);u.call(this.parentNode,e,this)},configurable:!0})};S(e.prototype),T(e.prototype),e.bootstrap=function(n){for(var i,r=0,s=(n=t(n,"template")).length;r<s&&(i=n[r]);r++)e.Z(i)},document.addEventListener("DOMContentLoaded",(function(){e.bootstrap(document)})),Document.prototype.createElement=function(){var t=o.apply(this,arguments);return"template"===t.localName&&e.Z(t),t},DOMParser.prototype.parseFromString=function(){var t=h.apply(this,arguments);return e.bootstrap(t),t},Object.defineProperty(HTMLElement.prototype,"innerHTML",{get:function(){return A(this)},set:function(t){d.set.call(this,t),e.bootstrap(this)},configurable:!0,enumerable:!0});var k=/[&\u00A0"]/g,C=/[&\u00A0<>]/g,P=function(e){switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case" ":return"&nbsp;"}},I=(w=function(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!0;return t})("area base br col command embed hr img input keygen link meta param source track wbr".split(" ")),L=w("style script xmp iframe noembed noframes plaintext noscript".split(" ")),A=function(e,t){"template"===e.localName&&(e=e.content);for(var n,i="",r=t?t(e):p.get.call(e),s=0,o=r.length;s<o&&(n=r[s]);s++){e:{var a=n,l=e,c=t;switch(a.nodeType){case Node.ELEMENT_NODE:for(var u=a.localName,h="<"+u,d=a.attributes,f=0;l=d[f];f++)h+=" "+l.name+'="'+l.value.replace(k,P)+'"';h+=">",a=I[u]?h:h+A(a,c)+"</"+u+">";break e;case Node.TEXT_NODE:a=a.data,a=l&&L[l.localName]?a:a.replace(C,P);break e;case Node.COMMENT_NODE:a="\x3c!--"+a.data+"--\x3e";break e;default:throw window.console.error(a),Error("not implemented")}}i+=a}return i}}if(n||v){e.sa=function(e,t){var n=s.call(e,!1);return this.Z&&this.Z(n),t&&(c.call(n.content,s.call(e.content,!0)),M(n.content,e.content)),n};var M=function(n,i){if(i.querySelectorAll&&0!==(i=t(i,"template")).length)for(var r,s,o=0,a=(n=t(n,"template")).length;o<a;o++)s=i[o],r=n[o],e&&e.Z&&e.Z(s),u.call(r.parentNode,O.call(s,!0),r)},O=Node.prototype.cloneNode=function(t){if(!r&&i&&this instanceof DocumentFragment){if(!t)return this.ownerDocument.createDocumentFragment();var n=N.call(this.ownerDocument,this,!0)}else n=this.nodeType===Node.ELEMENT_NODE&&"template"===this.localName&&this.namespaceURI==document.documentElement.namespaceURI?e.sa(this,t):s.call(this,t);return t&&M(n,this),n},N=Document.prototype.importNode=function(n,i){if(i=i||!1,"template"===n.localName)return e.sa(n,i);var r=a.call(this,n,i);if(i){M(r,n),n=t(r,'script:not([type]),script[type="application/javascript"],script[type="text/javascript"]');for(var s,l=0;l<n.length;l++){s=n[l],(i=o.call(document,"script")).textContent=s.textContent;for(var c,h=s.attributes,d=0;d<h.length;d++)c=h[d],i.setAttribute(c.name,c.value);u.call(s.parentNode,i,s)}}return r}}n&&(window.HTMLTemplateElement=e)}(),tt.prototype.toJSON=function(){return{}};var rt=window.ShadyDOM||{};rt.Ya=!(!Element.prototype.attachShadow||!Node.prototype.getRootNode);var st=Object.getOwnPropertyDescriptor(Node.prototype,"firstChild");function ot(){return Document.prototype.msElementsFromPoint?"msElementsFromPoint":"elementsFromPoint"}function at(e){return(e=it(e))&&void 0!==e.firstChild}function lt(e){return e instanceof ShadowRoot}function ct(e){return(e=(e=it(e))&&e.root)&&Xi(e)}rt.H=!!(st&&st.configurable&&st.get),rt.ya=rt.force||!rt.Ya,rt.J=rt.noPatch||!1,rt.fa=rt.preferPerformance,rt.Aa="on-demand"===rt.J,rt.Na=navigator.userAgent.match("Trident");var ut=Element.prototype,ht=ut.matches||ut.matchesSelector||ut.mozMatchesSelector||ut.msMatchesSelector||ut.oMatchesSelector||ut.webkitMatchesSelector,dt=document.createTextNode(""),pt=0,ft=[];function mt(e){ft.push(e),dt.textContent=pt++}new MutationObserver((function(){for(;ft.length;)try{ft.shift()()}catch(e){throw dt.textContent=pt++,e}})).observe(dt,{characterData:!0});var gt=document.contains?function(e,t){return e.__shady_native_contains(t)}:function(e,t){return e===t||e.documentElement&&e.documentElement.__shady_native_contains(t)};function vt(e,t){for(;t;){if(t==e)return!0;t=t.__shady_parentNode}return!1}function yt(e){for(var t=e.length-1;0<=t;t--){var n=e[t],i=n.getAttribute("id")||n.getAttribute("name");i&&"length"!==i&&isNaN(i)&&(e[i]=n)}return e.item=function(t){return e[t]},e.namedItem=function(t){if("length"!==t&&isNaN(t)&&e[t])return e[t];for(var n=l(e),i=n.next();!i.done;i=n.next())if(((i=i.value).getAttribute("id")||i.getAttribute("name"))==t)return i;return null},e}function bt(e){var t=[];for(e=e.__shady_native_firstChild;e;e=e.__shady_native_nextSibling)t.push(e);return t}function wt(e){var t=[];for(e=e.__shady_firstChild;e;e=e.__shady_nextSibling)t.push(e);return t}function Et(e,t,n){if(n.configurable=!0,n.value)e[t]=n.value;else try{Object.defineProperty(e,t,n)}catch(e){}}function _t(e,t,n,i){for(var r in n=void 0===n?"":n,t)i&&0<=i.indexOf(r)||Et(e,n+r,t[r])}function xt(e,t){for(var n in t)n in e&&Et(e,n,t[n])}function St(e){var t={};return Object.getOwnPropertyNames(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t}function Tt(e,t){for(var n,i=Object.getOwnPropertyNames(t),r=0;r<i.length;r++)e[n=i[r]]=t[n]}function kt(e){return e instanceof Node?e:document.createTextNode(""+e)}function Ct(e){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];if(1===t.length)return kt(t[0]);n=document.createDocumentFragment();for(var i=(t=l(t)).next();!i.done;i=t.next())n.appendChild(kt(i.value));return n}var Pt,It=[];function Lt(e){Pt||(Pt=!0,mt(At)),It.push(e)}function At(){Pt=!1;for(var e=!!It.length;It.length;)It.shift()();return e}function Mt(){this.g=!1,this.addedNodes=[],this.removedNodes=[],this.oa=new Set}At.list=It,Mt.prototype.flush=function(){if(this.g){this.g=!1;var e=this.takeRecords();e.length&&this.oa.forEach((function(t){t(e)}))}},Mt.prototype.takeRecords=function(){if(this.addedNodes.length||this.removedNodes.length){var e=[{addedNodes:this.addedNodes,removedNodes:this.removedNodes}];return this.addedNodes=[],this.removedNodes=[],e}return[]};var Ot=/[&\u00A0"]/g,Nt=/[&\u00A0<>]/g;function Dt(e){switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case" ":return"&nbsp;"}}function Rt(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!0;return t}var jt=Rt("area base br col command embed hr img input keygen link meta param source track wbr".split(" ")),Bt=Rt("style script xmp iframe noembed noframes plaintext noscript".split(" "));function Ut(e,t){"template"===e.localName&&(e=e.content);for(var n="",i=t?t(e):e.childNodes,r=0,s=i.length,o=void 0;r<s&&(o=i[r]);r++){e:{var a=o,l=e,c=t;switch(a.nodeType){case Node.ELEMENT_NODE:for(var u,h="<"+(l=a.localName),d=a.attributes,p=0;u=d[p];p++)h+=" "+u.name+'="'+u.value.replace(Ot,Dt)+'"';h+=">",a=jt[l]?h:h+Ut(a,c)+"</"+l+">";break e;case Node.TEXT_NODE:a=a.data,a=l&&Bt[l.localName]?a:a.replace(Nt,Dt);break e;case Node.COMMENT_NODE:a="\x3c!--"+a.data+"--\x3e";break e;default:throw window.console.error(a),Error("not implemented")}}n+=a}return n}var $t=rt.H,Ft={querySelector:function(e){return this.__shady_native_querySelector(e)},querySelectorAll:function(e){return this.__shady_native_querySelectorAll(e)}},Ht={};function qt(e){Ht[e]=function(t){return t["__shady_native_"+e]}}function Vt(e,t){for(var n in _t(e,t,"__shady_native_"),t)qt(n)}function zt(e,t){t=void 0===t?[]:t;for(var n=0;n<t.length;n++){var i=t[n],r=Object.getOwnPropertyDescriptor(e,i);r&&(Object.defineProperty(e,"__shady_native_"+i,r),r.value?Ft[i]||(Ft[i]=r.value):qt(i))}}var Gt=document.createTreeWalker(document,NodeFilter.SHOW_ALL,null,!1),Kt=document.createTreeWalker(document,NodeFilter.SHOW_ELEMENT,null,!1),Wt=document.implementation.createHTMLDocument("inert");function Xt(e){for(var t;t=e.__shady_native_firstChild;)e.__shady_native_removeChild(t)}var Jt=["firstElementChild","lastElementChild","children","childElementCount"],Yt=["querySelector","querySelectorAll","append","prepend","replaceChildren"],Qt=St({get childNodes(){return this.__shady_childNodes},get firstChild(){return this.__shady_firstChild},get lastChild(){return this.__shady_lastChild},get childElementCount(){return this.__shady_childElementCount},get children(){return this.__shady_children},get firstElementChild(){return this.__shady_firstElementChild},get lastElementChild(){return this.__shady_lastElementChild},get shadowRoot(){return this.__shady_shadowRoot}}),Zt=St({get textContent(){return this.__shady_textContent},set textContent(e){this.__shady_textContent=e},get innerHTML(){return this.__shady_innerHTML},set innerHTML(e){this.__shady_innerHTML=e}}),en=St({get parentElement(){return this.__shady_parentElement},get parentNode(){return this.__shady_parentNode},get nextSibling(){return this.__shady_nextSibling},get previousSibling(){return this.__shady_previousSibling},get nextElementSibling(){return this.__shady_nextElementSibling},get previousElementSibling(){return this.__shady_previousElementSibling},get className(){return this.__shady_className},set className(e){this.__shady_className=e}});function tn(e){for(var t in e){var n=e[t];n&&(n.enumerable=!1)}}tn(Qt),tn(Zt),tn(en);var nn=rt.H||!0===rt.J,rn=nn?function(){}:function(e){var t=nt(e);t.Pa||(t.Pa=!0,xt(e,en))},sn=nn?function(){}:function(e){var t=nt(e);t.Oa||(t.Oa=!0,xt(e,Qt),window.customElements&&window.customElements.polyfillWrapFlushCallback&&!rt.J||xt(e,Zt))},on="__eventWrappers"+Date.now(),an=function(){var e=Object.getOwnPropertyDescriptor(Event.prototype,"composed");return e?function(t){return e.get.call(t)}:null}(),ln=function(){function e(){}var t=!1,n={get capture(){return t=!0,!1}};return window.addEventListener("test",e,n),window.removeEventListener("test",e,n),t}();function cn(e){if(e&&"object"==typeof e)var t=!!e.capture,n=!!e.once,i=!!e.passive,r=e.U;else t=!!e,i=n=!1;return{La:r,capture:t,once:n,passive:i,Ja:ln?e:t}}var un={blur:!0,focus:!0,focusin:!0,focusout:!0,click:!0,dblclick:!0,mousedown:!0,mouseenter:!0,mouseleave:!0,mousemove:!0,mouseout:!0,mouseover:!0,mouseup:!0,wheel:!0,beforeinput:!0,input:!0,keydown:!0,keyup:!0,compositionstart:!0,compositionupdate:!0,compositionend:!0,touchstart:!0,touchend:!0,touchmove:!0,touchcancel:!0,pointerover:!0,pointerenter:!0,pointerdown:!0,pointermove:!0,pointerup:!0,pointercancel:!0,pointerout:!0,pointerleave:!0,gotpointercapture:!0,lostpointercapture:!0,dragstart:!0,drag:!0,dragenter:!0,dragleave:!0,dragover:!0,drop:!0,dragend:!0,DOMActivate:!0,DOMFocusIn:!0,DOMFocusOut:!0,keypress:!0},hn={DOMAttrModified:!0,DOMAttributeNameChanged:!0,DOMCharacterDataModified:!0,DOMElementNameChanged:!0,DOMNodeInserted:!0,DOMNodeInsertedIntoDocument:!0,DOMNodeRemoved:!0,DOMNodeRemovedFromDocument:!0,DOMSubtreeModified:!0};function dn(e){return e instanceof Node?e.__shady_getRootNode():e}function pn(e,t){var n=[],i=e;for(e=dn(e);i;)n.push(i),i=i.__shady_assignedSlot?i.__shady_assignedSlot:i.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&i.host&&(t||i!==e)?i.host:i.__shady_parentNode;return n[n.length-1]===document&&n.push(window),n}function fn(e,t){if(!lt)return e;e=pn(e,!0);for(var n,i,r=0,s=void 0,o=void 0;r<t.length;r++)if((i=dn(n=t[r]))!==s&&(o=e.indexOf(i),s=i),!lt(i)||-1<o)return n}function mn(e){function t(t,n){return(t=new e(t,n)).__composed=n&&!!n.composed,t}return t.__proto__=e,t.prototype=e.prototype,t}var gn={focus:!0,blur:!0};function vn(e){return e.__target!==e.target||e.__relatedTarget!==e.relatedTarget}function yn(e,t,n){if(n=t.__handlers&&t.__handlers[e.type]&&t.__handlers[e.type][n])for(var i,r=0;(i=n[r])&&(!vn(e)||e.target!==e.relatedTarget)&&(i.call(t,e),!e.__immediatePropagationStopped);r++);}function bn(e){var t=e.composedPath(),n=t.map((function(e){return fn(e,t)})),i=e.bubbles;Object.defineProperty(e,"currentTarget",{configurable:!0,enumerable:!0,get:function(){return o}});var r=Event.CAPTURING_PHASE;Object.defineProperty(e,"eventPhase",{configurable:!0,enumerable:!0,get:function(){return r}});for(var s=t.length-1;0<=s;s--){var o=t[s];if(r=o===n[s]?Event.AT_TARGET:Event.CAPTURING_PHASE,yn(e,o,"capture"),e.ra)return}for(s=0;s<t.length;s++){var a=(o=t[s])===n[s];if((a||i)&&(r=a?Event.AT_TARGET:Event.BUBBLING_PHASE,yn(e,o,"bubble"),e.ra))return}r=0,o=null}function wn(e,t,n,i,r,s){for(var o=0;o<e.length;o++){var a=e[o],l=a.type,c=a.capture,u=a.once,h=a.passive;if(t===a.node&&n===l&&i===c&&r===u&&s===h)return o}return-1}function En(e){return At(),!rt.fa&&this instanceof Node&&!gt(document,this)?(e.__target||Tn(e,this),bn(e)):this.__shady_native_dispatchEvent(e)}function _n(e,t,n){var i=cn(n),r=i.capture,s=i.once,o=i.passive,a=i.La;if(i=i.Ja,t){var l=typeof t;if(("function"===l||"object"===l)&&("object"!==l||t.handleEvent&&"function"==typeof t.handleEvent)){if(hn[e])return this.__shady_native_addEventListener(e,t,i);var c=a||this;if(a=t[on]){if(-1<wn(a,c,e,r,s,o))return}else t[on]=[];a=function(i){if(s&&this.__shady_removeEventListener(e,t,n),i.__target||Tn(i),c!==this){var o=Object.getOwnPropertyDescriptor(i,"currentTarget");Object.defineProperty(i,"currentTarget",{get:function(){return c},configurable:!0});var a=Object.getOwnPropertyDescriptor(i,"eventPhase");Object.defineProperty(i,"eventPhase",{configurable:!0,enumerable:!0,get:function(){return r?Event.CAPTURING_PHASE:Event.BUBBLING_PHASE}})}if(i.__previousCurrentTarget=i.currentTarget,(!lt(c)&&"slot"!==c.localName||-1!=i.composedPath().indexOf(c))&&(i.composed||-1<i.composedPath().indexOf(c)))if(vn(i)&&i.target===i.relatedTarget)i.eventPhase===Event.BUBBLING_PHASE&&i.stopImmediatePropagation();else if(i.eventPhase===Event.CAPTURING_PHASE||i.bubbles||i.target===c||c instanceof Window){var u="function"===l?t.call(c,i):t.handleEvent&&t.handleEvent(i);return c!==this&&(o?(Object.defineProperty(i,"currentTarget",o),o=null):delete i.currentTarget,a?(Object.defineProperty(i,"eventPhase",a),a=null):delete i.eventPhase),u}},t[on].push({node:c,type:e,capture:r,once:s,passive:o,pb:a}),this.__handlers=this.__handlers||{},this.__handlers[e]=this.__handlers[e]||{capture:[],bubble:[]},this.__handlers[e][r?"capture":"bubble"].push(a),gn[e]||this.__shady_native_addEventListener(e,a,i)}}}function xn(e,t,n){if(t){var i=cn(n);n=i.capture;var r=i.once,s=i.passive,o=i.La;if(i=i.Ja,hn[e])return this.__shady_native_removeEventListener(e,t,i);var a=o||this;o=void 0;var l=null;try{l=t[on]}catch(e){}l&&-1<(r=wn(l,a,e,n,r,s))&&(o=l.splice(r,1)[0].pb,l.length||(t[on]=void 0)),this.__shady_native_removeEventListener(e,o||t,i),o&&this.__handlers&&this.__handlers[e]&&-1<(t=(e=this.__handlers[e][n?"capture":"bubble"]).indexOf(o))&&e.splice(t,1)}}var Sn=St({get composed(){return void 0===this.__composed&&(an?this.__composed="focusin"===this.type||"focusout"===this.type||an(this):!1!==this.isTrusted&&(this.__composed=un[this.type])),this.__composed||!1},composedPath:function(){return this.__composedPath||(this.__composedPath=pn(this.__target,this.composed)),this.__composedPath},get target(){return fn(this.currentTarget||this.__previousCurrentTarget,this.composedPath())},get relatedTarget(){return this.__relatedTarget?(this.__relatedTargetComposedPath||(this.__relatedTargetComposedPath=pn(this.__relatedTarget,!0)),fn(this.currentTarget||this.__previousCurrentTarget,this.__relatedTargetComposedPath)):null},stopPropagation:function(){Event.prototype.stopPropagation.call(this),this.ra=!0},stopImmediatePropagation:function(){Event.prototype.stopImmediatePropagation.call(this),this.ra=this.__immediatePropagationStopped=!0}});function Tn(e,t){if(t=void 0===t?e.target:t,e.__target=t,e.__relatedTarget=e.relatedTarget,rt.H){if(!(t=Object.getPrototypeOf(e)).hasOwnProperty("__shady_patchedProto")){var n=Object.create(t);n.__shady_sourceProto=t,_t(n,Sn),t.__shady_patchedProto=n}e.__proto__=t.__shady_patchedProto}else _t(e,Sn)}var kn=mn(Event),Cn=mn(CustomEvent),Pn=mn(MouseEvent),In=Object.getOwnPropertyNames(Element.prototype).filter((function(e){return"on"===e.substring(0,2)})),Ln=Object.getOwnPropertyNames(HTMLElement.prototype).filter((function(e){return"on"===e.substring(0,2)}));function An(e){return{set:function(t){var n=nt(this),i=e.substring(2);n.T||(n.T={}),n.T[e]&&this.removeEventListener(i,n.T[e]),this.__shady_addEventListener(i,t),n.T[e]=t},get:function(){var t=it(this);return t&&t.T&&t.T[e]},configurable:!0}}function Mn(e,t){return{index:e,ga:[],na:t}}function On(e,t,n,i){var r=0,s=0,o=0,a=0,l=Math.min(t-r,i-s);if(0==r&&0==s)e:{for(o=0;o<l;o++)if(e[o]!==n[o])break e;o=l}if(t==e.length&&i==n.length){a=e.length;for(var c=n.length,u=0;u<l-o&&Nn(e[--a],n[--c]);)u++;a=u}if(s+=o,i-=a,0==(t-=a)-(r+=o)&&0==i-s)return[];if(r==t){for(t=Mn(r,0);s<i;)t.ga.push(n[s++]);return[t]}if(s==i)return[Mn(r,t-r)];for(i=i-(o=s)+1,a=t-(l=r)+1,t=Array(i),c=0;c<i;c++)t[c]=Array(a),t[c][0]=c;for(c=0;c<a;c++)t[0][c]=c;for(c=1;c<i;c++)for(u=1;u<a;u++)if(e[l+u-1]===n[o+c-1])t[c][u]=t[c-1][u-1];else{var h=t[c-1][u]+1,d=t[c][u-1]+1;t[c][u]=h<d?h:d}for(l=t.length-1,o=t[0].length-1,i=t[l][o],e=[];0<l||0<o;)0==l?(e.push(2),o--):0==o?(e.push(3),l--):(a=t[l-1][o-1],(h=(c=t[l-1][o])<(u=t[l][o-1])?c<a?c:a:u<a?u:a)==a?(a==i?e.push(0):(e.push(1),i=a),l--,o--):h==c?(e.push(3),l--,i=c):(e.push(2),o--,i=u));for(e.reverse(),t=void 0,l=[],o=0;o<e.length;o++)switch(e[o]){case 0:t&&(l.push(t),t=void 0),r++,s++;break;case 1:t||(t=Mn(r,0)),t.na++,r++,t.ga.push(n[s]),s++;break;case 2:t||(t=Mn(r,0)),t.na++,r++;break;case 3:t||(t=Mn(r,0)),t.ga.push(n[s]),s++}return t&&l.push(t),l}function Nn(e,t){return e===t}var Dn=St({dispatchEvent:En,addEventListener:_n,removeEventListener:xn}),Rn=null;function jn(){return Rn||(Rn=window.ShadyCSS&&window.ShadyCSS.ScopingShim),Rn||null}function Bn(e,t,n){var i=jn();return!(!i||"class"!==t||(i.setElementClass(e,n),0))}function Un(e,t){var n=jn();n&&n.unscopeNode(e,t)}function $n(e,t){var n=jn();if(!n)return!0;if(e.nodeType===Node.DOCUMENT_FRAGMENT_NODE){for(n=!0,e=e.__shady_firstChild;e;e=e.__shady_nextSibling)n=n&&$n(e,t);return n}return e.nodeType!==Node.ELEMENT_NODE||n.currentScopeForNode(e)===t}function Fn(e){if(e.nodeType!==Node.ELEMENT_NODE)return"";var t=jn();return t?t.currentScopeForNode(e):""}function Hn(e,t){if(e)for(e.nodeType===Node.ELEMENT_NODE&&t(e),e=e.__shady_firstChild;e;e=e.__shady_nextSibling)e.nodeType===Node.ELEMENT_NODE&&Hn(e,t)}var qn=window.document,Vn=rt.fa,zn=Object.getOwnPropertyDescriptor(Node.prototype,"isConnected"),Gn=zn&&zn.get;function Kn(e){for(var t;t=e.__shady_firstChild;)e.__shady_removeChild(t)}function Wn(e){var t=it(e);if(t&&void 0!==t.qa)for(t=e.__shady_firstChild;t;t=t.__shady_nextSibling)Wn(t);(e=it(e))&&(e.qa=void 0)}function Xn(e){var t=e;if(e&&"slot"===e.localName){var n=it(e);(n=n&&n.aa)&&(t=n.length?n[0]:Xn(e.__shady_nextSibling))}return t}function Jn(e,t,n){if(e=(e=it(e))&&e.ea){if(t)if(t.nodeType===Node.DOCUMENT_FRAGMENT_NODE)for(var i=0,r=t.childNodes.length;i<r;i++)e.addedNodes.push(t.childNodes[i]);else e.addedNodes.push(t);n&&e.removedNodes.push(n),function(e){e.g||(e.g=!0,mt((function(){e.flush()})))}(e)}}var Yn=St({get parentNode(){var e=it(this);return void 0!==(e=e&&e.parentNode)?e:this.__shady_native_parentNode},get firstChild(){var e=it(this);return void 0!==(e=e&&e.firstChild)?e:this.__shady_native_firstChild},get lastChild(){var e=it(this);return void 0!==(e=e&&e.lastChild)?e:this.__shady_native_lastChild},get nextSibling(){var e=it(this);return void 0!==(e=e&&e.nextSibling)?e:this.__shady_native_nextSibling},get previousSibling(){var e=it(this);return void 0!==(e=e&&e.previousSibling)?e:this.__shady_native_previousSibling},get childNodes(){if(at(this)){var e=it(this);if(!e.childNodes){e.childNodes=[];for(var t=this.__shady_firstChild;t;t=t.__shady_nextSibling)e.childNodes.push(t)}var n=e.childNodes}else n=this.__shady_native_childNodes;return n.item=function(e){return n[e]},n},get parentElement(){var e=it(this);return(e=e&&e.parentNode)&&e.nodeType!==Node.ELEMENT_NODE&&(e=null),void 0!==e?e:this.__shady_native_parentElement},get isConnected(){if(Gn&&Gn.call(this))return!0;if(this.nodeType==Node.DOCUMENT_FRAGMENT_NODE)return!1;var e=this.ownerDocument;if(null===e||gt(e,this))return!0;for(e=this;e&&!(e instanceof Document);)e=e.__shady_parentNode||(lt(e)?e.host:void 0);return!!(e&&e instanceof Document)},get textContent(){if(at(this)){for(var e=[],t=this.__shady_firstChild;t;t=t.__shady_nextSibling)t.nodeType!==Node.COMMENT_NODE&&e.push(t.__shady_textContent);return e.join("")}return this.__shady_native_textContent},set textContent(e){switch(null==e&&(e=""),this.nodeType){case Node.ELEMENT_NODE:case Node.DOCUMENT_FRAGMENT_NODE:if(!at(this)&&rt.H){var t=this.__shady_firstChild;(t!=this.__shady_lastChild||t&&t.nodeType!=Node.TEXT_NODE)&&Kn(this),this.__shady_native_textContent=e}else Kn(this),(0<e.length||this.nodeType===Node.ELEMENT_NODE)&&this.__shady_insertBefore(document.createTextNode(e));break;default:this.nodeValue=e}},insertBefore:function(e,t){if(this.ownerDocument!==qn&&e.ownerDocument!==qn)return this.__shady_native_insertBefore(e,t),e;if(e===this)throw Error("Failed to execute 'appendChild' on 'Node': The new child element contains the parent.");if(t){var n=it(t);if(void 0!==(n=n&&n.parentNode)&&n!==this||void 0===n&&t.__shady_native_parentNode!==this)throw Error("Failed to execute 'insertBefore' on 'Node': The node before which the new node is to be inserted is not a child of this node.")}if(t===e)return e;Jn(this,e);var i=[],r=(n=Zi(this))?n.host.localName:Fn(this),s=e.__shady_parentNode;if(s){var o=Fn(e),a=!!n||!Zi(e)||Vn&&void 0!==this.__noInsertionPoint;s.__shady_removeChild(e,a)}s=!0;var l=(!Vn||void 0===e.__noInsertionPoint&&void 0===this.__noInsertionPoint)&&!$n(e,r),u=n&&!e.__noInsertionPoint&&(!Vn||e.nodeType===Node.DOCUMENT_FRAGMENT_NODE);return(u||l)&&(l&&(o=o||Fn(e)),Hn(e,(function(e){if(u&&"slot"===e.localName&&i.push(e),l){var t=o;jn()&&(t&&Un(e,t),(t=jn())&&t.scopeNode(e,r))}}))),i.length&&(zi(n),n.i.push.apply(n.i,c(i)),$i(n)),at(this)&&(function(e,t,n){Ii(t,2);var i=nt(t);if(void 0!==i.firstChild&&(i.childNodes=null),e.nodeType===Node.DOCUMENT_FRAGMENT_NODE)for(e=e.__shady_native_firstChild;e;e=e.__shady_native_nextSibling)Li(e,t,i,n);else Li(e,t,i,n)}(e,this,t),(a=it(this)).root?(s=!1,ct(this)&&$i(a.root)):n&&"slot"===this.localName&&(s=!1,$i(n))),s?(n=lt(this)?this.host:this,t?(t=Xn(t),n.__shady_native_insertBefore(e,t)):n.__shady_native_appendChild(e)):e.ownerDocument!==this.ownerDocument&&this.ownerDocument.adoptNode(e),e},appendChild:function(e){if(this!=e||!lt(e))return this.__shady_insertBefore(e)},removeChild:function(e,t){if(t=void 0!==t&&t,this.ownerDocument!==qn)return this.__shady_native_removeChild(e);if(e.__shady_parentNode!==this)throw Error("The node to be removed is not a child of this node: "+e);Jn(this,null,e);var n=Zi(e),i=n&&function(e,t){if(e.g){Gi(e);var n,i=e.h;for(n in i)for(var r=i[n],s=0;s<r.length;s++){var o=r[s];if(vt(t,o)){r.splice(s,1);var a=e.g.indexOf(o);if(0<=a&&(e.g.splice(a,1),(a=it(o.__shady_parentNode))&&a.ia&&a.ia--),s--,a=(o=it(o)).aa)for(var l=0;l<a.length;l++){var c=a[l],u=c.__shady_native_parentNode;u&&u.__shady_native_removeChild(c)}o.aa=[],o.assignedNodes=[],a=!0}}return a}}(n,e),r=it(this);if(at(this)&&(function(e,t){var n=nt(e);e===(t=nt(t)).firstChild&&(t.firstChild=n.nextSibling),e===t.lastChild&&(t.lastChild=n.previousSibling),e=n.previousSibling;var i=n.nextSibling;e&&(nt(e).nextSibling=i),i&&(nt(i).previousSibling=e),n.parentNode=n.previousSibling=n.nextSibling=void 0,void 0!==t.childNodes&&(t.childNodes=null)}(e,this),ct(this))){$i(r.root);var s=!0}if(jn()&&!t&&n&&e.nodeType!==Node.TEXT_NODE){var o=Fn(e);Hn(e,(function(e){Un(e,o)}))}return Wn(e),n&&((t="slot"===this.localName)&&(s=!0),(i||t)&&$i(n)),s||(s=lt(this)?this.host:this,(!r.root&&"slot"!==e.localName||s===e.__shady_native_parentNode)&&s.__shady_native_removeChild(e)),e},replaceChild:function(e,t){return this.__shady_insertBefore(e,t),this.__shady_removeChild(t),e},cloneNode:function(e){if("template"==this.localName)return this.__shady_native_cloneNode(e);var t=this.__shady_native_cloneNode(!1);if(e&&t.nodeType!==Node.ATTRIBUTE_NODE){e=this.__shady_firstChild;for(var n;e;e=e.__shady_nextSibling)n=e.__shady_cloneNode(!0),t.__shady_appendChild(n)}return t},getRootNode:function(e){if(this&&this.nodeType){var t=nt(this),n=t.qa;return void 0===n&&(lt(this)?(n=this,t.qa=n):(n=(n=this.__shady_parentNode)?n.__shady_getRootNode(e):this,document.documentElement.__shady_native_contains(this)&&(t.qa=n))),n}},contains:function(e){return vt(this,e)}}),Qn=St({get assignedSlot(){var e=this.__shady_parentNode;return(e=e&&e.__shady_shadowRoot)&&Fi(e),(e=it(this))&&e.assignedSlot||null}});function Zn(e,t,n){var i=[];return ei(e,t,n,i),i}function ei(e,t,n,i){for(e=e.__shady_firstChild;e;e=e.__shady_nextSibling){var r;if(r=e.nodeType===Node.ELEMENT_NODE){var s=t,o=n,a=i,l=s(r=e);l&&a.push(r),o&&o(l)?r=l:(ei(r,s,o,a),r=void 0)}if(r)break}}var ti={get firstElementChild(){var e=it(this);if(e&&void 0!==e.firstChild){for(e=this.__shady_firstChild;e&&e.nodeType!==Node.ELEMENT_NODE;)e=e.__shady_nextSibling;return e}return this.__shady_native_firstElementChild},get lastElementChild(){var e=it(this);if(e&&void 0!==e.lastChild){for(e=this.__shady_lastChild;e&&e.nodeType!==Node.ELEMENT_NODE;)e=e.__shady_previousSibling;return e}return this.__shady_native_lastElementChild},get children(){return at(this)?yt(Array.prototype.filter.call(wt(this),(function(e){return e.nodeType===Node.ELEMENT_NODE}))):this.__shady_native_children},get childElementCount(){var e=this.__shady_children;return e?e.length:0}},ni=St((ti.append=function(e){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];this.__shady_insertBefore(Ct.apply(null,c(t)),null)},ti.prepend=function(e){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];this.__shady_insertBefore(Ct.apply(null,c(t)),this.__shady_firstChild)},ti.replaceChildren=function(e){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];for(;null!==(n=this.__shady_firstChild);)this.__shady_removeChild(n);this.__shady_insertBefore(Ct.apply(null,c(t)),null)},ti)),ii=St({querySelector:function(e){return Zn(this,(function(t){return ht.call(t,e)}),(function(e){return!!e}))[0]||null},querySelectorAll:function(e,t){if(t){t=Array.prototype.slice.call(this.__shady_native_querySelectorAll(e));var n=this.__shady_getRootNode();return yt(t.filter((function(e){return e.__shady_getRootNode()==n})))}return yt(Zn(this,(function(t){return ht.call(t,e)})))}}),ri=rt.fa&&!rt.J?Tt({},ni):ni;Tt(ni,ii);var si=St({after:function(e){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];if(null!==(n=this.__shady_parentNode)){var i=this.__shady_nextSibling;n.__shady_insertBefore(Ct.apply(null,c(t)),i)}},before:function(e){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];null!==(n=this.__shady_parentNode)&&n.__shady_insertBefore(Ct.apply(null,c(t)),this)},remove:function(){var e=this.__shady_parentNode;null!==e&&e.__shady_removeChild(this)},replaceWith:function(e){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];if(null!==(n=this.__shady_parentNode)){var i=this.__shady_nextSibling;n.__shady_removeChild(this),n.__shady_insertBefore(Ct.apply(null,c(t)),i)}}}),oi=window.document;function ai(e,t){if("slot"===t)ct(e=e.__shady_parentNode)&&$i(it(e).root);else if("slot"===e.localName&&"name"===t&&(t=Zi(e))){if(t.g){Gi(t);var n=e.Qa,i=Ki(e);if(i!==n){var r=(n=t.h[n]).indexOf(e);0<=r&&n.splice(r,1),(n=t.h[i]||(t.h[i]=[])).push(e),1<n.length&&(t.h[i]=Wi(n))}}$i(t)}}var li=St({get previousElementSibling(){var e=it(this);if(e&&void 0!==e.previousSibling){for(e=this.__shady_previousSibling;e&&e.nodeType!==Node.ELEMENT_NODE;)e=e.__shady_previousSibling;return e}return this.__shady_native_previousElementSibling},get nextElementSibling(){var e=it(this);if(e&&void 0!==e.nextSibling){for(e=this.__shady_nextSibling;e&&e.nodeType!==Node.ELEMENT_NODE;)e=e.__shady_nextSibling;return e}return this.__shady_native_nextElementSibling},get slot(){return this.getAttribute("slot")},set slot(e){this.__shady_setAttribute("slot",e)},get className(){return this.getAttribute("class")||""},set className(e){this.__shady_setAttribute("class",e)},setAttribute:function(e,t){this.ownerDocument!==oi?this.__shady_native_setAttribute(e,t):Bn(this,e,t)||(this.__shady_native_setAttribute(e,t),ai(this,e))},removeAttribute:function(e){this.ownerDocument!==oi?this.__shady_native_removeAttribute(e):Bn(this,e,"")?""===this.getAttribute(e)&&this.__shady_native_removeAttribute(e):(this.__shady_native_removeAttribute(e),ai(this,e))}});rt.fa||In.forEach((function(e){li[e]=An(e)}));var ci=St({attachShadow:function(e){if(!this)throw Error("Must provide a host.");if(!e)throw Error("Not enough arguments.");if(e.shadyUpgradeFragment&&!rt.Na){var t=e.shadyUpgradeFragment;if(t.__proto__=ShadowRoot.prototype,Ui(t,this,e),Ai(t,t),e=t.__noInsertionPoint?null:t.querySelectorAll("slot"),t.__noInsertionPoint=void 0,e&&e.length){var n=t;zi(n),n.i.push.apply(n.i,c(e)),$i(t)}t.host.__shady_native_appendChild(t)}else t=new Bi(Di,this,e);return this.__CE_shadowRoot=t},get shadowRoot(){var e=it(this);return e&&e.gb||null}});Tt(li,ci);var ui=document.implementation.createHTMLDocument("inert"),hi=St({get innerHTML(){return at(this)?Ut("template"===this.localName?this.content:this,wt):this.__shady_native_innerHTML},set innerHTML(e){if("template"===this.localName)this.__shady_native_innerHTML=e;else{Kn(this);var t=this.localName||"div";for(t=this.namespaceURI&&this.namespaceURI!==ui.namespaceURI?ui.createElementNS(this.namespaceURI,t):ui.createElement(t),rt.H?t.__shady_native_innerHTML=e:t.innerHTML=e;e=t.__shady_firstChild;)this.__shady_insertBefore(e)}}}),di=St({blur:function(){var e=it(this);(e=(e=e&&e.root)&&e.activeElement)?e.__shady_blur():this.__shady_native_blur()}});rt.fa||Ln.forEach((function(e){di[e]=An(e)}));var pi=St({assignedNodes:function(e){if("slot"===this.localName){var t=this.__shady_getRootNode();return t&&lt(t)&&Fi(t),(t=it(this))&&(e&&e.flatten?t.aa:t.assignedNodes)||[]}},addEventListener:function(e,t,n){if("slot"!==this.localName||"slotchange"===e)_n.call(this,e,t,n);else{"object"!=typeof n&&(n={capture:!!n});var i=this.__shady_parentNode;if(!i)throw Error("ShadyDOM cannot attach event to slot unless it has a `parentNode`");n.U=this,i.__shady_addEventListener(e,t,n)}},removeEventListener:function(e,t,n){if("slot"!==this.localName||"slotchange"===e)xn.call(this,e,t,n);else{"object"!=typeof n&&(n={capture:!!n});var i=this.__shady_parentNode;if(!i)throw Error("ShadyDOM cannot attach event to slot unless it has a `parentNode`");n.U=this,i.__shady_removeEventListener(e,t,n)}}}),fi=St({getElementById:function(e){return""===e?null:Zn(this,(function(t){return t.id==e}),(function(e){return!!e}))[0]||null}});function mi(e,t){for(var n;t&&!e.has(n=t.__shady_getRootNode());)t=n.host;return t}var gi="__shady_native_"+ot(),vi=St({get activeElement(){var e=rt.H?document.__shady_native_activeElement:document.activeElement;if(!e||!e.nodeType)return null;var t=!!lt(this);if(!(this===document||t&&this.host!==e&&this.host.__shady_native_contains(e)))return null;for(t=Zi(e);t&&t!==this;)t=Zi(e=t.host);return this===document?t?null:e:t===this?e:null},elementsFromPoint:function(e,t){e=[].slice.call(document[gi](e,t)),t=function(e){var t=new Set;for(t.add(e);lt(e)&&e.host;)e=e.host.__shady_getRootNode(),t.add(e);return t}(this);for(var n=new Set,i=0;i<e.length;i++)n.add(mi(t,e[i]));var r=[];return n.forEach((function(e){return r.push(e)})),r},elementFromPoint:function(e,t){return this.__shady_elementsFromPoint(e,t)[0]||null}}),yi=window.document,bi=St({importNode:function(e,t){if(e.ownerDocument!==yi||"template"===e.localName)return this.__shady_native_importNode(e,t);var n=this.__shady_native_importNode(e,!1);if(t)for(e=e.__shady_firstChild;e;e=e.__shady_nextSibling)t=this.__shady_importNode(e,!0),n.__shady_appendChild(t);return n}}),wi=St({dispatchEvent:En,addEventListener:_n.bind(window),removeEventListener:xn.bind(window)}),Ei={};Object.getOwnPropertyDescriptor(HTMLElement.prototype,"parentElement")&&(Ei.parentElement=Yn.parentElement),Object.getOwnPropertyDescriptor(HTMLElement.prototype,"contains")&&(Ei.contains=Yn.contains),Object.getOwnPropertyDescriptor(HTMLElement.prototype,"children")&&(Ei.children=ni.children),Object.getOwnPropertyDescriptor(HTMLElement.prototype,"innerHTML")&&(Ei.innerHTML=hi.innerHTML),Object.getOwnPropertyDescriptor(HTMLElement.prototype,"className")&&(Ei.className=li.className);var _i={EventTarget:[Dn],Node:[Yn,window.EventTarget?null:Dn],Text:[Qn],Comment:[Qn],CDATASection:[Qn],ProcessingInstruction:[Qn],Element:[li,ni,si,Qn,!rt.H||"innerHTML"in Element.prototype?hi:null,window.HTMLSlotElement?null:pi],HTMLElement:[di,Ei],HTMLSlotElement:[pi],DocumentFragment:[ri,fi],Document:[bi,ri,fi,vi],Window:[wi],CharacterData:[si]},xi=rt.H?null:["innerHTML","textContent"];function Si(e,t,n,i){t.forEach((function(t){return e&&t&&_t(e,t,n,i)}))}function Ti(e){var t,n=e?null:xi;for(t in _i)Si(window[t]&&window[t].prototype,_i[t],e,n)}function ki(e){return e.__shady_protoIsPatched=!0,Si(e,_i.EventTarget),Si(e,_i.Node),Si(e,_i.Element),Si(e,_i.HTMLElement),Si(e,_i.HTMLSlotElement),e}["Text","Comment","CDATASection","ProcessingInstruction"].forEach((function(e){var t=window[e],n=Object.create(t.prototype);n.__shady_protoIsPatched=!0,Si(n,_i.EventTarget),Si(n,_i.Node),_i[e]&&Si(n,_i[e]),t.prototype.__shady_patchedProto=n}));var Ci=rt.Aa,Pi=rt.H;function Ii(e,t){if(Ci&&!e.__shady_protoIsPatched&&!lt(e)){var n=Object.getPrototypeOf(e),i=n.hasOwnProperty("__shady_patchedProto")&&n.__shady_patchedProto;i||(ki(i=Object.create(n)),n.__shady_patchedProto=i),Object.setPrototypeOf(e,i)}Pi||(1===t?rn(e):2===t&&sn(e))}function Li(e,t,n,i){Ii(e,1),i=i||null;var r=nt(e),s=i?nt(i):null;r.previousSibling=i?s.previousSibling:t.__shady_lastChild,(s=it(r.previousSibling))&&(s.nextSibling=e),(s=it(r.nextSibling=i))&&(s.previousSibling=e),r.parentNode=t,i?i===n.firstChild&&(n.firstChild=e):(n.lastChild=e,n.firstChild||(n.firstChild=e)),n.childNodes=null}function Ai(e,t){var n=nt(e);if(t||void 0===n.firstChild){n.childNodes=null;var i=n.firstChild=e.__shady_native_firstChild;for(n.lastChild=e.__shady_native_lastChild,Ii(e,2),n=i,i=void 0;n;n=n.__shady_native_nextSibling){var r=nt(n);r.parentNode=t||e,r.nextSibling=n.__shady_native_nextSibling,r.previousSibling=i||null,i=n,Ii(n,1)}}}var Mi=St({addEventListener:function(e,t,n){"object"!=typeof n&&(n={capture:!!n}),n.U=n.U||this,this.host.__shady_addEventListener(e,t,n)},removeEventListener:function(e,t,n){"object"!=typeof n&&(n={capture:!!n}),n.U=n.U||this,this.host.__shady_removeEventListener(e,t,n)}});function Oi(e,t){_t(e,Mi,t),_t(e,vi,t),_t(e,hi,t),_t(e,ni,t),rt.J&&!t?(_t(e,Yn,t),_t(e,fi,t)):rt.H||(_t(e,en),_t(e,Qt),_t(e,Zt))}var Ni,Di={},Ri=rt.deferConnectionCallbacks&&"loading"===document.readyState;function ji(e){var t=[];do{t.unshift(e)}while(e=e.__shady_parentNode);return t}function Bi(e,t,n){if(e!==Di)throw new TypeError("Illegal constructor");this.g=null,Ui(this,t,n)}function Ui(e,t,n){if(e.host=t,e.mode=n&&n.mode,Ai(e.host),(t=nt(e.host)).root=e,t.gb="closed"!==e.mode?e:null,(t=nt(e)).firstChild=t.lastChild=t.parentNode=t.nextSibling=t.previousSibling=null,rt.preferPerformance)for(;t=e.host.__shady_native_firstChild;)e.host.__shady_native_removeChild(t);else $i(e)}function $i(e){e.Y||(e.Y=!0,Lt((function(){return Fi(e)})))}function Fi(e){var t;if(t=e.Y){for(var n;e;)e.Y&&(n=e),lt(e=(t=e).host.__shady_getRootNode())&&(t=it(t.host))&&0<t.ia||(e=void 0);t=n}(n=t)&&n._renderSelf()}function Hi(e,t,n){var i=nt(t),r=i.ua;i.ua=null,n||(n=(e=e.h[t.__shady_slot||"__catchall"])&&e[0]),n?(nt(n).assignedNodes.push(t),i.assignedSlot=n):i.assignedSlot=void 0,r!==i.assignedSlot&&i.assignedSlot&&(nt(i.assignedSlot).xa=!0)}function qi(e,t,n){for(var i=0,r=void 0;i<n.length&&(r=n[i]);i++)if("slot"==r.localName){var s=it(r).assignedNodes;s&&s.length&&qi(e,t,s)}else t.push(n[i])}function Vi(e,t){t.__shady_native_dispatchEvent(new Event("slotchange")),(t=it(t)).assignedSlot&&Vi(e,t.assignedSlot)}function zi(e){e.i=e.i||[],e.g=e.g||[],e.h=e.h||{}}function Gi(e){if(e.i&&e.i.length){for(var t,n=e.i,i=0;i<n.length;i++){var r=n[i];Ai(r);var s=r.__shady_parentNode;Ai(s),(s=it(s)).ia=(s.ia||0)+1,s=Ki(r),e.h[s]?((t=t||{})[s]=!0,e.h[s].push(r)):e.h[s]=[r],e.g.push(r)}if(t)for(var o in t)e.h[o]=Wi(e.h[o]);e.i=[]}}function Ki(e){var t=e.name||e.getAttribute("name")||"__catchall";return e.Qa=t}function Wi(e){return e.sort((function(e,t){e=ji(e);for(var n=ji(t),i=0;i<e.length;i++){t=e[i];var r=n[i];if(t!==r)return(e=wt(t.__shady_parentNode)).indexOf(t)-e.indexOf(r)}}))}function Xi(e){return Gi(e),!(!e.g||!e.g.length)}if(Bi.prototype._renderSelf=function(){var e=Ri;if(Ri=!0,this.Y=!1,this.g){Gi(this);for(var t,n=0;n<this.g.length;n++){var i=it(t=this.g[n]),r=i.assignedNodes;if(i.assignedNodes=[],i.aa=[],i.Ga=r)for(i=0;i<r.length;i++){var s=it(r[i]);s.ua=s.assignedSlot,s.assignedSlot===t&&(s.assignedSlot=null)}}for(n=this.host.__shady_firstChild;n;n=n.__shady_nextSibling)Hi(this,n);for(n=0;n<this.g.length;n++){if(!(r=it(t=this.g[n])).assignedNodes.length)for(i=t.__shady_firstChild;i;i=i.__shady_nextSibling)Hi(this,i,t);if((i=(i=it(t.__shady_parentNode))&&i.root)&&(Xi(i)||i.Y)&&i._renderSelf(),qi(this,r.aa,r.assignedNodes),i=r.Ga){for(s=0;s<i.length;s++)it(i[s]).ua=null;r.Ga=null,i.length>r.assignedNodes.length&&(r.xa=!0)}r.xa&&(r.xa=!1,Vi(this,t))}for(t=this.g,n=[],r=0;r<t.length;r++)(s=it(i=t[r].__shady_parentNode))&&s.root||!(0>n.indexOf(i))||n.push(i);for(t=0;t<n.length;t++){for(r=(s=n[t])===this?this.host:s,i=[],s=s.__shady_firstChild;s;s=s.__shady_nextSibling)if("slot"==s.localName)for(var o=it(s).aa,a=0;a<o.length;a++)i.push(o[a]);else i.push(s);s=bt(r),o=On(i,i.length,s,s.length);for(var l=a=0,c=void 0;a<o.length&&(c=o[a]);a++){for(var u=0,h=void 0;u<c.ga.length&&(h=c.ga[u]);u++)h.__shady_native_parentNode===r&&r.__shady_native_removeChild(h),s.splice(c.index+l,1);l-=c.na}for(l=0,c=void 0;l<o.length&&(c=o[l]);l++)for(a=s[c.index],u=c.index;u<c.index+c.na;u++)h=i[u],r.__shady_native_insertBefore(h,a),s.splice(u,0,h)}}if(!rt.preferPerformance&&!this.Fa)for(n=this.host.__shady_firstChild;n;n=n.__shady_nextSibling)t=it(n),n.__shady_native_parentNode!==this.host||"slot"!==n.localName&&t.assignedSlot||this.host.__shady_native_removeChild(n);this.Fa=!0,Ri=e,Ni&&Ni()},function(e){e.__proto__=DocumentFragment.prototype,Oi(e,"__shady_"),Oi(e),Object.defineProperties(e,{nodeType:{value:Node.DOCUMENT_FRAGMENT_NODE,configurable:!0},nodeName:{value:"#document-fragment",configurable:!0},nodeValue:{value:null,configurable:!0}}),["localName","namespaceURI","prefix"].forEach((function(t){Object.defineProperty(e,t,{value:void 0,configurable:!0})})),["ownerDocument","baseURI","isConnected"].forEach((function(t){Object.defineProperty(e,t,{get:function(){return this.host[t]},configurable:!0})}))}(Bi.prototype),window.customElements&&window.customElements.define&&rt.ya&&!rt.preferPerformance){var Ji=new Map;Ni=function(){var e=[];Ji.forEach((function(t,n){e.push([n,t])})),Ji.clear();for(var t=0;t<e.length;t++){var n=e[t][0];e[t][1]?n.__shadydom_connectedCallback():n.__shadydom_disconnectedCallback()}},Ri&&document.addEventListener("readystatechange",(function(){Ri=!1,Ni()}),{once:!0});var Yi=window.customElements.define,Qi=function(e,t){var n=t.prototype.connectedCallback,i=t.prototype.disconnectedCallback;Yi.call(window.customElements,e,function(e,t,n){var i=0,r="__isConnected"+i++;return(t||n)&&(e.prototype.connectedCallback=e.prototype.__shadydom_connectedCallback=function(){Ri?Ji.set(this,!0):this[r]||(this[r]=!0,t&&t.call(this))},e.prototype.disconnectedCallback=e.prototype.__shadydom_disconnectedCallback=function(){Ri?this.isConnected||Ji.set(this,!1):this[r]&&(this[r]=!1,n&&n.call(this))}),e}(t,n,i)),t.prototype.connectedCallback=n,t.prototype.disconnectedCallback=i};window.customElements.define=Qi,Object.defineProperty(window.CustomElementRegistry.prototype,"define",{value:Qi,configurable:!0})}function Zi(e){if(lt(e=e.__shady_getRootNode()))return e}function er(e){this.node=e}function tr(e){Object.defineProperty(er.prototype,e,{get:function(){return this.node["__shady_"+e]},set:function(t){this.node["__shady_"+e]=t},configurable:!0})}(e=er.prototype).addEventListener=function(e,t,n){return this.node.__shady_addEventListener(e,t,n)},e.removeEventListener=function(e,t,n){return this.node.__shady_removeEventListener(e,t,n)},e.appendChild=function(e){return this.node.__shady_appendChild(e)},e.insertBefore=function(e,t){return this.node.__shady_insertBefore(e,t)},e.removeChild=function(e){return this.node.__shady_removeChild(e)},e.replaceChild=function(e,t){return this.node.__shady_replaceChild(e,t)},e.cloneNode=function(e){return this.node.__shady_cloneNode(e)},e.getRootNode=function(e){return this.node.__shady_getRootNode(e)},e.contains=function(e){return this.node.__shady_contains(e)},e.dispatchEvent=function(e){return this.node.__shady_dispatchEvent(e)},e.setAttribute=function(e,t){this.node.__shady_setAttribute(e,t)},e.getAttribute=function(e){return this.node.__shady_native_getAttribute(e)},e.hasAttribute=function(e){return this.node.__shady_native_hasAttribute(e)},e.removeAttribute=function(e){this.node.__shady_removeAttribute(e)},e.attachShadow=function(e){return this.node.__shady_attachShadow(e)},e.focus=function(){this.node.__shady_native_focus()},e.blur=function(){this.node.__shady_blur()},e.importNode=function(e,t){if(this.node.nodeType===Node.DOCUMENT_NODE)return this.node.__shady_importNode(e,t)},e.getElementById=function(e){if(this.node.nodeType===Node.DOCUMENT_NODE)return this.node.__shady_getElementById(e)},e.elementsFromPoint=function(e,t){return this.node.__shady_elementsFromPoint(e,t)},e.elementFromPoint=function(e,t){return this.node.__shady_elementFromPoint(e,t)},e.querySelector=function(e){return this.node.__shady_querySelector(e)},e.querySelectorAll=function(e,t){return this.node.__shady_querySelectorAll(e,t)},e.assignedNodes=function(e){if("slot"===this.node.localName)return this.node.__shady_assignedNodes(e)},e.append=function(e){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];return this.node.__shady_append.apply(this.node,c(t))},e.prepend=function(e){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];return this.node.__shady_prepend.apply(this.node,c(t))},e.after=function(e){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];return this.node.__shady_after.apply(this.node,c(t))},e.before=function(e){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];return this.node.__shady_before.apply(this.node,c(t))},e.remove=function(){return this.node.__shady_remove()},e.replaceWith=function(e){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];return this.node.__shady_replaceWith.apply(this.node,c(t))},s.Object.defineProperties(er.prototype,{activeElement:{configurable:!0,enumerable:!0,get:function(){if(lt(this.node)||this.node.nodeType===Node.DOCUMENT_NODE)return this.node.__shady_activeElement}},_activeElement:{configurable:!0,enumerable:!0,get:function(){return this.activeElement}},host:{configurable:!0,enumerable:!0,get:function(){if(lt(this.node))return this.node.host}},parentNode:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_parentNode}},firstChild:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_firstChild}},lastChild:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_lastChild}},nextSibling:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_nextSibling}},previousSibling:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_previousSibling}},childNodes:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_childNodes}},parentElement:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_parentElement}},firstElementChild:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_firstElementChild}},lastElementChild:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_lastElementChild}},nextElementSibling:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_nextElementSibling}},previousElementSibling:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_previousElementSibling}},children:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_children}},childElementCount:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_childElementCount}},shadowRoot:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_shadowRoot}},assignedSlot:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_assignedSlot}},isConnected:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_isConnected}},innerHTML:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_innerHTML},set:function(e){this.node.__shady_innerHTML=e}},textContent:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_textContent},set:function(e){this.node.__shady_textContent=e}},slot:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_slot},set:function(e){this.node.__shady_slot=e}},className:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_className},set:function(e){this.node.__shady_className=e}}}),In.forEach((function(e){return tr(e)})),Ln.forEach((function(e){return tr(e)}));var nr=new WeakMap;function ir(e){if(lt(e)||e instanceof er)return e;var t=nr.get(e);return t||(t=new er(e),nr.set(e,t)),t}if(rt.ya){var rr=rt.H?function(e){return e}:function(e){return sn(e),rn(e),e},sr={inUse:rt.ya,patch:rr,isShadyRoot:lt,enqueue:Lt,flush:At,flushInitial:function(e){!e.Fa&&e.Y&&Fi(e)},settings:rt,filterMutations:function(e,t){var n=t.getRootNode();return e.map((function(e){var t=n===e.target.getRootNode();if(t&&e.addedNodes){if(t=[].slice.call(e.addedNodes).filter((function(e){return n===e.getRootNode()})),t.length)return e=Object.create(e),Object.defineProperty(e,"addedNodes",{value:t,configurable:!0}),e}else if(t)return e})).filter((function(e){return e}))},observeChildren:function(e,t){var n=nt(e);n.ea||(n.ea=new Mt),n.ea.oa.add(t);var i=n.ea;return{Ra:t,X:i,Sa:e,takeRecords:function(){return i.takeRecords()}}},unobserveChildren:function(e){var t=e&&e.X;t&&(t.oa.delete(e.Ra),t.oa.size||(nt(e.Sa).ea=null))},deferConnectionCallbacks:rt.deferConnectionCallbacks,preferPerformance:rt.preferPerformance,handlesDynamicScoping:!0,wrap:rt.J?ir:rr,wrapIfNeeded:!0===rt.J?ir:function(e){return e},Wrapper:er,composedPath:function(e){return e.__composedPath||(e.__composedPath=pn(e.target,!0)),e.__composedPath},noPatch:rt.J,patchOnDemand:rt.Aa,nativeMethods:Ft,nativeTree:Ht,patchElementProto:ki};window.ShadyDOM=sr,function(){var e=["dispatchEvent","addEventListener","removeEventListener"];window.EventTarget?(zt(window.EventTarget.prototype,e),void 0===window.__shady_native_addEventListener&&zt(Window.prototype,e)):(zt(Node.prototype,e),zt(Window.prototype,e)),$t?zt(Node.prototype,"parentNode firstChild lastChild previousSibling nextSibling childNodes parentElement textContent".split(" ")):Vt(Node.prototype,{parentNode:{get:function(){return Gt.currentNode=this,Gt.parentNode()}},firstChild:{get:function(){return Gt.currentNode=this,Gt.firstChild()}},lastChild:{get:function(){return Gt.currentNode=this,Gt.lastChild()}},previousSibling:{get:function(){return Gt.currentNode=this,Gt.previousSibling()}},nextSibling:{get:function(){return Gt.currentNode=this,Gt.nextSibling()}},childNodes:{get:function(){var e=[];Gt.currentNode=this;for(var t=Gt.firstChild();t;)e.push(t),t=Gt.nextSibling();return e}},parentElement:{get:function(){return Kt.currentNode=this,Kt.parentNode()}},textContent:{get:function(){switch(this.nodeType){case Node.ELEMENT_NODE:case Node.DOCUMENT_FRAGMENT_NODE:for(var e,t=document.createTreeWalker(this,NodeFilter.SHOW_TEXT,null,!1),n="";e=t.nextNode();)n+=e.nodeValue;return n;default:return this.nodeValue}},set:function(e){switch(null==e&&(e=""),this.nodeType){case Node.ELEMENT_NODE:case Node.DOCUMENT_FRAGMENT_NODE:Xt(this),(0<e.length||this.nodeType===Node.ELEMENT_NODE)&&this.__shady_native_insertBefore(document.createTextNode(e),void 0);break;default:this.nodeValue=e}}}}),zt(Node.prototype,"appendChild insertBefore removeChild replaceChild cloneNode contains".split(" ")),zt(HTMLElement.prototype,["parentElement","contains"]),e={firstElementChild:{get:function(){return Kt.currentNode=this,Kt.firstChild()}},lastElementChild:{get:function(){return Kt.currentNode=this,Kt.lastChild()}},children:{get:function(){var e=[];Kt.currentNode=this;for(var t=Kt.firstChild();t;)e.push(t),t=Kt.nextSibling();return yt(e)}},childElementCount:{get:function(){return this.children?this.children.length:0}}},$t?(zt(Element.prototype,Jt),zt(Element.prototype,["previousElementSibling","nextElementSibling","innerHTML","className"]),zt(HTMLElement.prototype,["children","innerHTML","className"])):(Vt(Element.prototype,e),Vt(Element.prototype,{previousElementSibling:{get:function(){return Kt.currentNode=this,Kt.previousSibling()}},nextElementSibling:{get:function(){return Kt.currentNode=this,Kt.nextSibling()}},innerHTML:{get:function(){return Ut(this,bt)},set:function(e){var t="template"===this.localName?this.content:this;Xt(t);var n=this.localName||"div";for((n=this.namespaceURI&&this.namespaceURI!==Wt.namespaceURI?Wt.createElementNS(this.namespaceURI,n):Wt.createElement(n)).innerHTML=e,e="template"===this.localName?n.content:n;n=e.__shady_native_firstChild;)t.__shady_native_insertBefore(n,void 0)}},className:{get:function(){return this.getAttribute("class")||""},set:function(e){this.setAttribute("class",e)}}})),zt(Element.prototype,"setAttribute getAttribute hasAttribute removeAttribute focus blur".split(" ")),zt(Element.prototype,Yt),zt(HTMLElement.prototype,["focus","blur"]),window.HTMLTemplateElement&&zt(window.HTMLTemplateElement.prototype,["innerHTML"]),$t?zt(DocumentFragment.prototype,Jt):Vt(DocumentFragment.prototype,e),zt(DocumentFragment.prototype,Yt),$t?(zt(Document.prototype,Jt),zt(Document.prototype,["activeElement"])):Vt(Document.prototype,e),zt(Document.prototype,["importNode","getElementById","elementFromPoint",ot()]),zt(Document.prototype,Yt)}(),Ti("__shady_"),Object.defineProperty(document,"_activeElement",vi.activeElement),_t(Window.prototype,wi,"__shady_"),rt.J?rt.Aa&&_t(Element.prototype,ci):(Ti(),function(){if(!an&&Object.getOwnPropertyDescriptor(Event.prototype,"isTrusted")){var e=function(){var e=new MouseEvent("click",{bubbles:!0,cancelable:!0,composed:!0});this.__shady_dispatchEvent(e)};Element.prototype.click?Element.prototype.click=e:HTMLElement.prototype.click&&(HTMLElement.prototype.click=e)}}()),function(){for(var e in gn)window.__shady_native_addEventListener(e,(function(e){e.__target||(Tn(e),bn(e))}),!0)}(),window.Event=kn,window.CustomEvent=Cn,window.MouseEvent=Pn,window.ShadowRoot=Bi}var or=window.Document.prototype.createElement,ar=window.Document.prototype.createElementNS,lr=window.Document.prototype.importNode,cr=window.Document.prototype.prepend,ur=window.Document.prototype.append,hr=window.DocumentFragment.prototype.prepend,dr=window.DocumentFragment.prototype.append,pr=window.Node.prototype.cloneNode,fr=window.Node.prototype.appendChild,mr=window.Node.prototype.insertBefore,gr=window.Node.prototype.removeChild,vr=window.Node.prototype.replaceChild,yr=Object.getOwnPropertyDescriptor(window.Node.prototype,"textContent"),br=window.Element.prototype.attachShadow,wr=Object.getOwnPropertyDescriptor(window.Element.prototype,"innerHTML"),Er=window.Element.prototype.getAttribute,_r=window.Element.prototype.setAttribute,xr=window.Element.prototype.removeAttribute,Sr=window.Element.prototype.getAttributeNS,Tr=window.Element.prototype.setAttributeNS,kr=window.Element.prototype.removeAttributeNS,Cr=window.Element.prototype.insertAdjacentElement,Pr=window.Element.prototype.insertAdjacentHTML,Ir=window.Element.prototype.prepend,Lr=window.Element.prototype.append,Ar=window.Element.prototype.before,Mr=window.Element.prototype.after,Or=window.Element.prototype.replaceWith,Nr=window.Element.prototype.remove,Dr=window.HTMLElement,Rr=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML"),jr=window.HTMLElement.prototype.insertAdjacentElement,Br=window.HTMLElement.prototype.insertAdjacentHTML,Ur=new Set;function $r(e){var t=Ur.has(e);return e=/^[a-z][.0-9_a-z]*-[-.0-9_a-z]*$/.test(e),!t&&e}"annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph".split(" ").forEach((function(e){return Ur.add(e)}));var Fr=document.contains?document.contains.bind(document):document.documentElement.contains.bind(document.documentElement);function Hr(e){var t=e.isConnected;if(void 0!==t)return t;if(Fr(e))return!0;for(;e&&!(e.__CE_isImportDocument||e instanceof Document);)e=e.parentNode||(window.ShadowRoot&&e instanceof ShadowRoot?e.host:void 0);return!(!e||!(e.__CE_isImportDocument||e instanceof Document))}function qr(e){var t=e.children;if(t)return Array.prototype.slice.call(t);for(t=[],e=e.firstChild;e;e=e.nextSibling)e.nodeType===Node.ELEMENT_NODE&&t.push(e);return t}function Vr(e,t){for(;t&&t!==e&&!t.nextSibling;)t=t.parentNode;return t&&t!==e?t.nextSibling:null}function zr(e,t,n){for(var i=e;i;){if(i.nodeType===Node.ELEMENT_NODE){var r=i;t(r);var s=r.localName;if("link"===s&&"import"===r.getAttribute("rel")){if(i=r.import,void 0===n&&(n=new Set),i instanceof Node&&!n.has(i))for(n.add(i),i=i.firstChild;i;i=i.nextSibling)zr(i,t,n);i=Vr(e,r);continue}if("template"===s){i=Vr(e,r);continue}if(r=r.__CE_shadowRoot)for(r=r.firstChild;r;r=r.nextSibling)zr(r,t,n)}i=i.firstChild?i.firstChild:Vr(e,i)}}function Gr(){var e=!(null==ds||!ds.noDocumentConstructionObserver),t=!(null==ds||!ds.shadyDomFastWalk);this.ca=[],this.g=[],this.W=!1,this.shadyDomFastWalk=t,this.nb=!e}function Kr(e,t,n,i){var r=window.ShadyDOM;if(e.shadyDomFastWalk&&r&&r.inUse){if(t.nodeType===Node.ELEMENT_NODE&&n(t),t.querySelectorAll)for(e=r.nativeMethods.querySelectorAll.call(t,"*"),t=0;t<e.length;t++)n(e[t])}else zr(t,n,i)}function Wr(e,t){e.W&&Kr(e,t,(function(t){return Xr(e,t)}))}function Xr(e,t){if(e.W&&!t.__CE_patched){t.__CE_patched=!0;for(var n=0;n<e.ca.length;n++)e.ca[n](t);for(n=0;n<e.g.length;n++)e.g[n](t)}}function Jr(e,t){var n=[];for(Kr(e,t,(function(e){return n.push(e)})),t=0;t<n.length;t++){var i=n[t];1===i.__CE_state?e.connectedCallback(i):Zr(e,i)}}function Yr(e,t){var n=[];for(Kr(e,t,(function(e){return n.push(e)})),t=0;t<n.length;t++){var i=n[t];1===i.__CE_state&&e.disconnectedCallback(i)}}function Qr(e,t,n){var i=(n=void 0===n?{}:n).ob,r=n.upgrade||function(t){return Zr(e,t)},s=[];for(Kr(e,t,(function(t){if(e.W&&Xr(e,t),"link"===t.localName&&"import"===t.getAttribute("rel")){var n=t.import;n instanceof Node&&(n.__CE_isImportDocument=!0,n.__CE_registry=document.__CE_registry),n&&"complete"===n.readyState?n.__CE_documentLoadHandled=!0:t.addEventListener("load",(function(){var n=t.import;if(!n.__CE_documentLoadHandled){n.__CE_documentLoadHandled=!0;var s=new Set;i&&(i.forEach((function(e){return s.add(e)})),s.delete(n)),Qr(e,n,{ob:s,upgrade:r})}}))}else s.push(t)}),i),t=0;t<s.length;t++)r(s[t])}function Zr(e,t){try{var n=t.ownerDocument,i=n.__CE_registry,r=i&&(n.defaultView||n.__CE_isImportDocument)?cs(i,t.localName):void 0;if(r&&void 0===t.__CE_state){r.constructionStack.push(t);try{try{if(new r.constructorFunction!==t)throw Error("The custom element constructor did not produce the element being upgraded.")}finally{r.constructionStack.pop()}}catch(e){throw t.__CE_state=2,e}if(t.__CE_state=1,t.__CE_definition=r,r.attributeChangedCallback&&t.hasAttributes()){var s=r.observedAttributes;for(r=0;r<s.length;r++){var o=s[r],a=t.getAttribute(o);null!==a&&e.attributeChangedCallback(t,o,null,a,null)}}Hr(t)&&e.connectedCallback(t)}}catch(e){ts(e)}}function es(e,t,n,i){var r=t.__CE_registry;if(r&&(null===i||"http://www.w3.org/1999/xhtml"===i)&&(r=cs(r,n)))try{var s=new r.constructorFunction;if(void 0===s.__CE_state||void 0===s.__CE_definition)throw Error("Failed to construct '"+n+"': The returned value was not constructed with the HTMLElement constructor.");if("http://www.w3.org/1999/xhtml"!==s.namespaceURI)throw Error("Failed to construct '"+n+"': The constructed element's namespace must be the HTML namespace.");if(s.hasAttributes())throw Error("Failed to construct '"+n+"': The constructed element must not have any attributes.");if(null!==s.firstChild)throw Error("Failed to construct '"+n+"': The constructed element must not have any children.");if(null!==s.parentNode)throw Error("Failed to construct '"+n+"': The constructed element must not have a parent node.");if(s.ownerDocument!==t)throw Error("Failed to construct '"+n+"': The constructed element's owner document is incorrect.");if(s.localName!==n)throw Error("Failed to construct '"+n+"': The constructed element's local name is incorrect.");return s}catch(r){return ts(r),t=null===i?or.call(t,n):ar.call(t,i,n),Object.setPrototypeOf(t,HTMLUnknownElement.prototype),t.__CE_state=2,t.__CE_definition=void 0,Xr(e,t),t}return Xr(e,t=null===i?or.call(t,n):ar.call(t,i,n)),t}function ts(e){var t=e.message,n=e.sourceURL||e.fileName||"",i=e.line||e.lineNumber||0,r=e.column||e.columnNumber||0,s=void 0;void 0===ErrorEvent.prototype.initErrorEvent?s=new ErrorEvent("error",{cancelable:!0,message:t,filename:n,lineno:i,colno:r,error:e}):((s=document.createEvent("ErrorEvent")).initErrorEvent("error",!1,!0,t,n,i),s.preventDefault=function(){Object.defineProperty(this,"defaultPrevented",{configurable:!0,get:function(){return!0}})}),void 0===s.error&&Object.defineProperty(s,"error",{configurable:!0,enumerable:!0,get:function(){return e}}),window.dispatchEvent(s),s.defaultPrevented||console.error(e)}function ns(){var e=this;this.I=void 0,this.Ha=new Promise((function(t){e.g=t}))}function is(e){var t=document;this.X=void 0,this.S=e,this.g=t,Qr(this.S,this.g),"loading"===this.g.readyState&&(this.X=new MutationObserver(this.h.bind(this)),this.X.observe(this.g,{childList:!0,subtree:!0}))}function rs(e){e.X&&e.X.disconnect()}function ss(e){this.ka=new Map,this.la=new Map,this.Ca=new Map,this.ta=!1,this.wa=new Map,this.ja=function(e){return e()},this.V=!1,this.ma=[],this.S=e,this.Da=e.nb?new is(e):void 0}function os(e,t){if(!$r(t))throw new SyntaxError("The element name '"+t+"' is not valid.");if(cs(e,t))throw Error("A custom element with name '"+t+"' has already been defined.");if(e.ta)throw Error("A custom element is already being defined.")}function as(e,t,n){var i;e.ta=!0;try{var r=n.prototype;if(!(r instanceof Object))throw new TypeError("The custom element constructor's prototype is not an object.");var s=function(e){var t=r[e];if(void 0!==t&&!(t instanceof Function))throw Error("The '"+e+"' callback must be a function.");return t},o=s("connectedCallback"),a=s("disconnectedCallback"),l=s("adoptedCallback"),c=(i=s("attributeChangedCallback"))&&n.observedAttributes||[]}catch(e){throw e}finally{e.ta=!1}return n={localName:t,constructorFunction:n,connectedCallback:o,disconnectedCallback:a,adoptedCallback:l,attributeChangedCallback:i,observedAttributes:c,constructionStack:[]},e.la.set(t,n),e.Ca.set(n.constructorFunction,n),n}function ls(e){if(!1!==e.V){e.V=!1;for(var t=[],n=e.ma,i=new Map,r=0;r<n.length;r++)i.set(n[r],[]);for(Qr(e.S,document,{upgrade:function(n){if(void 0===n.__CE_state){var r=n.localName,s=i.get(r);s?s.push(n):e.la.has(r)&&t.push(n)}}}),r=0;r<t.length;r++)Zr(e.S,t[r]);for(r=0;r<n.length;r++){for(var s=n[r],o=i.get(s),a=0;a<o.length;a++)Zr(e.S,o[a]);(s=e.wa.get(s))&&s.resolve(void 0)}n.length=0}}function cs(e,t){var n=e.la.get(t);if(n)return n;if(n=e.ka.get(t)){e.ka.delete(t);try{return as(e,t,n())}catch(e){ts(e)}}}function us(e,t,n){function i(t){return function(n){for(var i=[],r=0;r<arguments.length;++r)i[r]=arguments[r];r=[];for(var s=[],o=0;o<i.length;o++){var a=i[o];if(a instanceof Element&&Hr(a)&&s.push(a),a instanceof DocumentFragment)for(a=a.firstChild;a;a=a.nextSibling)r.push(a);else r.push(a)}for(t.apply(this,i),i=0;i<s.length;i++)Yr(e,s[i]);if(Hr(this))for(i=0;i<r.length;i++)(s=r[i])instanceof Element&&Jr(e,s)}}void 0!==n.prepend&&(t.prepend=i(n.prepend)),void 0!==n.append&&(t.append=i(n.append))}Gr.prototype.connectedCallback=function(e){var t=e.__CE_definition;if(t.connectedCallback)try{t.connectedCallback.call(e)}catch(e){ts(e)}},Gr.prototype.disconnectedCallback=function(e){var t=e.__CE_definition;if(t.disconnectedCallback)try{t.disconnectedCallback.call(e)}catch(e){ts(e)}},Gr.prototype.attributeChangedCallback=function(e,t,n,i,r){var s=e.__CE_definition;if(s.attributeChangedCallback&&-1<s.observedAttributes.indexOf(t))try{s.attributeChangedCallback.call(e,t,n,i,r)}catch(e){ts(e)}},ns.prototype.resolve=function(e){if(this.I)throw Error("Already resolved.");this.I=e,this.g(e)},is.prototype.h=function(e){var t=this.g.readyState;for("interactive"!==t&&"complete"!==t||rs(this),t=0;t<e.length;t++)for(var n=e[t].addedNodes,i=0;i<n.length;i++)Qr(this.S,n[i])},(e=ss.prototype).eb=function(e,t){var n=this;if(!(t instanceof Function))throw new TypeError("Custom element constructor getters must be functions.");os(this,e),this.ka.set(e,t),this.ma.push(e),this.V||(this.V=!0,this.ja((function(){return ls(n)})))},e.define=function(e,t){var n=this;if(!(t instanceof Function))throw new TypeError("Custom element constructors must be functions.");os(this,e),as(this,e,t),this.ma.push(e),this.V||(this.V=!0,this.ja((function(){return ls(n)})))},e.upgrade=function(e){Qr(this.S,e)},e.get=function(e){if(e=cs(this,e))return e.constructorFunction},e.whenDefined=function(e){if(!$r(e))return Promise.reject(new SyntaxError("'"+e+"' is not a valid custom element name."));var t=this.wa.get(e);if(t)return t.Ha;t=new ns,this.wa.set(e,t);var n=this.la.has(e)||this.ka.has(e);return e=-1===this.ma.indexOf(e),n&&e&&t.resolve(void 0),t.Ha},e.polyfillWrapFlushCallback=function(e){this.Da&&rs(this.Da);var t=this.ja;this.ja=function(n){return e((function(){return t(n)}))}},window.CustomElementRegistry=ss,ss.prototype.define=ss.prototype.define,ss.prototype.upgrade=ss.prototype.upgrade,ss.prototype.get=ss.prototype.get,ss.prototype.whenDefined=ss.prototype.whenDefined,ss.prototype.polyfillDefineLazy=ss.prototype.eb,ss.prototype.polyfillWrapFlushCallback=ss.prototype.polyfillWrapFlushCallback;var hs={},ds=window.customElements;function ps(){var e=new Gr;!function(e){function t(){var t=this.constructor,n=document.__CE_registry.Ca.get(t);if(!n)throw Error("Failed to construct a custom element: The constructor was not registered with `customElements`.");var i=n.constructionStack;if(0===i.length)return i=or.call(document,n.localName),Object.setPrototypeOf(i,t.prototype),i.__CE_state=1,i.__CE_definition=n,Xr(e,i),i;var r=i.length-1,s=i[r];if(s===hs)throw Error("Failed to construct '"+n.localName+"': This element was already constructed.");return i[r]=hs,Object.setPrototypeOf(s,t.prototype),Xr(e,s),s}t.prototype=Dr.prototype,Object.defineProperty(HTMLElement.prototype,"constructor",{writable:!0,configurable:!0,enumerable:!1,value:t}),window.HTMLElement=t}(e),function(e){Document.prototype.createElement=function(t){return es(e,this,t,null)},Document.prototype.importNode=function(t,n){return t=lr.call(this,t,!!n),this.__CE_registry?Qr(e,t):Wr(e,t),t},Document.prototype.createElementNS=function(t,n){return es(e,this,n,t)},us(e,Document.prototype,{prepend:cr,append:ur})}(e),us(e,DocumentFragment.prototype,{prepend:hr,append:dr}),function(e){function t(t,n){Object.defineProperty(t,"textContent",{enumerable:n.enumerable,configurable:!0,get:n.get,set:function(t){if(this.nodeType===Node.TEXT_NODE)n.set.call(this,t);else{var i=void 0;if(this.firstChild){var r=this.childNodes,s=r.length;if(0<s&&Hr(this)){i=Array(s);for(var o=0;o<s;o++)i[o]=r[o]}}if(n.set.call(this,t),i)for(t=0;t<i.length;t++)Yr(e,i[t])}}})}Node.prototype.insertBefore=function(t,n){if(t instanceof DocumentFragment){var i=qr(t);if(t=mr.call(this,t,n),Hr(this))for(n=0;n<i.length;n++)Jr(e,i[n]);return t}return i=t instanceof Element&&Hr(t),n=mr.call(this,t,n),i&&Yr(e,t),Hr(this)&&Jr(e,t),n},Node.prototype.appendChild=function(t){if(t instanceof DocumentFragment){var n=qr(t);if(t=fr.call(this,t),Hr(this))for(var i=0;i<n.length;i++)Jr(e,n[i]);return t}return n=t instanceof Element&&Hr(t),i=fr.call(this,t),n&&Yr(e,t),Hr(this)&&Jr(e,t),i},Node.prototype.cloneNode=function(t){return t=pr.call(this,!!t),this.ownerDocument.__CE_registry?Qr(e,t):Wr(e,t),t},Node.prototype.removeChild=function(t){var n=t instanceof Element&&Hr(t),i=gr.call(this,t);return n&&Yr(e,t),i},Node.prototype.replaceChild=function(t,n){if(t instanceof DocumentFragment){var i=qr(t);if(t=vr.call(this,t,n),Hr(this))for(Yr(e,n),n=0;n<i.length;n++)Jr(e,i[n]);return t}i=t instanceof Element&&Hr(t);var r=vr.call(this,t,n),s=Hr(this);return s&&Yr(e,n),i&&Yr(e,t),s&&Jr(e,t),r},yr&&yr.get?t(Node.prototype,yr):function(e,t){e.W=!0,e.ca.push(t)}(e,(function(e){t(e,{enumerable:!0,configurable:!0,get:function(){for(var e=[],t=this.firstChild;t;t=t.nextSibling)t.nodeType!==Node.COMMENT_NODE&&e.push(t.textContent);return e.join("")},set:function(e){for(;this.firstChild;)gr.call(this,this.firstChild);null!=e&&""!==e&&fr.call(this,document.createTextNode(e))}})}))}(e),function(e){function t(t,n){Object.defineProperty(t,"innerHTML",{enumerable:n.enumerable,configurable:!0,get:n.get,set:function(t){var i=this,r=void 0;if(Hr(this)&&(r=[],Kr(e,this,(function(e){e!==i&&r.push(e)}))),n.set.call(this,t),r)for(var s=0;s<r.length;s++){var o=r[s];1===o.__CE_state&&e.disconnectedCallback(o)}return this.ownerDocument.__CE_registry?Qr(e,this):Wr(e,this),t}})}function n(t,n){t.insertAdjacentElement=function(t,i){var r=Hr(i);return t=n.call(this,t,i),r&&Yr(e,i),Hr(t)&&Jr(e,i),t}}function i(t,n){function i(t,n){for(var i=[];t!==n;t=t.nextSibling)i.push(t);for(n=0;n<i.length;n++)Qr(e,i[n])}t.insertAdjacentHTML=function(e,t){if("beforebegin"===(e=e.toLowerCase())){var r=this.previousSibling;n.call(this,e,t),i(r||this.parentNode.firstChild,this)}else if("afterbegin"===e)r=this.firstChild,n.call(this,e,t),i(this.firstChild,r);else if("beforeend"===e)r=this.lastChild,n.call(this,e,t),i(r||this.firstChild,null);else{if("afterend"!==e)throw new SyntaxError("The value provided ("+String(e)+") is not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'.");r=this.nextSibling,n.call(this,e,t),i(this.nextSibling,r)}}}br&&(Element.prototype.attachShadow=function(t){if(t=br.call(this,t),e.W&&!t.__CE_patched){t.__CE_patched=!0;for(var n=0;n<e.ca.length;n++)e.ca[n](t)}return this.__CE_shadowRoot=t}),wr&&wr.get?t(Element.prototype,wr):Rr&&Rr.get?t(HTMLElement.prototype,Rr):function(e,t){e.W=!0,e.g.push(t)}(e,(function(e){t(e,{enumerable:!0,configurable:!0,get:function(){return pr.call(this,!0).innerHTML},set:function(e){var t="template"===this.localName,n=t?this.content:this,i=ar.call(document,this.namespaceURI,this.localName);for(i.innerHTML=e;0<n.childNodes.length;)gr.call(n,n.childNodes[0]);for(e=t?i.content:i;0<e.childNodes.length;)fr.call(n,e.childNodes[0])}})})),Element.prototype.setAttribute=function(t,n){if(1!==this.__CE_state)return _r.call(this,t,n);var i=Er.call(this,t);_r.call(this,t,n),n=Er.call(this,t),e.attributeChangedCallback(this,t,i,n,null)},Element.prototype.setAttributeNS=function(t,n,i){if(1!==this.__CE_state)return Tr.call(this,t,n,i);var r=Sr.call(this,t,n);Tr.call(this,t,n,i),i=Sr.call(this,t,n),e.attributeChangedCallback(this,n,r,i,t)},Element.prototype.removeAttribute=function(t){if(1!==this.__CE_state)return xr.call(this,t);var n=Er.call(this,t);xr.call(this,t),null!==n&&e.attributeChangedCallback(this,t,n,null,null)},Element.prototype.removeAttributeNS=function(t,n){if(1!==this.__CE_state)return kr.call(this,t,n);var i=Sr.call(this,t,n);kr.call(this,t,n);var r=Sr.call(this,t,n);i!==r&&e.attributeChangedCallback(this,n,i,r,t)},jr?n(HTMLElement.prototype,jr):Cr&&n(Element.prototype,Cr),Br?i(HTMLElement.prototype,Br):Pr&&i(Element.prototype,Pr),us(e,Element.prototype,{prepend:Ir,append:Lr}),function(e){function t(t){return function(n){for(var i=[],r=0;r<arguments.length;++r)i[r]=arguments[r];r=[];for(var s=[],o=0;o<i.length;o++){var a=i[o];if(a instanceof Element&&Hr(a)&&s.push(a),a instanceof DocumentFragment)for(a=a.firstChild;a;a=a.nextSibling)r.push(a);else r.push(a)}for(t.apply(this,i),i=0;i<s.length;i++)Yr(e,s[i]);if(Hr(this))for(i=0;i<r.length;i++)(s=r[i])instanceof Element&&Jr(e,s)}}var n=Element.prototype;void 0!==Ar&&(n.before=t(Ar)),void 0!==Mr&&(n.after=t(Mr)),void 0!==Or&&(n.replaceWith=function(t){for(var n=[],i=0;i<arguments.length;++i)n[i]=arguments[i];i=[];for(var r=[],s=0;s<n.length;s++){var o=n[s];if(o instanceof Element&&Hr(o)&&r.push(o),o instanceof DocumentFragment)for(o=o.firstChild;o;o=o.nextSibling)i.push(o);else i.push(o)}for(s=Hr(this),Or.apply(this,n),n=0;n<r.length;n++)Yr(e,r[n]);if(s)for(Yr(e,this),n=0;n<i.length;n++)(r=i[n])instanceof Element&&Jr(e,r)}),void 0!==Nr&&(n.remove=function(){var t=Hr(this);Nr.call(this),t&&Yr(e,this)})}(e)}(e),e=new ss(e),document.__CE_registry=e,Object.defineProperty(window,"customElements",{configurable:!0,enumerable:!0,value:e})}function fs(){this.end=this.start=0,this.rules=this.parent=this.previous=null,this.cssText=this.parsedCssText="",this.atRule=!1,this.type=0,this.parsedSelector=this.selector=this.keyframesName=""}function ms(e){var t=e=e.replace(Ss,"").replace(Ts,""),n=new fs;n.start=0,n.end=t.length;for(var i=n,r=0,s=t.length;r<s;r++)if("{"===t[r]){i.rules||(i.rules=[]);var o=i,a=o.rules[o.rules.length-1]||null;(i=new fs).start=r+1,i.parent=o,i.previous=a,o.rules.push(i)}else"}"===t[r]&&(i.end=r+1,i=i.parent||n);return gs(n,e)}function gs(e,t){var n=t.substring(e.start,e.end-1);if(e.parsedCssText=e.cssText=n.trim(),e.parent&&(n=function(e){return e.replace(/\\([0-9a-f]{1,6})\s/gi,(function(e,t){for(t=6-(e=t).length;t--;)e="0"+e;return"\\"+e}))}(n=t.substring(e.previous?e.previous.end:e.parent.start,e.start-1)),n=(n=n.replace(As," ")).substring(n.lastIndexOf(";")+1),n=e.parsedSelector=e.selector=n.trim(),e.atRule=0===n.indexOf("@"),e.atRule?0===n.indexOf("@media")?e.type=_s:n.match(Ls)&&(e.type=Es,e.keyframesName=e.selector.split(As).pop()):e.type=0===n.indexOf("--")?xs:ws),n=e.rules)for(var i=0,r=n.length,s=void 0;i<r&&(s=n[i]);i++)gs(s,t);return e}function vs(e,t,n){n=void 0===n?"":n;var i="";if(e.cssText||e.rules){var r,s=e.rules;if((r=s)&&(r=!((r=s[0])&&r.selector&&0===r.selector.indexOf("--"))),r){r=0;for(var o=s.length,a=void 0;r<o&&(a=s[r]);r++)i=vs(a,t,i)}else(i=(t=t?e.cssText:(t=(t=e.cssText).replace(ks,"").replace(Cs,"")).replace(Ps,"").replace(Is,"")).trim())&&(i="  "+i+"\n")}return i&&(e.selector&&(n+=e.selector+" {\n"),n+=i,e.selector&&(n+="}\n\n")),n}ds&&!ds.forcePolyfill&&"function"==typeof ds.define&&"function"==typeof ds.get||ps(),window.__CE_installPolyfill=ps;var ys,bs,ws=1,Es=7,_s=4,xs=1e3,Ss=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//gim,Ts=/@import[^;]*;/gim,ks=/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?(?:[;\n]|$)/gim,Cs=/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?{[^}]*?}(?:[;\n]|$)?/gim,Ps=/@apply\s*\(?[^);]*\)?\s*(?:[;\n]|$)?/gim,Is=/[^;:]*?:[^;]*?var\([^;]*\)(?:[;\n]|$)?/gim,Ls=/^@[^\s]*keyframes/,As=/\s+/g,Ms=!(window.ShadyDOM&&window.ShadyDOM.inUse);function Os(e){ys=(!e||!e.shimcssproperties)&&(Ms||!(navigator.userAgent.match(/AppleWebKit\/601|Edge\/15/)||!window.CSS||!CSS.supports||!CSS.supports("box-shadow","0 0 0 var(--foo)")))}window.ShadyCSS&&void 0!==window.ShadyCSS.cssBuild&&(bs=window.ShadyCSS.cssBuild);var Ns=!(!window.ShadyCSS||!window.ShadyCSS.disableRuntime);window.ShadyCSS&&void 0!==window.ShadyCSS.nativeCss?ys=window.ShadyCSS.nativeCss:window.ShadyCSS?(Os(window.ShadyCSS),window.ShadyCSS=void 0):Os(window.WebComponents&&window.WebComponents.flags);var Ds=ys,Rs=/(?:^|[;\s{]\s*)(--[\w-]*?)\s*:\s*(?:((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};{])+)|\{([^}]*)\}(?:(?=[;\s}])|$))/gi,js=/(?:^|\W+)@apply\s*\(?([^);\n]*)\)?/gi,Bs=/(--[\w-]+)\s*([:,;)]|$)/gi,Us=/(animation\s*:)|(animation-name\s*:)/,$s=/@media\s(.*)/,Fs=/\{[^}]*\}/g,Hs=new Set;function qs(e,t){return e?("string"==typeof e&&(e=ms(e)),t&&Gs(e,t),vs(e,Ds)):""}function Vs(e){return!e.__cssRules&&e.textContent&&(e.__cssRules=ms(e.textContent)),e.__cssRules||null}function zs(e){return!!e.parent&&e.parent.type===Es}function Gs(e,t,n,i){if(e){var r=!1,s=e.type;if(i&&s===_s){var o=e.selector.match($s);o&&(window.matchMedia(o[1]).matches||(r=!0))}if(s===ws?t(e):n&&s===Es?n(e):s===xs&&(r=!0),(e=e.rules)&&!r)for(r=0,s=e.length,o=void 0;r<s&&(o=e[r]);r++)Gs(o,t,n,i)}}function Ks(e,t,n,i){var r=document.createElement("style");return t&&r.setAttribute("scope",t),r.textContent=e,Js(r,n,i),r}var Ws=null;function Xs(e){e=document.createComment(" Shady DOM styles for "+e+" ");var t=document.head;return t.insertBefore(e,(Ws?Ws.nextSibling:null)||t.firstChild),Ws=e}function Js(e,t,n){(t=t||document.head).insertBefore(e,n&&n.nextSibling||t.firstChild),Ws?e.compareDocumentPosition(Ws)===Node.DOCUMENT_POSITION_PRECEDING&&(Ws=e):Ws=e}function Ys(e,t){for(var n=0,i=e.length;t<i;t++)if("("===e[t])n++;else if(")"===e[t]&&0==--n)return t;return-1}function Qs(e,t){var n=e.indexOf("var(");if(-1===n)return t(e,"","","");var i=Ys(e,n+3),r=e.substring(n+4,i);return n=e.substring(0,n),e=Qs(e.substring(i+1),t),-1===(i=r.indexOf(","))?t(n,r.trim(),"",e):t(n,r.substring(0,i).trim(),r.substring(i+1).trim(),e)}function Zs(e,t){Ms?e.setAttribute("class",t):window.ShadyDOM.nativeMethods.setAttribute.call(e,"class",t)}var eo=window.ShadyDOM&&window.ShadyDOM.wrap||function(e){return e};function to(e){var t=e.localName,n="";return t?-1<t.indexOf("-")||(n=t,t=e.getAttribute&&e.getAttribute("is")||""):(t=e.is,n=e.extends),{is:t,ha:n}}function no(e){for(var t=[],n="",i=0;0<=i&&i<e.length;i++)if("("===e[i]){var r=Ys(e,i);n+=e.slice(i,r+1),i=r}else","===e[i]?(t.push(n),n=""):n+=e[i];return n&&t.push(n),t}function io(e){if(void 0!==bs)return bs;if(void 0===e.__cssBuild){var t=e.getAttribute("css-build");if(t)e.__cssBuild=t;else{if(""!==(t=(t="template"===e.localName?e.content.firstChild:e.firstChild)instanceof Comment&&"css-build"===(t=t.textContent.trim().split(":"))[0]?t[1]:"")){var n="template"===e.localName?e.content.firstChild:e.firstChild;n.parentNode.removeChild(n)}e.__cssBuild=t}}return e.__cssBuild||""}function ro(e){return!(""===(e=void 0===e?"":e)||!Ds)&&(Ms?"shadow"===e:"shady"===e)}function so(){}function oo(e,t,n){var i;if(t.nodeType===Node.ELEMENT_NODE&&n(t),i="template"===t.localName?(t.content||t._content||t).childNodes:t.children||t.childNodes)for(t=0;t<i.length;t++)oo(e,i[t],n)}function ao(e,t,n){if(t)if(e.classList)n?(e.classList.remove("style-scope"),e.classList.remove(t)):(e.classList.add("style-scope"),e.classList.add(t));else if(e.getAttribute){var i=e.getAttribute("class");n?i&&Zs(e,t=i.replace("style-scope","").replace(t,"")):Zs(e,(i?i+" ":"")+"style-scope "+t)}}function lo(e,t,n){oo(To,e,(function(e){ao(e,t,!0),ao(e,n)}))}function co(e,t){oo(To,e,(function(e){ao(e,t||"",!0)}))}function uo(e,t,n,i,r){var s=To;return""===(r=void 0===r?"":r)&&(r=Ms||"shady"===(void 0===i?"":i)?qs(t,n):function(e,t,n,i,r){var s=ho(n,i);return n=n?"."+n:"",qs(t,(function(t){t.i||(t.selector=t.F=po(e,t,e.h,n,s),t.i=!0),r&&r(t,n,s)}))}(s,t,(e=to(e)).is,e.ha,n)+"\n\n"),r.trim()}function ho(e,t){return t?"[is="+e+"]":e}function po(e,t,n,i,r){var s=no(t.selector);if(!zs(t)){t=0;for(var o=s.length,a=void 0;t<o&&(a=s[t]);t++)s[t]=n.call(e,a,i,r)}return s.filter((function(e){return!!e})).join(",")}function fo(e){return e.replace(vo,(function(e,t,n){return-1<n.indexOf("+")?n=n.replace(/\+/g,"___"):-1<n.indexOf("___")&&(n=n.replace(/___/g,"+")),":"+t+"("+n+")"}))}function mo(e,t){e=e.split(/(\[.+?\])/);for(var n=[],i=0;i<e.length;i++)if(1==i%2)n.push(e[i]);else{var r=e[i];""===r&&i===e.length-1||((r=r.split(":"))[0]+=t,n.push(r.join(":")))}return n.join("")}function go(e){":root"===e.selector&&(e.selector="html")}so.prototype.h=function(e,t,n){var i=!1;e=e.trim();var r=vo.test(e);r&&(e=fo(e=e.replace(vo,(function(e,t,n){return":"+t+"("+n.replace(/\s/g,"")+")"}))));var s=So.test(e);if(s){var o=function(e){for(var t,n=[];t=e.match(So);){var i=t.index,r=Ys(e,i);if(-1===r)throw Error(t.input+" selector missing ')'");t=e.slice(i,r+1),e=e.replace(t,""),n.push(t)}return{Ba:e,matches:n}}(e);e=o.Ba,o=o.matches}return e=(e=e.replace(wo,":host $1")).replace(yo,(function(e,r,s){return i||(e=function(e,t,n,i){var r=e.indexOf("::slotted");if(0<=e.indexOf(":host")?e=function(e,t){var n=e.match(Eo);return(n=n&&n[2].trim()||"")?n[0].match(bo)?e.replace(Eo,(function(e,n,i){return t+i})):n.split(bo)[0]===t?n:"should_not_match":e.replace(":host",t)}(e,i):0!==r&&(e=n?mo(e,n):e),n=!1,0<=r&&(t="",n=!0),n){var s=!0;n&&(e=e.replace(_o,(function(e,t){return" > "+t})))}return{value:e,Ua:t,stop:s}}(s,r,t,n),i=i||e.stop,r=e.Ua,s=e.value),r+s})),s&&(e=function(e,t){var n=e.split("");return t.reduce((function(e,t,i){return e+t+n[i+1]}),n[0])}(e,o)),r&&(e=fo(e)),e.replace(xo,(function(e,t,n,i){return'[dir="'+n+'"] '+t+i+", "+t+'[dir="'+n+'"]'+i}))},so.prototype.i=function(e){return e.match(":host")?"":e.match("::slotted")?this.h(e,":not(.style-scope)"):mo(e.trim(),":not(.style-scope)")},s.Object.defineProperties(so.prototype,{g:{configurable:!0,enumerable:!0,get:function(){return"style-scope"}}});var vo=/:(nth[-\w]+)\(([^)]+)\)/,yo=/(^|[\s>+~]+)((?:\[.+?\]|[^\s>+~=[])+)/g,bo=/[[.:#*]/,wo=/^(::slotted)/,Eo=/(:host)(?:\(((?:\([^)(]*\)|[^)(]*)+?)\))/,_o=/(?:::slotted)(?:\(((?:\([^)(]*\)|[^)(]*)+?)\))/,xo=/(.*):dir\((?:(ltr|rtl))\)(.*)/,So=/:(?:matches|any|-(?:webkit|moz)-any)/,To=new so;function ko(e,t,n,i,r){this.M=e||null,this.h=t||null,this.za=n||[],this.K=null,this.cssBuild=r||"",this.ha=i||"",this.g=this.L=this.R=null}function Co(e){return e?e.__styleInfo:null}function Po(e,t){return e.__styleInfo=t}function Io(e){var t=this.matches||this.matchesSelector||this.mozMatchesSelector||this.msMatchesSelector||this.oMatchesSelector||this.webkitMatchesSelector;return t&&t.call(this,e)}ko.prototype.i=function(){return this.M},ko.prototype._getStyleRules=ko.prototype.i;var Lo=/:host\s*>\s*/,Ao=navigator.userAgent.match("Trident");function Mo(){}function Oo(e){if(!e.D){var t={},n={};No(e,n)&&(t.P=n,e.rules=null),t.cssText=e.parsedCssText.replace(Fs,"").replace(Rs,""),e.D=t}}function No(e,t){var n=e.D;if(!n){n=e.parsedCssText;for(var i;e=Rs.exec(n);)"inherit"===(i=(e[2]||e[3]).trim())&&"unset"===i||(t[e[1].trim()]=i),i=!0;return i}if(n.P)return Object.assign(t,n.P),!0}function Do(e,t,n){return t&&(t=0<=t.indexOf(";")?Ro(e,t,n):Qs(t,(function(t,i,r,s){return i?((i=Do(e,n[i],n))&&"initial"!==i?"apply-shim-inherit"===i&&(i="inherit"):i=Do(e,n[r]||r,n)||r,t+(i||"")+s):t+s}))),t&&t.trim()||""}function Ro(e,t,n){t=t.split(";");for(var i,r,s=0;s<t.length;s++)if(i=t[s]){if(js.lastIndex=0,r=js.exec(i))i=Do(e,n[r[1]],n);else if(-1!==(r=i.indexOf(":"))){var o=i.substring(r);o=Do(e,o=o.trim(),n)||o,i=i.substring(0,r)+o}t[s]=i&&i.lastIndexOf(";")===i.length-1?i.slice(0,-1):i||""}return t.join(";")}function jo(e){return function(t){return t.replace(e.u,e.g)}}function Bo(e,t){var n=Uo,i=Vs(e);e.textContent=qs(i,(function(e){var i=e.cssText=e.parsedCssText;e.D&&e.D.cssText&&(i=i.replace(ks,"").replace(Cs,""),e.cssText=Ro(n,i,t))}))}s.Object.defineProperties(Mo.prototype,{g:{configurable:!0,enumerable:!0,get:function(){return"x-scope"}}});var Uo=new Mo,$o={},Fo=window.customElements;if(Fo&&!Ms&&!Ns){var Ho=Fo.define;Fo.define=function(e,t,n){$o[e]||($o[e]=Xs(e)),Ho.call(Fo,e,t,n)}}function qo(){this.cache={}}function Vo(){}qo.prototype.store=function(e,t,n,i){var r=this.cache[e]||[];r.push({P:t,styleElement:n,L:i}),100<r.length&&r.shift(),this.cache[e]=r};var zo=new RegExp(To.g+"\\s*([^\\s]*)");function Go(e){return(e=(e.classList&&e.classList.value?e.classList.value:e.getAttribute("class")||"").match(zo))?e[1]:""}function Ko(e){var t=eo(e).getRootNode();return t===e||t===e.ownerDocument?"":(e=t.host)?to(e).is:""}function Wo(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.target!==document.documentElement&&n.target!==document.head)for(var i=0;i<n.addedNodes.length;i++){var r=n.addedNodes[i];if(r.nodeType===Node.ELEMENT_NODE){var s=r.getRootNode(),o=Go(r);if(o&&s===r.ownerDocument&&("style"!==r.localName&&"template"!==r.localName||""===io(r)))co(r,o);else if(s instanceof ShadowRoot)for((s=Ko(r))!==o&&lo(r,o,s),r=window.ShadyDOM.nativeMethods.querySelectorAll.call(r,":not(."+To.g+")"),o=0;o<r.length;o++){var a=Ko(s=r[o]);a&&ao(s,a)}}}}}if(!(Ms||window.ShadyDOM&&window.ShadyDOM.handlesDynamicScoping)){var Xo=new MutationObserver(Wo),Jo=function(e){Xo.observe(e,{childList:!0,subtree:!0})};if(window.customElements&&!window.customElements.polyfillWrapFlushCallback)Jo(document);else{var Yo=function(){Jo(document.body)};window.HTMLImports?window.HTMLImports.whenReady(Yo):requestAnimationFrame((function(){if("loading"===document.readyState){var e=function(){Yo(),document.removeEventListener("readystatechange",e)};document.addEventListener("readystatechange",e)}else Yo()}))}Vo=function(){Wo(Xo.takeRecords())}}var Qo={},Zo=Promise.resolve();function ea(e){(e=Qo[e])&&(e._applyShimCurrentVersion=e._applyShimCurrentVersion||0,e._applyShimValidatingVersion=e._applyShimValidatingVersion||0,e._applyShimNextVersion=(e._applyShimNextVersion||0)+1)}function ta(e){return e._applyShimCurrentVersion===e._applyShimNextVersion}var na={},ia=new qo;function ra(){this.da={},this.i=document.documentElement;var e=new fs;e.rules=[],this.u=Po(this.i,new ko(e)),this.O=!1,this.g=this.h=null}function sa(e){var t=to(e),n=t.is;t=t.ha;var i=$o[n]||null,r=Qo[n];if(r)return Po(e,t=new ko(n=r._styleAst,i,r.g,t,r=io(r))),t}function oa(e){if(!e.h&&window.ShadyCSS&&window.ShadyCSS.ApplyShim){e.h=window.ShadyCSS.ApplyShim,e.h.invalidCallback=ea;var t=!0}else t=!1;return function(e){!e.g&&window.ShadyCSS&&window.ShadyCSS.CustomStyleInterface&&(e.g=window.ShadyCSS.CustomStyleInterface,e.g.transformCallback=function(t){e.Ma(t)},e.g.validateCallback=function(){requestAnimationFrame((function(){(e.g.enqueued||e.O)&&e.flushCustomStyles()}))})}(e),t}function aa(e,t,n){var i=to(t).is;if(n.K){var r,s=n.K;for(r in s)null===r?t.style.removeProperty(r):t.style.setProperty(r,s[r])}!(s=Qo[i])&&t!==e.i||s&&""!==io(s)||!s||!s._style||ta(s)||((ta(s)||s._applyShimValidatingVersion!==s._applyShimNextVersion)&&(oa(e),e.h&&e.h.transformRules(s._styleAst,i),s._style.textContent=uo(t,n.M),function(e){e._applyShimValidatingVersion=e._applyShimNextVersion,e._validating||(e._validating=!0,Zo.then((function(){e._applyShimCurrentVersion=e._applyShimNextVersion,e._validating=!1})))}(s)),Ms&&(e=t.shadowRoot)&&(e=e.querySelector("style"))&&(e.textContent=uo(t,n.M)),n.M=s._styleAst)}function la(e,t){return(t=eo(t).getRootNode().host)?Co(t)||sa(t)?t:la(e,t):e.i}function ca(e,t,n){var i=la(e,t),r=Co(i),s=r.R;for(var o in i===e.i||s||(ca(e,i,r),s=r.R),e=Object.create(s||null),i=function(e,t,n){var i={},r={};return Gs(t,(function(t){!function(e,t,n,i){if(t.D||Oo(t),t.D.P){var r=to(e);e=r.is,r=r.ha,r=e?ho(e,r):"html";var s=t.parsedSelector,o=!!s.match(Lo)||"html"===r&&-1<s.indexOf("html"),a=0===s.indexOf(":host")&&!o;"shady"===n&&(a=!(o=s===r+" > *."+r||-1!==s.indexOf("html"))&&0===s.indexOf(r)),(o||a)&&(n=r,a&&(t.F||(t.F=po(To,t,To.h,e?"."+e:"",r)),n=t.F||r),o&&"html"===r&&(n=t.F||t.O),i({Ba:n,ab:a,qb:o}))}}(e,t,n,(function(n){Io.call(e._element||e,n.Ba)&&(n.ab?No(t,i):No(t,r))}))}),null,!0),{hb:r,Za:i}}(t,n.M,n.cssBuild),t=function(e,t){var n={},i=[];return Gs(e,(function(e){e.D||Oo(e);var r=e.F||e.parsedSelector;t&&e.D.P&&r&&Io.call(t,r)&&(No(e,n),e=e.index,r=parseInt(e/32,10),i[r]=(i[r]||0)|1<<e%32)}),null,!0),{P:n,key:i}}(r.M,t).P,Object.assign(e,i.Za,t,i.hb),t=n.K)((r=t[o])||0===r)&&(e[o]=r);for(o=Uo,t=Object.getOwnPropertyNames(e),r=0;r<t.length;r++)e[i=t[r]]=Do(o,e[i],e);n.R=e}(e=ra.prototype).flush=function(){Vo()},e.Xa=function(e){return Vs(e)},e.lb=function(e){return qs(e)},e.prepareTemplate=function(e,t,n){this.prepareTemplateDom(e,t),this.prepareTemplateStyles(e,t,n)},e.prepareTemplateStyles=function(e,t,n){if(!e._prepared&&!Ns){Ms||$o[t]||($o[t]=Xs(t)),e._prepared=!0,e.name=t,e.extends=n,Qo[t]=e;var i=io(e),r=ro(i);n={is:t,extends:n};for(var s=[],o=e.content.querySelectorAll("style"),a=0;a<o.length;a++){var l=o[a];if(l.hasAttribute("shady-unscoped")){if(!Ms){var c=l.textContent;if(!Hs.has(c)){Hs.add(c);var u=document.createElement("style");u.setAttribute("shady-unscoped",""),u.textContent=c,document.head.appendChild(u)}l.parentNode.removeChild(l)}}else s.push(l.textContent),l.parentNode.removeChild(l)}s=s.join("").trim()+(na[t]||""),oa(this),r||((o=!i)&&(o=js.test(s)||Rs.test(s),js.lastIndex=0,Rs.lastIndex=0),a=ms(s),o&&Ds&&this.h&&this.h.transformRules(a,t),e._styleAst=a),o=[],Ds||(o=function(e){var t={},n=[],i=0;for(var r in Gs(e,(function(e){Oo(e),e.index=i++,e=e.D.cssText;for(var n;n=Bs.exec(e);){var r=n[1];":"!==n[2]&&(t[r]=!0)}}),(function(e){n.push(e)})),e.h=n,e=[],t)e.push(r);return e}(e._styleAst)),o.length&&!Ds||(a=Ms?e.content:null,t=$o[t]||null,i=(i=uo(n,e._styleAst,null,i,r?s:"")).length?Ks(i,n.is,a,t):null,e._style=i),e.g=o}},e.fb=function(e,t){na[t]=e.join(" ")},e.prepareTemplateDom=function(e,t){if(!Ns){var n=io(e);Ms||"shady"===n||e._domPrepared||(e._domPrepared=!0,function(e,t){oo(To,e,(function(e){ao(e,t||"")}))}(e.content,t))}},e.flushCustomStyles=function(){if(!Ns){var e=oa(this);if(this.g){var t=this.g.processStyles();if((e||this.g.enqueued)&&!ro(this.u.cssBuild)){if(Ds){if(!this.u.cssBuild)for(e=0;e<t.length;e++){var n=this.g.getStyleForCustomStyle(t[e]);if(n&&Ds&&this.h){var i=Vs(n);oa(this),this.h.transformRules(i),n.textContent=qs(i)}}}else{for(function(e,t){t=t.map((function(t){return e.g.getStyleForCustomStyle(t)})).filter((function(e){return!!e})),t.sort((function(e,t){return(e=t.compareDocumentPosition(e))&Node.DOCUMENT_POSITION_FOLLOWING?1:e&Node.DOCUMENT_POSITION_PRECEDING?-1:0})),e.u.M.rules=t.map((function(e){return Vs(e)}))}(this,t),ca(this,this.i,this.u),e=0;e<t.length;e++)(n=this.g.getStyleForCustomStyle(t[e]))&&Bo(n,this.u.R);this.O&&this.styleDocument()}this.g.enqueued=!1}}}},e.styleElement=function(e,t){if(Ns){if(t){Co(e)||Po(e,new ko(null));var n=Co(e);n.K=n.K||{},Object.assign(n.K,t),aa(this,e,n)}}else if(n=Co(e)||sa(e))if(e!==this.i&&(this.O=!0),t&&(n.K=n.K||{},Object.assign(n.K,t)),Ds)aa(this,e,n);else if(this.flush(),ca(this,e,n),n.za&&n.za.length){var i;t=to(e).is;e:{if(i=ia.cache[t])for(var r=i.length-1;0<=r;r--){var s=i[r];t:{for(var o=n.za,a=0;a<o.length;a++){var l=o[a];if(s.P[l]!==n.R[l]){o=!1;break t}}o=!0}if(o){i=s;break e}}i=void 0}o=i?i.styleElement:null,r=n.L,(s=i&&i.L)||(s=t+"-"+(s=this.da[t]=(this.da[t]||0)+1)),n.L=s,s=n.L,a=Uo,a=o?o.textContent||"":function(e,t,n,i){var r=to(t),s=ho(r.is,r.ha),o=new RegExp("(?:^|[^.#[:])"+(t.extends?"\\"+s.slice(0,-1)+"\\]":s)+"($|[.:[\\s>+~])"),a=Co(t);r=a.M,a=a.cssBuild;var l=function(e,t){e=e.h;var n={};if(!Ms&&e)for(var i=0,r=e[i];i<e.length;r=e[++i]){var s=r,o=t;s.u=new RegExp("\\b"+s.keyframesName+"(?!\\B|-)","g"),s.g=s.keyframesName+"-"+o,s.F=s.F||s.selector,s.selector=s.F.replace(s.keyframesName,s.g),n[r.keyframesName]=jo(r)}return n}(r,i);return uo(t,r,(function(t){var r="";if(t.D||Oo(t),t.D.cssText&&(r=Ro(e,t.D.cssText,n)),t.cssText=r,!Ms&&!zs(t)&&t.cssText){var a=r=t.cssText;if(null==t.Ia&&(t.Ia=Us.test(r)),t.Ia)if(null==t.pa)for(var c in t.pa=[],l)r!==(a=(a=l[c])(r))&&(r=a,t.pa.push(c));else{for(c=0;c<t.pa.length;++c)r=(a=l[t.pa[c]])(r);a=r}t.cssText=a,t.F=t.F||t.selector,r="."+i,a=0;for(var u=(c=no(t.F)).length,h=void 0;a<u&&(h=c[a]);a++)c[a]=h.match(o)?h.replace(s,r):r+" "+h;t.selector=c.join(",")}}),a)}(a,e,n.R,s);var c=(l=Co(e)).g;c&&!Ms&&c!==o&&(c._useCount--,0>=c._useCount&&c.parentNode&&c.parentNode.removeChild(c)),Ms?l.g?(l.g.textContent=a,o=l.g):a&&(o=Ks(a,s,e.shadowRoot,l.h)):o?o.parentNode||(Ao&&-1<a.indexOf("@media")&&(o.textContent=a),Js(o,null,l.h)):a&&(o=Ks(a,s,null,l.h)),o&&(o._useCount=o._useCount||0,l.g!=o&&o._useCount++,l.g=o),s=o,Ms||(o=n.L,l=a=e.getAttribute("class")||"",r&&(l=a.replace(new RegExp("\\s*x-scope\\s*"+r+"\\s*","g")," ")),a!==(l+=(l?" ":"")+"x-scope "+o)&&Zs(e,l)),i||ia.store(t,n.R,s,n.L)}},e.styleDocument=function(e){this.styleSubtree(this.i,e)},e.styleSubtree=function(e,t){var n=eo(e),i=n.shadowRoot,r=e===this.i;if((i||r)&&this.styleElement(e,t),e=r?n:i)for(e=Array.from(e.querySelectorAll("*")).filter((function(e){return eo(e).shadowRoot})),t=0;t<e.length;t++)this.styleSubtree(e[t])},e.Ma=function(e){var t=this,n=io(e);if(n!==this.u.cssBuild&&(this.u.cssBuild=n),!ro(n)){var i=Vs(e);Gs(i,(function(e){if(Ms)go(e);else{var i=To;e.selector=e.parsedSelector,go(e),e.selector=e.F=po(i,e,i.i,void 0,void 0)}Ds&&""===n&&(oa(t),t.h&&t.h.transformRule(e))})),Ds?e.textContent=qs(i):this.u.M.rules.push(i)}},e.getComputedStyleValue=function(e,t){var n;return Ds||(n=(Co(e)||Co(la(this,e))).R[t]),(n=n||window.getComputedStyle(e).getPropertyValue(t))?n.trim():""},e.kb=function(e,t){var n=eo(e).getRootNode();if(t=t?("string"==typeof t?t:String(t)).split(/\s/):[],!(n=n.host&&n.host.localName)){var i=e.getAttribute("class");if(i){i=i.split(/\s/);for(var r=0;r<i.length;r++)if(i[r]===To.g){n=i[r+1];break}}}n&&t.push(To.g,n),Ds||(n=Co(e))&&n.L&&t.push(Uo.g,n.L),Zs(e,t.join(" "))},e.Ta=function(e){return Co(e)},e.jb=function(e,t){ao(e,t)},e.mb=function(e,t){ao(e,t,!0)},e.ib=function(e){return Ko(e)},e.Va=function(e){return Go(e)},ra.prototype.flush=ra.prototype.flush,ra.prototype.prepareTemplate=ra.prototype.prepareTemplate,ra.prototype.styleElement=ra.prototype.styleElement,ra.prototype.styleDocument=ra.prototype.styleDocument,ra.prototype.styleSubtree=ra.prototype.styleSubtree,ra.prototype.getComputedStyleValue=ra.prototype.getComputedStyleValue,ra.prototype.setElementClass=ra.prototype.kb,ra.prototype._styleInfoForNode=ra.prototype.Ta,ra.prototype.transformCustomStyleForDocument=ra.prototype.Ma,ra.prototype.getStyleAst=ra.prototype.Xa,ra.prototype.styleAstToString=ra.prototype.lb,ra.prototype.flushCustomStyles=ra.prototype.flushCustomStyles,ra.prototype.scopeNode=ra.prototype.jb,ra.prototype.unscopeNode=ra.prototype.mb,ra.prototype.scopeForNode=ra.prototype.ib,ra.prototype.currentScopeForNode=ra.prototype.Va,ra.prototype.prepareAdoptedCssText=ra.prototype.fb,Object.defineProperties(ra.prototype,{nativeShadow:{get:function(){return Ms}},nativeCss:{get:function(){return Ds}}});var ua,ha,da=new ra;window.ShadyCSS&&(ua=window.ShadyCSS.ApplyShim,ha=window.ShadyCSS.CustomStyleInterface),window.ShadyCSS={ScopingShim:da,prepareTemplate:function(e,t,n){da.flushCustomStyles(),da.prepareTemplate(e,t,n)},prepareTemplateDom:function(e,t){da.prepareTemplateDom(e,t)},prepareTemplateStyles:function(e,t,n){da.flushCustomStyles(),da.prepareTemplateStyles(e,t,n)},styleSubtree:function(e,t){da.flushCustomStyles(),da.styleSubtree(e,t)},styleElement:function(e){da.flushCustomStyles(),da.styleElement(e)},styleDocument:function(e){da.flushCustomStyles(),da.styleDocument(e)},flushCustomStyles:function(){da.flushCustomStyles()},getComputedStyleValue:function(e,t){return da.getComputedStyleValue(e,t)},nativeCss:Ds,nativeShadow:Ms,cssBuild:bs,disableRuntime:Ns},ua&&(window.ShadyCSS.ApplyShim=ua),ha&&(window.ShadyCSS.CustomStyleInterface=ha),function(e){function t(e){return""==e&&(s.call(this),this.m=!0),e.toLowerCase()}function n(e){var t=e.charCodeAt(0);return 32<t&&127>t&&-1==[34,35,60,62,63,96].indexOf(t)?e:encodeURIComponent(e)}function i(e){var t=e.charCodeAt(0);return 32<t&&127>t&&-1==[34,35,60,62,96].indexOf(t)?e:encodeURIComponent(e)}function r(e,r,o){function a(e){v.push(e)}var l=r||"scheme start",p=0,f="",m=!1,g=!1,v=[];e:for(;(null!=e[p-1]||0==p)&&!this.m;){var y=e[p];switch(l){case"scheme start":if(!y||!h.test(y)){if(r){a("Invalid scheme.");break e}f="",l="no scheme";continue}f+=y.toLowerCase(),l="scheme";break;case"scheme":if(y&&d.test(y))f+=y.toLowerCase();else{if(":"!=y){if(r){null!=y&&a("Code point not allowed in scheme: "+y);break e}f="",p=0,l="no scheme";continue}if(this.l=f,f="",r)break e;void 0!==c[this.l]&&(this.G=!0),l="file"==this.l?"relative":this.G&&o&&o.l==this.l?"relative or authority":this.G?"authority first slash":"scheme data"}break;case"scheme data":"?"==y?(this.A="?",l="query"):"#"==y?(this.C="#",l="fragment"):null!=y&&"\t"!=y&&"\n"!=y&&"\r"!=y&&(this.va+=n(y));break;case"no scheme":if(o&&void 0!==c[o.l]){l="relative";continue}a("Missing scheme."),s.call(this),this.m=!0;break;case"relative or authority":if("/"!=y||"/"!=e[p+1]){a("Expected /, got: "+y),l="relative";continue}l="authority ignore slashes";break;case"relative":if(this.G=!0,"file"!=this.l&&(this.l=o.l),null==y){this.o=o.o,this.v=o.v,this.s=o.s.slice(),this.A=o.A,this.B=o.B,this.j=o.j;break e}if("/"==y||"\\"==y)"\\"==y&&a("\\ is an invalid code point."),l="relative slash";else if("?"==y)this.o=o.o,this.v=o.v,this.s=o.s.slice(),this.A="?",this.B=o.B,this.j=o.j,l="query";else{if("#"!=y){l=e[p+1];var b=e[p+2];("file"!=this.l||!h.test(y)||":"!=l&&"|"!=l||null!=b&&"/"!=b&&"\\"!=b&&"?"!=b&&"#"!=b)&&(this.o=o.o,this.v=o.v,this.B=o.B,this.j=o.j,this.s=o.s.slice(),this.s.pop()),l="relative path";continue}this.o=o.o,this.v=o.v,this.s=o.s.slice(),this.A=o.A,this.C="#",this.B=o.B,this.j=o.j,l="fragment"}break;case"relative slash":if("/"!=y&&"\\"!=y){"file"!=this.l&&(this.o=o.o,this.v=o.v,this.B=o.B,this.j=o.j),l="relative path";continue}"\\"==y&&a("\\ is an invalid code point."),l="file"==this.l?"file host":"authority ignore slashes";break;case"authority first slash":if("/"!=y){a("Expected '/', got: "+y),l="authority ignore slashes";continue}l="authority second slash";break;case"authority second slash":if(l="authority ignore slashes","/"!=y){a("Expected '/', got: "+y);continue}break;case"authority ignore slashes":if("/"!=y&&"\\"!=y){l="authority";continue}a("Expected authority, got: "+y);break;case"authority":if("@"==y){for(m&&(a("@ already seen."),f+="%40"),m=!0,y=0;y<f.length;y++)"\t"==(b=f[y])||"\n"==b||"\r"==b?a("Invalid whitespace in authority."):":"==b&&null===this.j?this.j="":(b=n(b),null!==this.j?this.j+=b:this.B+=b);f=""}else{if(null==y||"/"==y||"\\"==y||"?"==y||"#"==y){p-=f.length,f="",l="host";continue}f+=y}break;case"file host":if(null==y||"/"==y||"\\"==y||"?"==y||"#"==y){2!=f.length||!h.test(f[0])||":"!=f[1]&&"|"!=f[1]?(0!=f.length&&(this.o=t.call(this,f),f=""),l="relative path start"):l="relative path";continue}"\t"==y||"\n"==y||"\r"==y?a("Invalid whitespace in file host."):f+=y;break;case"host":case"hostname":if(":"!=y||g){if(null==y||"/"==y||"\\"==y||"?"==y||"#"==y){if(this.o=t.call(this,f),f="",l="relative path start",r)break e;continue}"\t"!=y&&"\n"!=y&&"\r"!=y?("["==y?g=!0:"]"==y&&(g=!1),f+=y):a("Invalid code point in host/hostname: "+y)}else if(this.o=t.call(this,f),f="",l="port","hostname"==r)break e;break;case"port":if(/[0-9]/.test(y))f+=y;else{if(null==y||"/"==y||"\\"==y||"?"==y||"#"==y||r){if(""!=f&&((f=parseInt(f,10))!=c[this.l]&&(this.v=f+""),f=""),r)break e;l="relative path start";continue}"\t"==y||"\n"==y||"\r"==y?a("Invalid code point in port: "+y):(s.call(this),this.m=!0)}break;case"relative path start":if("\\"==y&&a("'\\' not allowed in path."),l="relative path","/"!=y&&"\\"!=y)continue;break;case"relative path":null!=y&&"/"!=y&&"\\"!=y&&(r||"?"!=y&&"#"!=y)?"\t"!=y&&"\n"!=y&&"\r"!=y&&(f+=n(y)):("\\"==y&&a("\\ not allowed in relative path."),(b=u[f.toLowerCase()])&&(f=b),".."==f?(this.s.pop(),"/"!=y&&"\\"!=y&&this.s.push("")):"."==f&&"/"!=y&&"\\"!=y?this.s.push(""):"."!=f&&("file"==this.l&&0==this.s.length&&2==f.length&&h.test(f[0])&&"|"==f[1]&&(f=f[0]+":"),this.s.push(f)),f="","?"==y?(this.A="?",l="query"):"#"==y&&(this.C="#",l="fragment"));break;case"query":r||"#"!=y?null!=y&&"\t"!=y&&"\n"!=y&&"\r"!=y&&(this.A+=i(y)):(this.C="#",l="fragment");break;case"fragment":null!=y&&"\t"!=y&&"\n"!=y&&"\r"!=y&&(this.C+=y)}p++}}function s(){this.B=this.va=this.l="",this.j=null,this.v=this.o="",this.s=[],this.C=this.A="",this.G=this.m=!1}function o(e,t){void 0===t||t instanceof o||(t=new o(String(t))),this.g=e,s.call(this),r.call(this,this.g.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,""),null,t)}var a=!1;try{var l=new URL("b","http://a");l.pathname="c%20d",a="http://a/c%20d"===l.href}catch(e){}if(!a){var c=Object.create(null);c.ftp=21,c.file=0,c.gopher=70,c.http=80,c.https=443,c.ws=80,c.wss=443;var u=Object.create(null);u["%2e"]=".",u[".%2e"]="..",u["%2e."]="..",u["%2e%2e"]="..";var h=/[a-zA-Z]/,d=/[a-zA-Z0-9+\-.]/;o.prototype={toString:function(){return this.href},get href(){if(this.m)return this.g;var e="";return""==this.B&&null==this.j||(e=this.B+(null!=this.j?":"+this.j:"")+"@"),this.protocol+(this.G?"//"+e+this.host:"")+this.pathname+this.A+this.C},set href(e){s.call(this),r.call(this,e)},get protocol(){return this.l+":"},set protocol(e){this.m||r.call(this,e+":","scheme start")},get host(){return this.m?"":this.v?this.o+":"+this.v:this.o},set host(e){!this.m&&this.G&&r.call(this,e,"host")},get hostname(){return this.o},set hostname(e){!this.m&&this.G&&r.call(this,e,"hostname")},get port(){return this.v},set port(e){!this.m&&this.G&&r.call(this,e,"port")},get pathname(){return this.m?"":this.G?"/"+this.s.join("/"):this.va},set pathname(e){!this.m&&this.G&&(this.s=[],r.call(this,e,"relative path start"))},get search(){return this.m||!this.A||"?"==this.A?"":this.A},set search(e){!this.m&&this.G&&(this.A="?","?"==e[0]&&(e=e.slice(1)),r.call(this,e,"query"))},get hash(){return this.m||!this.C||"#"==this.C?"":this.C},set hash(e){this.m||(e?(this.C="#","#"==e[0]&&(e=e.slice(1)),r.call(this,e,"fragment")):this.C="")},get origin(){var e;if(this.m||!this.l)return"";switch(this.l){case"data":case"file":case"javascript":case"mailto":return"null"}return(e=this.host)?this.l+"://"+e:""}};var p=e.URL;p&&(o.createObjectURL=function(e){return p.createObjectURL.apply(p,arguments)},o.revokeObjectURL=function(e){p.revokeObjectURL(e)}),e.URL=o}}(window);var pa=window.customElements,fa=!1,ma=null;function ga(){window.HTMLTemplateElement.bootstrap&&window.HTMLTemplateElement.bootstrap(window.document),ma&&ma(),fa=!0,window.WebComponents.ready=!0,document.dispatchEvent(new CustomEvent("WebComponentsReady",{bubbles:!0}))}pa.polyfillWrapFlushCallback&&pa.polyfillWrapFlushCallback((function(e){ma=e,fa&&e()})),"complete"!==document.readyState?(window.addEventListener("load",ga),window.addEventListener("DOMContentLoaded",(function(){window.removeEventListener("load",ga),ga()}))):ga()}).call(this)},1581:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;const i=n(22227);t.KeywordCxt=i.default;var r=n(93487);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const s=n(27159),o=n(93924),a=n(98),l=["/properties"],c="http://json-schema.org/draft-07/schema";class u extends s.default{_addVocabularies(){super._addVocabularies(),o.default.forEach((e=>this.addVocabulary(e)))}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const e=this.opts.$data?this.$dataMetaSchema(a,l):a;this.addMetaSchema(e,c,!1),this.refs["http://json-schema.org/schema"]=c}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(c)?c:void 0)}}t.default=u},57023:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class n{}t._CodeOrName=n,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class i extends n{constructor(e){if(super(),!t.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=i;class r extends n{constructor(e){super(),this._items="string"==typeof e?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const e=this._items[0];return""===e||'""'===e}get str(){var e;return null!==(e=this._str)&&void 0!==e?e:this._str=this._items.reduce(((e,t)=>`${e}${t}`),"")}get names(){var e;return null!==(e=this._names)&&void 0!==e?e:this._names=this._items.reduce(((e,t)=>(t instanceof i&&(e[t.str]=(e[t.str]||0)+1),e)),{})}}function s(e,...t){const n=[e[0]];let i=0;for(;i<t.length;)l(n,t[i]),n.push(e[++i]);return new r(n)}t._Code=r,t.nil=new r(""),t._=s;const o=new r("+");function a(e,...t){const n=[u(e[0])];let i=0;for(;i<t.length;)n.push(o),l(n,t[i]),n.push(o,u(e[++i]));return function(e){let t=1;for(;t<e.length-1;){if(e[t]===o){const n=c(e[t-1],e[t+1]);if(void 0!==n){e.splice(t-1,3,n);continue}e[t++]="+"}t++}}(n),new r(n)}function l(e,t){var n;t instanceof r?e.push(...t._items):t instanceof i?e.push(t):e.push("number"==typeof(n=t)||"boolean"==typeof n||null===n?n:u(Array.isArray(n)?n.join(","):n))}function c(e,t){if('""'===t)return e;if('""'===e)return t;if("string"==typeof e){if(t instanceof i||'"'!==e[e.length-1])return;return"string"!=typeof t?`${e.slice(0,-1)}${t}"`:'"'===t[0]?e.slice(0,-1)+t.slice(1):void 0}return"string"!=typeof t||'"'!==t[0]||e instanceof i?void 0:`"${e}${t.slice(1)}`}function u(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.str=a,t.addCodeArg=l,t.strConcat=function(e,t){return t.emptyStr()?e:e.emptyStr()?t:a`${e}${t}`},t.stringify=function(e){return new r(u(e))},t.safeStringify=u,t.getProperty=function(e){return"string"==typeof e&&t.IDENTIFIER.test(e)?new r(`.${e}`):s`[${e}]`}},93487:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const i=n(57023),r=n(98490);var s=n(57023);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return s._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return s.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return s.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return s.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return s.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return s.stringify}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return s.Name}});var o=n(98490);Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return o.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return o.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return o.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return o.varKinds}}),t.operators={GT:new i._Code(">"),GTE:new i._Code(">="),LT:new i._Code("<"),LTE:new i._Code("<="),EQ:new i._Code("==="),NEQ:new i._Code("!=="),NOT:new i._Code("!"),OR:new i._Code("||"),AND:new i._Code("&&"),ADD:new i._Code("+")};class a{optimizeNodes(){return this}optimizeNames(e,t){return this}}class l extends a{constructor(e,t,n){super(),this.varKind=e,this.name=t,this.rhs=n}render({es5:e,_n:t}){const n=e?r.varKinds.var:this.varKind,i=void 0===this.rhs?"":` = ${this.rhs}`;return`${n} ${this.name}${i};`+t}optimizeNames(e,t){if(e[this.name.str])return this.rhs&&(this.rhs=A(this.rhs,e,t)),this}get names(){return this.rhs instanceof i._CodeOrName?this.rhs.names:{}}}class c extends a{constructor(e,t,n){super(),this.lhs=e,this.rhs=t,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,t){if(!(this.lhs instanceof i.Name)||e[this.lhs.str]||this.sideEffects)return this.rhs=A(this.rhs,e,t),this}get names(){return L(this.lhs instanceof i.Name?{}:{...this.lhs.names},this.rhs)}}class u extends c{constructor(e,t,n,i){super(e,n,i),this.op=t}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}}class h extends a{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}}class d extends a{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}}class p extends a{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}}class f extends a{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,t){return this.code=A(this.code,e,t),this}get names(){return this.code instanceof i._CodeOrName?this.code.names:{}}}class m extends a{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce(((t,n)=>t+n.render(e)),"")}optimizeNodes(){const{nodes:e}=this;let t=e.length;for(;t--;){const n=e[t].optimizeNodes();Array.isArray(n)?e.splice(t,1,...n):n?e[t]=n:e.splice(t,1)}return e.length>0?this:void 0}optimizeNames(e,t){const{nodes:n}=this;let i=n.length;for(;i--;){const r=n[i];r.optimizeNames(e,t)||(M(e,r.names),n.splice(i,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce(((e,t)=>I(e,t.names)),{})}}class g extends m{render(e){return"{"+e._n+super.render(e)+"}"+e._n}}class v extends m{}class y extends g{}y.kind="else";class b extends g{constructor(e,t){super(t),this.condition=e}render(e){let t=`if(${this.condition})`+super.render(e);return this.else&&(t+="else "+this.else.render(e)),t}optimizeNodes(){super.optimizeNodes();const e=this.condition;if(!0===e)return this.nodes;let t=this.else;if(t){const e=t.optimizeNodes();t=this.else=Array.isArray(e)?new y(e):e}return t?!1===e?t instanceof b?t:t.nodes:this.nodes.length?this:new b(O(e),t instanceof b?[t]:t.nodes):!1!==e&&this.nodes.length?this:void 0}optimizeNames(e,t){var n;if(this.else=null===(n=this.else)||void 0===n?void 0:n.optimizeNames(e,t),super.optimizeNames(e,t)||this.else)return this.condition=A(this.condition,e,t),this}get names(){const e=super.names;return L(e,this.condition),this.else&&I(e,this.else.names),e}}b.kind="if";class w extends g{}w.kind="for";class E extends w{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iteration=A(this.iteration,e,t),this}get names(){return I(super.names,this.iteration.names)}}class _ extends w{constructor(e,t,n,i){super(),this.varKind=e,this.name=t,this.from=n,this.to=i}render(e){const t=e.es5?r.varKinds.var:this.varKind,{name:n,from:i,to:s}=this;return`for(${t} ${n}=${i}; ${n}<${s}; ${n}++)`+super.render(e)}get names(){const e=L(super.names,this.from);return L(e,this.to)}}class x extends w{constructor(e,t,n,i){super(),this.loop=e,this.varKind=t,this.name=n,this.iterable=i}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iterable=A(this.iterable,e,t),this}get names(){return I(super.names,this.iterable.names)}}class S extends g{constructor(e,t,n){super(),this.name=e,this.args=t,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}}S.kind="func";class T extends m{render(e){return"return "+super.render(e)}}T.kind="return";class k extends g{render(e){let t="try"+super.render(e);return this.catch&&(t+=this.catch.render(e)),this.finally&&(t+=this.finally.render(e)),t}optimizeNodes(){var e,t;return super.optimizeNodes(),null===(e=this.catch)||void 0===e||e.optimizeNodes(),null===(t=this.finally)||void 0===t||t.optimizeNodes(),this}optimizeNames(e,t){var n,i;return super.optimizeNames(e,t),null===(n=this.catch)||void 0===n||n.optimizeNames(e,t),null===(i=this.finally)||void 0===i||i.optimizeNames(e,t),this}get names(){const e=super.names;return this.catch&&I(e,this.catch.names),this.finally&&I(e,this.finally.names),e}}class C extends g{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}}C.kind="catch";class P extends g{render(e){return"finally"+super.render(e)}}function I(e,t){for(const n in t)e[n]=(e[n]||0)+(t[n]||0);return e}function L(e,t){return t instanceof i._CodeOrName?I(e,t.names):e}function A(e,t,n){return e instanceof i.Name?s(e):(r=e)instanceof i._Code&&r._items.some((e=>e instanceof i.Name&&1===t[e.str]&&void 0!==n[e.str]))?new i._Code(e._items.reduce(((e,t)=>(t instanceof i.Name&&(t=s(t)),t instanceof i._Code?e.push(...t._items):e.push(t),e)),[])):e;var r;function s(e){const i=n[e.str];return void 0===i||1!==t[e.str]?e:(delete t[e.str],i)}}function M(e,t){for(const n in t)e[n]=(e[n]||0)-(t[n]||0)}function O(e){return"boolean"==typeof e||"number"==typeof e||null===e?!e:i._`!${j(e)}`}P.kind="finally",t.CodeGen=class{constructor(e,t={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...t,_n:t.lines?"\n":""},this._extScope=e,this._scope=new r.Scope({parent:e}),this._nodes=[new v]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,t){const n=this._extScope.value(e,t);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,t){return this._extScope.getValue(e,t)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,t,n,i){const r=this._scope.toName(t);return void 0!==n&&i&&(this._constants[r.str]=n),this._leafNode(new l(e,r,n)),r}const(e,t,n){return this._def(r.varKinds.const,e,t,n)}let(e,t,n){return this._def(r.varKinds.let,e,t,n)}var(e,t,n){return this._def(r.varKinds.var,e,t,n)}assign(e,t,n){return this._leafNode(new c(e,t,n))}add(e,n){return this._leafNode(new u(e,t.operators.ADD,n))}code(e){return"function"==typeof e?e():e!==i.nil&&this._leafNode(new f(e)),this}object(...e){const t=["{"];for(const[n,r]of e)t.length>1&&t.push(","),t.push(n),(n!==r||this.opts.es5)&&(t.push(":"),i.addCodeArg(t,r));return t.push("}"),new i._Code(t)}if(e,t,n){if(this._blockNode(new b(e)),t&&n)this.code(t).else().code(n).endIf();else if(t)this.code(t).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new b(e))}else(){return this._elseNode(new y)}endIf(){return this._endBlockNode(b,y)}_for(e,t){return this._blockNode(e),t&&this.code(t).endFor(),this}for(e,t){return this._for(new E(e),t)}forRange(e,t,n,i,s=(this.opts.es5?r.varKinds.var:r.varKinds.let)){const o=this._scope.toName(e);return this._for(new _(s,o,t,n),(()=>i(o)))}forOf(e,t,n,s=r.varKinds.const){const o=this._scope.toName(e);if(this.opts.es5){const e=t instanceof i.Name?t:this.var("_arr",t);return this.forRange("_i",0,i._`${e}.length`,(t=>{this.var(o,i._`${e}[${t}]`),n(o)}))}return this._for(new x("of",s,o,t),(()=>n(o)))}forIn(e,t,n,s=(this.opts.es5?r.varKinds.var:r.varKinds.const)){if(this.opts.ownProperties)return this.forOf(e,i._`Object.keys(${t})`,n);const o=this._scope.toName(e);return this._for(new x("in",s,o,t),(()=>n(o)))}endFor(){return this._endBlockNode(w)}label(e){return this._leafNode(new h(e))}break(e){return this._leafNode(new d(e))}return(e){const t=new T;if(this._blockNode(t),this.code(e),1!==t.nodes.length)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(T)}try(e,t,n){if(!t&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');const i=new k;if(this._blockNode(i),this.code(e),t){const e=this.name("e");this._currNode=i.catch=new C(e),t(e)}return n&&(this._currNode=i.finally=new P,this.code(n)),this._endBlockNode(C,P)}throw(e){return this._leafNode(new p(e))}block(e,t){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(t),this}endBlock(e){const t=this._blockStarts.pop();if(void 0===t)throw new Error("CodeGen: not in self-balancing block");const n=this._nodes.length-t;if(n<0||void 0!==e&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=t,this}func(e,t=i.nil,n,r){return this._blockNode(new S(e,t,n)),r&&this.code(r).endFunc(),this}endFunc(){return this._endBlockNode(S)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,t){const n=this._currNode;if(n instanceof e||t&&n instanceof t)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${t?`${e.kind}/${t.kind}`:e.kind}"`)}_elseNode(e){const t=this._currNode;if(!(t instanceof b))throw new Error('CodeGen: "else" without "if"');return this._currNode=t.else=e,this}get _root(){return this._nodes[0]}get _currNode(){const e=this._nodes;return e[e.length-1]}set _currNode(e){const t=this._nodes;t[t.length-1]=e}},t.not=O;const N=R(t.operators.AND);t.and=function(...e){return e.reduce(N)};const D=R(t.operators.OR);function R(e){return(t,n)=>t===i.nil?n:n===i.nil?t:i._`${j(t)} ${e} ${j(n)}`}function j(e){return e instanceof i.Name?e:i._`(${e})`}t.or=function(...e){return e.reduce(D)}},98490:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const i=n(57023);class r extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}}var s;!function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"}(s=t.UsedValueState||(t.UsedValueState={})),t.varKinds={const:new i.Name("const"),let:new i.Name("let"),var:new i.Name("var")};class o{constructor({prefixes:e,parent:t}={}){this._names={},this._prefixes=e,this._parent=t}toName(e){return e instanceof i.Name?e:this.name(e)}name(e){return new i.Name(this._newName(e))}_newName(e){return`${e}${(this._names[e]||this._nameGroup(e)).index++}`}_nameGroup(e){var t,n;if((null===(n=null===(t=this._parent)||void 0===t?void 0:t._prefixes)||void 0===n?void 0:n.has(e))||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}}t.Scope=o;class a extends i.Name{constructor(e,t){super(t),this.prefix=e}setValue(e,{property:t,itemIndex:n}){this.value=e,this.scopePath=i._`.${new i.Name(t)}[${n}]`}}t.ValueScopeName=a;const l=i._`\n`;t.ValueScope=class extends o{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?l:i.nil}}get(){return this._scope}name(e){return new a(e,this._newName(e))}value(e,t){var n;if(void 0===t.ref)throw new Error("CodeGen: ref must be passed in value");const i=this.toName(e),{prefix:r}=i,s=null!==(n=t.key)&&void 0!==n?n:t.ref;let o=this._values[r];if(o){const e=o.get(s);if(e)return e}else o=this._values[r]=new Map;o.set(s,i);const a=this._scope[r]||(this._scope[r]=[]),l=a.length;return a[l]=t.ref,i.setValue(t,{property:r,itemIndex:l}),i}getValue(e,t){const n=this._values[e];if(n)return n.get(t)}scopeRefs(e,t=this._values){return this._reduceValues(t,(t=>{if(void 0===t.scopePath)throw new Error(`CodeGen: name "${t}" has no value`);return i._`${e}${t.scopePath}`}))}scopeCode(e=this._values,t,n){return this._reduceValues(e,(e=>{if(void 0===e.value)throw new Error(`CodeGen: name "${e}" has no value`);return e.value.code}),t,n)}_reduceValues(e,n,o={},a){let l=i.nil;for(const c in e){const u=e[c];if(!u)continue;const h=o[c]=o[c]||new Map;u.forEach((e=>{if(h.has(e))return;h.set(e,s.Started);let o=n(e);if(o){const n=this.opts.es5?t.varKinds.var:t.varKinds.const;l=i._`${l}${n} ${e} = ${o};${this.opts._n}`}else{if(!(o=null==a?void 0:a(e)))throw new r(e);l=i._`${l}${o}${this.opts._n}`}h.set(e,s.Completed)}))}return l}}},22227:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getData=void 0;const i=n(50453),r=n(76776),s=n(4181),o=n(93487),a=n(22141),l=n(44069);t.default=class{constructor(e,t,n){if(function({schema:e,opts:t,self:n},i,r){if(Array.isArray(i.keyword)?!i.keyword.includes(r):i.keyword!==r)throw new Error("ajv implementation error");const s=i.dependencies;if(null==s?void 0:s.some((t=>!Object.prototype.hasOwnProperty.call(e,t))))throw new Error(`parent schema must have dependencies of ${r}: ${s.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[r])){const e="keyword value is invalid: "+n.errorsText(i.validateSchema.errors);if("log"!==t.validateSchema)throw new Error(e);n.logger.error(e)}}(e,t,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=t.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=r.schemaRefOrVal(e,this.schema,n,this.$data),this.schemaType=t.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=t,this.$data)this.schemaCode=e.gen.const("vSchema",h(this.$data,e));else if(this.schemaCode=this.schemaValue,!function(e,t,n=!1){return!t.length||t.some((t=>"array"===t?Array.isArray(e):"object"===t?e&&"object"==typeof e&&!Array.isArray(e):typeof e==t||n&&void 0===e))}(this.schema,t.schemaType,t.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(t.schemaType)}`);("code"in t?t.trackErrors:!1!==t.errors)&&(this.errsCount=e.gen.const("_errs",a.default.errors))}result(e,t,n){this.gen.if(o.not(e)),n?n():this.error(),t?(this.gen.else(),t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,t){this.result(e,void 0,t)}fail(e){if(void 0===e)return this.error(),void(this.allErrors||this.gen.if(!1));this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:t}=this;this.fail(o._`${t} !== undefined && (${o.or(this.invalid$data(),e)})`)}error(e){(e?s.reportExtraError:s.reportError)(this,this.def.error)}$dataError(){s.reportError(this,this.def.$dataError||s.keyword$DataError)}reset(){if(void 0===this.errsCount)throw new Error('add "trackErrors" to keyword definition');s.resetErrorsCount(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,t){t?Object.assign(this.params,e):this.params=e}block$data(e,t,n=o.nil){this.gen.block((()=>{this.check$data(e,n),t()}))}check$data(e=o.nil,t=o.nil){if(!this.$data)return;const{gen:n,schemaCode:i,schemaType:r,def:s}=this;n.if(o.or(o._`${i} === undefined`,t)),e!==o.nil&&n.assign(e,!0),(r.length||s.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==o.nil&&n.assign(e,!1)),n.else()}invalid$data(){const{gen:e,schemaCode:t,schemaType:n,def:r,it:s}=this;return o.or(function(){if(n.length){if(!(t instanceof o.Name))throw new Error("ajv implementation error");const e=Array.isArray(n)?n:[n];return o._`${i.checkDataTypes(e,t,s.opts.strict,i.DataType.Wrong)}`}return o.nil}(),function(){if(r.validateSchema){const n=e.scopeValue("validate$data",{ref:r.validateSchema});return o._`!${n}(${t})`}return o.nil}())}subschema(e,t){return l.applySubschema(this.it,e,t)}mergeEvaluated(e,t){const{it:n,gen:i}=this;n.opts.unevaluated&&(!0!==n.props&&void 0!==e.props&&(n.props=r.mergeEvaluated.props(i,e.props,n.props,t)),!0!==n.items&&void 0!==e.items&&(n.items=r.mergeEvaluated.items(i,e.items,n.items,t)))}mergeValidEvaluated(e,t){const{it:n,gen:i}=this;if(n.opts.unevaluated&&(!0!==n.props||!0!==n.items))return i.if(t,(()=>this.mergeEvaluated(e,o.Name))),!0}};const c=/^\/(?:[^~]|~0|~1)*$/,u=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function h(e,{dataLevel:t,dataNames:n,dataPathArr:i}){let s,l;if(""===e)return a.default.rootData;if("/"===e[0]){if(!c.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);s=e,l=a.default.rootData}else{const r=u.exec(e);if(!r)throw new Error(`Invalid JSON-pointer: ${e}`);const o=+r[1];if(s=r[2],"#"===s){if(o>=t)throw new Error(p("property/index",o));return i[t-o]}if(o>t)throw new Error(p("data",o));if(l=n[t-o],!s)return l}let h=l;const d=s.split("/");for(const e of d)e&&(l=o._`${l}${o.getProperty(r.unescapeJsonPointer(e))}`,h=o._`${h} && ${l}`);return h;function p(e,n){return`Cannot access ${e} ${n} levels up, current level is ${t}`}}t.getData=h},78727:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=void 0;const i=n(32531);class r extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}t.ValidationError=r;class s extends Error{constructor(e,t,n){super(n||`can't resolve reference ${t} from id ${e}`),this.missingRef=i.resolveUrl(e,t),this.missingSchema=i.normalizeId(i.getFullPath(this.missingRef))}}t.MissingRefError=s,e.exports={ValidationError:r,MissingRefError:s}},4181:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const i=n(93487),r=n(22141);function s(e,t){const n=e.const("err",t);e.if(i._`${r.default.vErrors} === null`,(()=>e.assign(r.default.vErrors,i._`[${n}]`)),i._`${r.default.vErrors}.push(${n})`),e.code(i._`${r.default.errors}++`)}function o(e,t){const{gen:n,validateName:r,schemaEnv:s}=e;s.$async?n.throw(i._`new ${e.ValidationError}(${t})`):(n.assign(i._`${r}.errors`,t),n.return(!1))}t.keywordError={message:({keyword:e})=>i.str`should pass "${e}" keyword validation`},t.keyword$DataError={message:({keyword:e,schemaType:t})=>t?i.str`"${e}" keyword must be ${t} ($data)`:i.str`"${e}" keyword is invalid ($data)`},t.reportError=function(e,n=t.keywordError,r){const{it:a}=e,{gen:c,compositeRule:u,allErrors:h}=a,d=l(e,n);(null!=r?r:u||h)?s(c,d):o(a,i._`[${d}]`)},t.reportExtraError=function(e,n=t.keywordError){const{it:i}=e,{gen:a,compositeRule:c,allErrors:u}=i;s(a,l(e,n)),c||u||o(i,r.default.vErrors)},t.resetErrorsCount=function(e,t){e.assign(r.default.errors,t),e.if(i._`${r.default.vErrors} !== null`,(()=>e.if(t,(()=>e.assign(i._`${r.default.vErrors}.length`,t)),(()=>e.assign(r.default.vErrors,null)))))},t.extendErrors=function({gen:e,keyword:t,schemaValue:n,data:s,errsCount:o,it:a}){if(void 0===o)throw new Error("ajv implementation error");const l=e.name("err");e.forRange("i",o,r.default.errors,(o=>{e.const(l,i._`${r.default.vErrors}[${o}]`),e.if(i._`${l}.dataPath === undefined`,(()=>e.assign(i._`${l}.dataPath`,i.strConcat(r.default.dataPath,a.errorPath)))),e.assign(i._`${l}.schemaPath`,i.str`${a.errSchemaPath}/${t}`),a.opts.verbose&&(e.assign(i._`${l}.schema`,n),e.assign(i._`${l}.data`,s))}))};const a={keyword:new i.Name("keyword"),schemaPath:new i.Name("schemaPath"),params:new i.Name("params"),propertyName:new i.Name("propertyName"),message:new i.Name("message"),schema:new i.Name("schema"),parentSchema:new i.Name("parentSchema"),instancePath:new i.Name("instancePath")};function l(e,t){const{createErrors:n,opts:r}=e.it;return!1===n?i._`{}`:(r.jtd&&!r.ajvErrors?c:u)(e,t)}function c(e,{message:t}){const{gen:n,keyword:s,it:o}=e,{errorPath:l,errSchemaPath:c,opts:u}=o,h=[[a.instancePath,i.strConcat(r.default.dataPath,l)],[a.schemaPath,i.str`${c}/${s}`]];return u.messages&&h.push([a.message,"function"==typeof t?t(e):t]),n.object(...h)}function u(e,t){const{gen:n,keyword:s,data:o,schemaValue:l,it:c}=e,{topSchemaRef:u,schemaPath:h,errorPath:d,errSchemaPath:p,propertyName:f,opts:m}=c,{params:g,message:v}=t,y=[[a.keyword,s],[r.default.dataPath,i.strConcat(r.default.dataPath,d)],[a.schemaPath,i.str`${p}/${s}`],[a.params,"function"==typeof g?g(e):g||i._`{}`]];return f&&y.push([a.propertyName,f]),m.messages&&y.push([a.message,"function"==typeof v?v(e):v]),m.verbose&&y.push([a.schema,l],[a.parentSchema,i._`${u}${h}`],[r.default.data,o]),n.object(...y)}},25173:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveSchema=t.getCompilingSchema=t.resolveRef=t.compileSchema=t.SchemaEnv=void 0;const i=n(93487),r=n(78727),s=n(22141),o=n(32531),a=n(76776),l=n(74815),c=n(60540);class u{constructor(e){var t;let n;this.refs={},this.dynamicAnchors={},"object"==typeof e.schema&&(n=e.schema),this.schema=e.schema,this.root=e.root||this,this.baseId=null!==(t=e.baseId)&&void 0!==t?t:o.normalizeId(null==n?void 0:n.$id),this.localRefs=e.localRefs,this.meta=e.meta,this.$async=null==n?void 0:n.$async,this.refs={}}}function h(e){const t=p.call(this,e);if(t)return t;const n=o.getFullPath(e.root.baseId),{es5:a,lines:c}=this.opts.code,{ownProperties:u}=this.opts,h=new i.CodeGen(this.scope,{es5:a,lines:c,ownProperties:u});let d;e.$async&&(d=h.scopeValue("Error",{ref:r.ValidationError,code:i._`require("ajv/dist/compile/error_classes").ValidationError`}));const f=h.scopeName("validate");e.validateName=f;const m={gen:h,allErrors:this.opts.allErrors,data:s.default.data,parentData:s.default.parentData,parentDataProperty:s.default.parentDataProperty,dataNames:[s.default.data],dataPathArr:[i.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:h.scopeValue("schema",!0===this.opts.code.source?{ref:e.schema,code:i.stringify(e.schema)}:{ref:e.schema}),validateName:f,ValidationError:d,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:i.nil,errSchemaPath:this.opts.jtd?"":"#",errorPath:i._`""`,opts:this.opts,self:this};let g;try{this._compilations.add(e),l.validateFunctionCode(m),h.optimize(this.opts.code.optimize);const t=h.toString();g=`${h.scopeRefs(s.default.scope)}return ${t}`,this.opts.code.process&&(g=this.opts.code.process(g,e));const n=new Function(`${s.default.self}`,`${s.default.scope}`,g)(this,this.scope.get());if(this.scope.value(f,{ref:n}),n.errors=null,n.schema=e.schema,n.schemaEnv=e,e.$async&&(n.$async=!0),!0===this.opts.code.source&&(n.source={validateName:f,validateCode:t,scopeValues:h._values}),this.opts.unevaluated){const{props:e,items:t}=m;n.evaluated={props:e instanceof i.Name?void 0:e,items:t instanceof i.Name?void 0:t,dynamicProps:e instanceof i.Name,dynamicItems:t instanceof i.Name},n.source&&(n.source.evaluated=i.stringify(n.evaluated))}return e.validate=n,e}catch(t){throw delete e.validate,delete e.validateName,g&&this.logger.error("Error compiling schema, function code:",g),t}finally{this._compilations.delete(e)}}function d(e){return o.inlineRef(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:h.call(this,e)}function p(e){for(const i of this._compilations)if(n=e,(t=i).schema===n.schema&&t.root===n.root&&t.baseId===n.baseId)return i;var t,n}function f(e,t){let n;for(;"string"==typeof(n=this.refs[t]);)t=n;return n||this.schemas[t]||m.call(this,e,t)}function m(e,t){const n=c.parse(t),i=o._getFullPath(n);let r=o.getFullPath(e.baseId);if(Object.keys(e.schema).length>0&&i===r)return v.call(this,n,e);const s=o.normalizeId(i),a=this.refs[s]||this.schemas[s];if("string"==typeof a){const t=m.call(this,e,a);if("object"!=typeof(null==t?void 0:t.schema))return;return v.call(this,n,t)}if("object"==typeof(null==a?void 0:a.schema)){if(a.validate||h.call(this,a),s===o.normalizeId(t)){const{schema:t}=a;return t.$id&&(r=o.resolveUrl(r,t.$id)),new u({schema:t,root:e,baseId:r})}return v.call(this,n,a)}}t.SchemaEnv=u,t.compileSchema=h,t.resolveRef=function(e,t,n){var i;n=o.resolveUrl(t,n);const r=e.refs[n];if(r)return r;let s=f.call(this,e,n);if(void 0===s){const r=null===(i=e.localRefs)||void 0===i?void 0:i[n];r&&(s=new u({schema:r,root:e,baseId:t}))}return void 0!==s?e.refs[n]=d.call(this,s):void 0},t.getCompilingSchema=p,t.resolveSchema=m;const g=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function v(e,{baseId:t,schema:n,root:i}){var r;if("/"!==(null===(r=e.fragment)||void 0===r?void 0:r[0]))return;for(const i of e.fragment.slice(1).split("/")){if("boolean"==typeof n)return;if(void 0===(n=n[a.unescapeFragment(i)]))return;!g.has(i)&&"object"==typeof n&&n.$id&&(t=o.resolveUrl(t,n.$id))}let s;if("boolean"!=typeof n&&n.$ref&&!a.schemaHasRulesButRef(n,this.RULES)){const e=o.resolveUrl(t,n.$ref);s=m.call(this,i,e)}return s=s||new u({schema:n,root:i,baseId:t}),s.schema!==s.root.schema?s:void 0}},22141:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(93487),r={data:new i.Name("data"),valCxt:new i.Name("valCxt"),dataPath:new i.Name("dataPath"),parentData:new i.Name("parentData"),parentDataProperty:new i.Name("parentDataProperty"),rootData:new i.Name("rootData"),dynamicAnchors:new i.Name("dynamicAnchors"),vErrors:new i.Name("vErrors"),errors:new i.Name("errors"),this:new i.Name("this"),self:new i.Name("self"),scope:new i.Name("scope"),json:new i.Name("json"),jsonPos:new i.Name("jsonPos"),jsonLen:new i.Name("jsonLen"),jsonPart:new i.Name("jsonPart")};t.default=r},32531:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSchemaRefs=t.resolveUrl=t.normalizeId=t._getFullPath=t.getFullPath=t.inlineRef=void 0;const i=n(76776),r=n(64063),s=n(49461),o=n(60540),a=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);t.inlineRef=function(e,t=!0){return"boolean"==typeof e||(!0===t?!c(e):!!t&&u(e)<=t)};const l=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function c(e){for(const t in e){if(l.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(c))return!0;if("object"==typeof n&&c(n))return!0}return!1}function u(e){let t=0;for(const n in e){if("$ref"===n)return 1/0;if(t++,!a.has(n)&&("object"==typeof e[n]&&i.eachItem(e[n],(e=>t+=u(e))),t===1/0))return 1/0}return t}function h(e="",t){return!1!==t&&(e=f(e)),d(o.parse(e))}function d(e){return o.serialize(e).split("#")[0]+"#"}t.getFullPath=h,t._getFullPath=d;const p=/#\/?$/;function f(e){return e?e.replace(p,""):""}t.normalizeId=f,t.resolveUrl=function(e,t){return t=f(t),o.resolve(e,t)};const m=/^[a-z_][-a-z0-9._]*$/i;t.getSchemaRefs=function(e){if("boolean"==typeof e)return{};const t=f(e.$id),n={"":t},i=h(t,!1),a={},l=new Set;return s(e,{allKeys:!0},((e,t,r,s)=>{if(void 0===s)return;const h=i+t;let d=n[s];function p(t){if(t=f(d?o.resolve(d,t):t),l.has(t))throw u(t);l.add(t);let n=this.refs[t];return"string"==typeof n&&(n=this.refs[n]),"object"==typeof n?c(e,n.schema,t):t!==f(h)&&("#"===t[0]?(c(e,a[t],t),a[t]=e):this.refs[t]=h),t}function g(e){if("string"==typeof e){if(!m.test(e))throw new Error(`invalid anchor "${e}"`);p.call(this,`#${e}`)}}"string"==typeof e.$id&&(d=p.call(this,e.$id)),g.call(this,e.$anchor),g.call(this,e.$dynamicAnchor),n[t]=d})),a;function c(e,t,n){if(void 0!==t&&!r(e,t))throw u(n)}function u(e){return new Error(`reference "${e}" resolves to more than one schema`)}}},13141:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRules=t.isJSONType=void 0;const n=new Set(["string","number","integer","boolean","null","object","array"]);t.isJSONType=function(e){return"string"==typeof e&&n.has(e)},t.getRules=function(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}},44069:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applySubschema=t.Type=void 0;const i=n(74815),r=n(76776),s=n(93487);var o;!function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"}(o=t.Type||(t.Type={})),t.applySubschema=function(e,t,n){const a=function(e,{keyword:t,schemaProp:n,schema:i,schemaPath:o,errSchemaPath:a,topSchemaRef:l}){if(void 0!==t&&void 0!==i)throw new Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==t){const i=e.schema[t];return void 0===n?{schema:i,schemaPath:s._`${e.schemaPath}${s.getProperty(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:i[n],schemaPath:s._`${e.schemaPath}${s.getProperty(t)}${s.getProperty(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${r.escapeFragment(n)}`}}if(void 0!==i){if(void 0===o||void 0===a||void 0===l)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:i,schemaPath:o,topSchemaRef:l,errSchemaPath:a}}throw new Error('either "keyword" or "schema" must be passed')}(e,t);!function(e,t,{dataProp:n,dataPropType:i,data:a,dataTypes:l,propertyName:c}){if(void 0!==a&&void 0!==n)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:u}=t;if(void 0!==n){const{errorPath:a,dataPathArr:l,opts:c}=t;h(u.let("data",s._`${t.data}${s.getProperty(n)}`,!0)),e.errorPath=s.str`${a}${function(e,t,n){if(e instanceof s.Name){const i=t===o.Num;return n?i?s._`"[" + ${e} + "]"`:s._`"['" + ${e} + "']"`:i?s._`"/" + ${e}`:s._`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?s.getProperty(e).toString():"/"+r.escapeJsonPointer(e)}(n,i,c.jsPropertySyntax)}`,e.parentDataProperty=s._`${n}`,e.dataPathArr=[...l,e.parentDataProperty]}function h(n){e.data=n,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,n]}void 0!==a&&(h(a instanceof s.Name?a:u.let("data",a,!0)),void 0!==c&&(e.propertyName=c)),l&&(e.dataTypes=l)}(a,e,t),function(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:i,createErrors:r,allErrors:s}){void 0!==i&&(e.compositeRule=i),void 0!==r&&(e.createErrors=r),void 0!==s&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=n}(a,t);const l={...e,...a,items:void 0,props:void 0};return i.subschemaCode(l,n),l}},74776:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=e.length;let n,i=0,r=0;for(;r<t;)i++,n=e.charCodeAt(r++),n>=55296&&n<=56319&&r<t&&(n=e.charCodeAt(r),56320==(64512&n)&&r++);return i}},76776:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.func=t.setEvaluated=t.evaluatedPropsToName=t.mergeEvaluated=t.eachItem=t.unescapeJsonPointer=t.escapeJsonPointer=t.escapeFragment=t.unescapeFragment=t.schemaRefOrVal=t.schemaHasRulesButRef=t.schemaHasRules=t.checkUnknownRules=t.alwaysValidSchema=t.toHash=void 0;const i=n(93487),r=n(74815);function s(e,t=e.schema){const{opts:n,self:i}=e;if(!n.strict)return;if("boolean"==typeof t)return;const s=i.RULES.keywords;for(const n in t)s[n]||r.checkStrictMode(e,`unknown keyword: "${n}"`)}function o(e,t){if("boolean"==typeof e)return!e;for(const n in e)if(t[n])return!0;return!1}function a(e){return"number"==typeof e?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}function l(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function c({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(s,o,a,l)=>{const c=void 0===a?o:a instanceof i.Name?(o instanceof i.Name?e(s,o,a):t(s,o,a),a):o instanceof i.Name?(t(s,a,o),o):n(o,a);return l!==i.Name||c instanceof i.Name?c:r(s,c)}}function u(e,t){if(!0===t)return e.var("props",!0);const n=e.var("props",i._`{}`);return void 0!==t&&h(e,n,t),n}function h(e,t,n){Object.keys(n).forEach((n=>e.assign(i._`${t}${i.getProperty(n)}`,!0)))}t.toHash=function(e){const t={};for(const n of e)t[n]=!0;return t},t.alwaysValidSchema=function(e,t){return"boolean"==typeof t?t:0===Object.keys(t).length||(s(e,t),!o(t,e.self.RULES.all))},t.checkUnknownRules=s,t.schemaHasRules=o,t.schemaHasRulesButRef=function(e,t){if("boolean"==typeof e)return!e;for(const n in e)if("$ref"!==n&&t.all[n])return!0;return!1},t.schemaRefOrVal=function({topSchemaRef:e,schemaPath:t},n,r,s){if(!s){if("number"==typeof n||"boolean"==typeof n)return n;if("string"==typeof n)return i._`${n}`}return i._`${e}${t}${i.getProperty(r)}`},t.unescapeFragment=function(e){return l(decodeURIComponent(e))},t.escapeFragment=function(e){return encodeURIComponent(a(e))},t.escapeJsonPointer=a,t.unescapeJsonPointer=l,t.eachItem=function(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)},t.mergeEvaluated={props:c({mergeNames:(e,t,n)=>e.if(i._`${n} !== true && ${t} !== undefined`,(()=>{e.if(i._`${t} === true`,(()=>e.assign(n,!0)),(()=>e.assign(n,i._`${n} || {}`).code(i._`Object.assign(${n}, ${t})`)))})),mergeToName:(e,t,n)=>e.if(i._`${n} !== true`,(()=>{!0===t?e.assign(n,!0):(e.assign(n,i._`${n} || {}`),h(e,n,t))})),mergeValues:(e,t)=>!0===e||{...e,...t},resultToName:u}),items:c({mergeNames:(e,t,n)=>e.if(i._`${n} !== true && ${t} !== undefined`,(()=>e.assign(n,i._`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`))),mergeToName:(e,t,n)=>e.if(i._`${n} !== true`,(()=>e.assign(n,!0===t||i._`${n} > ${t} ? ${n} : ${t}`))),mergeValues:(e,t)=>!0===e||Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})},t.evaluatedPropsToName=u,t.setEvaluated=h,t.func=function(e,t){return e.scopeValue("func",{ref:t,code:t.code})}},58876:(e,t)=>{"use strict";function n(e,t){return t.rules.some((t=>i(e,t)))}function i(e,t){var n;return void 0!==e[t.keyword]||(null===(n=t.definition.implements)||void 0===n?void 0:n.some((t=>void 0!==e[t])))}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldUseRule=t.shouldUseGroup=t.schemaHasRulesForType=void 0,t.schemaHasRulesForType=function({schema:e,self:t},i){const r=t.RULES.types[i];return r&&!0!==r&&n(e,r)},t.shouldUseGroup=n,t.shouldUseRule=i},55667:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.boolOrEmptySchema=t.topBoolOrEmptySchema=void 0;const i=n(4181),r=n(93487),s=n(22141),o={message:"boolean schema is false"};function a(e,t){const{gen:n,data:r}=e,s={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};i.reportError(s,o,t)}t.topBoolOrEmptySchema=function(e){const{gen:t,schema:n,validateName:i}=e;!1===n?a(e,!1):"object"==typeof n&&!0===n.$async?t.return(s.default.data):(t.assign(r._`${i}.errors`,null),t.return(!0))},t.boolOrEmptySchema=function(e,t){const{gen:n,schema:i}=e;!1===i?(n.var(t,!1),a(e)):n.var(t,!0)}},50453:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reportTypeError=t.checkDataTypes=t.checkDataType=t.coerceAndCheckDataType=t.getJSONTypes=t.getSchemaTypes=t.DataType=void 0;const i=n(13141),r=n(58876),s=n(4181),o=n(93487),a=n(76776);var l;function c(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(i.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}!function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"}(l=t.DataType||(t.DataType={})),t.getSchemaTypes=function(e){const t=c(e.type);if(t.includes("null")){if(!1===e.nullable)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&void 0!==e.nullable)throw new Error('"nullable" cannot be used without "type"');!0===e.nullable&&t.push("null")}return t},t.getJSONTypes=c,t.coerceAndCheckDataType=function(e,t){const{gen:n,data:i,opts:s}=e,a=function(e,t){return t?e.filter((e=>u.has(e)||"array"===t&&"array"===e)):[]}(t,s.coerceTypes),c=t.length>0&&!(0===a.length&&1===t.length&&r.schemaHasRulesForType(e,t[0]));if(c){const r=d(t,i,s.strict,l.Wrong);n.if(r,(()=>{a.length?function(e,t,n){const{gen:i,data:r,opts:s}=e,a=i.let("dataType",o._`typeof ${r}`),l=i.let("coerced",o._`undefined`);"array"===s.coerceTypes&&i.if(o._`${a} == 'object' && Array.isArray(${r}) && ${r}.length == 1`,(()=>i.assign(r,o._`${r}[0]`).assign(a,o._`typeof ${r}`).if(d(t,r,s.strict),(()=>i.assign(l,r))))),i.if(o._`${l} !== undefined`);for(const e of n)(u.has(e)||"array"===e&&"array"===s.coerceTypes)&&c(e);function c(e){switch(e){case"string":return void i.elseIf(o._`${a} == "number" || ${a} == "boolean"`).assign(l,o._`"" + ${r}`).elseIf(o._`${r} === null`).assign(l,o._`""`);case"number":return void i.elseIf(o._`${a} == "boolean" || ${r} === null
              || (${a} == "string" && ${r} && ${r} == +${r})`).assign(l,o._`+${r}`);case"integer":return void i.elseIf(o._`${a} === "boolean" || ${r} === null
              || (${a} === "string" && ${r} && ${r} == +${r} && !(${r} % 1))`).assign(l,o._`+${r}`);case"boolean":return void i.elseIf(o._`${r} === "false" || ${r} === 0 || ${r} === null`).assign(l,!1).elseIf(o._`${r} === "true" || ${r} === 1`).assign(l,!0);case"null":return i.elseIf(o._`${r} === "" || ${r} === 0 || ${r} === false`),void i.assign(l,null);case"array":i.elseIf(o._`${a} === "string" || ${a} === "number"
              || ${a} === "boolean" || ${r} === null`).assign(l,o._`[${r}]`)}}i.else(),f(e),i.endIf(),i.if(o._`${l} !== undefined`,(()=>{i.assign(r,l),function({gen:e,parentData:t,parentDataProperty:n},i){e.if(o._`${t} !== undefined`,(()=>e.assign(o._`${t}[${n}]`,i)))}(e,l)}))}(e,t,a):f(e)}))}return c};const u=new Set(["string","number","integer","boolean","null"]);function h(e,t,n,i=l.Correct){const r=i===l.Correct?o.operators.EQ:o.operators.NEQ;let s;switch(e){case"null":return o._`${t} ${r} null`;case"array":s=o._`Array.isArray(${t})`;break;case"object":s=o._`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=a(o._`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=a();break;default:return o._`typeof ${t} ${r} ${e}`}return i===l.Correct?s:o.not(s);function a(e=o.nil){return o.and(o._`typeof ${t} == "number"`,e,n?o._`isFinite(${t})`:o.nil)}}function d(e,t,n,i){if(1===e.length)return h(e[0],t,n,i);let r;const s=a.toHash(e);if(s.array&&s.object){const e=o._`typeof ${t} != "object"`;r=s.null?e:o._`!${t} || ${e}`,delete s.null,delete s.array,delete s.object}else r=o.nil;s.number&&delete s.integer;for(const e in s)r=o.and(r,h(e,t,n,i));return r}t.checkDataType=h,t.checkDataTypes=d;const p={message:({schema:e})=>o.str`should be ${e}`,params:({schema:e,schemaValue:t})=>"string"==typeof e?o._`{type: ${e}}`:o._`{type: ${t}}`};function f(e){const t=function(e){const{gen:t,data:n,schema:i}=e,r=a.schemaRefOrVal(e,i,"type");return{gen:t,keyword:"type",data:n,schema:i.type,schemaCode:r,schemaValue:r,parentSchema:i,params:{},it:e}}(e);s.reportError(t,p)}t.reportTypeError=f},90313:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assignDefaults=void 0;const i=n(93487),r=n(74815);function s(e,t,n){const{gen:s,compositeRule:o,data:a,opts:l}=e;if(void 0===n)return;const c=i._`${a}${i.getProperty(t)}`;if(o)return void r.checkStrictMode(e,`default is ignored for: ${c}`);let u=i._`${c} === undefined`;"empty"===l.useDefaults&&(u=i._`${u} || ${c} === null || ${c} === ""`),s.if(u,i._`${c} = ${i.stringify(n)}`)}t.assignDefaults=function(e,t){const{properties:n,items:i}=e.schema;if("object"===t&&n)for(const t in n)s(e,t,n[t].default);else"array"===t&&Array.isArray(i)&&i.forEach(((t,n)=>s(e,n,t.default)))}},74815:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkStrictMode=t.schemaCxtHasRules=t.subschemaCode=t.validateFunctionCode=void 0;const i=n(55667),r=n(50453),s=n(7449),o=n(93487),a=n(22141),l=n(32531),c=n(76776);function u({gen:e,validateName:t,schema:n,schemaEnv:i,opts:r},s){r.code.es5?e.func(t,o._`${a.default.data}, ${a.default.valCxt}`,i.$async,(()=>{e.code(o._`"use strict"; ${h(n,r)}`),function(e,t){e.if(a.default.valCxt,(()=>{e.var(a.default.dataPath,o._`${a.default.valCxt}.${a.default.dataPath}`),e.var(a.default.parentData,o._`${a.default.valCxt}.${a.default.parentData}`),e.var(a.default.parentDataProperty,o._`${a.default.valCxt}.${a.default.parentDataProperty}`),e.var(a.default.rootData,o._`${a.default.valCxt}.${a.default.rootData}`),t.dynamicRef&&e.var(a.default.dynamicAnchors,o._`${a.default.valCxt}.${a.default.dynamicAnchors}`)}),(()=>{e.var(a.default.dataPath,o._`""`),e.var(a.default.parentData,o._`undefined`),e.var(a.default.parentDataProperty,o._`undefined`),e.var(a.default.rootData,a.default.data),t.dynamicRef&&e.var(a.default.dynamicAnchors,o._`{}`)}))}(e,r),e.code(s)})):e.func(t,o._`${a.default.data}, ${function(e){return o._`{${a.default.dataPath}="", ${a.default.parentData}, ${a.default.parentDataProperty}, ${a.default.rootData}=${a.default.data}${e.dynamicRef?o._`, ${a.default.dynamicAnchors}={}`:o.nil}}={}`}(r)}`,i.$async,(()=>e.code(h(n,r)).code(s)))}function h(e,t){return"object"==typeof e&&e.$id&&(t.code.source||t.code.process)?o._`/*# sourceURL=${e.$id} */`:o.nil}function d({schema:e,self:t}){if("boolean"==typeof e)return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function p(e){return"boolean"!=typeof e.schema}function f(e){c.checkUnknownRules(e),function(e){const{schema:t,errSchemaPath:n,opts:i,self:r}=e;t.$ref&&i.ignoreKeywordsWithRef&&c.schemaHasRulesButRef(t,r.RULES)&&r.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}(e)}function m(e,t){if(e.opts.jtd)return s.schemaKeywords(e,[],!1,t);const n=r.getSchemaTypes(e.schema),i=r.coerceAndCheckDataType(e,n);s.schemaKeywords(e,n,!i,t)}function g({gen:e,schemaEnv:t,schema:n,errSchemaPath:i,opts:r}){const s=n.$comment;if(!0===r.$comment)e.code(o._`${a.default.self}.logger.log(${s})`);else if("function"==typeof r.$comment){const n=o.str`${i}/$comment`,r=e.scopeValue("root",{ref:t.root});e.code(o._`${a.default.self}.opts.$comment(${s}, ${n}, ${r}.schema)`)}}function v(e,t,n=e.opts.strict){if(n){if(t=`strict mode: ${t}`,!0===n)throw new Error(t);e.self.logger.warn(t)}}t.validateFunctionCode=function(e){p(e)&&(f(e),d(e))?function(e){const{schema:t,opts:n,gen:i}=e;u(e,(()=>{n.$comment&&t.$comment&&g(e),function(e){const{schema:t,opts:n}=e;void 0!==t.default&&n.useDefaults&&n.strict&&v(e,"default is ignored in the schema root")}(e),i.let(a.default.vErrors,null),i.let(a.default.errors,0),n.unevaluated&&function(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",o._`${n}.evaluated`),t.if(o._`${e.evaluated}.dynamicProps`,(()=>t.assign(o._`${e.evaluated}.props`,o._`undefined`))),t.if(o._`${e.evaluated}.dynamicItems`,(()=>t.assign(o._`${e.evaluated}.items`,o._`undefined`)))}(e),m(e),function(e){const{gen:t,schemaEnv:n,validateName:i,ValidationError:r,opts:s}=e;n.$async?t.if(o._`${a.default.errors} === 0`,(()=>t.return(a.default.data)),(()=>t.throw(o._`new ${r}(${a.default.vErrors})`))):(t.assign(o._`${i}.errors`,a.default.vErrors),s.unevaluated&&function({gen:e,evaluated:t,props:n,items:i}){n instanceof o.Name&&e.assign(o._`${t}.props`,n),i instanceof o.Name&&e.assign(o._`${t}.items`,i)}(e),t.return(o._`${a.default.errors} === 0`))}(e)}))}(e):u(e,(()=>i.topBoolOrEmptySchema(e)))},t.subschemaCode=function(e,t){p(e)&&(f(e),d(e))?function(e,t){const{schema:n,gen:i,opts:r}=e;r.$comment&&n.$comment&&g(e),function(e){e.schema.$id&&(e.baseId=l.resolveUrl(e.baseId,e.schema.$id))}(e),function(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}(e);const s=i.const("_errs",a.default.errors);m(e,s),i.var(t,o._`${s} === ${a.default.errors}`)}(e,t):i.boolOrEmptySchema(e,t)},t.schemaCxtHasRules=d,t.checkStrictMode=v},7449:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.schemaKeywords=void 0;const i=n(58876),r=n(50453),s=n(90313),o=n(95005),a=n(76776),l=n(74815),c=n(93487),u=n(22141);function h(e,t){const{gen:n,schema:r,opts:{useDefaults:a}}=e;a&&s.assignDefaults(e,t.type),n.block((()=>{for(const n of t.rules)i.shouldUseRule(r,n)&&o.keywordCode(e,n.keyword,n.definition,t.type)}))}function d(e,t){return e.includes(t)||"integer"===t&&e.includes("number")}function p(e,t){t+=` at "${e.schemaEnv.baseId+e.errSchemaPath}" (strictTypes)`,l.checkStrictMode(e,t,e.opts.strictTypes)}t.schemaKeywords=function(e,t,n,s){const{gen:l,schema:f,data:m,allErrors:g,opts:v,self:y}=e,{RULES:b}=y;function w(o){i.shouldUseGroup(f,o)&&(o.type?(l.if(r.checkDataType(o.type,m,v.strict)),h(e,o),1===t.length&&t[0]===o.type&&n&&(l.else(),r.reportTypeError(e)),l.endIf()):h(e,o),g||l.if(c._`${u.default.errors} === ${s||0}`))}!f.$ref||!v.ignoreKeywordsWithRef&&a.schemaHasRulesButRef(f,b)?(v.jtd||function(e,t){!e.schemaEnv.meta&&e.opts.strictTypes&&(function(e,t){t.length&&(e.dataTypes.length?(t.forEach((t=>{d(e.dataTypes,t)||p(e,`type "${t}" not allowed by context "${e.dataTypes.join(",")}"`)})),e.dataTypes=e.dataTypes.filter((e=>d(t,e)))):e.dataTypes=t)}(e,t),e.opts.allowUnionTypes||function(e,t){t.length>1&&(2!==t.length||!t.includes("null"))&&p(e,"use allowUnionTypes to allow union type keyword")}(e,t),function(e,t){const n=e.self.RULES.all;for(const r in n){const s=n[r];if("object"==typeof s&&i.shouldUseRule(e.schema,s)){const{type:n}=s.definition;n.length&&!n.some((e=>{return i=e,(n=t).includes(i)||"number"===i&&n.includes("integer");var n,i}))&&p(e,`missing type "${n.join(",")}" for keyword "${r}"`)}}}(e,e.dataTypes))}(e,t),l.block((()=>{for(const e of b.rules)w(e);w(b.post)}))):l.block((()=>o.keywordCode(e,"$ref",b.all.$ref.definition)))}},95005:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.keywordCode=void 0;const i=n(22227),r=n(4181),s=n(10412),o=n(93487),a=n(22141);function l(e,t){var n;const{gen:i,keyword:l,schema:h,parentSchema:d,$data:p,it:f}=e;!function({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}(f,t);const m=!p&&t.compile?t.compile.call(f.self,h,d,f):t.validate,g=u(i,l,m),v=i.let("valid");function y(n=(t.async?o._`await `:o.nil)){const r=f.opts.passContext?a.default.this:a.default.self,l=!("compile"in t&&!p||!1===t.schema);i.assign(v,o._`${n}${s.callValidateCode(e,g,r,l)}`,t.modifying)}function b(e){var n;i.if(o.not(null!==(n=t.valid)&&void 0!==n?n:v),e)}e.block$data(v,(function(){if(!1===t.errors)y(),t.modifying&&c(e),b((()=>e.error()));else{const n=t.async?function(){const e=i.let("ruleErrs",null);return i.try((()=>y(o._`await `)),(t=>i.assign(v,!1).if(o._`${t} instanceof ${f.ValidationError}`,(()=>i.assign(e,o._`${t}.errors`)),(()=>i.throw(t))))),e}():function(){const e=o._`${g}.errors`;return i.assign(e,null),y(o.nil),e}();t.modifying&&c(e),b((()=>function(e,t){const{gen:n}=e;n.if(o._`Array.isArray(${t})`,(()=>{n.assign(a.default.vErrors,o._`${a.default.vErrors} === null ? ${t} : ${a.default.vErrors}.concat(${t})`).assign(a.default.errors,o._`${a.default.vErrors}.length`),r.extendErrors(e)}),(()=>e.error()))}(e,n)))}})),e.ok(null!==(n=t.valid)&&void 0!==n?n:v)}function c(e){const{gen:t,data:n,it:i}=e;t.if(i.parentData,(()=>t.assign(n,o._`${i.parentData}[${i.parentDataProperty}]`)))}function u(e,t,n){if(void 0===n)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword","function"==typeof n?{ref:n}:{ref:n,code:o.stringify(n)})}t.keywordCode=function(e,t,n,r){const s=new i.default(e,n,t);"code"in n?n.code(s,r):s.$data&&n.validate?l(s,n):"macro"in n?function(e,t){const{gen:n,keyword:i,schema:r,parentSchema:s,it:a}=e,l=t.macro.call(a.self,r,s,a),c=u(n,i,l);!1!==a.opts.validateSchema&&a.self.validateSchema(l,!0);const h=n.name("valid");e.subschema({schema:l,schemaPath:o.nil,errSchemaPath:`${a.errSchemaPath}/${i}`,topSchemaRef:c,compositeRule:!0},h),e.pass(h,(()=>e.error(!0)))}(s,n):(n.compile||n.validate)&&l(s,n)}},27159:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;const i=n(22227);t.KeywordCxt=i.default;var r=n(93487);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const s=n(78727),o=n(13141),a=n(25173),l=n(93487),c=n(32531),u=n(50453),h=n(76776),d=n(64775),p=["removeAdditional","useDefaults","coerceTypes"],f=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),m={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",schemaId:"JSON Schema draft-04 is not supported in Ajv v7.",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",strictNumbers:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key."},g={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};function v(e){var t,n,i,r,s,o,a,l,c,u,h,d;const p=null===(t=e.strict)||void 0===t||t,f=!!p&&"log",m=null===(n=e.code)||void 0===n?void 0:n.optimize,g=!0===m||void 0===m?1:m||0;return{strict:p,strictTypes:null!==(i=e.strictTypes)&&void 0!==i?i:f,strictTuples:null!==(r=e.strictTuples)&&void 0!==r?r:f,code:e.code?{...e.code,optimize:g}:{optimize:g},loopRequired:null!==(s=e.loopRequired)&&void 0!==s?s:1/0,loopEnum:null!==(o=e.loopEnum)&&void 0!==o?o:1/0,meta:null===(a=e.meta)||void 0===a||a,messages:null===(l=e.messages)||void 0===l||l,inlineRefs:null===(c=e.inlineRefs)||void 0===c||c,addUsedSchema:null===(u=e.addUsedSchema)||void 0===u||u,validateSchema:null===(h=e.validateSchema)||void 0===h||h,validateFormats:null===(d=e.validateFormats)||void 0===d||d}}class y{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...v(e)};const{es5:t,lines:n}=this.opts.code;this.scope=new l.ValueScope({scope:{},prefixes:f,es5:t,lines:n}),this.logger=function(e){if(!1===e)return T;if(void 0===e)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}(e.logger);const i=e.validateFormats;e.validateFormats=!1,this.RULES=o.getRules(),b.call(this,m,e,"NOT SUPPORTED"),b.call(this,g,e,"DEPRECATED","warn"),this._metaOpts=S.call(this),e.formats&&_.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&x.call(this,e.keywords),"object"==typeof e.meta&&this.addMetaSchema(e.meta),E.call(this),e.validateFormats=i}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:e,meta:t}=this.opts;t&&e&&this.addMetaSchema(d,d.$id,!1)}defaultMeta(){const{meta:e}=this.opts;return this.opts.defaultMeta="object"==typeof e?e.$id||e:void 0}validate(e,t){let n;if("string"==typeof e){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);const i=n(t);return"$async"in n||(this.errors=n.errors),i}compile(e,t){const n=this._addSchema(e,t);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,t){if("function"!=typeof this.opts.loadSchema)throw new Error("options.loadSchema should be a function");const{loadSchema:n}=this.opts;return i.call(this,e,t);async function i(e,t){await r.call(this,e.$schema);const n=this._addSchema(e,t);return n.validate||o.call(this,n)}async function r(e){e&&!this.getSchema(e)&&await i.call(this,{$ref:e},!0)}async function o(e){try{return this._compileSchemaEnv(e)}catch(t){if(!(t instanceof s.MissingRefError))throw t;return a.call(this,t),await l.call(this,t.missingSchema),o.call(this,e)}}function a({missingSchema:e,missingRef:t}){if(this.refs[e])throw new Error(`AnySchema ${e} is loaded but ${t} cannot be resolved`)}async function l(e){const n=await c.call(this,e);this.refs[e]||await r.call(this,n.$schema),this.refs[e]||this.addSchema(n,e,t)}async function c(e){const t=this._loading[e];if(t)return t;try{return await(this._loading[e]=n(e))}finally{delete this._loading[e]}}}addSchema(e,t,n,i=this.opts.validateSchema){if(Array.isArray(e)){for(const t of e)this.addSchema(t,void 0,n,i);return this}let r;if("object"==typeof e&&(r=e.$id,void 0!==r&&"string"!=typeof r))throw new Error("schema id must be string");return t=c.normalizeId(t||r),this._checkUnique(t),this.schemas[t]=this._addSchema(e,n,i,!0),this}addMetaSchema(e,t,n=this.opts.validateSchema){return this.addSchema(e,t,!0,n),this}validateSchema(e,t){if("boolean"==typeof e)return!0;let n;if(n=e.$schema,void 0!==n&&"string"!=typeof n)throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const i=this.validate(n,e);if(!i&&t){const e="schema is invalid: "+this.errorsText();if("log"!==this.opts.validateSchema)throw new Error(e);this.logger.error(e)}return i}getSchema(e){let t;for(;"string"==typeof(t=w.call(this,e));)e=t;if(void 0===t){const n=new a.SchemaEnv({schema:{}});if(t=a.resolveSchema.call(this,n,e),!t)return;this.refs[e]=t}return t.validate||this._compileSchemaEnv(t)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const t=w.call(this,e);return"object"==typeof t&&this._cache.delete(t.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{const t=e;this._cache.delete(t);let n=e.$id;return n&&(n=c.normalizeId(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(const t of e)this.addKeyword(t);return this}addKeyword(e,t){let n;if("string"==typeof e)n=e,"object"==typeof t&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),t.keyword=n);else{if("object"!=typeof e||void 0!==t)throw new Error("invalid addKeywords parameters");if(n=(t=e).keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}if(C.call(this,n,t),!t)return h.eachItem(n,(e=>P.call(this,e))),this;L.call(this,t);const i={...t,type:u.getJSONTypes(t.type),schemaType:u.getJSONTypes(t.schemaType)};return h.eachItem(n,0===i.type.length?e=>P.call(this,e,i):e=>i.type.forEach((t=>P.call(this,e,i,t)))),this}getKeyword(e){const t=this.RULES.all[e];return"object"==typeof t?t.definition:!!t}removeKeyword(e){const{RULES:t}=this;delete t.keywords[e],delete t.all[e];for(const n of t.rules){const t=n.rules.findIndex((t=>t.keyword===e));t>=0&&n.rules.splice(t,1)}return this}addFormat(e,t){return"string"==typeof t&&(t=new RegExp(t)),this.formats[e]=t,this}errorsText(e=this.errors,{separator:t=", ",dataVar:n="data"}={}){return e&&0!==e.length?e.map((e=>`${n}${e.dataPath} ${e.message}`)).reduce(((e,n)=>e+t+n)):"No errors"}$dataMetaSchema(e,t){const n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(const i of t){const t=i.split("/").slice(1);let r=e;for(const e of t)r=r[e];for(const e in n){const t=n[e];if("object"!=typeof t)continue;const{$data:i}=t.definition,s=r[e];i&&s&&(r[e]=M(s))}}return e}_removeAllSchemas(e,t){for(const n in e){const i=e[n];t&&!t.test(n)||("string"==typeof i?delete e[n]:i&&!i.meta&&(this._cache.delete(i.schema),delete e[n]))}}_addSchema(e,t,n=this.opts.validateSchema,i=this.opts.addUsedSchema){if("object"!=typeof e){if(this.opts.jtd)throw new Error("schema must be object");if("boolean"!=typeof e)throw new Error("schema must be object or boolean")}let r=this._cache.get(e);if(void 0!==r)return r;const s=c.getSchemaRefs.call(this,e);r=new a.SchemaEnv({schema:e,meta:t,localRefs:s}),this._cache.set(r.schema,r);const o=r.baseId;return i&&!o.startsWith("#")&&(o&&this._checkUnique(o),this.refs[o]=r),n&&this.validateSchema(e,!0),r}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):a.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){const t=this.opts;this.opts=this._metaOpts;try{a.compileSchema.call(this,e)}finally{this.opts=t}}}function b(e,t,n,i="error"){for(const r in e){const s=r;s in t&&this.logger[i](`${n}: option ${r}. ${e[s]}`)}}function w(e){return e=c.normalizeId(e),this.schemas[e]||this.refs[e]}function E(){const e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(const t in e)this.addSchema(e[t],t)}function _(){for(const e in this.opts.formats){const t=this.opts.formats[e];t&&this.addFormat(e,t)}}function x(e){if(Array.isArray(e))this.addVocabulary(e);else{this.logger.warn("keywords option as map is deprecated, pass array");for(const t in e){const n=e[t];n.keyword||(n.keyword=t),this.addKeyword(n)}}}function S(){const e={...this.opts};for(const t of p)delete e[t];return e}t.default=y,y.ValidationError=s.ValidationError,y.MissingRefError=s.MissingRefError;const T={log(){},warn(){},error(){}},k=/^[a-z_$][a-z0-9_$:-]*$/i;function C(e,t){const{RULES:n}=this;if(h.eachItem(e,(e=>{if(n.keywords[e])throw new Error(`Keyword ${e} is already defined`);if(!k.test(e))throw new Error(`Keyword ${e} has invalid name`)})),t&&t.$data&&!("code"in t)&&!("validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function P(e,t,n){var i;const r=null==t?void 0:t.post;if(n&&r)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:s}=this;let o=r?s.post:s.rules.find((({type:e})=>e===n));if(o||(o={type:n,rules:[]},s.rules.push(o)),s.keywords[e]=!0,!t)return;const a={keyword:e,definition:{...t,type:u.getJSONTypes(t.type),schemaType:u.getJSONTypes(t.schemaType)}};t.before?I.call(this,o,a,t.before):o.rules.push(a),s.all[e]=a,null===(i=t.implements)||void 0===i||i.forEach((e=>this.addKeyword(e)))}function I(e,t,n){const i=e.rules.findIndex((e=>e.keyword===n));i>=0?e.rules.splice(i,0,t):(e.rules.push(t),this.logger.warn(`rule ${n} is not defined`))}function L(e){let{metaSchema:t}=e;void 0!==t&&(e.$data&&this.opts.$data&&(t=M(t)),e.validateSchema=this.compile(t,!0))}const A={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function M(e){return{anyOf:[e,A]}}},4783:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(93487),r=n(44069),s=n(76776),o=n(74815),a={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:e}})=>i.str`should NOT have more than ${e} items`,params:({params:{len:e}})=>i._`{limit: ${e}}`},code(e){const{gen:t,schema:n,parentSchema:a,data:l,it:c}=e,{items:u}=a;if(!Array.isArray(u))return void o.checkStrictMode(c,'"additionalItems" is ignored when "items" is not an array of schemas');c.items=!0;const h=t.const("len",i._`${l}.length`);if(!1===n)e.setParams({len:u.length}),e.pass(i._`${h} <= ${u.length}`);else if("object"==typeof n&&!s.alwaysValidSchema(c,n)){const n=t.var("valid",i._`${h} <= ${u.length}`);t.if(i.not(n),(()=>function(n){t.forRange("i",u.length,h,(s=>{e.subschema({keyword:"additionalItems",dataProp:s,dataPropType:r.Type.Num},n),c.allErrors||t.if(i.not(n),(()=>t.break()))}))}(n))),e.ok(n)}}};t.default=a},69351:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(10412),r=n(93487),s=n(22141),o=n(44069),a=n(76776),l={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"should NOT have additional properties",params:({params:e})=>r._`{additionalProperty: ${e.additionalProperty}}`},code(e){const{gen:t,schema:n,parentSchema:l,data:c,errsCount:u,it:h}=e;if(!u)throw new Error("ajv implementation error");const{allErrors:d,opts:p}=h;if(h.props=!0,"all"!==p.removeAdditional&&a.alwaysValidSchema(h,n))return;const f=i.allSchemaProperties(l.properties),m=i.allSchemaProperties(l.patternProperties);function g(e){t.code(r._`delete ${c}[${e}]`)}function v(i){if("all"===p.removeAdditional||p.removeAdditional&&!1===n)g(i);else{if(!1===n)return e.setParams({additionalProperty:i}),e.error(),void(d||t.break());if("object"==typeof n&&!a.alwaysValidSchema(h,n)){const n=t.name("valid");"failing"===p.removeAdditional?(y(i,n,!1),t.if(r.not(n),(()=>{e.reset(),g(i)}))):(y(i,n),d||t.if(r.not(n),(()=>t.break())))}}}function y(t,n,i){const r={keyword:"additionalProperties",dataProp:t,dataPropType:o.Type.Str};!1===i&&Object.assign(r,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(r,n)}t.forIn("key",c,(e=>{f.length||m.length?t.if(function(e){let n;if(f.length>8){const r=a.schemaRefOrVal(h,l.properties,"properties");n=i.isOwnProperty(t,r,e)}else n=f.length?r.or(...f.map((t=>r._`${e} === ${t}`))):r.nil;return m.length&&(n=r.or(n,...m.map((n=>r._`${i.usePattern(t,n)}.test(${e})`)))),r.not(n)}(e),(()=>v(e))):v(e)})),e.ok(r._`${u} === ${s.default.errors}`)}};t.default=l},71125:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(76776),r={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const s=t.name("valid");n.forEach(((t,n)=>{if(i.alwaysValidSchema(r,t))return;const o=e.subschema({keyword:"allOf",schemaProp:n},s);e.ok(s),e.mergeEvaluated(o)}))}};t.default=r},50019:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:n(10412).validateUnion,error:{message:"should match some schema in anyOf"}};t.default=i},79864:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(93487),r=n(44069),s=n(76776),o=n(74815),a={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:e,max:t}})=>void 0===t?i.str`should contain at least ${e} valid item(s)`:i.str`should contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>void 0===t?i._`{minContains: ${e}}`:i._`{minContains: ${e}, maxContains: ${t}}`},code(e){const{gen:t,schema:n,parentSchema:a,data:l,it:c}=e;let u,h;const{minContains:d,maxContains:p}=a;c.opts.next?(u=void 0===d?1:d,h=p):u=1;const f=t.const("len",i._`${l}.length`);if(e.setParams({min:u,max:h}),void 0===h&&0===u)return void o.checkStrictMode(c,'"minContains" == 0 without "maxContains": "contains" keyword ignored');if(void 0!==h&&u>h)return o.checkStrictMode(c,'"minContains" > "maxContains" is always invalid'),void e.fail();if(s.alwaysValidSchema(c,n)){let t=i._`${f} >= ${u}`;return void 0!==h&&(t=i._`${t} && ${f} <= ${h}`),void e.pass(t)}c.items=!0;const m=t.name("valid");if(void 0===h&&1===u)g(m,(()=>t.if(m,(()=>t.break()))));else{t.let(m,!1);const e=t.name("_valid"),n=t.let("count",0);g(e,(()=>t.if(e,(()=>function(e){t.code(i._`${e}++`),void 0===h?t.if(i._`${e} >= ${u}`,(()=>t.assign(m,!0).break())):(t.if(i._`${e} > ${h}`,(()=>t.assign(m,!1).break())),1===u?t.assign(m,!0):t.if(i._`${e} >= ${u}`,(()=>t.assign(m,!0))))}(n)))))}function g(n,i){t.forRange("i",0,f,(t=>{e.subschema({keyword:"contains",dataProp:t,dataPropType:r.Type.Num,compositeRule:!0},n),i()}))}e.result(m,(()=>e.reset()))}};t.default=a},67772:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const i=n(93487),r=n(76776),s=n(10412);t.error={message:({params:{property:e,depsCount:t,deps:n}})=>{const r=1===t?"property":"properties";return i.str`should have ${r} ${n} when property ${e} is present`},params:({params:{property:e,depsCount:t,deps:n,missingProperty:r}})=>i._`{property: ${e},
    missingProperty: ${r},
    depsCount: ${t},
    deps: ${n}}`};const o={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(e){const[t,n]=function({schema:e}){const t={},n={};for(const i in e)"__proto__"!==i&&((Array.isArray(e[i])?t:n)[i]=e[i]);return[t,n]}(e);a(e,t),l(e,n)}};function a(e,t=e.schema){const{gen:n,data:r,it:o}=e;if(0===Object.keys(t).length)return;const a=n.let("missing");for(const l in t){const c=t[l];if(0===c.length)continue;const u=s.propertyInData(n,r,l,o.opts.ownProperties);e.setParams({property:l,depsCount:c.length,deps:c.join(", ")}),o.allErrors?n.if(u,(()=>{for(const t of c)s.checkReportMissingProp(e,t)})):(n.if(i._`${u} && (${s.checkMissingProp(e,c,a)})`),s.reportMissingProp(e,a),n.else())}}function l(e,t=e.schema){const{gen:n,data:i,keyword:o,it:a}=e,l=n.name("valid");for(const c in t)r.alwaysValidSchema(a,t[c])||(n.if(s.propertyInData(n,i,c,a.opts.ownProperties),(()=>{const t=e.subschema({keyword:o,schemaProp:c},l);e.mergeValidEvaluated(t,l)}),(()=>n.var(l,!0))),e.ok(l))}t.validatePropertyDeps=a,t.validateSchemaDeps=l,t.default=o},89434:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(93487),r=n(76776),s=n(74815),o={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:e})=>i.str`should match "${e.ifClause}" schema`,params:({params:e})=>i._`{failingKeyword: ${e.ifClause}}`},code(e){const{gen:t,parentSchema:n,it:r}=e;void 0===n.then&&void 0===n.else&&s.checkStrictMode(r,'"if" without "then" and "else" is ignored');const o=a(r,"then"),l=a(r,"else");if(!o&&!l)return;const c=t.let("valid",!0),u=t.name("_valid");if(function(){const t=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},u);e.mergeEvaluated(t)}(),e.reset(),o&&l){const n=t.let("ifClause");e.setParams({ifClause:n}),t.if(u,h("then",n),h("else",n))}else o?t.if(u,h("then")):t.if(i.not(u),h("else"));function h(n,r){return()=>{const s=e.subschema({keyword:n},u);t.assign(c,u),e.mergeValidEvaluated(s,c),r?t.assign(r,i._`${n}`):e.setParams({ifClause:n})}}e.pass(c,(()=>e.error(!0)))}};function a(e,t){const n=e.schema[t];return void 0!==n&&!r.alwaysValidSchema(e,n)}t.default=o},8200:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(4783),r=n(64665),s=n(79864),o=n(67772),a=n(33708),l=n(69351),c=n(76239),u=n(12296),h=n(15697),d=n(50019),p=n(14200),f=n(71125),m=n(89434),g=n(66552),v=[h.default,d.default,p.default,f.default,m.default,g.default,i.default,r.default,s.default,a.default,l.default,o.default,c.default,u.default];t.default=v},64665:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(93487),r=n(76776),s=n(74815),o=n(10412),a={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{gen:t,schema:n,it:a}=e;if(Array.isArray(n))a.opts.unevaluated&&n.length&&!0!==a.items&&(a.items=r.mergeEvaluated.items(t,n.length,a.items)),function(n){const{parentSchema:o,data:l}=e;if(a.opts.strictTuples&&!function(e,t){return e===t.minItems&&(e===t.maxItems||!1===t.additionalItems)}(n.length,o)){const e=`"items" is ${n.length}-tuple, but minItems or maxItems/additionalItems are not specified or different`;s.checkStrictMode(a,e,a.opts.strictTuples)}const c=t.name("valid"),u=t.const("len",i._`${l}.length`);n.forEach(((n,s)=>{r.alwaysValidSchema(a,n)||(t.if(i._`${u} > ${s}`,(()=>e.subschema({keyword:"items",schemaProp:s,dataProp:s},c))),e.ok(c))}))}(n);else{if(a.items=!0,r.alwaysValidSchema(a,n))return;e.ok(o.validateArray(e))}}};t.default=a},15697:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(76776),r={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if(i.alwaysValidSchema(r,n))return void e.fail();const s=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),e.result(s,(()=>e.error()),(()=>e.reset()))},error:{message:"should NOT be valid"}};t.default=r},14200:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(93487),r=n(76776),s={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"should match exactly one schema in oneOf",params:({params:e})=>i._`{passingSchemas: ${e.passing}}`},code(e){const{gen:t,schema:n,it:s}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const o=n,a=t.let("valid",!1),l=t.let("passing",null),c=t.name("_valid");e.setParams({passing:l}),t.block((function(){o.forEach(((n,o)=>{let u;r.alwaysValidSchema(s,n)?t.var(c,!0):u=e.subschema({keyword:"oneOf",schemaProp:o,compositeRule:!0},c),o>0&&t.if(i._`${c} && ${a}`).assign(a,!1).assign(l,i._`[${l}, ${o}]`).else(),t.if(c,(()=>{t.assign(a,!0),t.assign(l,o),u&&e.mergeEvaluated(u,i.Name)}))}))})),e.result(a,(()=>e.reset()),(()=>e.error(!0)))}};t.default=s},12296:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(10412),r=n(93487),s=n(44069),o=n(74815),a=n(76776),l={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:l,parentSchema:c,it:u}=e,{opts:h}=u,d=i.schemaProperties(u,n);if(0===d.length)return;const p=h.strict&&!h.allowMatchingProperties&&c.properties,f=t.name("valid");!0===u.props||u.props instanceof r.Name||(u.props=a.evaluatedPropsToName(t,u.props));const{props:m}=u;function g(e){for(const t in p)new RegExp(e).test(t)&&o.checkStrictMode(u,`property ${t} matches pattern ${e} (use allowMatchingProperties)`)}function v(n){t.forIn("key",l,(o=>{t.if(r._`${i.usePattern(t,n)}.test(${o})`,(()=>{e.subschema({keyword:"patternProperties",schemaProp:n,dataProp:o,dataPropType:s.Type.Str},f),u.opts.unevaluated&&!0!==m?t.assign(r._`${m}[${o}]`,!0):u.allErrors||t.if(r.not(f),(()=>t.break()))}))}))}!function(){for(const e of d)p&&g(e),u.allErrors?v(e):(t.var(f,!0),v(e),t.if(f))}()}};t.default=l},76239:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(22227),r=n(10412),s=n(76776),o=n(69351),a={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:a,data:l,it:c}=e;"all"===c.opts.removeAdditional&&void 0===a.additionalProperties&&o.default.code(new i.default(c,o.default,"additionalProperties"));const u=r.allSchemaProperties(n);for(const e of u)c.definedProperties.add(e);c.opts.unevaluated&&u.length&&!0!==c.props&&(c.props=s.mergeEvaluated.props(t,s.toHash(u),c.props));const h=u.filter((e=>!s.alwaysValidSchema(c,n[e])));if(0===h.length)return;const d=t.name("valid");for(const n of h)p(n)?f(n):(t.if(r.propertyInData(t,l,n,c.opts.ownProperties)),f(n),c.allErrors||t.else().var(d,!0),t.endIf()),e.it.definedProperties.add(n),e.ok(d);function p(e){return c.opts.useDefaults&&!c.compositeRule&&void 0!==n[e].default}function f(t){e.subschema({keyword:"properties",schemaProp:t,dataProp:t},d)}}};t.default=a},33708:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(93487),r=n(76776),s={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:({params:e})=>i.str`property name '${e.propertyName}' is invalid`,params:({params:e})=>i._`{propertyName: ${e.propertyName}}`},code(e){const{gen:t,schema:n,data:s,it:o}=e;if(r.alwaysValidSchema(o,n))return;const a=t.name("valid");t.forIn("key",s,(n=>{e.setParams({propertyName:n}),e.subschema({keyword:"propertyNames",data:n,dataTypes:["string"],propertyName:n,compositeRule:!0},a),t.if(i.not(a),(()=>{e.error(!0),o.allErrors||t.break()}))})),e.ok(a)}};t.default=s},66552:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(74815),r={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){void 0===t.if&&i.checkStrictMode(n,`"${e}" without "if" is ignored`)}};t.default=r},10412:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateUnion=t.validateArray=t.usePattern=t.callValidateCode=t.schemaProperties=t.allSchemaProperties=t.noPropertyInData=t.propertyInData=t.isOwnProperty=t.hasPropFunc=t.reportMissingProp=t.checkMissingProp=t.checkReportMissingProp=void 0;const i=n(93487),r=n(76776),s=n(44069),o=n(22141);function a(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:i._`Object.prototype.hasOwnProperty`})}function l(e,t,n){return i._`${a(e)}.call(${t}, ${n})`}function c(e,t,n,r){const s=i._`${t}${i.getProperty(n)} === undefined`;return r?i.or(s,i.not(l(e,t,n))):s}function u(e){return e?Object.keys(e).filter((e=>"__proto__"!==e)):[]}t.checkReportMissingProp=function(e,t){const{gen:n,data:r,it:s}=e;n.if(c(n,r,t,s.opts.ownProperties),(()=>{e.setParams({missingProperty:i._`${t}`},!0),e.error()}))},t.checkMissingProp=function({gen:e,data:t,it:{opts:n}},r,s){return i.or(...r.map((r=>i.and(c(e,t,r,n.ownProperties),i._`${s} = ${r}`))))},t.reportMissingProp=function(e,t){e.setParams({missingProperty:t},!0),e.error()},t.hasPropFunc=a,t.isOwnProperty=l,t.propertyInData=function(e,t,n,r){const s=i._`${t}${i.getProperty(n)} !== undefined`;return r?i._`${s} && ${l(e,t,n)}`:s},t.noPropertyInData=c,t.allSchemaProperties=u,t.schemaProperties=function(e,t){return u(t).filter((n=>!r.alwaysValidSchema(e,t[n])))},t.callValidateCode=function({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:s,errorPath:a},it:l},c,u,h){const d=h?i._`${e}, ${t}, ${r}${s}`:t,p=[[o.default.dataPath,i.strConcat(o.default.dataPath,a)],[o.default.parentData,l.parentData],[o.default.parentDataProperty,l.parentDataProperty],[o.default.rootData,o.default.rootData]];l.opts.dynamicRef&&p.push([o.default.dynamicAnchors,o.default.dynamicAnchors]);const f=i._`${d}, ${n.object(...p)}`;return u!==i.nil?i._`${c}.call(${u}, ${f})`:i._`${c}(${f})`},t.usePattern=function(e,t){return e.scopeValue("pattern",{key:t,ref:new RegExp(t,"u"),code:i._`new RegExp(${t}, "u")`})},t.validateArray=function(e){const{gen:t,data:n,keyword:r,it:o}=e,a=t.name("valid");if(o.allErrors){const e=t.let("valid",!0);return l((()=>t.assign(e,!1))),e}return t.var(a,!0),l((()=>t.break())),a;function l(o){const l=t.const("len",i._`${n}.length`);t.forRange("i",0,l,(n=>{e.subschema({keyword:r,dataProp:n,dataPropType:s.Type.Num},a),t.if(i.not(a),o)}))}},t.validateUnion=function(e){const{gen:t,schema:n,keyword:s,it:o}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some((e=>r.alwaysValidSchema(o,e)))&&!o.opts.unevaluated)return;const a=t.let("valid",!1),l=t.name("_valid");t.block((()=>n.forEach(((n,r)=>{const o=e.subschema({keyword:s,schemaProp:r,compositeRule:!0},l);t.assign(a,i._`${a} || ${l}`),e.mergeValidEvaluated(o,l)||t.if(i.not(a))})))),e.result(a,(()=>e.reset()),(()=>e.error(!0)))}},78386:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};t.default=n},95684:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(78386),r=n(28280),s=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",i.default,r.default];t.default=s},28280:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.callRef=t.getValidate=void 0;const i=n(78727),r=n(10412),s=n(93487),o=n(22141),a=n(25173),l=n(76776),c={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:o,schemaEnv:l,validateName:c,opts:d,self:p}=r;if("#"===n||"#/"===n)return function(){if(l===l.root)return h(e,c,l,l.$async);const n=t.scopeValue("root",{ref:l.root});return h(e,s._`${n}.validate`,l.root,l.root.$async)}();const f=a.resolveRef.call(p,l.root,o,n);if(void 0===f)throw new i.MissingRefError(o,n);return f instanceof a.SchemaEnv?function(t){const n=u(e,t);h(e,n,t,t.$async)}(f):function(i){const r=t.scopeValue("schema",!0===d.code.source?{ref:i,code:s.stringify(i)}:{ref:i}),o=t.name("valid"),a=e.subschema({schema:i,dataTypes:[],schemaPath:s.nil,topSchemaRef:r,errSchemaPath:n},o);e.mergeEvaluated(a),e.ok(o)}(f)}};function u(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):s._`${n.scopeValue("wrapper",{ref:t})}.validate`}function h(e,t,n,i){const{gen:a,it:c}=e,{allErrors:u,schemaEnv:h,opts:d}=c,p=d.passContext?o.default.this:s.nil;function f(e){const t=s._`${e}.errors`;a.assign(o.default.vErrors,s._`${o.default.vErrors} === null ? ${t} : ${o.default.vErrors}.concat(${t})`),a.assign(o.default.errors,s._`${o.default.vErrors}.length`)}function m(e){var t;if(!c.opts.unevaluated)return;const i=null===(t=null==n?void 0:n.validate)||void 0===t?void 0:t.evaluated;if(!0!==c.props)if(i&&!i.dynamicProps)void 0!==i.props&&(c.props=l.mergeEvaluated.props(a,i.props,c.props));else{const t=a.var("props",s._`${e}.evaluated.props`);c.props=l.mergeEvaluated.props(a,t,c.props,s.Name)}if(!0!==c.items)if(i&&!i.dynamicItems)void 0!==i.items&&(c.items=l.mergeEvaluated.items(a,i.items,c.items));else{const t=a.var("items",s._`${e}.evaluated.items`);c.items=l.mergeEvaluated.items(a,t,c.items,s.Name)}}i?function(){if(!h.$async)throw new Error("async schema referenced by sync schema");const n=a.let("valid");a.try((()=>{a.code(s._`await ${r.callValidateCode(e,t,p)}`),m(t),u||a.assign(n,!0)}),(e=>{a.if(s._`!(${e} instanceof ${c.ValidationError})`,(()=>a.throw(e))),f(e),u||a.assign(n,!1)})),e.ok(n)}():e.result(r.callValidateCode(e,t,p),(()=>m(t)),(()=>f(t)))}t.getValidate=u,t.callRef=h,t.default=c},93924:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(95684),r=n(62649),s=n(8200),o=n(39502),a=n(66167),l=[i.default,r.default,s.default,o.default,a.metadataVocabulary,a.contentVocabulary];t.default=l},89651:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(93487),r={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>i.str`should match format "${e}"`,params:({schemaCode:e})=>i._`{format: ${e}}`},code(e,t){const{gen:n,data:r,$data:s,schema:o,schemaCode:a,it:l}=e,{opts:c,errSchemaPath:u,schemaEnv:h,self:d}=l;c.validateFormats&&(s?function(){const s=n.scopeValue("formats",{ref:d.formats,code:c.code.formats}),o=n.const("fDef",i._`${s}[${a}]`),l=n.let("fType"),u=n.let("format");n.if(i._`typeof ${o} == "object" && !(${o} instanceof RegExp)`,(()=>n.assign(l,i._`${o}.type || "string"`).assign(u,i._`${o}.validate`)),(()=>n.assign(l,i._`"string"`).assign(u,o))),e.fail$data(i.or(!1===c.strict?i.nil:i._`${a} && !${u}`,function(){const e=h.$async?i._`(${o}.async ? await ${u}(${r}) : ${u}(${r}))`:i._`${u}(${r})`,n=i._`(typeof ${u} == "function" ? ${e} : ${u}.test(${r}))`;return i._`${u} && ${u} !== true && ${l} === ${t} && !${n}`}()))}():function(){const s=d.formats[o];if(!s)return void function(){if(!1!==c.strict)throw new Error(e());function e(){return`unknown format "${o}" ignored in schema at path "${u}"`}d.logger.warn(e())}();if(!0===s)return;const[a,l,p]=function(e){const t=n.scopeValue("formats",{key:o,ref:e,code:c.code.formats?i._`${c.code.formats}${i.getProperty(o)}`:void 0});return"object"!=typeof e||e instanceof RegExp?["string",e,t]:[e.type||"string",e.validate,i._`${t}.validate`]}(s);a===t&&e.pass(function(){if("object"==typeof s&&!(s instanceof RegExp)&&s.async){if(!h.$async)throw new Error("async format in sync schema");return i._`await ${p}(${r})`}return"function"==typeof l?i._`${p}(${r})`:i._`${p}.test(${r})`}())}())}};t.default=r},39502:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=[n(89651).default];t.default=i},66167:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contentVocabulary=t.metadataVocabulary=void 0,t.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],t.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]},64693:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(93487),r=n(64063),s={keyword:"const",$data:!0,error:{message:"should be equal to constant",params:({schemaCode:e})=>i._`{allowedValue: ${e}}`},code(e){const t=e.gen.scopeValue("func",{ref:r,code:i._`require("ajv/dist/compile/equal")`});e.fail$data(i._`!${t}(${e.data}, ${e.schemaCode})`)}};t.default=s},30966:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(93487),r=n(64063),s={keyword:"enum",schemaType:"array",$data:!0,error:{message:"should be equal to one of the allowed values",params:({schemaCode:e})=>i._`{allowedValues: ${e}}`},code(e){const{gen:t,data:n,$data:s,schema:o,schemaCode:a,it:l}=e;if(!s&&0===o.length)throw new Error("enum must have non-empty array");const c=o.length>=l.opts.loopEnum,u=e.gen.scopeValue("func",{ref:r,code:i._`require("ajv/dist/compile/equal")`});let h;if(c||s)h=t.let("valid"),e.block$data(h,(function(){t.assign(h,!1),t.forOf("v",a,(e=>t.if(i._`${u}(${n}, ${e})`,(()=>t.assign(h,!0).break()))))}));else{if(!Array.isArray(o))throw new Error("ajv implementation error");const e=t.const("vSchema",a);h=i.or(...o.map(((t,r)=>function(e,t){const r=o[t];return r&&"object"==typeof r?i._`${u}(${n}, ${e}[${t}])`:i._`${n} === ${r}`}(e,r))))}e.pass(h)}};t.default=s},62649:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(83983),r=n(90430),s=n(93229),o=n(74336),a=n(90498),l=n(33301),c=n(31687),u=n(82958),h=n(64693),d=n(30966),p=[i.default,r.default,s.default,o.default,a.default,l.default,c.default,u.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},h.default,d.default];t.default=p},31687:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(93487),r={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const n="maxItems"===e?"more":"fewer";return i.str`should NOT have ${n} than ${t} items`},params:({schemaCode:e})=>i._`{limit: ${e}}`},code(e){const{keyword:t,data:n,schemaCode:r}=e,s="maxItems"===t?i.operators.GT:i.operators.LT;e.fail$data(i._`${n}.length ${s} ${r}`)}};t.default=r},93229:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(93487),r=n(74776),s={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const n="maxLength"===e?"more":"fewer";return i.str`should NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>i._`{limit: ${e}}`},code(e){const{keyword:t,data:n,schemaCode:s,it:o}=e,a="maxLength"===t?i.operators.GT:i.operators.LT;let l;if(!1===o.opts.unicode)l=i._`${n}.length`;else{const t=e.gen.scopeValue("func",{ref:r.default,code:i._`require("ajv/dist/compile/ucs2length").default`});l=i._`${t}(${n})`}e.fail$data(i._`${l} ${a} ${s}`)}};t.default=s},83983:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(93487),r=i.operators,s={maximum:{okStr:"<=",ok:r.LTE,fail:r.GT},minimum:{okStr:">=",ok:r.GTE,fail:r.LT},exclusiveMaximum:{okStr:"<",ok:r.LT,fail:r.GTE},exclusiveMinimum:{okStr:">",ok:r.GT,fail:r.LTE}},o={message:({keyword:e,schemaCode:t})=>i.str`should be ${s[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>i._`{comparison: ${s[e].okStr}, limit: ${t}}`},a={keyword:Object.keys(s),type:"number",schemaType:"number",$data:!0,error:o,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data(i._`${n} ${s[t].fail} ${r} || isNaN(${n})`)}};t.default=a},90498:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(93487),r={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const n="maxProperties"===e?"more":"fewer";return i.str`should NOT have ${n} than ${t} items`},params:({schemaCode:e})=>i._`{limit: ${e}}`},code(e){const{keyword:t,data:n,schemaCode:r}=e,s="maxProperties"===t?i.operators.GT:i.operators.LT;e.fail$data(i._`Object.keys(${n}).length ${s} ${r}`)}};t.default=r},90430:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(93487),r={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:e})=>i.str`should be multiple of ${e}`,params:({schemaCode:e})=>i._`{multipleOf: ${e}}`},code(e){const{gen:t,data:n,schemaCode:r,it:s}=e,o=s.opts.multipleOfPrecision,a=t.let("res"),l=o?i._`Math.abs(Math.round(${a}) - ${a}) > 1e-${o}`:i._`${a} !== parseInt(${a})`;e.fail$data(i._`(${r} === 0 || (${a} = ${n}/${r}, ${l}))`)}};t.default=r},74336:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(10412),r=n(93487),s={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>r.str`should match pattern "${e}"`,params:({schemaCode:e})=>r._`{pattern: ${e}}`},code(e){const{gen:t,data:n,$data:s,schema:o,schemaCode:a}=e,l=s?r._`(new RegExp(${a}, "u"))`:i.usePattern(t,o);e.fail$data(r._`!${l}.test(${n})`)}};t.default=s},33301:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(10412),r=n(93487),s=n(74815),o={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:e}})=>r.str`should have required property '${e}'`,params:({params:{missingProperty:e}})=>r._`{missingProperty: ${e}}`},code(e){const{gen:t,schema:n,schemaCode:o,data:a,$data:l,it:c}=e,{opts:u}=c;if(!l&&0===n.length)return;const h=n.length>=u.loopRequired;if(c.allErrors?function(){if(h||l)e.block$data(r.nil,d);else for(const t of n)i.checkReportMissingProp(e,t)}():function(){const s=t.let("missing");if(h||l){const n=t.let("valid",!0);e.block$data(n,(()=>function(n,s){e.setParams({missingProperty:n}),t.forOf(n,o,(()=>{t.assign(s,i.propertyInData(t,a,n,u.ownProperties)),t.if(r.not(s),(()=>{e.error(),t.break()}))}),r.nil)}(s,n))),e.ok(n)}else t.if(i.checkMissingProp(e,n,s)),i.reportMissingProp(e,s),t.else()}(),u.strictRequired){const t=e.parentSchema.properties,{definedProperties:i}=e.it;for(const e of n)if(void 0===(null==t?void 0:t[e])&&!i.has(e)){const t=`required property "${e}" is not defined at "${c.schemaEnv.baseId+c.errSchemaPath}" (strictRequired)`;s.checkStrictMode(c,t,c.opts.strictRequired)}}function d(){t.forOf("prop",o,(n=>{e.setParams({missingProperty:n}),t.if(i.noPropertyInData(t,a,n,u.ownProperties),(()=>e.error()))}))}}};t.default=o},82958:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(50453),r=n(93487),s=n(64063),o={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:e,j:t}})=>r.str`should NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>r._`{i: ${e}, j: ${t}}`},code(e){const{gen:t,data:n,$data:o,schema:a,parentSchema:l,schemaCode:c,it:u}=e;if(!o&&!a)return;const h=t.let("valid"),d=l.items?i.getSchemaTypes(l.items):[];function p(s,o){const a=t.name("item"),l=i.checkDataTypes(d,a,u.opts.strict,i.DataType.Wrong),c=t.const("indices",r._`{}`);t.for(r._`;${s}--;`,(()=>{t.let(a,r._`${n}[${s}]`),t.if(l,r._`continue`),d.length>1&&t.if(r._`typeof ${a} == "string"`,r._`${a} += "_"`),t.if(r._`typeof ${c}[${a}] == "number"`,(()=>{t.assign(o,r._`${c}[${a}]`),e.error(),t.assign(h,!1).break()})).code(r._`${c}[${a}] = ${s}`)}))}function f(i,o){const a=e.gen.scopeValue("func",{ref:s,code:r._`require("ajv/dist/compile/equal")`}),l=t.name("outer");t.label(l).for(r._`;${i}--;`,(()=>t.for(r._`${o} = ${i}; ${o}--;`,(()=>t.if(r._`${a}(${n}[${i}], ${n}[${o}])`,(()=>{e.error(),t.assign(h,!1).break(l)}))))))}e.block$data(h,(function(){const i=t.let("i",r._`${n}.length`),s=t.let("j");e.setParams({i,j:s}),t.assign(h,!0),t.if(r._`${i} > 1`,(()=>(d.length>0&&!d.some((e=>"object"===e||"array"===e))?p:f)(i,s)))}),r._`${c} === false`),e.ok(h)}};t.default=o},96710:(e,t,n)=>{"use strict";var i,r,s,o,a,l,c,u,h,d,p,f,m,g;n(66992),n(33948),n(69720),n(74916),n(15306);var v=n(55161),y=n(81123),b=n(22356),w=n(34358),E=n(11006),_=n(29705),x=n(25290),S={HOST:window.location.host,ORIGIN:window.location.origin,MAX_PING_FAILURES:3,PING_INTERVAL:2e4,LANGUAGE:"en-US",TIMEZONE:"UTC",UNITS:{},init:function(){x.init(),document.querySelector("#thing-title-icon").innerHTML='\n      <webthing-custom-icon id="thing-title-custom-icon" class="hidden">\n      </webthing-custom-icon>',document.querySelector("#context-menu-heading-icon").innerHTML='\n      <webthing-custom-icon id="context-menu-heading-custom-icon" class="hidden">\n      </webthing-custom-icon>',document.querySelector("#edit-thing-icon").innerHTML='\n      <webthing-custom-icon id="edit-thing-custom-icon" class="hidden">\n      </webthing-custom-icon>',y.polyfill.installAll(),b.polyfill({holdToDrag:500,dragImageTranslateOverride:w.scrollBehaviourDragImageTranslateOverride}),o.init(),l.init(),c.init(),s.init(),u.init(),h.init(),p.init(),f.init(),m.init(),this.views=[],this.views.things=document.getElementById("things-view"),this.views.floorplan=document.getElementById("floorplan-view"),this.views.settings=document.getElementById("settings-view"),this.views.rules=document.getElementById("rules-view"),this.views.rule=document.getElementById("rule-view"),this.views.logs=document.getElementById("logs-view"),this.currentView=this.views.things,this.displayedExtension=null,this.addThingScreen=document.getElementById("add-thing-screen"),this.menuButton=document.getElementById("menu-button"),this.menuButton.addEventListener("click",a.toggle.bind(a)),this.extensionBackButton=document.getElementById("extension-back-button"),this.overflowButton=document.getElementById("overflow-button"),this.overflowButton.addEventListener("click",this.toggleOverflowMenu.bind(this)),this.overflowMenu=document.getElementById("overflow-menu"),this.blockMessages=!1,this.messageArea=document.getElementById("message-area"),this.messageTimeout=null,this.connectivityOverlay=document.getElementById("connectivity-scrim"),this.pingerInterval=null,this.pingerLastStatus=null,this.failedPings=0,this.startPinger(),this.gatewayModel=new r,this.initWebSocket(),this.extensions={},a.init(),d.init(),i.getExtensions().then((e=>{for(var[t,n]of Object.entries(e))for(var i of n){if(i.css)for(var r of i.css){var s=document.createElement("link");s.rel="stylesheet",s.type="text/css",s.href="/extensions/".concat(encodeURIComponent(t),"/").concat(r),document.head.appendChild(s)}if(i.js)for(var o of i.js){var a=document.createElement("script");a.src="/extensions/".concat(encodeURIComponent(t),"/").concat(o),document.head.appendChild(a)}}}))},initWebSocket(){var e="".concat(this.ORIGIN.replace(/^http/,"ws"),"/internal-logs?jwt=").concat(i.jwt);this.ws=new g(e),this.ws.addEventListener("message",(e=>{var t=JSON.parse(e.data);t&&t.message&&this.showMessage(t.message,5e3,t.url)}))},startPinger(){i.ping().then((()=>{"offline"===this.pingerLastStatus?window.location.reload():(this.failedPings=0,this.pingerLastStatus="online",this.connectivityOverlay.classList.add("hidden"),this.messageArea.classList.remove("disconnected"),this.messageArea.innerText===x.getMessage("gateway-unreachable")&&this.hidePersistentMessage())})).catch((e=>{console.error("Gateway unreachable:",e),++this.failedPings>=this.MAX_PING_FAILURES&&(this.connectivityOverlay.classList.remove("hidden"),this.messageArea.classList.add("disconnected"),this.showPersistentMessage(x.getMessage("gateway-unreachable")),this.pingerLastStatus="offline")})),this.pingerInterval||(this.pingerInterval=setInterval(this.startPinger.bind(this),this.PING_INTERVAL))},showThings:function(e){this.hideExtensionBackButton();var t="events"===e.pathname.split("/").pop();s.show(e.params.thingId||null,e.params.actionName||null,t,e.querystring),this.selectView("things")},showSettings:function(e){this.addThingScreen.classList.add("hidden"),this.hideExtensionBackButton(),u.show(e.params.section||null,e.params.subsection||null,e.params.id||null),this.selectView("settings")},showFloorplan:function(){this.hideExtensionBackButton(),h.show(),this.selectView("floorplan")},showRules:function(){this.hideExtensionBackButton(),p.show(),this.selectView("rules")},showRule:function(e){this.hideExtensionBackButton(),f.show(e.params.rule),this.selectView("rule")},showLogs:function(e){if(this.hideExtensionBackButton(),e.params.thingId){var t={thing:e.params.thingId,property:e.params.propId||"",type:"property"};m.show(t)}else m.show();this.selectView("logs")},registerExtension:function(e){this.extensions[e.id]=e;var t=_.escapeHtmlForIdClass(e.id),n=document.createElement("section");n.id="extension-".concat(t,"-view"),n.dataset.view="extension-".concat(t),n.classList.add("hidden"),document.body.appendChild(n);var i=this.requestedContext;return i&&i.params.extensionId==e.id&&(this.requestedContext=null,this.showExtension(i)),n},showExtension:function(e){this.hideExtensionBackButton();var t=e.params.extensionId;if(this.extensions.hasOwnProperty(t)){var n=this.extensions[t];n.load().then((()=>{n.show(e),this.selectView("extension-".concat(_.escapeHtmlForIdClass(t),"-view")),this.displayedExtension=t}))}else i.getExtensions().then((n=>{Object.keys(n).indexOf(t)>-1?this.requestedContext=e:(console.warn("Unknown extension:",t),v("/things"))})).catch((e=>{console.warn("Could not load extensions: ",e),v("/things")}))},selectView:function(e){var t=null;(t=e.startsWith("extension-")?document.getElementById(e):this.views[e])?(this.currentView.classList.add("hidden"),this.currentView.classList.remove("selected"),null!==this.displayedExtension&&this.extensions.hasOwnProperty(this.displayedExtension)&&this.extensions[this.displayedExtension].hide(),t.classList.remove("hidden"),t.classList.add("selected"),a.selectItem(e),this.currentView=t,e.startsWith("extension-")||(this.displayedExtension=null)):console.error("Tried to select view that didn't exist:",e)},showMenuButton:function(){this.menuButton.classList.remove("hidden")},hideMenuButton:function(){this.menuButton.classList.add("hidden")},showOverflowButton:function(){this.overflowButton.classList.remove("hidden")},hideOverflowButton:function(){this.overflowMenu.classList.add("hidden"),this.overflowButton.classList.add("hidden")},hideExtensionBackButton:function(){this.extensionBackButton.classList.add("hidden"),this.extensionBackButton.href="/things"},buildOverflowMenu:function(e){var t=this;this.overflowMenu.innerHTML="";var n=function(e){var n=document.createElement("a");if(n.innerText=e.name,e.listener?(n.href="#",n.addEventListener("click",(n=>{n.preventDefault(),t.toggleOverflowMenu(),e.listener()}))):(n.href=e.href,n.addEventListener("click",(()=>{t.toggleOverflowMenu()}))),e.icon){var i=document.createElement("img");i.src=e.icon,i.alt="".concat(e.name," ").concat(x.getMessage("icon")),n.insertBefore(i,n.childNodes[0])}t.overflowMenu.appendChild(n)};for(var i of e)n(i)},toggleOverflowMenu:function(){this.overflowMenu.classList.contains("hidden")?this.overflowMenu.classList.remove("hidden"):this.overflowMenu.classList.add("hidden")},showPersistentMessage:function(e){this.showMessage(e),this.blockMessages=!0},hidePersistentMessage:function(){this.blockMessages&&(this.hideMessageArea(),this.blockMessages=!1)},showMessageArea:function(){this.messageArea.classList.remove("hidden")},hideMessageArea:function(){this.messageArea.classList.add("hidden")},showMessage:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null!==this.messageTimeout&&(clearTimeout(this.messageTimeout),this.messageTimeout=null),this.blockMessages||(n&&(e+='<br><br>\n        <a href="'.concat(_.escapeHtml(n),'" target="_blank" rel="noopener"\n           data-l10n-id="more-information"></a>')),this.messageArea.innerHTML=e,this.showMessageArea(),"number"==typeof t&&(this.messageTimeout=setTimeout((()=>{this.messageTimeout=null,this.hideMessageArea()}),t)))}};if(e.exports=S,i=n(28797).default,r=n(80025),s=n(22509),o=n(41395),a=n(2777),l=n(18671),c=n(92687),u=n(64502),h=n(36533),d=n(93971),p=n(68188),f=n(89108),m=n(36054),g=n(60600),n(2575),n(54849),n(62832),n(42264),n(46044),n(24838),n(73882),n(55247),n(46027),n(23971),n(60491),n(36645),n(51346),n(78932),n(33020),n(77645),n(947),n(60317),n(18461),n(30677),n(9642),n(50462),n(25901),n(24628),n(42173),n(80440),n(89213),n(22037),n(76057),n(35420),n(17469),n(77066),n(97367),n(45270),n(39378),n(8207),n(24931),n(63459),n(56472),n(18049),n(36795),n(62927),n(42841),n(68074),n(89430),n(87987),n(8738),n(10993),n(42873),n(87023),n(13405),n(7233),n(29042),n(64903),n(13085),n(5220),n(85620),n(87456),n(80029),n(194),n(87095),n(91003),n(31693),n(40333),navigator.serviceWorker){function T(){var e=document.getElementById("update-message-area");document.getElementById("update-message-area-reload").addEventListener("click",(()=>{window.location.reload(!0)})),document.getElementById("update-message-area-close").addEventListener("click",(()=>{e.classList.add("hidden")})),e.classList.remove("hidden")}navigator.serviceWorker.register("/service-worker.js",{scope:"/"}).then((e=>{null!==e.active&&(null===e.waiting?(e.addEventListener("updatefound",(()=>{var t=e.installing;t.addEventListener("statechange",(()=>{"installed"===t.state&&T()}))})),setInterval((()=>{e.update()}),36e5)):T())})),navigator.serviceWorker.ready.then(E.onReady)}window.addEventListener("load",(function e(){window.removeEventListener("load",e),x.load().then((()=>i.getUnits())).then((e=>(S.UNITS=e||S.UNITS,i.getTimezone()))).then((e=>{S.TIMEZONE=e.current||S.TIMEZONE,S.LANGUAGE=x.getLanguage()||S.LANGUAGE,S.init()}))}))},59006:(e,t,n)=>{"use strict";n(74916),n(15306);var i=n(28797).default;function r(){i.userCount().then((e=>{var t;t=e>0?"/login/":"/signup/",window.location.pathname!==t&&window.location.replace(t)}))}i.isLoggedIn()?i.verifyJWT().then((e=>{e?document.body?document.body.classList.remove("hidden"):document.addEventListener("DOMContentLoaded",(()=>{document.body.classList.remove("hidden")})):r()})).catch((()=>{document.body.classList.remove("hidden"),document.getElementById("connectivity-scrim").classList.remove("hidden")})):r()},54849:(e,t,n)=>{"use strict";var i=n(67734);class r extends i{constructor(e){var t=document.createElement("template");t.innerHTML='\n  <style>\n    :host {\n      display: inline-block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n    }\n\n    .webthing-action-container {\n      width: 10rem;\n      height: 10rem;\n      border-radius: 5rem;\n      border: 0.2rem solid white;\n      background-color: #89b6d6;\n      position: relative;\n    }\n\n    .webthing-action-contents {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n    }\n\n    .webthing-action-button {\n      background-color: #698ba4;\n      text-transform: uppercase;\n      height: 4rem;\n      width: 8rem;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      border: none;\n      border-radius: 0.5rem;\n      padding: 1rem;\n      color: #fff;\n      z-index: 10;\n      background-size: 3rem;\n      background-repeat: no-repeat;\n      background-position: center;\n    }\n\n    .webthing-action-button:hover {\n      background-color: #59768a;\n    }\n\n    .webthing-action-button:active {\n      background-color: #496071;\n    }\n\n    .webthing-action-button:disabled {\n      background-color: #79a1bd;\n    }\n\n    .webthing-action-button::-moz-focus-inner {\n      border: 0;\n    }\n\n    .webthing-action-name {\n      text-align: center;\n      max-width: 10rem;\n      overflow-wrap: break-word;\n      background-color: #5d9bc7;\n      display: inline-block;\n    }\n  </style>\n  <div id="container-'.concat(i.count,'" class="webthing-action-container">\n    <div id="contents-').concat(i.count,'" class="webthing-action-contents">\n      <button id="button-').concat(i.count,'" type="button"\n              class="webthing-action-button"></button>\n    </div>\n  </div>\n  <div id="name-').concat(i.count,'" class="webthing-action-name"></div>\n'),super(t),this.opts=e||{},this._button=this.shadowRoot.querySelector(".webthing-action-button"),this._name=this.shadowRoot.querySelector(".webthing-action-name"),this._href=null,this._onClick=this.__onClick.bind(this)}connectedCallback(){this.name=this.dataset.name,this._upgradeProperty("href"),this._button.addEventListener("click",this._onClick)}disconnectedCallback(){this._button.removeEventListener("click",this._onClick)}get href(){return this._href}set href(e){this._href=e}get name(){return this._name.innerText}set name(e){this.opts.icon?this._button.style.backgroundImage="url('".concat(this.opts.icon,"')"):this._button.innerText=e,this._name.innerText=e}__onClick(e){e.preventDefault(),e.stopPropagation(),this._href?window.location.href=this._href:(this.value=e.target.value,this.dispatchEvent(new CustomEvent("click",{bubbles:!0})))}}window.customElements.define("webthing-action",r),e.exports=r},62832:(e,t,n)=>{"use strict";var i=n(54849);class r extends i{constructor(){super({icon:"/images/component-icons/lock-lock.svg"})}}window.customElements.define("webthing-lock-action",r),e.exports=r},42264:(e,t,n)=>{"use strict";var i=n(54849);class r extends i{constructor(){super({icon:"/images/component-icons/lock-unlock.svg"})}}window.customElements.define("webthing-unlock-action",r),e.exports=r},67734:(e,t,n)=>{"use strict";n(54747),n(74916),n(15306);class i extends HTMLElement{constructor(e){super(),this.attachShadow({mode:"open"});var t=e.content.cloneNode(!0);if("ShadowRoot"!==ShadowRoot.name){var n=this.shadowRoot.host.tagName;t.querySelectorAll("style").forEach((e=>{e.innerHTML=e.innerHTML.replace(/:host/g,n)}))}this.shadowRoot.appendChild(t),i.count++}connectedCallback(){}disconnectedCallback(){}_upgradeProperty(e){if(this.hasOwnProperty(e)){var t=this[e];delete this[e],this[e]=t}this.hasAttribute(e)&&(this[e]=this.getAttribute(e))}}i.count=0,e.exports=i},46044:(e,t,n)=>{"use strict";var i=n(77645);class r extends i{}window.customElements.define("webthing-air-quality-sensor-capability",r),e.exports=r},24838:(e,t,n)=>{"use strict";var i=n(67734),r=n(25290),s=document.createElement("template");s.innerHTML='\n  <style>\n    :host {\n      display: block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n      cursor: default;\n    }\n\n    .webthing-alarm-capability-icon {\n      width: 12.4rem;\n      height: 12.4rem;\n      border-radius: 6.4rem;\n      border: 0.2rem solid white;\n      background-size: 6.4rem;\n      background-repeat: no-repeat;\n      transform: translate(0);\n      background-color: #89b6d6;\n      background-image: url(\'/images/component-icons/alarm-ok.svg\');\n      background-position: center 2rem;\n    }\n\n    .webthing-alarm-capability-icon.alarm {\n      background-color: white;\n      background-image: url(\'/images/component-icons/alarm-alarm.svg\');\n    }\n\n    .webthing-alarm-capability-label {\n      font-weight: bold;\n      text-transform: uppercase;\n      padding-top: 8.75rem;\n      font-size: 1.4rem;\n    }\n\n    .webthing-alarm-capability-icon.alarm\n    .webthing-alarm-capability-label {\n      color: #5d9bc7;\n    }\n  </style>\n  <div id="icon" class="webthing-alarm-capability-icon">\n    <div id="label" class="webthing-alarm-capability-label">--</div>\n  </div>\n';class o extends i{constructor(){super(s),this._icon=this.shadowRoot.querySelector("#icon"),this._label=this.shadowRoot.querySelector("#label"),this._alarm=!1}connectedCallback(){this.alarm=void 0!==this.dataset.alarm?this.dataset.alarm:null}get alarm(){return this._alarm}set alarm(e){this._alarm=Boolean(e),null===e?(this._icon.classList.remove("alarm"),this._label.innerText=r.getMessage("ellipsis")):this._alarm?(this._icon.classList.add("alarm"),this._label.innerText=r.getMessage("alarm")):(this._icon.classList.remove("alarm"),this._label.innerText=r.getMessage("ok"))}}window.customElements.define("webthing-alarm-capability",o),e.exports=o},73882:(e,t,n)=>{"use strict";var i=n(77645);class r extends i{}window.customElements.define("webthing-barometric-pressure-sensor-capability",r),e.exports=r},55247:(e,t,n)=>{"use strict";var i=n(67734),r=n(25290),s=document.createElement("template");s.innerHTML='\n  <style>\n    :host {\n      display: block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n      cursor: default;\n    }\n\n    .webthing-binary-sensor-capability-icon {\n      width: 12.4rem;\n      height: 12.4rem;\n      border-radius: 6.4rem;\n      border: 0.2rem solid white;\n      transform: translate(0);\n      background-color: #89b6d6;\n    }\n\n    .webthing-binary-sensor-capability-icon.on {\n      background-color: white;\n    }\n\n    .webthing-binary-sensor-capability-label {\n      font-weight: bold;\n      text-transform: uppercase;\n      padding-top: 5.2rem;\n    }\n\n    .webthing-binary-sensor-capability-icon.on\n    .webthing-binary-sensor-capability-label {\n      color: #5d9bc7;\n    }\n  </style>\n  <div id="icon" class="webthing-binary-sensor-capability-icon">\n    <div id="label" class="webthing-binary-sensor-capability-label">--</div>\n  </div>\n';class o extends i{constructor(){super(s),this._icon=this.shadowRoot.querySelector("#icon"),this._label=this.shadowRoot.querySelector("#label"),this._on=!1}connectedCallback(){this.on=void 0!==this.dataset.on?this.dataset.on:null}get on(){return this._icon.classList.contains("on")}set on(e){this._on=Boolean(e),null===e?(this._icon.classList.remove("on"),this._label.innerText=r.getMessage("ellipsis")):this._on?(this._icon.classList.add("on"),this._label.innerText=r.getMessage("active")):(this._icon.classList.remove("on"),this._label.innerText=r.getMessage("inactive"))}}window.customElements.define("webthing-binary-sensor-capability",o),e.exports=o},46027:(e,t,n)=>{"use strict";var i=n(67734),r=document.createElement("template");r.innerHTML='\n  <style>\n    :host {\n      display: block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n      cursor: default;\n    }\n\n    .webthing-camera-capability-icon {\n      box-sizing: border-box;\n      width: 12.8rem;\n      height: 12.8rem;\n      border-radius: 6.4rem;\n      border: 0.2rem solid white;\n      background-size: 6.4rem;\n      background-repeat: no-repeat;\n      transform: translate(0);\n      background-color: #89b6d6;\n      background-image: url(\'/images/component-icons/camera.svg\');\n      background-position: center;\n    }\n  </style>\n  <div id="icon" class="webthing-camera-capability-icon"></div>\n';class s extends i{constructor(){super(r)}}window.customElements.define("webthing-camera-capability",s),e.exports=s},23971:(e,t,n)=>{"use strict";var i=n(67734),r=document.createElement("template");r.innerHTML='\n  <style>\n    :host {\n      display: block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n      cursor: default;\n    }\n\n    .webthing-color-control-capability-container {\n      box-sizing: border-box;\n      width: 12.8rem;\n      height: 12.8rem;\n      border-radius: 6.4rem;\n      border: 0.2rem solid white;\n      transform: translate(0);\n      background-color: #89b6d6;\n    }\n\n    .webthing-color-control-capability-info {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      height: 5rem;\n      width: 5rem;\n      border-radius: 0.5rem;\n      border: 0.2rem solid white;\n    }\n  </style>\n  <div id="container" class="webthing-color-control-capability-container">\n    <div id="info" class="webthing-color-control-capability-info"></div>\n  </div>\n';class s extends i{constructor(){super(r),this._info=this.shadowRoot.querySelector("#info"),this._color="#ffffff"}connectedCallback(){this.color=this.dataset.color||"#ffffff"}get color(){return this._color}set color(e){this._color=e,this._info.style.backgroundColor=e}}window.customElements.define("webthing-color-control-capability",s),e.exports=s},60491:(e,t,n)=>{"use strict";var i=n(23971);class r extends i{}window.customElements.define("webthing-color-sensor-capability",r),e.exports=r},36645:(e,t,n)=>{"use strict";var i=n(67734),r=n(25290),s=document.createElement("template");s.innerHTML='\n  <style>\n    :host {\n      display: block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n      cursor: default;\n    }\n\n    .webthing-custom-capability-icon {\n      width: 12.4rem;\n      height: 12.4rem;\n      border-radius: 6.4rem;\n      border: 0.2rem solid white;\n      background-size: 6.4rem;\n      background-repeat: no-repeat;\n      transform: translate(0);\n      background-color: #89b6d6;\n      background-position: center;\n    }\n\n    .webthing-custom-capability-label {\n      font-weight: bold;\n      text-transform: uppercase;\n      padding-top: 5.2rem;\n    }\n\n    .webthing-custom-capability-icon.custom-icon\n    .webthing-custom-capability-label {\n      display: none;\n    }\n  </style>\n  <div id="icon" class="webthing-custom-capability-icon">\n    <div id="label" class="webthing-custom-capability-label"></div>\n  </div>\n';class o extends i{constructor(){super(s),this._icon=this.shadowRoot.querySelector("#icon"),this._label=this.shadowRoot.querySelector("#label"),this._label.innerText=r.getMessage("Thing"),this._iconHref=""}connectedCallback(){this.iconHref=void 0!==this.dataset.iconHref?this.dataset.iconHref:""}get iconHref(){return this._iconHref}set iconHref(e){e?(this._iconHref=e,this._icon.style.backgroundImage='url("'.concat(this._iconHref,'")'),this._icon.classList.add("custom-icon")):(this._iconHref="",this._icon.style.backgroundImage="",this._icon.classList.remove("custom-icon"))}}window.customElements.define("webthing-custom-capability",o),e.exports=o},51346:(e,t,n)=>{"use strict";var i=n(67734),r=n(25290),s=document.createElement("template");s.innerHTML='\n  <style>\n    :host {\n      display: block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n      cursor: default;\n    }\n\n    .webthing-door-sensor-capability-icon {\n      width: 12.4rem;\n      height: 12.4rem;\n      border-radius: 6.4rem;\n      border: 0.2rem solid white;\n      background-size: 6.4rem;\n      background-repeat: no-repeat;\n      transform: translate(0);\n      background-color: #89b6d6;\n      background-image: url(\'/images/component-icons/door-sensor-closed.svg\');\n      background-position: center 2rem;\n    }\n\n    .webthing-door-sensor-capability-icon.open {\n      background-color: white;\n      background-image: url(\'/images/component-icons/door-sensor-open.svg\');\n    }\n\n    .webthing-door-sensor-capability-label {\n      font-weight: bold;\n      text-transform: uppercase;\n      padding-top: 8.75rem;\n      font-size: 1.4rem;\n    }\n\n    .webthing-door-sensor-capability-icon.open\n    .webthing-door-sensor-capability-label {\n      color: #5d9bc7;\n    }\n  </style>\n  <div id="icon" class="webthing-door-sensor-capability-icon">\n    <div id="label" class="webthing-door-sensor-capability-label">--</div>\n  </div>\n';class o extends i{constructor(){super(s),this._icon=this.shadowRoot.querySelector("#icon"),this._label=this.shadowRoot.querySelector("#label"),this._open=!1}connectedCallback(){this.open=void 0!==this.dataset.open?this.dataset.open:null}get open(){return this._open}set open(e){this._open=Boolean(e),null===e?(this._icon.classList.remove("open"),this._label.innerText=r.getMessage("ellipsis")):this._open?(this._icon.classList.add("open"),this._label.innerText=r.getMessage("open")):(this._icon.classList.remove("open"),this._label.innerText=r.getMessage("closed"))}}window.customElements.define("webthing-door-sensor-capability",o),e.exports=o},78932:(e,t,n)=>{"use strict";var i=n(77645);class r extends i{get power(){return this.level}set power(e){this.level=e}}window.customElements.define("webthing-energy-monitor-capability",r),e.exports=r},33020:(e,t,n)=>{"use strict";var i=n(77645);class r extends i{}window.customElements.define("webthing-humidity-sensor-capability",r),e.exports=r},77645:(e,t,n)=>{"use strict";var i=n(67734),r=document.createElement("template");r.innerHTML='\n  <style>\n    :host {\n      display: block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n      cursor: default;\n    }\n\n    .webthing-label-capability-container {\n      box-sizing: border-box;\n      width: 12.8rem;\n      height: 12.8rem;\n      border-radius: 6.4rem;\n      border: 0.2rem solid white;\n      transform: translate(0);\n      background-color: #89b6d6;\n    }\n\n    .webthing-label-capability-contents {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      font-size: 2.8rem;\n      font-weight: bold;\n      width: 12.8rem;\n    }\n  </style>\n  <div id="container" class="webthing-label-capability-container">\n    <div id="contents" class="webthing-label-capability-contents">\n      <span id="value" class="webthing-label-capability-value">\n      </span><span id="unit" class="webthing-label-capability-unit"></span>\n    </div>\n  </div>\n';class s extends i{constructor(){super(r),this._value=this.shadowRoot.querySelector(".webthing-label-capability-value"),this._unit=this.shadowRoot.querySelector(".webthing-label-capability-unit"),this._precision=0,this._level=0}connectedCallback(){this.level||(this.level=void 0!==this.dataset.level?this.dataset.level:0),this.unit||(this.unit=void 0!==this.dataset.unit?this.dataset.unit:""),this.precision||(this.precision=void 0!==this.dataset.precision?this.dataset.precision:0)}get level(){return this._level}set level(e){this._level=Number(e),this._value.innerText=this._level.toFixed(this.precision)}get unit(){return this._unit.innerText}set unit(e){this._unit.innerText=e}get precision(){return this._precision}set precision(e){this._precision=parseInt(e,10)}}window.customElements.define("webthing-label-capability",s),e.exports=s},947:(e,t,n)=>{"use strict";var i=n(67734),r=n(25290),s=document.createElement("template");s.innerHTML='\n  <style>\n    :host {\n      display: block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n      cursor: default;\n    }\n\n    .webthing-leak-sensor-capability-icon {\n      width: 12.4rem;\n      height: 12.4rem;\n      border-radius: 6.4rem;\n      border: 0.2rem solid white;\n      background-size: 6.4rem;\n      background-repeat: no-repeat;\n      transform: translate(0);\n      background-color: #89b6d6;\n      background-image: url(\'/images/component-icons/leak-sensor-dry.svg\');\n      background-position: center 2rem;\n    }\n\n    .webthing-leak-sensor-capability-icon.leak {\n      background-color: white;\n      background-image: url(\'/images/component-icons/leak-sensor-leak.svg\');\n    }\n\n    .webthing-leak-sensor-capability-label {\n      font-weight: bold;\n      text-transform: uppercase;\n      padding-top: 8.75rem;\n      font-size: 1.2rem;\n    }\n\n    .webthing-leak-sensor-capability-icon.leak\n    .webthing-leak-sensor-capability-label {\n      color: #5d9bc7;\n      font-size: 1.4rem;\n    }\n  </style>\n  <div id="icon" class="webthing-leak-sensor-capability-icon">\n    <div id="label" class="webthing-leak-sensor-capability-label">--</div>\n  </div>\n';class o extends i{constructor(){super(s),this._icon=this.shadowRoot.querySelector("#icon"),this._label=this.shadowRoot.querySelector("#label"),this._leak=!1}connectedCallback(){this.leak=void 0!==this.dataset.leak?this.dataset.leak:null}get leak(){return this._leak}set leak(e){this._leak=Boolean(e),null===e?(this._icon.classList.remove("leak"),this._label.innerText=r.getMessage("ellipsis")):this._leak?(this._icon.classList.add("leak"),this._label.innerText=r.getMessage("leak")):(this._icon.classList.remove("leak"),this._label.innerText=r.getMessage("dry"))}}window.customElements.define("webthing-leak-sensor-capability",o),e.exports=o},60317:(e,t,n)=>{"use strict";var i=n(67734),r=n(29705),s=n(25290),o=document.createElement("template");o.innerHTML='\n  <style>\n    :host {\n      display: block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n      cursor: default;\n    }\n\n    .webthing-light-capability-container {\n      box-sizing: border-box;\n      width: 12.8rem;\n      height: 12.8rem;\n      border-radius: 6.4rem;\n      border: 0.2rem solid white;\n      transform: translate(0);\n      background-color: #89b6d6;\n    }\n\n    .webthing-light-capability-container.on {\n      background-color: white;\n      color: #5d9bc7;\n    }\n\n    .webthing-light-capability-info {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n    }\n\n    .webthing-light-capability-icon {\n      fill: white;\n    }\n\n    .webthing-light-capability-icon.bright {\n      stroke: #666;\n    }\n\n    .webthing-light-capability-label {\n      padding-top: 0.2rem;\n      font-weight: bold;\n      text-transform: uppercase;\n    }\n  </style>\n  <div id="container" class="webthing-light-capability-container">\n    <div id="info" class="webthing-light-capability-info">\n      <svg id="icon" class="webthing-light-capability-icon"\n        xmlns="http://www.w3.org/2000/svg" height="68" width="64">\n        <g transform="translate(0,-987.36216)">\n          <path\n             d="m 41.6997,1041.6985 c 0,1.0723 -0.8727,1.9367 -1.9366,1.9367 l\n             -15.5179,0 c -1.0722,0 -1.9366,-0.8727 -1.9366,-1.9367 0,-1.0722\n             0.8727,-1.9366 1.9366,-1.9366 l 15.5179,0 c 1.0639,-0.01\n             1.9366,0.8644 1.9366,1.9366 z m -1.9449,2.9091 -15.5096,0 c\n             -1.28,0 -2.2608,1.2302 -1.8369,2.5683 0.2577,0.8063 1.0722,1.305\n             1.92,1.305 l 0.033,0 c 1.1221,0 2.1444,0.6317 2.6431,1.6374 l\n             0.017,0.041 c 0.6732,1.3465 2.053,2.2026 3.5657,2.2026 l 2.826,0 c\n             1.5127,0 2.8925,-0.8561 3.5657,-2.2026 l 0.017,-0.041 c\n             0.4987,-1.0057 1.5294,-1.6374 2.6432,-1.6374 l 0.033,0 c 0.8478,0\n             1.6623,-0.4987 1.92,-1.305 0.4322,-1.3381 -0.5569,-2.5683\n             -1.8369,-2.5683 z m 1.9449,-7.7631 c 0,1.0722 -0.8727,1.9366\n             -1.9366,1.9366 l -15.5179,0 c -1.0722,0 -1.9366,-0.8727\n             -1.9366,-1.9366 0,-1.0306 0.8062,-1.8701 1.8285,-1.9283\n             -1.2135,-10.9132 -12.5008,-13.3403 -12.5008,-26.19 0,-11.24577\n             9.118,-20.36377 20.3637,-20.36377 11.2457,0 20.3637,9.118\n             20.3637,20.36377 0,12.8497 -11.2873,15.2768 -12.4925,26.19\n             1.014,0.058 1.8285,0.8977 1.8285,1.9283 z" />\n        </g>\n      </svg>\n      <div id="label" class="webthing-light-capability-label">--</div>\n    </div>\n  </div>\n';var a="#ffffff",l="#5d9bc7";class c extends i{constructor(){super(o),this._container=this.shadowRoot.querySelector("#container"),this._icon=this.shadowRoot.querySelector("#icon"),this._label=this.shadowRoot.querySelector("#label"),this._haveBrightness=!1,this._haveColor=!1,this._haveColorTemperature=!1,this._haveColorMode=!1,this._on=!1,this._brightness=0,this._color=a,this._colorTemperature=2700,this._colorMode="color",this._onClick=this.__onClick.bind(this)}connectedCallback(){this._haveBrightness=void 0!==this.dataset.haveBrightness&&"true"===this.dataset.haveBrightness,this._haveColor=void 0!==this.dataset.haveColor&&"true"===this.dataset.haveColor,this._haveColorTemperature=void 0!==this.dataset.haveColorTemperature&&"true"===this.dataset.haveColorTemperature,this._haveColorMode=void 0!==this.dataset.haveColorMode&&"true"===this.dataset.haveColorMode,this.on=void 0!==this.dataset.on&&this.dataset.on,this.brightness=void 0!==this.dataset.brightness&&this.dataset.brightness,this.color=this.dataset.color||a,this.colorTemperature=void 0!==this.dataset.colorTemperature?this.dataset.colorTemperature:2700,this.colorMode=void 0!==this.dataset.colorMode?this.dataset.colorMode:"color",this._container.addEventListener("click",this._onClick)}disconnectedCallback(){this._container.removeEventListener("click",this._onClick)}get on(){return this._on}set on(e){this._on=Boolean(e),this._on?this._container.classList.add("on"):this._container.classList.remove("on"),this._haveBrightness?this.brightness=this._brightness:this._on?this._label.innerText=s.getMessage("on"):this._label.innerText=s.getMessage("off"),this._haveColor||this._haveColorTmperature?this._updateIconColor():this._on?this._icon.style.fill=l:this._icon.style.fill=a}get brightness(){return this._brightness}set brightness(e){this._haveBrightness&&(this._brightness=Number(e),this._on?this._label.innerText="".concat(Math.round(this._brightness),"%"):this._label.innerText=s.getMessage("off"))}get color(){return this._color}set color(e){this._haveColor&&(this._color=e,this._updateIconColor())}get colorTemperature(){return this._colorTemperature}set colorTemperature(e){this._haveColorTemperature&&(this._colorTemperature=Number(e),this._updateIconColor())}get colorMode(){return this._colorMode}set colorMode(e){this._haveColorMode&&(this._colorMode=e,this._updateIconColor())}_updateIconColor(){var e;e=this._haveColorMode?"color"===this.colorMode?this.color:"temperature"===this.colorMode?r.colorTemperatureToRGB(this.colorTemperature):l:this._haveColor?this.color:this._haveColorTemperature?r.colorTemperatureToRGB(this.colorTemperature):l,this._icon.style.fill=e,.299*parseInt(e.substr(1,2),16)+.587*parseInt(e.substr(3,2),16)+.114*parseInt(e.substr(5,2),16)>186?this._icon.classList.add("bright"):this._icon.classList.remove("bright")}__onClick(e){e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("click",{bubbles:!0}))}}window.customElements.define("webthing-light-capability",c),e.exports=c},18461:(e,t,n)=>{"use strict";n(26699);var i=n(67734),r=n(25290),s=document.createElement("template");s.innerHTML="\n  <style>\n    :host {\n      display: block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n      cursor: default;\n    }\n\n    .webthing-lock-capability-icon {\n      width: 12.4rem;\n      height: 12.4rem;\n      border-radius: 6.4rem;\n      border: 0.2rem solid white;\n      background-size: 6.4rem;\n      background-repeat: no-repeat;\n      transform: translate(0);\n      background-position: center 2rem;\n    }\n\n    .webthing-lock-capability-icon.locked {\n      background-color: #89b6d6;\n      background-image: url('/images/component-icons/lock-locked.svg');\n    }\n\n    .webthing-lock-capability-icon.unlocked {\n      background-color: white;\n      background-image: url('/images/component-icons/lock-unlocked.svg');\n    }\n\n    .webthing-lock-capability-icon.unknown {\n      background-color: white;\n      background-image: url('/images/component-icons/lock-unknown.svg');\n    }\n\n    .webthing-lock-capability-icon.jammed {\n      background-color: white;\n      background-image: url('/images/component-icons/lock-jammed.svg');\n    }\n\n    .webthing-lock-capability-label {\n      font-weight: bold;\n      text-transform: uppercase;\n      padding-top: 8.75rem;\n      font-size: 1.4rem;\n    }\n\n    .webthing-lock-capability-icon.unlocked .webthing-lock-capability-label,\n    .webthing-lock-capability-icon.unknown .webthing-lock-capability-label,\n    .webthing-lock-capability-icon.jammed .webthing-lock-capability-label {\n      color: #5d9bc7;\n    }\n  </style>\n  <div id=\"icon\" class=\"webthing-lock-capability-icon\">\n    <div id=\"label\" class=\"webthing-lock-capability-label\">...</div>\n  </div>\n";class o extends i{constructor(){super(s),this._icon=this.shadowRoot.querySelector("#icon"),this._label=this.shadowRoot.querySelector("#label"),this._state="unknown"}connectedCallback(){this.state=void 0!==this.dataset.state?this.dataset.state:"unknown"}get state(){return this._state}set state(e){["locked","unlocked","unknown","jammed"].includes(e)||(e="unknown"),this._state=e,this._icon.classList.remove("locked","unlocked","unknown","jammed"),this._icon.classList.add(e),"unknown"===e&&(e="ellipsis"),this._label.innerText=r.getMessage(e)}}window.customElements.define("webthing-lock-capability",o),e.exports=o},30677:(e,t,n)=>{"use strict";var i=n(67734),r=n(25290),s=document.createElement("template");s.innerHTML='\n  <style>\n    :host {\n      display: block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n      cursor: default;\n    }\n\n    .webthing-motion-sensor-capability-icon {\n      width: 12.4rem;\n      height: 12.4rem;\n      border-radius: 6.4rem;\n      border: 0.2rem solid white;\n      background-size: 6.4rem;\n      background-repeat: no-repeat;\n      transform: translate(0);\n      background-color: #89b6d6;\n      background-image: url(\'/images/component-icons/motion-sensor-no-motion.svg\');\n      background-position: center 2rem;\n    }\n\n    .webthing-motion-sensor-capability-icon.motion {\n      background-color: white;\n      background-image: url(\'/images/component-icons/motion-sensor-motion.svg\');\n    }\n\n    .webthing-motion-sensor-capability-label {\n      font-weight: bold;\n      text-transform: uppercase;\n      padding-top: 8.75rem;\n      font-size: 1.2rem;\n    }\n\n    .webthing-motion-sensor-capability-icon.motion\n    .webthing-motion-sensor-capability-label {\n      color: #5d9bc7;\n      font-size: 1.4rem;\n    }\n  </style>\n  <div id="icon" class="webthing-motion-sensor-capability-icon">\n    <div id="label" class="webthing-motion-sensor-capability-label">--</div>\n  </div>\n';class o extends i{constructor(){super(s),this._icon=this.shadowRoot.querySelector("#icon"),this._label=this.shadowRoot.querySelector("#label"),this._motion=!1}connectedCallback(){this.motion=void 0!==this.dataset.motion?this.dataset.motion:null}get motion(){return this._motion}set motion(e){this._motion=Boolean(e),null===e?(this._icon.classList.remove("motion"),this._label.innerText=r.getMessage("ellipsis")):this._motion?(this._icon.classList.add("motion"),this._label.innerText=r.getMessage("motion")):(this._icon.classList.remove("motion"),this._label.innerText=r.getMessage("no-motion"))}}window.customElements.define("webthing-motion-sensor-capability",o),e.exports=o},9642:(e,t,n)=>{"use strict";var i=n(77645);class r extends i{}window.customElements.define("webthing-multi-level-sensor-capability",r),e.exports=r},50462:(e,t,n)=>{"use strict";var i=n(67734),r=n(25290),s=document.createElement("template");s.innerHTML='\n  <style>\n    :host {\n      display: block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n      cursor: default;\n    }\n\n    .webthing-multi-level-switch-capability-container {\n      box-sizing: border-box;\n      width: 12.8rem;\n      height: 12.8rem;\n      border-radius: 6.4rem;\n      border: 0.2rem solid white;\n      transform: translate(0);\n      background-color: #89b6d6;\n    }\n\n    .webthing-multi-level-switch-capability-container.on {\n      background-color: white;\n      color: #5d9bc7;\n    }\n\n    .webthing-multi-level-switch-capability-container.on\n    .webthing-multi-level-switch-capability-bar {\n      border-color: #5d9bc7;\n    }\n\n    .webthing-multi-level-switch-capability-info {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n    }\n\n    .webthing-multi-level-switch-capability-bar {\n      width: 1rem;\n      height: 8rem;\n      border-radius: 0.5rem;\n      border: 0.2rem solid white;\n      margin: 0 auto;\n    }\n\n    .webthing-multi-level-switch-capability-label {\n      padding-top: 0.2rem;\n      font-weight: bold;\n      text-transform: uppercase;\n    }\n  </style>\n  <div id="container" class="webthing-multi-level-switch-capability-container">\n    <div id="info" class="webthing-multi-level-switch-capability-info">\n      <div id="bar" class="webthing-multi-level-switch-capability-bar"></div>\n      <div id="label" class="webthing-multi-level-switch-capability-label">\n      </div>\n    </div>\n  </div>\n';class o extends i{constructor(){super(s),this._container=this.shadowRoot.querySelector(".webthing-multi-level-switch-capability-container"),this._bar=this.shadowRoot.querySelector(".webthing-multi-level-switch-capability-bar"),this._label=this.shadowRoot.querySelector(".webthing-multi-level-switch-capability-label"),this._on=!1,this._level=0,this._precision=0,this._unit="",this._onClick=this.__onClick.bind(this)}connectedCallback(){this._upgradeProperty("min"),this._upgradeProperty("max"),this.on=void 0===this.dataset.on||this.dataset.on,this.level=void 0!==this.dataset.level?this.dataset.level:this.min,this.unit=void 0!==this.dataset.unit?this.dataset.unit:"",this.precision=void 0!==this.dataset.precision?this.dataset.precision:0,void 0===this._min&&(this._min=0),void 0===this._max&&(this._max=100),this._container.addEventListener("click",this._onClick)}disconnectedCallback(){this._container.removeEventListener("click",this._onClick)}get min(){return this._min}set min(e){this._min=e}get max(){return this._max}set max(e){this._max=e}get on(){return this._on}set on(e){this._on=Boolean(e),this._on?this._container.classList.add("on"):(this._label.innerText=r.getMessage("off"),this._container.classList.remove("on")),this.level=this._level}get level(){return this._level}set level(e){var t,n;this._level=Number(e),this._on?(t="#5d9bc7",n="white",this._label.innerHTML="".concat(this._level.toFixed(this.precision)).concat(this.unit)):(t="white",n="#89b6d6");var i=(this.level-this.min)/(this.max-this.min)*100;this._bar.style.background="linear-gradient(".concat(n,", ").concat(n," ").concat(100-i,"%, ")+"".concat(t," ").concat(100-i,"%, ").concat(t,")")}get unit(){return this._unit}set unit(e){this._unit=e}get precision(){return this._precision}set precision(e){this._precision=parseInt(e,10)}__onClick(e){e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("click",{bubbles:!0}))}}window.customElements.define("webthing-multi-level-switch-capability",o),e.exports=o},25901:(e,t,n)=>{"use strict";var i=n(67734),r=n(25290),s=document.createElement("template");s.innerHTML='\n  <style>\n    :host {\n      display: block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n      cursor: default;\n    }\n\n    .webthing-on-off-switch-capability-icon {\n      width: 12.4rem;\n      height: 12.4rem;\n      border-radius: 6.4rem;\n      border: 0.2rem solid white;\n      background-size: 6.4rem;\n      background-repeat: no-repeat;\n      transform: translate(0);\n      background-color: #89b6d6;\n      background-image: url(\'/images/component-icons/on-off-switch-off.svg\');\n      background-position: center 2rem;\n    }\n\n    .webthing-on-off-switch-capability-icon.on {\n      background-color: white;\n      background-image: url(\'/images/component-icons/on-off-switch-on.svg\');\n    }\n\n    .webthing-on-off-switch-capability-label {\n      font-weight: bold;\n      text-transform: uppercase;\n      padding-top: 8.75rem;\n    }\n\n    .webthing-on-off-switch-capability-icon.on\n    .webthing-on-off-switch-capability-label {\n      color: #5d9bc7;\n    }\n  </style>\n  <div id="icon" class="webthing-on-off-switch-capability-icon">\n    <div id="label" class="webthing-on-off-switch-capability-label">--</div>\n  </div>\n';class o extends i{constructor(){super(s),this._icon=this.shadowRoot.querySelector("#icon"),this._label=this.shadowRoot.querySelector("#label"),this._on=!1,this._onClick=this.__onClick.bind(this)}connectedCallback(){this.on=void 0!==this.dataset.on?this.dataset.on:null,this._icon.addEventListener("click",this._onClick)}disconnectedCallback(){this._icon.removeEventListener("click",this._onClick)}get on(){return this._on}set on(e){this._on=Boolean(e),!0===e?(this._icon.classList.add("on"),this._label.innerText=r.getMessage("on")):!1===e?(this._icon.classList.remove("on"),this._label.innerText=r.getMessage("off")):(this._icon.classList.remove("on"),this._label.innerText=r.getMessage("ellipsis"))}__onClick(e){e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("click",{bubbles:!0}))}}window.customElements.define("webthing-on-off-switch-capability",o),e.exports=o},24628:(e,t,n)=>{"use strict";var i=n(67734),r=n(25290),s=document.createElement("template");s.innerHTML='\n  <style>\n    :host {\n      display: block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n      cursor: default;\n    }\n\n    .webthing-push-button-capability-icon {\n      width: 12.4rem;\n      height: 12.4rem;\n      border-radius: 6.4rem;\n      border: 0.2rem solid white;\n      background-size: 6.4rem;\n      background-repeat: no-repeat;\n      transform: translate(0);\n      background-color: #89b6d6;\n      background-image: url(\'/images/component-icons/push-button-not-pushed.svg\');\n      background-position: center 2rem;\n    }\n\n    .webthing-push-button-capability-icon.pushed {\n      background-color: white;\n      background-image: url(\'/images/component-icons/push-button-pushed.svg\');\n    }\n\n    .webthing-push-button-capability-label {\n      font-weight: bold;\n      text-transform: uppercase;\n      padding-top: 8.75rem;\n      font-size: 1.2rem;\n    }\n\n    .webthing-push-button-capability-icon.pushed\n    .webthing-push-button-capability-label {\n      color: #5d9bc7;\n      font-size: 1.4rem;\n    }\n  </style>\n  <div id="icon" class="webthing-push-button-capability-icon">\n    <div id="label" class="webthing-push-button-capability-label">--</div>\n  </div>\n';class o extends i{constructor(){super(s),this._icon=this.shadowRoot.querySelector("#icon"),this._label=this.shadowRoot.querySelector("#label"),this._pushed=!1,this._pressTimeout=null,this.addEventListener("press",this._onPress.bind(this))}connectedCallback(){this.pushed=void 0!==this.dataset.pushed?this.dataset.pushed:null}get pushed(){return this._pushed}set pushed(e){this._pushed=Boolean(e),null===e?(this._icon.classList.remove("pushed"),this._label.innerText=r.getMessage("ellipsis")):this._pushed?(this._icon.classList.add("pushed"),this._label.innerText=r.getMessage("pushed")):(this._icon.classList.remove("pushed"),this._label.innerText=r.getMessage("not-pushed"))}_onPress(e){switch(e.detail){case"single":this._fireSinglePress();break;case"double":this._fireDoublePress();break;case"long":this._fireLongPress()}}_fireSinglePress(){null!==this._pressTimeout&&(clearTimeout(this._pressTimeout),this._pressTimeout=null),this.pushed=!0,this._pressTimeout=setTimeout((()=>{this.pushed=!1,this._pressTimeout=null}),300)}_fireDoublePress(){null!==this._pressTimeout&&(clearTimeout(this._pressTimeout),this._pressTimeout=null),this.pushed=!0,this._pressTimeout=setTimeout((()=>{this.pushed=!1,this._pressTimeout=setTimeout((()=>{this.pushed=!0,this._pressTimeout=setTimeout((()=>{this.pushed=!1,this._pressTimeout=null}),300)}),300)}),300)}_fireLongPress(){null!==this._pressTimeout&&(clearTimeout(this._pressTimeout),this._pressTimeout=null),this.pushed=!0,this._pressTimeout=setTimeout((()=>{this.pushed=!1,this._pressTimeout=null}),1500)}}window.customElements.define("webthing-push-button-capability",o),e.exports=o},42173:(e,t,n)=>{"use strict";var i=n(67734),r=n(25290),s=document.createElement("template");s.innerHTML='\n  <style>\n    :host {\n      display: block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n      cursor: default;\n    }\n\n    .webthing-smart-plug-capability-icon {\n      width: 12.4rem;\n      height: 12.4rem;\n      border-radius: 6.4rem;\n      border: 0.2rem solid white;\n      background-size: 6.4rem;\n      background-repeat: no-repeat;\n      transform: translate(0);\n      background-color: #89b6d6;\n      background-image: url(\'/images/component-icons/smart-plug-off.svg\');\n      background-position: center 2rem;\n    }\n\n    .webthing-smart-plug-capability-icon.on {\n      background-color: white;\n      background-image: url(\'/images/component-icons/smart-plug-on.svg\');\n    }\n\n    .webthing-smart-plug-capability-label {\n      font-weight: bold;\n      text-transform: uppercase;\n      padding-top: 8.75rem;\n    }\n\n    .webthing-smart-plug-capability-icon.on\n    .webthing-smart-plug-capability-label {\n      color: #5d9bc7;\n    }\n  </style>\n  <div id="icon" class="webthing-smart-plug-capability-icon">\n    <div id="label" class="webthing-smart-plug-capability-label">--</div>\n  </div>\n';class o extends i{constructor(){super(s),this._icon=this.shadowRoot.querySelector("#icon"),this._label=this.shadowRoot.querySelector("#label"),this._havePower=!1,this._on=!1,this._power=0,this._onClick=this.__onClick.bind(this)}connectedCallback(){this._havePower=void 0!==this.dataset.havePower&&"true"===this.dataset.havePower,this.on=void 0!==this.dataset.on?this.dataset.on:null,this.power=void 0!==this.dataset.power&&this.dataset.power,this._icon.addEventListener("click",this._onClick)}disconnectedCallback(){this._icon.removeEventListener("click",this._onClick)}get on(){return this._on}set on(e){this._on=Boolean(e),null===e?(this._icon.classList.remove("on"),this._label.innerText=r.getMessage("ellipsis")):this._on?(this._icon.classList.add("on"),this._havePower?this.power=this._power:this._label.innerText=r.getMessage("on")):(this._icon.classList.remove("on"),this._label.innerText=r.getMessage("off"))}get power(){return this._power}set power(e){this._power=Number(e),this._on&&(this._label.innerText="".concat(Math.round(this._power)," W"))}__onClick(e){e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("click",{bubbles:!0}))}}window.customElements.define("webthing-smart-plug-capability",o),e.exports=o},80440:(e,t,n)=>{"use strict";var i=n(67734),r=n(25290),s=document.createElement("template");s.innerHTML='\n  <style>\n    :host {\n      display: block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n      cursor: default;\n    }\n\n    .webthing-smoke-sensor-capability-icon {\n      width: 12.4rem;\n      height: 12.4rem;\n      border-radius: 6.4rem;\n      border: 0.2rem solid white;\n      background-size: 6.4rem;\n      background-repeat: no-repeat;\n      transform: translate(0);\n      background-color: #89b6d6;\n      background-image: url(\'/images/component-icons/smoke-sensor-ok.svg\');\n      background-position: center 2.75rem;\n    }\n\n    .webthing-smoke-sensor-capability-icon.smoke {\n      background-color: #ff5555;\n      background-image: url(\'/images/component-icons/smoke-sensor-smoke.svg\');\n      border: 0.2rem solid #ff5555;\n    }\n\n    .webthing-smoke-sensor-capability-label {\n      font-weight: bold;\n      text-transform: uppercase;\n      padding-top: 7rem;\n      font-size: 1.4rem;\n    }\n\n    .webthing-smoke-sensor-capability-icon.smoke\n    .webthing-smoke-sensor-capability-label {\n      color: white;\n      padding-top: 9.25rem;\n    }\n  </style>\n  <div id="icon" class="webthing-smoke-sensor-capability-icon">\n    <div id="label" class="webthing-smoke-sensor-capability-label">--</div>\n  </div>\n';class o extends i{constructor(){super(s),this._icon=this.shadowRoot.querySelector("#icon"),this._label=this.shadowRoot.querySelector("#label"),this._smoke=!1}connectedCallback(){this.smoke=void 0!==this.dataset.smoke?this.dataset.smoke:null}get smoke(){return this._smoke}set smoke(e){this._smoke=Boolean(e),null===e?(this._icon.classList.remove("smoke"),this._label.innerText=r.getMessage("ellipsis")):this._smoke?(this._icon.classList.add("smoke"),this._label.innerText=r.getMessage("smoke")):(this._icon.classList.remove("smoke"),this._label.innerText=r.getMessage("ok"))}}window.customElements.define("webthing-smoke-sensor-capability",o),e.exports=o},89213:(e,t,n)=>{"use strict";var i=n(67734),r=n(37493),s=document.createElement("template");s.innerHTML='\n  <style>\n    :host {\n      display: block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n      cursor: default;\n    }\n\n    .webthing-temperature-sensor-capability-icon {\n      width: 12.4rem;\n      height: 12.4rem;\n      border-radius: 6.4rem;\n      border: 0.2rem solid white;\n      background-size: 6.4rem;\n      background-repeat: no-repeat;\n      transform: translate(0);\n      background-color: #89b6d6;\n      background-image: url(\'/images/component-icons/temperature-sensor.svg\');\n      background-position: center 2rem;\n    }\n\n    .webthing-temperature-sensor-capability-label {\n      font-weight: bold;\n      text-transform: uppercase;\n      padding-top: 8.75rem;\n    }\n  </style>\n  <div id="icon" class="webthing-temperature-sensor-capability-icon">\n    <div id="label" class="webthing-temperature-sensor-capability-label">--</div>\n  </div>\n';class o extends i{constructor(){super(s),this._icon=this.shadowRoot.querySelector("#icon"),this._label=this.shadowRoot.querySelector("#label"),this._temperature=0,this._precision=0,this._unit=""}connectedCallback(){this.unit=void 0!==this.dataset.unit?this.dataset.unit:r.nameToAbbreviation("degree celsius"),this.precision=void 0!==this.dataset.precision?this.dataset.precision:0,this.temperature=void 0!==this.dataset.temperature?this.dataset.temperature:0}get unit(){return this._unit}set unit(e){this._unit=e}get precision(){return this._precision}set precision(e){this._precision=parseInt(e,10)}get temperature(){return this._temperature}set temperature(e){this._temperature=Number(e),this._label.innerHTML="".concat(this._temperature.toFixed(this.precision)).concat(this.unit)}}window.customElements.define("webthing-temperature-sensor-capability",o),e.exports=o},22037:(e,t,n)=>{"use strict";n(26699);var i=n(67734),r=n(37493),s=document.createElement("template");s.innerHTML='\n  <style>\n    :host {\n      display: block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n      cursor: default;\n    }\n\n    .webthing-thermostat-capability-container {\n      box-sizing: border-box;\n      width: 12.8rem;\n      height: 12.8rem;\n      border-radius: 6.4rem;\n      border: 0.2rem solid white;\n      transform: translate(0);\n      background-color: #89b6d6;\n    }\n\n    .webthing-thermostat-capability-state-icon {\n      position: absolute;\n      top: 1rem;\n      left: 50%;\n      transform: translateX(-50%);\n      width: 3rem;\n      height: 3rem;\n      background-size: 3rem;\n      background-repeat: no-repeat;\n      background-position: center;\n    }\n\n    .webthing-thermostat-capability-state-icon.off {\n      /* no icon */\n    }\n\n    .webthing-thermostat-capability-state-icon.heating {\n      background-image: url(\'/images/component-icons/thermostat-heating.svg\');\n    }\n\n    .webthing-thermostat-capability-state-icon.cooling {\n      background-image: url(\'/images/component-icons/thermostat-cooling.svg\');\n    }\n\n    .webthing-thermostat-capability-contents {\n      position: absolute;\n      top: calc(50% + 1rem);\n      left: 50%;\n      transform: translate(-50%, -50%);\n      font-size: 4rem;\n      font-weight: bold;\n      width: 12.8rem;\n    }\n\n    .webthing-thermostat-capability-unit {\n      font-size: 1.6rem;\n      font-weight: normal;\n      position: relative;\n      top: -1.6rem;\n    }\n  </style>\n  <div id="container" class="webthing-thermostat-capability-container">\n    <div id="state-icon" class="webthing-thermostat-capability-state-icon off"></div>\n    <div id="contents" class="webthing-thermostat-capability-contents">\n      <span id="value" class="webthing-thermostat-capability-value">\n      </span><span id="unit" class="webthing-thermostat-capability-unit"></span>\n    </div>\n  </div>\n';class o extends i{constructor(){super(s),this._value=this.shadowRoot.querySelector("#value"),this._unit=this.shadowRoot.querySelector("#unit"),this._stateIcon=this.shadowRoot.querySelector("#state-icon"),this._temperature=0,this._precision=0,this._state="off"}connectedCallback(){this.unit=void 0!==this.dataset.unit?this.dataset.unit:r.nameToAbbreviation("degree celsius"),this.precision=void 0!==this.dataset.precision?this.dataset.precision:0,this.temperature=void 0!==this.dataset.temperature?this.dataset.temperature:0,this.state=void 0!==this.dataset.state?this.dataset.state:"off"}get unit(){return this._unit.innerText}set unit(e){this._unit.innerText=e}get precision(){return this._precision}set precision(e){this._precision=parseInt(e,10)}get temperature(){return this._temperature}set temperature(e){this._temperature=Number(e),this._value.innerHTML="".concat(this._temperature.toFixed(this.precision))}get state(){return this._state}set state(e){["off","heating","cooling"].includes(e)||(e="off"),this._state=e,this._stateIcon.classList.remove("off","heating","cooling"),this._stateIcon.classList.add(e)}}window.customElements.define("webthing-thermostat-capability",o),e.exports=o},76057:(e,t,n)=>{"use strict";var i=n(67734),r=document.createElement("template");r.innerHTML='\n  <style>\n    :host {\n      display: block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n      cursor: default;\n    }\n\n    .webthing-video-camera-capability-icon {\n      box-sizing: border-box;\n      width: 12.8rem;\n      height: 12.8rem;\n      border-radius: 6.4rem;\n      border: 0.2rem solid white;\n      background-size: 6.4rem;\n      background-repeat: no-repeat;\n      transform: translate(0);\n      background-color: #89b6d6;\n      background-image: url(\'/images/component-icons/video-camera.svg\');\n      background-position: center;\n    }\n  </style>\n  <div id="icon" class="webthing-video-camera-capability-icon"></div>\n';class s extends i{constructor(){super(r)}}window.customElements.define("webthing-video-camera-capability",s),e.exports=s},35420:(e,t,n)=>{"use strict";var i=n(67734),r=n(25290),s=document.createElement("template");s.innerHTML='\n  <style>\n    :host {\n      display: block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n    }\n\n    .webthing-custom-icon-icon {\n      width: 6.2rem;\n      height: 6.2rem;\n      background-size: 3.2rem;\n      background-position: center;\n      background-repeat: no-repeat;\n      background-color: #ffffff64;\n      transform: translate(0);\n      border-radius: 3.2rem;\n      border: 0.1rem solid white;\n    }\n  </style>\n  <div id="icon" class="webthing-custom-icon-icon"></div>\n';class o extends i{constructor(){super(s),this._icon=this.shadowRoot.querySelector("#icon"),this._iconHref=""}connectedCallback(){this.iconHref=void 0!==this.dataset.iconHref?this.dataset.iconHref:""}get iconHref(){return this._iconHref}set iconHref(e){this._iconHref=e||r.getMessage("thing-icons-thing-src"),this._icon.style.backgroundImage='url("'.concat(this._iconHref,'")')}}window.customElements.define("webthing-custom-icon",o),e.exports=o},17469:(e,t,n)=>{"use strict";var i=n(85620);class r extends i{connectedCallback(){this.uppercase=!0,super.connectedCallback()}}window.customElements.define("webthing-alarm-property",r),e.exports=r},77066:(e,t,n)=>{"use strict";var i=n(67734);class r extends i{constructor(){var e=document.createElement("template");e.innerHTML='\n  <style>\n    :host {\n      display: inline-block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n    }\n\n    .webthing-boolean-property-container {\n      width: 10rem;\n      height: 10rem;\n      border-radius: 5rem;\n      border: 0.2rem solid white;\n      background-color: #89b6d6;\n      position: relative;\n    }\n\n    .webthing-boolean-property-contents {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n    }\n\n    .webthing-boolean-property-checkbox {\n      display: none;\n    }\n\n    .webthing-boolean-property-checkbox + label {\n      display: block;\n      width: 3rem;\n      height: 3rem;\n      background: url("/images/checkbox-sprite.png") no-repeat 0 0;\n      background-size: 3rem auto;\n    }\n\n    .webthing-boolean-property-checkbox:checked + label {\n      background-position: 0 -3rem;\n    }\n\n    .webthing-boolean-property-checkbox:disabled + label {\n      background-position: 0 -6rem;\n    }\n\n    .webthing-boolean-property-checkbox:checked:disabled + label {\n      background-position: 0 -9rem;\n    }\n\n    .webthing-boolean-property-name {\n      text-align: center;\n      max-width: 10rem;\n      overflow-wrap: break-word;\n      background-color: #5d9bc7;\n      display: inline-block;\n    }\n  </style>\n  <div id="container-'.concat(i.count,'" class="webthing-boolean-property-container">\n    <div id="contents-').concat(i.count,'" class="webthing-boolean-property-contents">\n      <form id="form-').concat(i.count,'" class="webthing-boolean-property-form">\n         <input type="checkbox" id="checkbox-').concat(i.count,'"\n            class="webthing-boolean-property-checkbox"/>\n          <label class="webthing-boolean-property-label" for=\'checkbox-').concat(i.count,"'>\n        </label>\n      </form>\n    </div>\n  </div>\n  <div id=\"name-").concat(i.count,'" class="webthing-boolean-property-name"></div>\n'),super(e),this._input=this.shadowRoot.querySelector(".webthing-boolean-property-checkbox"),this._name=this.shadowRoot.querySelector(".webthing-boolean-property-name"),this._onClick=this.__onClick.bind(this),this._onKeyUp=this.__onKeyUp.bind(this)}connectedCallback(){this.name=this.dataset.name,this.readOnly=void 0!==this.dataset.readOnly&&"true"===this.dataset.readOnly,this._upgradeProperty("checked"),this._input.addEventListener("click",this._onClick),this._input.addEventListener("keyup",this._onKeyUp)}disconnectedCallback(){this._input.removeEventListener("click",this._onClick),this._input.removeEventListener("keyup",this._onKeyUp)}get checked(){return this._input.hasAttribute("checked")}set checked(e){var t=Boolean(e);t?this._input.setAttribute("checked",""):this._input.removeAttribute("checked"),this._input.checked=t}get readOnly(){return this._input.hasAttribute("disabled")}set readOnly(e){var t=Boolean(e);t?this._input.setAttribute("disabled",""):this._input.removeAttribute("disabled"),this._input.disabled=t}get value(){return this.checked}set value(e){this.checked=e}get name(){return this._name.innerText}set name(e){this._name.innerText=e}__onKeyUp(e){e.altKey||32===e.keyCode&&(e.preventDefault(),this._toggleChecked())}__onClick(){this._toggleChecked()}_toggleChecked(){this.readOnly||(this.checked=!this.checked,this.dispatchEvent(new CustomEvent("change",{detail:{checked:this.checked},bubbles:!0})))}}window.customElements.define("webthing-boolean-property",r),e.exports=r},97367:(e,t,n)=>{"use strict";var i=n(64903);class r extends i{}window.customElements.define("webthing-brightness-property",r),e.exports=r},39378:(e,t,n)=>{"use strict";var i=n(63459);class r extends i{constructor(){super(),this._upperCaseOptions=!0}}window.customElements.define("webthing-color-mode-property",r),e.exports=r},8207:(e,t,n)=>{"use strict";var i=n(87987);class r extends i{connectedCallback(){this.unit="K",super.connectedCallback()}}window.customElements.define("webthing-color-temperature-property",r),e.exports=r},45270:(e,t,n)=>{"use strict";var i=n(67734);class r extends i{constructor(){var e=document.createElement("template");e.innerHTML='\n  <style>\n    :host {\n      display: inline-block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n    }\n\n    .webthing-color-property-container {\n      width: 10rem;\n      height: 10rem;\n      border-radius: 5rem;\n      border: 0.2rem solid white;\n      background-color: #89b6d6;\n      position: relative;\n    }\n\n    .webthing-color-property-contents {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n    }\n\n    .webthing-color-property-name {\n      text-align: center;\n      max-width: 10rem;\n      overflow-wrap: break-word;\n      background-color: #5d9bc7;\n      display: inline-block;\n    }\n  </style>\n  <div id="container-'.concat(i.count,'" class="webthing-color-property-container">\n    <div id="contents-').concat(i.count,'" class="webthing-color-property-contents">\n      <input type="color" id="color-').concat(i.count,'" class="webthing-color-property-color">\n    </div>\n  </div>\n  <div id="name-').concat(i.count,'" class="webthing-color-property-name"></div>\n'),super(e),this._input=this.shadowRoot.querySelector(".webthing-color-property-color"),this._name=this.shadowRoot.querySelector(".webthing-color-property-name"),this._onChange=this.__onChange.bind(this)}connectedCallback(){this.name=this.dataset.name,this.readOnly=void 0!==this.dataset.readOnly&&"true"===this.dataset.readOnly,this._input.type="color",this._upgradeProperty("value"),this._input.addEventListener("change",this._onChange)}disconnectedCallback(){this._input.removeEventListener("change",this._onChange)}get value(){return this._input.value}set value(e){this._input.value=e}get readOnly(){return this._input.hasAttribute("disabled")}set readOnly(e){var t=Boolean(e);t?this._input.setAttribute("disabled",""):this._input.removeAttribute("disabled"),this._input.disabled=t}get name(){return this._name.innerText}set name(e){this._name.innerText=e}__onChange(e){e.preventDefault(),this.value=e.target.value,this.dispatchEvent(new CustomEvent("change",{detail:{value:this.value},bubbles:!0}))}}window.customElements.define("webthing-color-property",r),e.exports=r},24931:(e,t,n)=>{"use strict";var i=n(87023);class r extends i{}window.customElements.define("webthing-current-property",r),e.exports=r},63459:(e,t,n)=>{"use strict";n(66992),n(33948);var i=n(67734);class r extends i{constructor(){var e=document.createElement("template");e.innerHTML="\n  <style>\n    :host {\n      display: inline-block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n    }\n\n    .webthing-enum-property-container {\n      width: 10rem;\n      height: 10rem;\n      border-radius: 5rem;\n      border: 0.2rem solid white;\n      background-color: #89b6d6;\n      position: relative;\n    }\n\n    .webthing-enum-property-contents {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n    }\n\n    .webthing-enum-property-select {\n      height: 3rem;\n      width: 7rem;\n      text-align: left;\n      background-color: #d2d9de;\n      color: #333;\n      border: none;\n      border-radius: 0.5rem;\n      padding: 0.5rem;\n      margin: 0.5rem 0;\n      font-size: 1.5rem;\n      -moz-appearance: none;\n      -webkit-appearance: none;\n      appearance: none;\n      background-image: url('/images/select-arrow-dark.svg');\n      background-repeat: no-repeat;\n      background-size: 1.25rem;\n      background-position: calc(100% - 0.5rem);\n    }\n\n    .webthing-enum-property-unit.hidden {\n      display: none;\n    }\n\n    .webthing-enum-property-name {\n      text-align: center;\n      max-width: 10rem;\n      overflow-wrap: break-word;\n      background-color: #5d9bc7;\n      display: inline-block;\n    }\n  </style>\n  <div id=\"container-".concat(i.count,'" class="webthing-enum-property-container">\n    <div id="contents-').concat(i.count,'" class="webthing-enum-property-contents">\n      <select id="select-').concat(i.count,'" class="webthing-enum-property-select"></select>\n      <div id="unit-').concat(i.count,'" class="webthing-enum-property-unit"></div>\n    </div>\n  </div>\n  <div id="name-').concat(i.count,'" class="webthing-enum-property-name"></div>\n'),super(e),this._select=this.shadowRoot.querySelector(".webthing-enum-property-select"),this._unit=this.shadowRoot.querySelector(".webthing-enum-property-unit"),this._name=this.shadowRoot.querySelector(".webthing-enum-property-name"),this._type="string",this._upperCaseOptions=!1,this._onChange=this.__onChange.bind(this)}connectedCallback(){this.name=this.dataset.name,this.value=void 0!==this.dataset.value?this.dataset.value:"",this.unit=void 0!==this.dataset.unit?this.dataset.unit:"",this.type=void 0!==this.dataset.type?this.dataset.type:"string",this.choices=void 0!==this.dataset.choices?JSON.parse(atob(this.dataset.choices)):[],this.readOnly=void 0!==this.dataset.readOnly&&"true"===this.dataset.readOnly,this._upgradeProperty("value"),this._select.addEventListener("change",this._onChange)}disconnectedCallback(){this._select.removeEventListener("change",this._onChange)}get value(){if(0===this._select.options.length)return"";var e=this._select.options[this._select.selectedIndex].value;switch(this.type){case"integer":return parseInt(e,10);case"number":return parseFloat(e);default:return e}}set value(e){e="".concat(e),this._select.value=e}get readOnly(){return this._select.hasAttribute("disabled")}set readOnly(e){var t=Boolean(e);t?this._select.setAttribute("disabled",""):this._select.removeAttribute("disabled"),this._select.disabled=t}get name(){return this._name.innerText}set name(e){this._name.innerText=e}get unit(){return this._unit.innerText}set unit(e){this._unit.innerText=e,this._setUnitClass()}get type(){return this._type}set type(e){this._type=e}get choices(){return this._select.options}set choices(e){for(var t of(this._select.innerHTML="",e)){var n=document.createElement("option");n.value=t,this._upperCaseOptions?n.innerText=t.toUpperCase():n.innerText=t,this._select.appendChild(n)}}_setUnitClass(){this.unit?this._unit.classList.remove("hidden"):this._unit.classList.add("hidden")}__onChange(e){e.preventDefault(),this.value=e.target.options[e.target.selectedIndex].value,this.dispatchEvent(new CustomEvent("change",{detail:{value:this.value},bubbles:!0}))}}window.customElements.define("webthing-enum-property",r),e.exports=r},56472:(e,t,n)=>{"use strict";var i=n(87023);class r extends i{}window.customElements.define("webthing-frequency-property",r),e.exports=r},18049:(e,t,n)=>{"use strict";var i=n(85620);class r extends i{connectedCallback(){this.uppercase=!0,super.connectedCallback()}}window.customElements.define("webthing-heating-cooling-property",r),e.exports=r},36795:(e,t,n)=>{"use strict";var i=n(87023);class r extends i{}window.customElements.define("webthing-humidity-property",r),e.exports=r},62927:(e,t,n)=>{"use strict";var i=n(67734);class r extends i{constructor(){var e=document.createElement("template");e.innerHTML="\n  <style>\n    :host {\n      display: inline-block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n    }\n\n    .webthing-image-property-container {\n      box-sizing: border-box;\n      width: 10rem;\n      height: 10rem;\n      border-radius: 5rem;\n      border: 0.2rem solid white;\n      background-size: 3.2rem;\n      background-repeat: no-repeat;\n      transform: translate(0);\n      background-color: #89b6d6;\n      background-image: url('/images/component-icons/image.svg');\n      background-position: center;\n      position: relative;\n      cursor: pointer;\n    }\n\n    .webthing-image-property-name {\n      text-align: center;\n      max-width: 10rem;\n      overflow-wrap: break-word;\n      background-color: #5d9bc7;\n      display: inline-block;\n    }\n  </style>\n  <div id=\"container-".concat(i.count,'" class="webthing-image-property-container"></div>\n  <div id="name-').concat(i.count,'" class="webthing-image-property-name"></div>\n'),super(e),this._name=this.shadowRoot.querySelector(".webthing-image-property-name")}connectedCallback(){this.name||(this.name=this.dataset.name)}get name(){return this._name.innerText}set name(e){this._name.innerText=e}}window.customElements.define("webthing-image-property",r),e.exports=r},68074:(e,t,n)=>{"use strict";var i=n(87023);class r extends i{}window.customElements.define("webthing-instantaneous-power-factor-property",r),e.exports=r},42841:(e,t,n)=>{"use strict";var i=n(87023);class r extends i{}window.customElements.define("webthing-instantaneous-power-property",r),e.exports=r},89430:(e,t,n)=>{"use strict";var i=n(85620);class r extends i{connectedCallback(){this.uppercase=!0,super.connectedCallback()}}window.customElements.define("webthing-leak-property",r),e.exports=r},87987:(e,t,n)=>{"use strict";var i=n(67734);class r extends i{constructor(){var e=document.createElement("template");e.innerHTML='\n  <style>\n    :host {\n      display: inline-block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n    }\n\n    .webthing-level-property-container {\n      width: 10rem;\n      height: 10rem;\n      border-radius: 5rem;\n      border: 0.2rem solid white;\n      background-color: #89b6d6;\n      position: relative;\n    }\n\n    .webthing-level-property-contents {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n    }\n\n    .webthing-level-property-bar-container {\n      width: 8rem;\n      height: 1rem;\n      border-radius: 0.6rem;\n      border: 0.2rem solid white;\n      margin: 0 auto;\n    }\n\n    .webthing-level-property-text,\n    .webthing-level-property-unit {\n      max-width: 8rem;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n\n    .webthing-level-property-bar {\n      height: 1rem;\n      background-color: white;\n      position: absolute;\n      left: 0.2rem;\n      max-width: calc(100% - 0.4rem);\n    }\n\n    .webthing-level-property-form {\n      width: 8rem;\n    }\n\n    .webthing-level-property-number {\n      height: 1.75rem;\n      width: 5.6rem;\n      text-align: center;\n      background-color: #d2d9de;\n      color: #333;\n      border: none;\n      border-radius: 0.5rem;\n      margin: 0.5rem 0;\n      font-size: 1.6rem;\n    }\n\n    .webthing-level-property-slider {\n      width: 8rem;\n      margin: 0;\n    }\n\n    .webthing-level-property-text.hidden,\n    .webthing-level-property-bar-container.hidden,\n    .webthing-level-property-form.hidden {\n      display: none;\n    }\n\n    .webthing-level-property-unit.hidden {\n      visibility: hidden;\n    }\n\n    .webthing-level-property-name {\n      text-align: center;\n      max-width: 10rem;\n      overflow-wrap: break-word;\n      background-color: #5d9bc7;\n      display: inline-block;\n    }\n  </style>\n  <div id="container-'.concat(i.count,'" class="webthing-level-property-container">\n    <div id="contents-').concat(i.count,'" class="webthing-level-property-contents">\n      <div id="text-').concat(i.count,'" class="webthing-level-property-text hidden"></div>\n      <div id="bar-container-').concat(i.count,'"\n        class="webthing-level-property-bar-container hidden">\n        <span id="bar-').concat(i.count,'" class="webthing-level-property-bar"></span>\n      </div>\n      <form id="form-').concat(i.count,'" class="webthing-level-property-form">\n        <input type="number" id="number-').concat(i.count,'"\n               class="webthing-level-property-number">\n        <input type="range" id="slider-level-').concat(i.count,'"\n               class="webthing-level-property-slider">\n      </form>\n      <div id="unit-').concat(i.count,'" class="webthing-level-property-unit"></div>\n    </div>\n  </div>\n  <div id="name-').concat(i.count,'" class="webthing-level-property-name"></div>\n'),super(e),this._text=this.shadowRoot.querySelector(".webthing-level-property-text"),this._barContainer=this.shadowRoot.querySelector(".webthing-level-property-bar-container"),this._bar=this.shadowRoot.querySelector(".webthing-level-property-bar"),this._form=this.shadowRoot.querySelector(".webthing-level-property-form"),this._number=this.shadowRoot.querySelector(".webthing-level-property-number"),this._slider=this.shadowRoot.querySelector(".webthing-level-property-slider"),this._unit=this.shadowRoot.querySelector(".webthing-level-property-unit"),this._name=this.shadowRoot.querySelector(".webthing-level-property-name"),this._onChange=this.__onChange.bind(this),this._onClick=this.__onClick.bind(this),this._onBlur=this.__onBlur.bind(this),this._onSubmit=this.__onSubmit.bind(this)}connectedCallback(){this.name||(this.name=this.dataset.name),this.unit||(this.unit=void 0!==this.dataset.unit?this.dataset.unit:""),this._precision=null,this.precision||void 0===this.dataset.precision||(this.precision=this.dataset.precision),this.readOnly=void 0!==this.dataset.readOnly&&"true"===this.dataset.readOnly,this._upgradeProperty("min"),this._upgradeProperty("max"),this._upgradeProperty("step"),this._upgradeProperty("value"),this._number.value=this.value,this._slider.addEventListener("change",this._onChange),this._form.addEventListener("submit",this._onSubmit),this._number.addEventListener("blur",this._onBlur),this._number.addEventListener("click",this._onClick)}disconnectedCallback(){this._slider.removeEventListener("change",this._onChange),this._form.removeEventListener("submit",this._onSubmit),this._number.removeEventListener("blur",this._onBlur),this._number.removeEventListener("click",this._onClick)}get min(){return this._slider.min}set min(e){this._slider.min=e,this._number.min=e}get max(){return this._slider.max}set max(e){this._slider.max=e,this._number.max=e}get step(){return this._slider.step}set step(e){this._slider.step=e,this._number.step=e}get value(){return this._slider.value}set value(e){e=Number(e);var t=parseInt(this.min,10),n=parseInt(this.max,10)-t,i=Math.max(0,e-t)/n*100;null!==this.precision&&(e=e.toFixed(this.precision)),this._bar.style.width="calc(".concat(i,"% - 0.2rem)"),this._text.innerText=e,this._text.title=e,this._slider.value=e,this._number.value=e}get readOnly(){return this._slider.hasAttribute("disabled")}set readOnly(e){var t=Boolean(e);t?(this._form.classList.add("hidden"),this._barContainer.classList.remove("hidden"),this._text.classList.remove("hidden"),this._slider.setAttribute("disabled",""),this._number.setAttribute("disabled","")):(this._slider.removeAttribute("disabled"),this._number.removeAttribute("disabled"),this._form.classList.remove("hidden"),this._barContainer.classList.add("hidden"),this._text.classList.add("hidden")),this._slider.disabled=t,this._number.disabled=t}get name(){return this._name.innerText}set name(e){this._name.innerText=e}get unit(){return this._unit.dataset.actual}set unit(e){this._unit.dataset.actual=e,e?(this._unit.innerText=e,this._unit.title=e):this._unit.innerHTML="&nbsp;",this._setUnitClass()}get precision(){return this._precision}set precision(e){this._precision=parseInt(e,10)}_setUnitClass(){this.unit?this._unit.classList.remove("hidden"):this._unit.classList.add("hidden")}__onChange(e){e.preventDefault();var t=e.target.value,n=this.step;""!==n&&"any"!==n&&(n=parseFloat(n),t=Math.round(t/n)*n);var i=this.min;""!==i&&(i=parseFloat(i),t=Math.max(i,t));var r=this.max;""!==r&&(r=parseFloat(r),t=Math.min(r,t)),this.value=t,this.dispatchEvent(new CustomEvent("change",{detail:{value:this.value},bubbles:!0}))}__onBlur(e){this.__onChange(e)}__onClick(e){this.__onChange(e)}__onSubmit(e){return e.preventDefault(),this._form.blur(),!1}}window.customElements.define("webthing-level-property",r),e.exports=r},8738:(e,t,n)=>{"use strict";var i=n(85620);class r extends i{connectedCallback(){this.uppercase=!0,super.connectedCallback()}}window.customElements.define("webthing-locked-property",r),e.exports=r},10993:(e,t,n)=>{"use strict";var i=n(85620);class r extends i{connectedCallback(){this.uppercase=!0,super.connectedCallback()}}window.customElements.define("webthing-motion-property",r),e.exports=r},42873:(e,t,n)=>{"use strict";n(26699);var i=n(67734);class r extends i{constructor(){var e=document.createElement("template");e.innerHTML='\n  <style>\n    :host {\n      display: inline-block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n    }\n\n    .webthing-number-property-container {\n      width: 10rem;\n      height: 10rem;\n      border-radius: 5rem;\n      border: 0.2rem solid white;\n      background-color: #89b6d6;\n      position: relative;\n    }\n\n    .webthing-number-property-contents {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n    }\n\n    .webthing-number-property-contents.one-line {\n      left: 5rem;\n      width: 100%;\n    }\n\n    .webthing-number-property-input {\n      height: 1.75rem;\n      width: 6rem;\n      text-align: center;\n      background-color: #d2d9de;\n      color: #333;\n      border: none;\n      border-radius: 0.5rem;\n      padding: 0.5rem;\n      margin: 0.5rem 0;\n      font-size: 1.6rem;\n    }\n\n    .webthing-number-property-contents.one-line > form,\n    .webthing-number-property-contents.one-line > div {\n      display: inline-block;\n    }\n\n    .webthing-number-property-contents.one-line > form > input {\n      width: 5rem;\n      margin: 0;\n    }\n\n    .webthing-number-property-input.hide-spinner::-webkit-inner-spin-button,\n    .webthing-number-property-input.hide-spinner::-webkit-outer-spin-button {\n      -webkit-appearance: textfield;\n    }\n\n    .webthing-number-property-input.hide-spinner {\n      -moz-appearance: textfield;\n    }\n\n    .webthing-number-property-unit.one-line.hidden,\n    .webthing-number-property-unit.hidden {\n      display: none;\n    }\n\n    .webthing-number-property-name {\n      text-align: center;\n      max-width: 10rem;\n      overflow-wrap: break-word;\n      background-color: #5d9bc7;\n      display: inline-block;\n    }\n  </style>\n  <div id="container-'.concat(i.count,'" class="webthing-number-property-container">\n    <div id="contents-').concat(i.count,'" class="webthing-number-property-contents">\n      <form id="form-').concat(i.count,'" class="webthing-number-property-form">\n        <input type="number" id="input-').concat(i.count,'"\n          class="webthing-number-property-input hide-spinner">\n      </form>\n      <div id="unit-').concat(i.count,'" class="webthing-number-property-unit"></div>\n    </div>\n  </div>\n  <div id="name-').concat(i.count,'" class="webthing-number-property-name"></div>\n'),super(e),this._contents=this.shadowRoot.querySelector(".webthing-number-property-contents"),this._form=this.shadowRoot.querySelector(".webthing-number-property-form"),this._input=this.shadowRoot.querySelector(".webthing-number-property-input"),this._unit=this.shadowRoot.querySelector(".webthing-number-property-unit"),this._name=this.shadowRoot.querySelector(".webthing-number-property-name"),this._onClick=this.__onClick.bind(this),this._onSubmit=this.__onSubmit.bind(this),this._onBlur=this.__onBlur.bind(this),this._haveClickListener=!1,this._oneLine=!1}connectedCallback(){this.name=this.dataset.name,this.value=void 0!==this.dataset.value?this.dataset.value:"",this.unit=void 0!==this.dataset.unit?this.dataset.unit:"",this.readOnly=void 0!==this.dataset.readOnly&&"true"===this.dataset.readOnly,this._upgradeProperty("min"),this._upgradeProperty("max"),this._upgradeProperty("step"),this._upgradeProperty("value"),this._form.addEventListener("submit",this._onSubmit),this._input.addEventListener("blur",this._onBlur),this._oneLine&&this._contents.classList.add("one-line")}disconnectedCallback(){this._haveClickListener&&this._input.removeEventListener("click",this._onClick),this._form.removeEventListener("submit",this._onSubmit),this._input.removeEventListener("blur",this._onBlur)}get min(){return this._input.min}set min(e){this._input.min=e,this._setInputClass()}get max(){return this._input.max}set max(e){this._input.max=e,this._setInputClass()}get step(){return this._input.step}set step(e){this._input.step=e,this._setInputClass()}get value(){return this._input.value}set value(e){var t=this.step;if(""!==t&&"any"!==t){t=parseFloat(t),e=Math.round(e/t)*t;var n=0;"".concat(t).includes(".")&&(n="".concat(t).split(".")[1].length),e=e.toFixed(n)}this._input.value=e}get readOnly(){return this._input.hasAttribute("disabled")}set readOnly(e){var t=Boolean(e);t?this._input.setAttribute("disabled",""):this._input.removeAttribute("disabled"),this._input.disabled=t}get name(){return this._name.innerText}set name(e){this._name.innerText=e}get unit(){return this._unit.innerText}set unit(e){this._unit.innerText=e,this._setUnitClass()}_setInputClass(){var e=parseInt(this.min,10),t=parseInt(this.max,10);isNaN(e)||null===e||isNaN(t)||null===t||""===this.step||"any"===this.step?(this._input.classList.add("hide-spinner"),this._haveClickListener&&(this._input.removeEventListener("click",this._onClick),this._haveClickListener=!1)):(this._input.classList.remove("hide-spinner"),this._haveClickListener||(this._input.addEventListener("click",this._onClick),this._haveClickListener=!0))}_setUnitClass(){this.unit?this._unit.classList.remove("hidden"):this._unit.classList.add("hidden")}__onClick(e){this.__onBlur(e)}__onSubmit(e){return e.preventDefault(),this._input.blur(),!1}__onBlur(e){e.preventDefault();var t=e.target.value,n=this.step;""!==n&&"any"!==n&&(n=parseFloat(n),t=Math.round(t/n)*n);var i=this.min;""!==i&&(i=parseFloat(i),t=Math.max(i,t));var r=this.max;""!==r&&(r=parseFloat(r),t=Math.min(r,t)),this.value=t,this.dispatchEvent(new CustomEvent("change",{detail:{value:this.value},bubbles:!0}))}}window.customElements.define("webthing-number-property",r),e.exports=r},87023:(e,t,n)=>{"use strict";var i=n(67734);class r extends i{constructor(){var e=document.createElement("template");e.innerHTML='\n  <style>\n    :host {\n      display: inline-block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n    }\n\n    .webthing-numeric-label-property-container {\n      width: 10rem;\n      height: 10rem;\n      border-radius: 5rem;\n      border: 0.2rem solid white;\n      background-color: #89b6d6;\n      position: relative;\n    }\n\n    .webthing-numeric-label-property-contents {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n    }\n\n    .webthing-numeric-label-property-value,\n    .webthing-numeric-label-property-unit {\n      font-weight: bold;\n    }\n\n    .webthing-numeric-label-property-name {\n      text-align: center;\n      max-width: 10rem;\n      overflow-wrap: break-word;\n      background-color: #5d9bc7;\n      display: inline-block;\n    }\n  </style>\n  <div id="container-'.concat(i.count,'" class="webthing-numeric-label-property-container">\n    <div id="contents-').concat(i.count,'" class="webthing-numeric-label-property-contents">\n      <span id="value-').concat(i.count,'" class="webthing-numeric-label-property-value">\n      </span><span id="unit-').concat(i.count,'"\n                   class="webthing-numeric-label-property-unit"></span>\n    </div>\n  </div>\n  <div id="name-').concat(i.count,'" class="webthing-numeric-label-property-name"></div>\n'),super(e),this._name=this.shadowRoot.querySelector(".webthing-numeric-label-property-name"),this._value=this.shadowRoot.querySelector(".webthing-numeric-label-property-value"),this._unit=this.shadowRoot.querySelector(".webthing-numeric-label-property-unit"),this._precision=0}connectedCallback(){this.name||(this.name=this.dataset.name),this.value||(this.value=void 0!==this.dataset.value?this.dataset.value:""),this.unit||(this.unit=void 0!==this.dataset.unit?this.dataset.unit:""),this.precision||(this.precision=void 0!==this.dataset.precision?this.dataset.precision:0)}get name(){return this._name.innerText}set name(e){this._name.innerText=e}get value(){return this._value.innerText}set value(e){e=Number(e),this._value.innerText=e.toFixed(this.precision)}get unit(){return this._unit.innerText}set unit(e){this._unit.innerText=e}get precision(){return this._precision}set precision(e){this._precision=parseInt(e,10)}}window.customElements.define("webthing-numeric-label-property",r),e.exports=r},13405:(e,t,n)=>{"use strict";var i=n(87456),r=n(25290);class s extends i{connectedCallback(){this.onLabel=r.getMessage("on"),this.offLabel=r.getMessage("off"),super.connectedCallback()}}window.customElements.define("webthing-on-off-property",s),e.exports=s},7233:(e,t,n)=>{"use strict";var i=n(85620);class r extends i{connectedCallback(){this.uppercase=!0,super.connectedCallback()}}window.customElements.define("webthing-open-property",r),e.exports=r},29042:(e,t,n)=>{"use strict";var i=n(85620);class r extends i{connectedCallback(){this.uppercase=!0,super.connectedCallback()}}window.customElements.define("webthing-pushed-property",r),e.exports=r},64903:(e,t,n)=>{"use strict";var i=n(67734);class r extends i{constructor(){var e=document.createElement("template");e.innerHTML='\n  <style>\n    :host {\n      display: inline-block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n    }\n\n    .webthing-slider-property-container {\n      width: 10rem;\n      height: 10rem;\n      border-radius: 5rem;\n      border: 0.2rem solid white;\n      background-color: #89b6d6;\n      position: relative;\n    }\n\n    .webthing-slider-property-contents {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n    }\n\n    .webthing-slider-property-form {\n      width: 8rem;\n      height: 8rem;\n    }\n\n    .webthing-slider-property-slider {\n      width: 8rem;\n      margin: 0;\n      transform: rotate(-90deg) translate(-3rem, 0);\n    }\n\n    .webthing-slider-property-name {\n      text-align: center;\n      max-width: 10rem;\n      overflow-wrap: break-word;\n      background-color: #5d9bc7;\n      display: inline-block;\n    }\n  </style>\n  <div id="container-'.concat(i.count,'" class="webthing-slider-property-container">\n    <div id="contents-').concat(i.count,'" class="webthing-slider-property-contents">\n      <form id="form-').concat(i.count,'" class="webthing-slider-property-form">\n        <input type="range" id="slider-').concat(i.count,'"\n               class="webthing-slider-property-slider">\n      </form>\n    </div>\n  </div>\n  <div id="name-').concat(i.count,'" class="webthing-slider-property-name"></div>\n'),super(e),this._input=this.shadowRoot.querySelector(".webthing-slider-property-slider"),this._name=this.shadowRoot.querySelector(".webthing-slider-property-name"),this._onChange=this.__onChange.bind(this)}connectedCallback(){this.name||(this.name=this.dataset.name),this.readOnly=void 0!==this.dataset.readOnly&&"true"===this.dataset.readOnly,this._upgradeProperty("min"),this._upgradeProperty("max"),this._upgradeProperty("step"),this._upgradeProperty("value"),this._input.addEventListener("change",this._onChange)}disconnectedCallback(){this._input.removeEventListener("change",this._onChange)}get min(){return this._input.min}set min(e){this._input.min=e}get max(){return this._input.max}set max(e){this._input.max=e}get step(){return this._input.step}set step(e){this._input.step=e}get value(){return this._input.value}set value(e){this._input.value=e}get readOnly(){return this._input.hasAttribute("disabled")}set readOnly(e){var t=Boolean(e);t?this._input.setAttribute("disabled",""):this._input.removeAttribute("disabled"),this._input.disabled=t}get name(){return this._name.innerText}set name(e){this._name.innerText=e}__onChange(e){e.preventDefault(),this.value=e.target.value,this.dispatchEvent(new CustomEvent("change",{detail:{value:this.value},bubbles:!0}))}}window.customElements.define("webthing-slider-property",r),e.exports=r},13085:(e,t,n)=>{"use strict";var i=n(67734),r=n(25290);class s extends i{constructor(){var e=document.createElement("template");e.innerHTML='\n  <style>\n    :host {\n      display: inline-block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n    }\n\n    .webthing-smoke-property-container {\n      width: 10rem;\n      height: 10rem;\n      border-radius: 5rem;\n      border: 0.2rem solid white;\n      background-color: #89b6d6;\n      position: relative;\n    }\n\n    .webthing-smoke-property-container.inverted {\n      color: white;\n      background-color: #ff5555;\n      border: 0.2rem solid #ff5555;\n    }\n\n    .webthing-smoke-property-value {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      font-weight: bold;\n      width: 100%;\n      font-size: 1.4rem;\n      text-transform: uppercase;\n    }\n\n    .webthing-smoke-property-container.inverted\n    .webthing-smoke-property-value {\n      top: calc(50% + 1.7rem);\n    }\n\n    .webthing-smoke-property-image {\n      display: none;\n    }\n\n    .webthing-smoke-property-container.inverted\n    .webthing-smoke-property-image {\n      display: block;\n      width: 3.2rem;\n      position: absolute;\n      left: calc(50% - 1.6rem);\n      top: 2.6rem;\n    }\n\n    .webthing-smoke-property-name {\n      text-align: center;\n      max-width: 10rem;\n      overflow-wrap: break-word;\n      background-color: #5d9bc7;\n      display: inline-block;\n    }\n  </style>\n  <div id="container-'.concat(i.count,'" class="webthing-smoke-property-container">\n    <img src="/images/component-icons/smoke.svg" id="image-').concat(i.count,'"\n         class="webthing-smoke-property-image" />\n    <div id="value-').concat(i.count,'" class="webthing-smoke-property-value"></div>\n  </div>\n  <div id="name-').concat(i.count,'" class="webthing-smoke-property-name"></div>\n'),super(e),this._name=this.shadowRoot.querySelector(".webthing-smoke-property-name"),this._container=this.shadowRoot.querySelector(".webthing-smoke-property-container"),this._value=this.shadowRoot.querySelector(".webthing-smoke-property-value"),this._image=this.shadowRoot.querySelector(".webthing-smoke-property-image"),this._smoke=!1}connectedCallback(){this.name||(this.name=this.dataset.name),this.value||(this.value=void 0!==this.dataset.value?this.dataset.value:null)}get name(){return this._name.innerText}set name(e){this._name.innerText=e}get value(){return this._smoke}set value(e){this._smoke=Boolean(e),null===e?(this._value.innerText=r.getMessage("ellipsis"),this._container.classList.remove("inverted")):this._smoke?(this._value.innerText=r.getMessage("smoke"),this._container.classList.add("inverted")):(this._value.innerText=r.getMessage("ok"),this._container.classList.remove("inverted"))}}window.customElements.define("webthing-smoke-property",s),e.exports=s},85620:(e,t,n)=>{"use strict";var i=n(67734);class r extends i{constructor(){var e=document.createElement("template");e.innerHTML='\n  <style>\n    :host {\n      display: inline-block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n    }\n\n    .webthing-string-label-property-container {\n      width: 10rem;\n      height: 10rem;\n      border-radius: 5rem;\n      border: 0.2rem solid white;\n      background-color: #89b6d6;\n      position: relative;\n    }\n\n    .webthing-string-label-property-container.inverted {\n      color: #5d9bc7;\n      background-color: white;\n    }\n\n    .webthing-string-label-property-value {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      font-weight: bold;\n      width: 100%;\n      font-size: 1.4rem;\n    }\n\n    .webthing-string-label-property-value.uppercase {\n      text-transform: uppercase;\n    }\n\n    .webthing-string-label-property-name {\n      text-align: center;\n      max-width: 10rem;\n      overflow-wrap: break-word;\n      background-color: #5d9bc7;\n      display: inline-block;\n    }\n  </style>\n  <div id="container-'.concat(i.count,'" class="webthing-string-label-property-container">\n    <div id="value-').concat(i.count,'" class="webthing-string-label-property-value"></div>\n  </div>\n  <div id="name-').concat(i.count,'" class="webthing-string-label-property-name"></div>\n'),super(e),this._name=this.shadowRoot.querySelector(".webthing-string-label-property-name"),this._container=this.shadowRoot.querySelector(".webthing-string-label-property-container"),this._value=this.shadowRoot.querySelector(".webthing-string-label-property-value"),this._inverted=!1}connectedCallback(){this.name||(this.name=this.dataset.name),this.value||(this.value=void 0!==this.dataset.value?this.dataset.value:""),this.inverted=void 0!==this.dataset.inverted&&"true"===this.dataset.inverted,this.uppercase&&this._value.classList.add("uppercase")}get name(){return this._name.innerText}set name(e){this._name.innerText=e}get value(){return this._value.innerText}set value(e){this._value.innerText=e}get inverted(){return this._inverted}set inverted(e){this._inverted=!!e,this._inverted?this._container.classList.add("inverted"):this._container.classList.remove("inverted")}}window.customElements.define("webthing-string-label-property",r),e.exports=r},5220:(e,t,n)=>{"use strict";var i=n(67734);class r extends i{constructor(){var e=document.createElement("template");e.innerHTML='\n  <style>\n    :host {\n      display: inline-block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n    }\n\n    .webthing-string-property-container {\n      width: 10rem;\n      height: 10rem;\n      border-radius: 5rem;\n      border: 0.2rem solid white;\n      background-color: #89b6d6;\n      position: relative;\n    }\n\n    .webthing-string-property-contents {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n    }\n\n    .webthing-string-property-input {\n      height: 1.75rem;\n      width: 6rem;\n      text-align: center;\n      background-color: #d2d9de;\n      color: #333;\n      border: none;\n      border-radius: 0.5rem;\n      padding: 0.5rem;\n      margin: 0.5rem 0;\n      font-size: 1.6rem;\n    }\n\n    .webthing-string-property-name {\n      text-align: center;\n      max-width: 10rem;\n      overflow-wrap: break-word;\n      background-color: #5d9bc7;\n      display: inline-block;\n    }\n  </style>\n  <div id="container-'.concat(i.count,'" class="webthing-string-property-container">\n    <div id="contents-').concat(i.count,'" class="webthing-string-property-contents">\n      <form id="form-').concat(i.count,'" class="webthing-string-property-form">\n        <input type="text" id="input-').concat(i.count,'" class="webthing-string-property-input">\n      </form>\n    </div>\n  </div>\n  <div id="name-').concat(i.count,'" class="webthing-string-property-name"></div>\n'),super(e),this._form=this.shadowRoot.querySelector(".webthing-string-property-form"),this._input=this.shadowRoot.querySelector(".webthing-string-property-input"),this._name=this.shadowRoot.querySelector(".webthing-string-property-name"),this._onSubmit=this.__onSubmit.bind(this),this._onBlur=this.__onBlur.bind(this)}connectedCallback(){this.name=this.dataset.name,this.readOnly=void 0!==this.dataset.readOnly&&"true"===this.dataset.readOnly,this._upgradeProperty("value"),this._form.addEventListener("submit",this._onSubmit),this._input.addEventListener("blur",this._onBlur)}disconnectedCallback(){this._form.removeEventListener("submit",this._onSubmit),this._input.removeEventListener("blur",this._onBlur)}get value(){return this._input.value}set value(e){this._input.value=e}get readOnly(){return this._input.hasAttribute("disabled")}set readOnly(e){var t=Boolean(e);t?this._input.setAttribute("disabled",""):this._input.removeAttribute("disabled"),this._input.disabled=t}get name(){return this._name.innerText}set name(e){this._name.innerText=e}__onSubmit(e){return e.preventDefault(),this._input.blur(),!1}__onBlur(e){e.preventDefault(),this.value=e.target.value,this.dispatchEvent(new CustomEvent("change",{detail:{value:this.value},bubbles:!0}))}}window.customElements.define("webthing-string-property",r),e.exports=r},87456:(e,t,n)=>{"use strict";var i=n(67734);class r extends i{constructor(){var e=document.createElement("template");e.innerHTML='\n  <style>\n    :host {\n      display: inline-block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n    }\n\n    .webthing-switch-property-container {\n      width: 10rem;\n      height: 10rem;\n      border-radius: 5rem;\n      border: 0.2rem solid white;\n      background-color: #89b6d6;\n      position: relative;\n    }\n\n    .webthing-switch-property-contents {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n    }\n\n    .webthing-switch-property-switch {\n      display: none;\n    }\n\n    .webthing-switch-property-slider {\n      display: block;\n      width: 5.5rem;\n      height: 2.2rem;\n      border-radius: 1.1rem;\n      background-color: #5d9bc7;\n      transition: 0.1s;\n    }\n\n    .webthing-switch-property-slider::after {\n      content: "";\n      display: block;\n      width: 1.5rem;\n      height: 1.5rem;\n      border-radius: 50%;\n      background-color: white;\n      transform: translate(0.35rem, 0.35rem);\n      transition: 0.1s;\n    }\n\n    .webthing-switch-property-switch:checked + .webthing-switch-property-slider::after {\n      transform: translate(3.65rem, 0.35rem);\n    }\n\n    .webthing-switch-property-switch:disabled + .webthing-switch-property-slider {\n      opacity: 0.5;\n    }\n\n    .webthing-switch-property-label {\n      padding-top: 0.5rem;\n      text-transform: uppercase;\n      font-weight: bold;\n    }\n\n    .webthing-switch-property-name {\n      text-align: center;\n      max-width: 10rem;\n      overflow-wrap: break-word;\n      background-color: #5d9bc7;\n      display: inline-block;\n    }\n  </style>\n  <div id="container-'.concat(i.count,'" class="webthing-switch-property-container">\n    <div id="contents-').concat(i.count,'" class="webthing-switch-property-contents">\n      <form>\n        <input type="checkbox" id="switch-').concat(i.count,'"\n          class="webthing-switch-property-switch">\n        <label id="slider-').concat(i.count,'" for="switch-').concat(i.count,'"\n               class="webthing-switch-property-slider">\n        </label>\n      </form>\n      <div id="label-').concat(i.count,'" class="webthing-switch-property-label"></div>\n    </div>\n  </div>\n  <div id="name-').concat(i.count,'" class="webthing-switch-property-name"></div>\n'),super(e),this._input=this.shadowRoot.querySelector(".webthing-switch-property-switch"),this._name=this.shadowRoot.querySelector(".webthing-switch-property-name"),this._label=this.shadowRoot.querySelector(".webthing-switch-property-label"),this._onClick=this.__onClick.bind(this),this._onKeyUp=this.__onKeyUp.bind(this)}connectedCallback(){this.name||(this.name=this.dataset.name),this.label||(this.label=this.dataset.offLabel),this.readOnly=void 0!==this.dataset.readOnly&&"true"===this.dataset.readOnly,this._upgradeProperty("checked"),this._input.addEventListener("click",this._onClick),this._input.addEventListener("keyup",this._onKeyUp)}disconnectedCallback(){this._input.removeEventListener("click",this._onClick),this._input.removeEventListener("keyup",this._onKeyUp)}get checked(){return this._input.hasAttribute("checked")}set checked(e){var t=Boolean(e);t?this._input.setAttribute("checked",""):this._input.removeAttribute("checked"),this._input.checked=t,this._label.innerText=t?this.onLabel:this.offLabel}get readOnly(){return this._input.hasAttribute("disabled")}set readOnly(e){var t=Boolean(e);t?this._input.setAttribute("disabled",""):this._input.removeAttribute("disabled"),this._input.disabled=t}get value(){return this.checked}set value(e){this.checked=e}get name(){return this._name.innerText}set name(e){this._name.innerText=e}get label(){return this._label.innerText}set label(e){this._label.innerText=e}get onLabel(){return this.dataset.onLabel}set onLabel(e){this.dataset.onLabel=e}get offLabel(){return this.dataset.offLabel}set offLabel(e){this.dataset.offLabel=e}__onKeyUp(e){e.altKey||32===e.keyCode&&(e.preventDefault(),this._toggleChecked())}__onClick(){this._toggleChecked()}_toggleChecked(){this.readOnly||(this.checked=!this.checked,this.dispatchEvent(new CustomEvent("change",{detail:{checked:this.checked},bubbles:!0})))}}window.customElements.define("webthing-switch-property",r),e.exports=r},80029:(e,t,n)=>{"use strict";var i=n(42873);class r extends i{constructor(){super(),this._oneLine=!0}}window.customElements.define("webthing-target-temperature-property",r),e.exports=r},194:(e,t,n)=>{"use strict";var i=n(87023);class r extends i{}window.customElements.define("webthing-temperature-property",r),e.exports=r},87095:(e,t,n)=>{"use strict";var i=n(63459);class r extends i{constructor(){super(),this._upperCaseOptions=!0}}window.customElements.define("webthing-thermostat-mode-property",r),e.exports=r},91003:(e,t,n)=>{"use strict";var i=n(67734);class r extends i{constructor(){var e=document.createElement("template");e.innerHTML="\n  <style>\n    :host {\n      display: inline-block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n    }\n\n    .webthing-video-property-container {\n      box-sizing: border-box;\n      width: 10rem;\n      height: 10rem;\n      border-radius: 5rem;\n      border: 0.2rem solid white;\n      background-size: 3.2rem;\n      background-repeat: no-repeat;\n      transform: translate(0);\n      background-color: #89b6d6;\n      background-image: url('/images/component-icons/video.svg');\n      background-position: center;\n      position: relative;\n      cursor: pointer;\n    }\n\n    .webthing-video-property-name {\n      text-align: center;\n      max-width: 10rem;\n      overflow-wrap: break-word;\n      background-color: #5d9bc7;\n      display: inline-block;\n    }\n  </style>\n  <div id=\"container-".concat(i.count,'" class="webthing-video-property-container"></div>\n  <div id="name-').concat(i.count,'" class="webthing-video-property-name"></div>\n'),super(e),this._name=this.shadowRoot.querySelector(".webthing-video-property-name")}connectedCallback(){this.name||(this.name=this.dataset.name)}get name(){return this._name.innerText}set name(e){this._name.innerText=e}}window.customElements.define("webthing-video-property",r),e.exports=r},31693:(e,t,n)=>{"use strict";var i=n(87023);class r extends i{}window.customElements.define("webthing-voltage-property",r),e.exports=r},25425:e=>{"use strict";e.exports.CONNECTED="connected",e.exports.DELETE_THING="deleteThing",e.exports.DELETE_THINGS="deleteThings",e.exports.EVENT_OCCURRED="eventOccurred",e.exports.PROPERTY_STATUS="propertyStatus",e.exports.REFRESH_THINGS="refreshThings",e.exports.DELETE_GROUP="deleteGroup",e.exports.DELETE_GROUPS="deleteGroups",e.exports.ThingFormat={INTERACTIVE:0,EXPANDED:1,LINK_ICON:2},e.exports.WoTOperation={READ_PROPERTY:"readproperty",WRITE_PROPERTY:"writeproperty",INVOKE_ACTION:"invokeaction",READ_ALL_PROPERTIES:"readallproperties",WRITE_MULTIPLE_PROPERTIES:"writemultipleproperties",SUBSCRIBE_ALL_EVENTS:"subscribeallevents",UNSUBSCRIBE_ALL_EVENTS:"unsubscribeallevents",QUERY_ALL_ACTIONS:"queryallactions"}},18671:(e,t,n)=>{"use strict";n(66992),n(33948),n(26699),n(60285),n(41637),n(73210);var i=n(28797).default,r=n(96710),s=n(84816),o=n(55161),a=n(29705),l=n(25290),c={init:function(){this.element=document.getElementById("context-menu"),this.editContent=document.getElementById("context-menu-content-edit"),this.removeContent=document.getElementById("context-menu-content-remove"),this.backButton=document.getElementById("context-menu-back-button"),this.headingIcon=document.getElementById("context-menu-heading-icon"),this.headingCustomIcon=document.getElementById("context-menu-heading-custom-icon"),this.headingText=document.getElementById("context-menu-heading-text"),this.saveButton=document.getElementById("edit-thing-save-button"),this.thingIcon=document.getElementById("edit-thing-icon"),this.titleInput=document.getElementById("edit-thing-title"),this.thingType=document.getElementById("edit-thing-type"),this.customIcon=document.getElementById("edit-thing-custom-icon"),this.customIconInput=document.getElementById("edit-thing-custom-icon-input"),this.customIconLabel=document.getElementById("edit-thing-custom-icon-label"),this.showOnFloorplanCheckbox=document.getElementById("show-on-floorplan-checkbox"),this.label=document.getElementById("edit-thing-label"),this.removeButton=document.getElementById("remove-thing-button"),this.logoutForm=document.getElementById("logout"),this.thingId="",window.addEventListener("_contextmenu",this.show.bind(this)),this.backButton.addEventListener("click",this.hide.bind(this)),this.saveButton.addEventListener("click",this.handleEdit.bind(this)),this.removeButton.addEventListener("click",this.handleRemove.bind(this)),this.logoutForm.addEventListener("submit",(e=>{e.preventDefault(),i.logout().then((()=>{window.location.href="/login"}))})),this.thingType.addEventListener("change",this.handleTypeChange.bind(this)),this.customIconInput.addEventListener("change",this.handleIconUpload.bind(this))},show:function(e){switch(this.iconData=null,this.customIcon.iconHref="",e.detail.iconHref?(this.headingCustomIcon.classList.remove("hidden"),this.headingCustomIcon.iconHref=e.detail.iconHref,this.headingIcon.classList.add("custom-thing"),this.headingIcon.style.backgroundImage="",this.customIcon.iconHref=e.detail.iconHref):(this.headingCustomIcon.classList.add("hidden"),this.headingIcon.classList.remove("custom-thing"),this.headingIcon.style.backgroundImage='url("'.concat(e.detail.thingIcon,'")'),this.customIcon.iconHref=""),this.headingText.textContent=e.detail.thingTitle,this.thingId=e.detail.thingId,this.element.classList.remove("hidden"),this.editContent.classList.add("hidden"),this.removeContent.classList.add("hidden"),e.detail.action){case"edit":this.thingType.disabled=!1,this.titleInput.disabled=!1,this.saveButton.disabled=!1,this.customIconInput.disabled=!1,this.titleInput.value=e.detail.thingTitle,this.showOnFloorplanCheckbox.checked=e.detail.floorplanVisibility,this.thingType.innerHTML="",e.detail.selectedCapability&&"Custom"!==e.detail.selectedCapability?(this.thingIcon.classList.remove("custom-thing"),this.thingIcon.style.backgroundImage='url("'.concat(e.detail.thingIcon,'")'),this.customIconLabel.classList.add("hidden"),this.customIcon.classList.add("hidden")):(this.thingIcon.classList.add("custom-thing"),this.thingIcon.style.backgroundImage="",this.customIconLabel.classList.remove("hidden"),this.customIcon.classList.remove("hidden"));var t=a.sortCapabilities(e.detail.capabilities);for(var n of(t.push("Custom"),t)){var i=document.createElement("option");i.value=n,(e.detail.selectedCapability===n||"Custom"===n&&!e.detail.selectedCapability)&&(i.selected=!0),i.innerText=l.getMessageStrict(n)||n,this.thingType.appendChild(i)}this.editContent.classList.remove("hidden");break;case"remove":this.removeContent.classList.remove("hidden")}},hide:function(){this.element.classList.add("hidden"),this.headingIcon.classList.remove("hidden"),this.headingCustomIcon.classList.add("hidden"),this.headingText.textContent="",this.thingId=""},handleTypeChange:function(){var e=this.thingType.options[this.thingType.selectedIndex].value;this.customIconLabel.classList.add("hidden"),this.customIcon.classList.add("hidden");var t="";"Custom"===e?(this.customIconLabel.classList.remove("hidden"),this.customIcon.classList.remove("hidden")):s.capabilityHasIcon(e)&&(t=s.capabilityToIcon(e)),t?(this.thingIcon.classList.remove("custom-thing"),this.thingIcon.style.backgroundImage='url("'.concat(t,'")')):(this.thingIcon.classList.add("custom-thing"),this.thingIcon.style.backgroundImage="")},handleIconUpload:function(){if(this.label.classList.add("hidden"),0!==this.customIconInput.files.length){var e=this.customIconInput.files[0];if(!["image/jpeg","image/png","image/svg+xml"].includes(e.type))return this.label.innerText=l.getMessage("invalid-file"),this.label.classList.add("error"),void this.label.classList.remove("hidden");var t=new FileReader;t.onloadend=t=>{if(t.target.error)return console.error(t.target.error),this.label.innerText=l.getMessage("failed-read-file"),this.label.classList.add("error"),this.label.classList.remove("hidden"),void(this.saveButton.disabled=!1);this.iconData={mime:e.type,data:btoa(t.target.result)},this.saveButton.disabled=!1,this.customIcon.iconHref=URL.createObjectURL(e),this.customIcon.classList.remove("hidden")},this.saveButton.disabled=!0,t.readAsBinaryString(e)}},handleEdit:function(){this.thingType.disabled=!0,this.titleInput.disabled=!0,this.saveButton.disabled=!0,this.customIconInput.disabled=!0;var e=this.titleInput.value.trim();if(0!==e.length){var t;this.thingType.options.length>0&&(t=this.thingType.options[this.thingType.selectedIndex].value);var n={title:e,floorplanVisibility:this.showOnFloorplanCheckbox.checked,selectedCapability:t};"Custom"===t&&this.iconData&&(n.iconData=this.iconData),r.gatewayModel.updateThing(this.thingId,n).then((()=>{this.hide(),this.saveButton.disabled=!1})).catch((e=>{console.error("Error updating thing: ".concat(e)),this.label.innerText=l.getMessage("failed-save"),this.label.classList.add("error"),this.label.classList.remove("hidden"),this.thingType.disabled=!1,this.titleInput.disabled=!1,this.saveButton.disabled=!1,this.customIconInput.disabled=!1}))}},handleRemove:function(){r.gatewayModel.removeThing(this.thingId).then((()=>{o("/things"),this.hide()})).catch((e=>{console.error("Error removing thing: ".concat(e)),this.hide()}))}};e.exports=c},40333:(e,t,n)=>{"use strict";n(88674);var i=n(96710),r=n(2777);class s{constructor(e){this.id=e,this.preferences={language:i.LANGUAGE,timezone:i.TIMEZONE,units:i.UNITS},this.view=i.registerExtension(this)}addMenuEntry(e){return r.addExtensionItem(this,e)}load(){return Promise.resolve()}show(e){console.log("Extension ".concat(this.id," is being shown."))}hide(){console.log("Extension ".concat(this.id," is being hidden."))}showMenuButton(){i.showMenuButton(),document.getElementById("extension-back-button").classList.add("hidden")}showBackButton(e){i.hideMenuButton();var t=document.getElementById("extension-back-button");t.href=e,t.classList.remove("hidden")}}window.Extension=s,e.exports=s},92687:(e,t,n)=>{"use strict";n(73210);var i=n(96710),r=n(55161),s=n(25290),o={init:function(){this.element=document.getElementById("group-context-menu"),this.editContent=document.getElementById("group-context-menu-content-edit"),this.removeContent=document.getElementById("group-context-menu-content-remove"),this.backButton=document.getElementById("group-context-menu-back-button"),this.headingText=document.getElementById("group-context-menu-heading-text"),this.saveButton=document.getElementById("edit-group-save-button"),this.titleInput=document.getElementById("edit-group-title"),this.removeButton=document.getElementById("remove-group-button"),this.groupId="",window.addEventListener("_groupcontextmenu",this.show.bind(this)),this.backButton.addEventListener("click",this.hide.bind(this)),this.saveButton.addEventListener("click",this.handleEdit.bind(this)),this.removeButton.addEventListener("click",this.handleRemove.bind(this))},show:function(e){switch(this.headingText.textContent=e.detail.groupTitle,this.groupId=e.detail.groupId,this.element.classList.remove("hidden"),this.editContent.classList.add("hidden"),this.removeContent.classList.add("hidden"),e.detail.action){case"edit":this.titleInput.disabled=!1,this.saveButton.disabled=!1,this.titleInput.value=e.detail.groupTitle,this.editContent.classList.remove("hidden");break;case"remove":this.removeContent.classList.remove("hidden")}},hide:function(){this.element.classList.add("hidden"),this.headingText.textContent="",this.groupId=""},handleEdit:function(){this.titleInput.disabled=!0,this.saveButton.disabled=!0;var e=this.titleInput.value.trim();0!==e.length&&i.gatewayModel.updateGroup(this.groupId,{title:e}).then((()=>{this.hide(),this.saveButton.disabled=!1})).catch((e=>{console.error("Error updating group: ".concat(e)),this.label.innerText=s.getMessage("failed-save"),this.label.classList.add("error"),this.label.classList.remove("hidden"),this.titleInput.disabled=!1,this.saveButton.disabled=!1}))},handleRemove:function(){i.gatewayModel.removeGroup(this.groupId).then((()=>{r("/things"),this.hide()})).catch((e=>{console.error("Error removing group: ".concat(e)),this.hide()}))}};e.exports=o},84816:(e,t,n)=>{"use strict";var i=n(25290);function r(){return i.getMessage("thing-icons-thing-src")}function s(e){switch(e){case"OnOffSwitch":return"/images/thing-icons/on_off_switch.svg";case"MultiLevelSwitch":return"/images/thing-icons/multi_level_switch.svg";case"ColorControl":case"ColorSensor":return"/images/thing-icons/color_control.svg";case"EnergyMonitor":return"/images/thing-icons/energy_monitor.svg";case"BinarySensor":return"/images/thing-icons/binary_sensor.svg";case"AirQualitySensor":case"BarometricPressureSensor":case"HumiditySensor":case"MultiLevelSensor":return"/images/thing-icons/multi_level_sensor.svg";case"SmartPlug":return"/images/thing-icons/smart_plug.svg";case"Light":return"/images/thing-icons/light.svg";case"DoorSensor":return"/images/thing-icons/door_sensor.svg";case"MotionSensor":return"/images/thing-icons/motion_sensor.svg";case"LeakSensor":return"/images/thing-icons/leak_sensor.svg";case"SmokeSensor":return"/images/thing-icons/smoke_sensor.svg";case"PushButton":return"/images/thing-icons/push_button.svg";case"VideoCamera":return"/images/thing-icons/video_camera.svg";case"Camera":return"/images/thing-icons/camera.svg";case"TemperatureSensor":return"/images/thing-icons/temperature_sensor.svg";case"Alarm":return"/images/thing-icons/alarm.svg";case"Thermostat":return"/images/thing-icons/thermostat.svg";case"Lock":return"/images/thing-icons/lock.svg";default:return r()}}e.exports={capabilityHasIcon:function(e){return s(e)!==r()},capabilityToIcon:s,defaultIcon:r}},47097:(e,t,n)=>{"use strict";function i(e,t,n,i,r,s,o){try{var a=e[s](o),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(i,r)}n(88674),n(74916),n(15306),n(66992),n(33948),n(83112),n(54747);var r=n(96710),s=n(25425),o=n(84816),a=n(37493),l=n(29705),c=n(25290);e.exports=class{constructor(e,t,n,i,r){this.thingId=e,this.propertyId=t,this.logStart=new Date(n.getTime()),this.logEnd=new Date(i.getTime()),this.start=new Date(this.logEnd.getTime()-864e5),this.end=new Date(this.logEnd.getTime()),this.soloView=r,this.loading=!0,this.dimension(),this.elt=document.createElement("div"),this.elt.classList.add("logs-log-container"),this.soloView&&this.elt.classList.add("logs-log-container-solo-view"),this.rawPoints=[],this.onPropertyStatus=this.onPropertyStatus.bind(this),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerLeave=this.onPointerLeave.bind(this),this.scrollLeft=this.scrollLeft.bind(this),this.scrollRight=this.scrollRight.bind(this),this.pointerState={},this.prevPointerState={},this.touchTooltipTimeout=null,this.liveScrollUpdate=this.liveScrollUpdate.bind(this),this.drawSkeleton()}dimension(){this.xMargin=96,this.xStart=this.xMargin+20,window.innerWidth<800&&(this.xMargin=72,this.xStart=48),this.width=window.innerWidth,this.soloView?(this.yMargin=30,this.scrollHeight=30,this.yPadding=30,this.height=window.innerHeight-96-2*this.yMargin-this.scrollHeight-this.yPadding):(this.yMargin=20,this.height=200,this.scrollHeight=30,this.yPadding=20),this.graphHeight=this.height-2*this.yMargin,this.graphWidth=this.width-this.xStart-this.xMargin}drawSkeleton(){if(this.removeAll(".logs-log-info"),this.removeAll(".logs-graph"),this.removeAll(".logs-graph-tooltip"),!this.soloView){this.name||(this.name=document.createElement("div"),this.name.classList.add("logs-log-name")),this.icon||(this.icon=document.createElement("div"),this.icon.classList.add("logs-log-icon")),this.infoContainer=document.createElement("a"),this.infoContainer.classList.add("logs-log-info");var e="/logs/things/".concat(encodeURIComponent(this.thingId).replace(/%2F/g,"%252F"),"/properties/").concat(encodeURIComponent(this.propertyId).replace(/%2F/g,"%252F"));this.infoContainer.setAttribute("href",e),this.infoContainer.appendChild(this.icon),this.infoContainer.appendChild(this.name),this.elt.appendChild(this.infoContainer)}this.createWeekDropdown(),this.graph=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.graph.classList.add("logs-graph"),this.graph.style.width="".concat(this.width,"px"),this.graph.style.height="".concat(this.height+this.scrollHeight+this.yPadding,"px"),this.graph.addEventListener("mousedown",this.onPointerDown),this.graph.addEventListener("mousemove",this.onPointerMove),this.graph.addEventListener("mouseup",this.onPointerUp),this.graph.addEventListener("mouseleave",this.onPointerLeave),this.graph.addEventListener("touchstart",this.onPointerDown),this.graph.addEventListener("touchmove",this.onPointerMove),this.graph.addEventListener("touchend",this.onPointerUp),this.graph.addEventListener("contextmenu",(e=>e.preventDefault()));var t=this.makePath([{x:this.xStart,y:this.yMargin},{x:this.xStart,y:this.height-this.yMargin},{x:this.width-this.xMargin,y:this.height-this.yMargin}]);t.classList.add("logs-graph-axes"),this.graph.appendChild(t),this.yAxisLabel=this.makeText("",this.xStart-5,this.height/2,"end","middle"),this.yAxisLabel.classList.add("logs-graph-label"),this.graph.appendChild(this.yAxisLabel),this.progress=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.progress.classList.add("logs-graph-progress"),this.progress.setAttribute("x",this.xStart),this.progress.setAttribute("y",this.yMargin),this.progressWidth=Math.floor(.05*this.graphWidth),this.progress.setAttribute("width",this.progressWidth),this.progress.setAttribute("height",this.graphHeight),this.graph.appendChild(this.progress),this.selectionHighlight=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.selectionHighlight.classList.add("logs-graph-selection-highlight"),this.selectionHighlight.setAttribute("x",this.xStart),this.selectionHighlight.setAttribute("y",this.yMargin),this.selectionHighlight.setAttribute("width",0),this.selectionHighlight.setAttribute("height",this.graphHeight),this.graph.appendChild(this.selectionHighlight),this.drawScrollBar(),this.elt.appendChild(this.graph),this.tooltip=document.createElement("div"),this.tooltip.classList.add("logs-graph-tooltip"),this.tooltipValue=document.createElement("p"),this.tooltipDate=document.createElement("p"),this.tooltip.appendChild(this.tooltipValue),this.tooltip.appendChild(this.tooltipDate),this.elt.appendChild(this.tooltip)}createWeekDropdown(){if(!this.weekDropdown){this.weekDropdown=document.createElement("select"),this.weekDropdown.classList.add("logs-log-week-dropdown","arrow-select");var e=864e5,t=[{name:c.getMessage("minute"),value:6e4},{name:c.getMessage("hour"),value:36e5},{name:c.getMessage("day"),value:e},{name:c.getMessage("week"),value:6048e5}],n=this.end.getTime()-this.start.getTime(),i=!1;for(var r of t){var s=document.createElement("option");s.textContent=r.name,s.value=r.value,r.value===n&&(s.setAttribute("selected",!0),i=!0),this.weekDropdown.appendChild(s)}i||(this.weekDropdown.value=e),this.weekDropdown.addEventListener("change",(()=>{var e=this.end.getTime(),t=e-this.weekDropdown.value;t<this.logStart.getTime()&&(e=(t=this.logStart.getTime())+this.weekDropdown.value),this.start=new Date(t),this.end=new Date(e),this.redraw()})),this.elt.appendChild(this.weekDropdown)}}makePath(e,t){for(var n=document.createElementNS("http://www.w3.org/2000/svg","path"),i=["M",e[0].x.toFixed(1),e[0].y.toFixed(1)],r=1;r<e.length;r++)i.push("L",e[r].x.toFixed(1),e[r].y.toFixed(1));return t&&i.push("Z"),n.setAttribute("d",i.join(" ")),n}makeText(e,t,n,i,r){var s=document.createElementNS("http://www.w3.org/2000/svg","text");return s.textContent=e,s.setAttribute("text-anchor",i),s.setAttribute("dominant-baseline",r),s.setAttribute("x",t),s.setAttribute("y",n),s}load(){var e,t=this;return(e=function*(){var e=yield r.gatewayModel.getThing(t.thingId);if(t.thingModel=yield r.gatewayModel.getThingModel(t.thingId),e&&t.thingModel){var n=e.title;t.property=t.thingModel.propertyDescriptions[t.propertyId];var i=t.property&&t.property.title||t.propertyId&&l.capitalize(t.propertyId)||"",c="".concat(n," ").concat(i);if(t.soloView?document.querySelector(".logs-header").textContent=c:t.name.textContent=c,!t.soloView){var u;u=e.selectedCapability?o.capabilityToIcon(e.selectedCapability):o.defaultIcon(),t.icon.style.backgroundImage="url(".concat(u,")")}var h=a.convert(0,t.property&&t.property.unit||"").unit;t.yAxisLabel.textContent=a.nameToAbbreviation(h),t.thingModel.subscribe(s.PROPERTY_STATUS,t.onPropertyStatus),t.rawPoints.length>0&&t.redraw()}},function(){var t=this,n=arguments;return new Promise((function(r,s){var o=e.apply(t,n);function a(e){i(o,r,s,a,l,"next",e)}function l(e){i(o,r,s,a,l,"throw",e)}a(void 0)}))})()}clearPoints(){this.rawPoints=[]}addRawPoint(e){if(this.rawPoints.push({value:a.convert(e.value,this.property.unit).value,time:e.date}),this.loading&&this.rawPoints.length>2){var t=(this.rawPoints[this.rawPoints.length-1].time-this.start.getTime())/(this.end.getTime()-this.start.getTime());t=Math.min(t,1);var n=Math.floor((.95*t+.05)*this.graphWidth);n>this.progressWidth&&(this.progress.setAttribute("width",n),this.progressWidth=n)}}valueBounds(){if("percent"===this.property.unit)return{min:0,max:100};if("boolean"===this.property.type)return{min:0,max:1};if(0===this.rawPoints.length)return this.property.hasOwnProperty("minimum")&&this.property.hasOwnProperty("maximum")?{min:a.convert(this.property.minimum,this.property.unit).value,max:a.convert(this.property.maximum,this.property.unit).value}:{min:0,max:1};for(var e=this.rawPoints[0].value,t=e,n=1;n<this.rawPoints.length;n++){var i=this.rawPoints[n].value;t<i&&(t=i),e>i&&(e=i)}if(this.property.hasOwnProperty("minimum")&&this.property.hasOwnProperty("maximum")){var r=a.convert(this.property.minimum,this.property.unit).value,s=a.convert(this.property.maximum,this.property.unit).value;if((s-r)/(t-e+.001)<3&&e>=r&&t<=s)return{min:r,max:s}}var o=.1*(t-e);1!==this.rawPoints.length&&e!==t||(o=1),e>=0&&e-3*o<0&&(e=o);var l=e-o,c=t+o;return t-e>6&&(l=Math.floor(l),c=Math.floor(c)),{min:l,max:c}}timeToX(e,t,n){var i=t||this.start.getTime();return(e-i)/((n||this.end.getTime())-i)*this.graphWidth+this.xStart}xToTime(e,t,n){var i=t||this.start.getTime(),r=n||this.end.getTime();return(e-this.xStart)/this.graphWidth*(r-i)+i}valueToY(e){return this.height-this.yMargin-(e-this.valueMin)/(this.valueMax-this.valueMin)*this.graphHeight}interpolate(e,t,n){return t.x-e.x==0?{x:n,y:e.y}:{x:n,y:(t.y-e.y)/(t.x-e.x)*(n-e.x)+e.y}}determineBounds(){var e=this.valueBounds();this.hasOwnProperty("valueMin")?(this.valueMin=Math.min(this.valueMin,e.min),this.valueMax=Math.max(this.valueMax,e.max)):(this.valueMin=e.min,this.valueMax=e.max);var t=Math.pow(10,Math.ceil(Math.log(this.valueMax-this.valueMin)/Math.LN10)-3);this.valueMax=Math.ceil(this.valueMax/t)*t,this.valueMin=Math.floor(this.valueMin/t)*t}redraw(){if(this.property&&(this.removeAll(".logs-graph-line"),this.removeAll(".logs-graph-fill"),this.removeAll(".logs-graph-label"),this.removeAll(".logs-graph-tick"),this.removeTooltip(),this.progress.setAttribute("width",0),this.progressWidth=0,this.determineBounds(),this.drawYTicks(),this.drawXTicks(),this.updateScrollBar(),0!==this.rawPoints.length)){var e=[],t=this.nearestIndex(this.start.getTime())-1;t=Math.max(0,t);var n=Math.max(0,t-1),i=this.nearestIndex(this.end.getTime())+1;i=Math.min(i,this.rawPoints.length-1);for(var r=Math.min(i+1,this.rawPoints.length-1),s=t;s<=i;s++){var o=this.rawPoints[s];if(o.time<this.start.getTime())n=s;else if(o.time>this.end.getTime())s<r&&(r=s);else{var a=this.timeToX(o.time),l=this.valueToY(o.value);e.length>0&&("boolean"!==this.property.type&&"integer"!==this.property.type||e.push({x:a,y:e[e.length-1].y})),e.push({x:a,y:l})}}var c={x:this.timeToX(this.rawPoints[n].time),y:this.valueToY(this.rawPoints[n].value)};if("boolean"===this.property.type||"integer"===this.property.type)e.unshift({x:this.xStart,y:c.y},{x:e.length>0?e[0].x:this.xStart+this.graphWidth,y:c.y});else if(e.length>0){var u=this.interpolate(c,e[0],this.xStart);e.unshift(u)}var h={x:this.timeToX(this.rawPoints[r].time),y:this.valueToY(this.rawPoints[r].value)};if("boolean"===this.property.type||"integer"===this.property.type){var d=e[e.length-1];e.push({x:d.x,y:d.y},{x:this.xStart+this.graphWidth,y:d.y})}else if(e.length>0){var p=this.interpolate(e[e.length-1],h,this.xStart+this.graphWidth);e.push(p)}else{var f=this.interpolate(c,h,this.xStart),m=this.interpolate(c,h,this.xStart+this.graphWidth);e.push(f,m)}var g=this.makePath(e);g.classList.add("logs-graph-line"),e.unshift({x:e[0].x,y:this.height-this.yMargin}),e.push({x:e[e.length-1].x,y:this.height-this.yMargin});var v=this.makePath(e);v.classList.add("logs-graph-fill"),this.graph.appendChild(v),this.graph.appendChild(g),this.liveScrollFrameRequest||(this.liveScrollFrameRequest=window.requestAnimationFrame(this.liveScrollUpdate))}}timeToLabel(e){var t=new Date(e);if(0===t.getHours()&&0===t.getMinutes())return"".concat(t.getDate());var n=t.getMinutes().toString().padStart(2,"0");if(0===t.getSeconds())return"".concat(t.getHours(),":").concat(n);var i=t.getSeconds().toString().padStart(2,"0");return"".concat(t.getHours(),":").concat(n,":").concat(i)}valueToLabel(e,t){var n;if(t=t||0,"boolean"===this.property.type)n=this.propertyLabel(e).toLocaleUpperCase();else if(Math.floor(e)===e)n=e.toFixed(0);else{var i=Math.max(0,2+t-Math.log(this.valueMax-this.valueMin)/Math.LN10);n=e.toFixed(i)}return n}removeAll(e){this.elt.querySelectorAll(e).forEach((e=>{e.parentNode.removeChild(e)}))}drawYTicks(){if(this.graph.appendChild(this.yAxisLabel),"boolean"!==this.property.type)for(var e=Math.pow(10,Math.floor(Math.log(this.valueMax-this.valueMin)/Math.LN10)-1),t=this.valueMin+e,n=1;t<this.valueMax;){var i=this.valueToY(t),r=5;n%5==0&&(r*=1.5);var s=this.makePath([{x:this.xStart,y:i},{x:this.xStart+r,y:i}]);s.classList.add("logs-graph-tick"),this.graph.appendChild(s),t+=e,n+=1}var o=this.makePath([{x:this.xStart-1,y:this.valueToY(this.valueMax)-1},{x:this.xStart+10,y:this.valueToY(this.valueMax)-1}]);o.classList.add("logs-graph-tick","logs-graph-tick-big"),this.graph.appendChild(o);var a=this.makeText(this.valueToLabel(this.valueMin),this.xStart-5,this.valueToY(this.valueMin),"end","middle");a.classList.add("logs-graph-label"),this.graph.appendChild(a),(a=this.makeText(this.valueToLabel(this.valueMax),this.xStart-5,this.valueToY(this.valueMax),"end","middle")).classList.add("logs-graph-label"),this.graph.appendChild(a)}drawXTicks(){var e,t=[864e5,432e5,36e5,9e5,3e5,6e4,1e4,1e3];for(e=1;e<t.length-1;e++){var n=t[e];if(this.timeToX(n)-this.timeToX(0)<48)break}for(var i=t[e],r=t[e-1],s=this.timeToX(i)-this.timeToX(0),o=this.floorDate(new Date(this.start.getTime())).getTime(),a=o;a<this.end.getTime();){if(a>this.start.getTime()){var l=this.timeToX(a),c=5;if((a-o)%r==0){var u=this.timeToLabel(a),h=this.makeText(u,l,this.height-this.yMargin+2,"middle","hanging");h.classList.add("logs-graph-label"),this.graph.appendChild(h),c*=2}else if(s>48){var d=this.timeToLabel(a),p=this.makeText(d,l,this.height-this.yMargin+2,"middle","hanging");p.classList.add("logs-graph-label"),this.graph.appendChild(p)}var f=this.makePath([{x:l,y:this.height-this.yMargin},{x:l,y:this.height-this.yMargin-c}]);f.classList.add("logs-graph-tick"),this.graph.appendChild(f)}a+=i}}drawScrollBar(){var e=this.height+this.scrollHeight/2-8;this.scrollBar=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.scrollBar.classList.add("logs-scroll-bar"),this.scrollBar.setAttribute("x",this.xStart),this.scrollBar.setAttribute("y",e),this.scrollBar.setAttribute("width",this.graphWidth),this.scrollBar.setAttribute("height",16),this.graph.appendChild(this.scrollBar),this.scrollControl=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.scrollControl.classList.add("logs-scroll-control"),this.scrollControl.setAttribute("y",e),this.scrollControl.setAttribute("height",16),this.graph.appendChild(this.scrollControl);var t=1/Math.sqrt(3),n=16,i=e+8;this.scrollButtonLeft=this.makePath([{x:this.xStart-n-8,y:i},{x:this.xStart-8,y:i-n*t},{x:this.xStart-8,y:i+n*t}],!0),this.scrollButtonLeft.classList.add("logs-scroll-button"),this.scrollButtonLeft.addEventListener("click",this.scrollLeft),this.graph.appendChild(this.scrollButtonLeft);var r=this.xStart+this.graphWidth+8;this.scrollButtonRight=this.makePath([{x:r+n,y:i},{x:r,y:i-n*t},{x:r,y:i+n*t}],!0),this.scrollButtonRight.classList.add("logs-scroll-button"),this.scrollButtonRight.addEventListener("click",this.scrollRight),this.graph.appendChild(this.scrollButtonRight)}updateScrollBar(){var e=this.timeToX(this.start.getTime(),this.logStart.getTime(),this.logEnd.getTime()),t=this.timeToX(this.end.getTime(),this.logStart.getTime(),this.logEnd.getTime());if(t-e<16){var n=(t+e)/2;e=n-8,(t=n+8)>this.xStart+this.graphWidth&&(e=(t=this.xStart+this.graphWidth)-16),e<this.xStart&&(t=(e=this.xStart)+16)}this.scrollControl.setAttribute("x",e),this.scrollControl.setAttribute("width",t-e)}scrollLeft(){var e=this.end.getTime()-this.start.getTime();this.scroll(-e/2)}scrollRight(){var e=this.end.getTime()-this.start.getTime();this.scroll(e/2)}scroll(e){var t=this.start.getTime()+e,n=this.end.getTime()+e,i=n-t;e<0&&t<this.logStart.getTime()?n=(t=this.logStart.getTime())+i:e>0&&n>this.logEnd.getTime()&&(t=(n=this.logEnd.getTime())-i),this.start=new Date(t),this.end=new Date(n),this.redraw()}propertyLabel(e){if("boolean"===this.property.type)switch(this.property["@type"]){case"OnOffProperty":return e?c.getMessage("on"):c.getMessage("off");case"MotionProperty":return e?c.getMessage("motion"):c.getMessage("no-motion");case"OpenProperty":return e?c.getMessage("open"):c.getMessage("closed");case"LeakProperty":return e?c.getMessage("leak"):c.getMessage("dry");case"SmokeProperty":return e?c.getMessage("smoke"):c.getMessage("ok");case"PushedProperty":return e?c.getMessage("pushed"):c.getMessage("not-pushed");default:return e?c.getMessage("true"):c.getMessage("false")}return"".concat(e)}floorDate(e){return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}nearestIndex(e){for(var t=0,n=this.rawPoints.length-1,i=0;n>t;)if(i=Math.floor((t+n)/2),this.rawPoints[i].time<e)t=i+1;else{if(!(this.rawPoints[i].time>e))break;n=i-1}return i}nearestPoint(e,t){var n=this.xToTime(e);if(n<this.start.getTime()||n>this.end.getTime())return null;for(var i=this.nearestIndex(n),r=null,s=5e3,o=i-2;o<i+3;o++)if(!(o<0||o>this.rawPoints.length-1||this.rawPoints[o].time<this.start.getTime()||this.rawPoints[o].time>this.end.getTime())){var a=this.timeToX(this.rawPoints[o].time)-e,l=this.valueToY(this.rawPoints[o].value)-t,c=a*a+l*l;c>s||(s=c,r=this.rawPoints[o])}return r}constrainTime(e){return e<this.start.getTime()?this.start.getTime():e>this.end.getTime()?this.end.getTime():e}setPointerState(e){this.prevPointerState=this.pointerState,this.pointerState=e}convertTouchEvent(e){e.isTouch=!1,e.targetTouches&&e.targetTouches.length>0&&(e.clientX=e.targetTouches[0].clientX,e.clientY=e.targetTouches[0].clientY,e.isTouch=!0)}onPointerDown(e){if(this.convertTouchEvent(e),2!==e.buttons)if(e.target.classList.contains("logs-scroll-control")){var t=parseFloat(this.scrollControl.getAttribute("x"));this.setPointerState({action:1,scrollOffset:e.clientX-t})}else if(e.isTouch){var n=this.graph.getBoundingClientRect();this.drawTooltip(e.clientX-n.left,e.clientY-n.top),clearTimeout(this.touchTooltipTimeout),this.touchTooltipTimeout=setTimeout((()=>{this.removeTooltip()}),5e3)}else{var i=this.graph.getBoundingClientRect();if(e.clientY-i.top>this.graphHeight+this.yMargin)return;this.setPointerState({action:2,dragStart:this.constrainTime(this.xToTime(e.clientX))})}else e.preventDefault()}onPointerMove(e){if((e.buttons||1===this.pointerState.action)&&e.preventDefault(),this.convertTouchEvent(e),1===e.buttons&&this.prevPointerState.action&&!this.pointerState.action&&this.setPointerState(this.prevPointerState),2===this.pointerState.action)this.drawHighlight(e.clientX);else if(1===this.pointerState.action){var t=e.clientX-this.pointerState.scrollOffset,n=parseFloat(this.scrollControl.getAttribute("width")),i=this.xStart+this.graphWidth-n;t<this.xStart?t=this.xStart:t>i&&(t=i),this.scrollControl.setAttribute("x",t),this.finishScrolling()}else{var r=this.graph.getBoundingClientRect();this.drawTooltip(e.clientX-r.left,e.clientY-r.top)}}drawHighlight(e){var t=this.timeToX(this.pointerState.dragStart),n=Math.min(t,e),i=Math.max(t,e);n=Math.max(n,this.xStart),i=Math.min(i,this.graphWidth+this.xStart),this.selectionHighlight.setAttribute("x",n),this.selectionHighlight.setAttribute("width",i-n)}removeHighlight(){this.selectionHighlight.setAttribute("width",0)}drawTooltip(e,t){if(this.property&&this.rawPoints&&0!==this.rawPoints.length){var n=this.nearestPoint(e,t);if(n){var i=this.timeToX(n.time),r=this.valueToY(n.value);this.tooltip.style.display="block",this.tooltip.style.transform="translate(".concat(i,"px,").concat(r,"px)");var s=this.valueToLabel(n.value,2),o=a.nameToAbbreviation(a.convert(0,this.property.unit||"").unit);this.tooltipValue.textContent="".concat(s," ").concat(o);var l=new Date(n.time).toTimeString().split(" ");this.tooltipDate.textContent="".concat(l[0]),this.pointHighlight||(this.pointHighlight=document.createElementNS("http://www.w3.org/2000/svg","circle"),this.pointHighlight.classList.add("logs-graph-point-highlight"),this.pointHighlight.setAttribute("r",3),this.graph.appendChild(this.pointHighlight)),this.pointHighlight.setAttribute("cx",i),this.pointHighlight.setAttribute("cy",r)}else this.removeTooltip()}}onPointerLeave(){this.removeTooltip(),this.removeHighlight(),1===this.pointerState.action&&this.finishScrolling(),this.setPointerState({})}onPointerUp(e){if(e.buttons&&e.preventDefault(),this.convertTouchEvent(e),this.removeHighlight(),1===this.pointerState.action)this.finishScrolling();else if(2===this.pointerState.action){var t,n,i=this.constrainTime(this.xToTime(e.clientX));if(Math.abs(i-this.pointerState.dragStart)<1e4)return void this.setPointerState({});this.pointerState.dragStart<i?(t=new Date(this.pointerState.dragStart),n=new Date(i)):(t=new Date(i),n=new Date(this.pointerState.dragStart)),this.start=t,this.end=n,this.redraw()}2===e.button&&(this.start=this.logStart,this.end=this.logEnd,this.weekDropdown.value=6048e5,this.redraw()),this.setPointerState({})}finishScrolling(){var e=parseFloat(this.scrollControl.getAttribute("x")),t=parseFloat(this.scrollControl.getAttribute("width")),n=e+t/2,i=this.xStart+t/2,r=this.graphWidth-t,s=this.end.getTime()-this.start.getTime(),o=this.logStart.getTime()+s/2,a=(n-i)/r*(this.logEnd.getTime()-s/2-o)+o-(this.start.getTime()+s/2);this.scroll(a)}removeTooltip(){this.tooltip.style.display="none",this.pointHighlight&&(this.pointHighlight.parentNode.removeChild(this.pointHighlight),this.pointHighlight=null)}onPropertyStatus(e){if(!this.loading&&this.property&&e.hasOwnProperty(this.propertyId)){var t=this.rawPoints[this.rawPoints.length-1];if(!t||e[this.propertyId]!==t.value){var n=Date.now();if(this.addRawPoint({value:e[this.propertyId],date:n}),!this.pointerState.action){var i=this.logEnd.getTime()-this.end.getTime();if(this.logEnd.setTime(n),i<1e4){var r=n-this.end.getTime();this.start.setTime(this.start.getTime()+r),this.end.setTime(this.end.getTime()+r)}this.redraw()}}}}liveScrollUpdate(){if(this.pointerState.action)this.liveScrollFrameRequest=null;else{var e=Date.now();if(this.timeToX(e)-this.timeToX(this.logEnd.getTime())<1)this.liveScrollFrameRequest=window.requestAnimationFrame(this.liveScrollUpdate);else{var t=(this.end.getTime()-this.start.getTime())/10,n=!1;if(this.logEnd.getTime()-this.end.getTime()<t){var i=e-this.end.getTime();this.end.setTime(this.end.getTime()+i),this.start.setTime(this.start.getTime()+i),n=!0}this.logEnd.setTime(e),this.liveScrollFrameRequest=window.requestAnimationFrame(this.liveScrollUpdate),n&&this.redraw()}}}remove(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt),this.thingModel&&this.thingModel.unsubscribe(s.PROPERTY_STATUS,this.onPropertyStatus),this.liveScrollFrameRequest&&(window.cancelAnimationFrame(this.liveScrollFrameRequest),this.liveScrollFrameRequest=null)}}},80025:(e,t,n)=>{"use strict";n(66992),n(33948),n(88674),n(74916),n(15306),n(54747);var i=n(28797).default,r=n(25425),s=n(44944),o=n(60600),a=n(38088);e.exports=class extends s{constructor(){return super(),this.thingModels=new Map,this.things=new Map,this.connectedThings=new Map,this.groups=new Map,this.onMessage=this.onMessage.bind(this),this.queue=Promise.resolve(!0),this.connectWebSocket(),this}addQueue(e){return this.queue=this.queue.then(e).catch((e=>{console.error(e)})),this.queue}subscribe(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];switch(super.subscribe(e,t),e){case r.REFRESH_THINGS:n&&t(this.things,this.groups);break;case r.DELETE_THINGS:case r.DELETE_GROUPS:break;default:console.warn("GatewayModel does not support event:".concat(e))}}setThing(e,t){if(this.thingModels.has(e))this.thingModels.get(e).updateFromDescription(t);else{var n=new a(t,this.ws);n.subscribe(r.DELETE_THING,this.handleRemove.bind(this)),this.connectedThings.has(e)&&n.onConnected(this.connectedThings.get(e)),this.thingModels.set(e,n)}this.things.set(e,t)}getThing(e){return this.thingModels.has(e)&&this.things.has(e)?Promise.resolve(this.things.get(e)):this.refreshThing(e).then((()=>this.things.get(e)))}getThingModel(e){return this.thingModels.has(e)?Promise.resolve(this.thingModels.get(e)):this.refreshThing(e).then((()=>this.thingModels.get(e)))}removeThing(e){return this.thingModels.has(e)?this.addQueue((()=>{if(!this.thingModels.has(e))throw new Error("Thing id:".concat(e," already removed"));return this.thingModels.get(e).removeThing()})):Promise.reject("No Thing id:".concat(e))}updateThing(e,t){return this.thingModels.has(e)?this.addQueue((()=>{if(!this.thingModels.has(e))throw new Error("Thing id:".concat(e," already removed"));return this.thingModels.get(e).updateThing(t).then((()=>{this.refreshThing(e)}))})):Promise.reject("No Thing id:".concat(e))}handleRemove(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.thingModels.has(e)&&(this.thingModels.get(e).cleanup(),this.thingModels.delete(e)),this.things.has(e)&&this.things.delete(e),!t)return this.handleEvent(r.DELETE_THINGS,this.things,this.groups)}connectWebSocket(){var e="".concat(window.location.origin,"/things?jwt=").concat(i.jwt).replace(/^http/,"ws");this.ws=new o(e),this.ws.addEventListener("open",this.refreshThings.bind(this)),this.ws.addEventListener("message",this.onMessage);var t="".concat(window.location.origin,"/groups?jwt=").concat(i.jwt).replace(/^http/,"ws");this.groupsWs=new o(t),this.groupsWs.addEventListener("open",this.refreshThings.bind(this)),this.groupsWs.addEventListener("message",this.onMessage)}onMessage(e){var t=JSON.parse(e.data);switch(t.messageType){case"connected":this.connectedThings.set(t.id,t.data);break;case"thingAdded":case"groupAdded":case"groupModified":case"groupRemoved":case"layoutModified":this.refreshThings();break;case"thingModified":this.refreshThing(t.id)}}refreshThings(){return this.addQueue((()=>i.getThings().then((e=>{var t=new Set;return e.forEach((e=>{var n=decodeURIComponent(e.href.split("/").pop());t.add(n),this.setThing(n,e)})),Array.from(this.thingModels.keys()).filter((e=>!t.has(e))).forEach((e=>this.handleRemove(e,!0))),i.getGroups()})).then((e=>{var t=new Set;return e.forEach((e=>{var n=decodeURIComponent(e.href.split("/").pop());t.add(n),this.setGroup(n,e)})),Array.from(this.groups.keys()).filter((e=>!t.has(e))).forEach((e=>this.handleRemoveGroup(e,!0))),this.handleEvent(r.REFRESH_THINGS,this.things,this.groups)})).catch((e=>{console.error("Get things or groups failed ".concat(e))}))))}refreshThing(e){return this.addQueue((()=>i.getThing(e).then((t=>{if(!t)throw new Error("Unavailable Thing Description: ".concat(t));return this.setThing(e,t),this.handleEvent(r.REFRESH_THINGS,this.things,this.groups)})).catch((t=>{console.error("Get thing id:".concat(e," failed ").concat(t))}))))}setGroup(e,t){this.groups.set(e,t)}getGroup(e){return this.groups.has(e)?Promise.resolve(this.groups.get(e)):this.refreshThings().then((()=>this.groups.get(e)))}removeGroup(e){return this.groups.has(e)?this.addQueue((()=>{if(!this.groups.has(e))throw new Error("Group id:".concat(e," already removed"));return i.removeGroup(e).then((()=>this.handleEvent(r.DELETE_GROUPS,this.things,this.groups)))})):Promise.reject("No group id:".concat(e))}addGroup(e){return this.addQueue((()=>i.addGroup(e).then((e=>decodeURIComponent(e.href.split("/").pop())))))}updateGroup(e,t){return this.groups.has(e)?this.addQueue((()=>{if(!this.groups.has(e))throw new Error("Group id:".concat(e," already updated"));return i.updateGroup(e,t).then((()=>{this.refreshThings()}))})):Promise.reject("No group id:".concat(e))}handleRemoveGroup(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.groups.has(e)&&this.groups.delete(e),!t)return this.handleEvent(r.DELETE_GROUPS,this.things,this.groups)}}},44944:(e,t,n)=>{"use strict";function i(e,t,n,i,r,s,o){try{var a=e[s](o),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(i,r)}n(88674),n(66992),n(33948),n(54747),e.exports=class{constructor(){return this.handlers=new Map,this}cleanup(){this.handlers.forEach((e=>{e.clear()})),this.handlers.clear()}unsubscribe(e,t){this.handlers.has(e)&&this.handlers.get(e).delete(t)}subscribe(e,t){this.handlers.has(e)||this.handlers.set(e,new Map),this.handlers.get(e).set(t,t)}handleEvent(e){var t,n=arguments,r=this;return(t=function*(){if(r.handlers.has(e)){for(var t=r.handlers.get(e),i=n.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=n[o];for(var a of t.keys())try{yield a(...s)}catch(t){console.error("Error occurred in handler event:".concat(e," state:").concat(s," ").concat(t))}}},function(){var e=this,n=arguments;return new Promise((function(r,s){var o=t.apply(e,n);function a(e){i(o,r,s,a,l,"next",e)}function l(e){i(o,r,s,a,l,"throw",e)}a(void 0)}))})()}}},60600:(e,t,n)=>{"use strict";n(66992),n(33948),e.exports=class{constructor(e){this.href=e,this.ws=null,this.closing=!1,this.opening=!1,this.onOpen=this.onOpen.bind(this),this.onMessage=this.onMessage.bind(this),this.reopen=this.reopen.bind(this),this.closePermanently=this.closePermanently.bind(this),this.listeners={open:[],message:[]},this.open()}open(){this.closing||(this.opening=!0,this.ws=new WebSocket(this.href),window.addEventListener("beforeunload",this.closePermanently),this.ws.addEventListener("open",this.onOpen),this.ws.addEventListener("message",this.onMessage),this.ws.addEventListener("close",this.reopen),this.ws.addEventListener("error",this.reopen))}addEventListener(e,t){if("open"!==e&&"message"!=e)throw new Error("Event ".concat(e," not supported"));"open"!==e||this.opening||t(),this.listeners[e].push(t)}onOpen(){for(var e of(this.backoff=1e3,this.opening=!1,this.listeners.open))e()}onMessage(e){for(var t of this.listeners.message)t(e)}reopen(){this.ws.removeEventListener("open",this.onOpen),this.ws.removeEventListener("message",this.onMessage),this.ws.removeEventListener("close",this.reopen),this.ws.removeEventListener("error",this.reopen),this.ws.close(),this.ws=null,window.removeEventListener("beforeunload",this.closePermanently),setTimeout((()=>{this.backoff*=2,this.backoff>3e4&&(this.backoff=3e4),this.open()}),this.backoff)}send(e){return this.ws.send(e)}closePermanently(){this.closing=!0,this.listeners={},this.ws&&(this.ws.removeEventListener("open",this.onOpen),this.ws.removeEventListener("message",this.onMessage),this.ws.removeEventListener("close",this.reopen),this.ws.removeEventListener("error",this.reopen),this.ws.readyState!==WebSocket.OPEN&&this.ws.readyState!==WebSocket.CONNECTING||this.ws.close(),this.ws=null)}}},38088:(e,t,n)=>{"use strict";n(66992),n(33948),n(60285),n(41637),n(26699),n(88674),n(26833),n(54747);var i=n(28797).default,r=n(96710),s=n(44944),o=n(25425),a=n(29705);e.exports=class extends s{constructor(e,t){return super(),this.properties={},this.events=[],this.connected=!1,this.base=r.ORIGIN,this.updateFromDescription(e),this.initWebSocket(t),this.updateEvents(),this}updateFromDescription(e){var t;for(var n of(this.title=e.title,this.base=null!==(t=e.base)&&void 0!==t?t:r.ORIGIN,e.href&&(this.href=new URL(e.href,r.ORIGIN),this.id=decodeURIComponent(this.href.pathname.split("/").pop())),this.group_id=e.group_id,e.forms)){var i=n.op;"string"==typeof i&&i===o.WoTOperation.READ_ALL_PROPERTIES||Array.isArray(i)&&i.includes(o.WoTOperation.READ_ALL_PROPERTIES)?this.propertiesHref=new URL(n.href,this.base):("string"==typeof i&&i===o.WoTOperation.SUBSCRIBE_ALL_EVENTS||Array.isArray(i)&&i.includes(o.WoTOperation.SUBSCRIBE_ALL_EVENTS))&&(this.eventsHref=new URL(n.href,this.base))}if(this.propertyDescriptions={},e.hasOwnProperty("properties"))for(var s in e.properties){var a=e.properties[s];this.propertyDescriptions[s]=a}if(this.eventDescriptions={},e.hasOwnProperty("events"))for(var l in e.events){var c=e.events[l];this.eventDescriptions[l]=c}}removeThing(){return i.removeThing(this.id).then((()=>{this.handleEvent(o.DELETE_THING,this.id),this.cleanup()}))}updateThing(e){return i.updateThing(this.id,e)}initWebSocket(e){this.hasOwnProperty("href")&&(this.ws=e,this.ws.addEventListener("open",(()=>{if(0!=Object.keys(this.eventDescriptions).length){var e={id:this.id,messageType:"addEventSubscription",data:{}};for(var t in this.eventDescriptions)e.data[t]={};this.ws.send(JSON.stringify(e))}})),this.ws.addEventListener("message",(e=>{var t=JSON.parse(e.data);if(!t.hasOwnProperty("id")||t.id===this.id)switch(t.messageType){case"propertyStatus":this.onPropertyStatus(t.data);break;case"event":this.onEvent(t.data);break;case"connected":this.onConnected(t.data);break;case"error":"404 Not Found"===t.data.status&&(console.log("Successfully removed Thing."),this.handleEvent(o.DELETE_THING,this.id),this.cleanup());break;case"thingRemoved":this.handleEvent(o.DELETE_THING,this.id),this.cleanup()}})))}subscribe(e,t){switch(super.subscribe(e,t),e){case o.EVENT_OCCURRED:break;case o.PROPERTY_STATUS:t(this.properties);break;case o.DELETE_THING:break;case o.CONNECTED:t(this.connected);break;default:console.warn("ThingModel does not support event:".concat(e))}}setProperty(e,t){if(!this.propertyDescriptions.hasOwnProperty(e))return Promise.reject("Unavailable property name ".concat(e));switch(this.propertyDescriptions[e].type){case"number":t=parseFloat(t);break;case"integer":t=parseInt(t);break;case"boolean":t=Boolean(t)}var n=this.propertyDescriptions[e],r=a.selectFormHref(n.forms,o.WoTOperation.READ_PROPERTY,this.base);return i.putJsonWithEmptyResponse(r,t).then((()=>{var n={};n[e]=t,this.onPropertyStatus(n)})).catch((t=>{throw console.error(t),new Error("Error trying to set ".concat(e))}))}updateProperties(){var e;if(void 0===this.propertiesHref){var t=Object.values(this.propertyDescriptions).map((e=>{if(e.forms)return a.selectFormHref(e.forms,o.WoTOperation.WRITE_PROPERTY,this.base)})).map((e=>i.getJson(e)));e=Promise.all(t).then((e=>{var t={};return e.forEach((e=>{t=Object.assign(t,e)})),t}))}else e=i.getJson(this.propertiesHref);e.then((e=>{this.onPropertyStatus(e)})).catch((e=>{console.error("Error fetching ".concat(this.title," status: ").concat(e))}))}onPropertyStatus(e){var t={};for(var n in e)if(this.propertyDescriptions.hasOwnProperty(n)){var i=e[n];null!=i&&(this.properties[n]=i,t[n]=i)}return this.handleEvent(o.PROPERTY_STATUS,t)}updateEvents(){if(void 0!==this.eventsHref)return i.getJson(this.eventsHref).then((e=>{this.events=e})).catch((e=>{console.error("Error fetching events: ".concat(e))}))}onEvent(e){var t={};for(var n in e)this.eventDescriptions.hasOwnProperty(n)&&(t[n]=e[n],this.events.push({[n]:e[n]}));return this.handleEvent(o.EVENT_OCCURRED,t)}onConnected(e){return this.connected=e,e&&this.updateProperties(),this.handleEvent(o.CONNECTED,e)}}},11006:(e,t,n)=>{"use strict";function i(e,t,n,i,r,s,o){try{var a=e[s](o),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(i,r)}n(74916),n(15306),n(66992),n(39575),n(82472),n(33105),n(3462),n(33824),n(88674);var r,s,o=n(28797).default,a={onReady:(r=function*(e){if(e.pushManager){var t=yield e.pushManager.getSubscription();if(!t){var n=yield o.getPushKey();if(n.error)return void console.error("Error getting vapid key:",n.error);var i=function(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),n=window.atob(t),i=new Uint8Array(n.length),r=0;r<n.length;++r)i[r]=n.charCodeAt(r);return i}(n.publicKey);t=yield e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:i})}yield o.pushSubscribe({subscription:t})}},s=function(){var e=this,t=arguments;return new Promise((function(n,s){var o=r.apply(e,t);function a(e){i(o,n,s,a,l,"next",e)}function l(e){i(o,n,s,a,l,"throw",e)}a(void 0)}))},function(e){return s.apply(this,arguments)})};e.exports=a},93971:(e,t,n)=>{"use strict";var i=n(96710),r=n(55161),s={init:()=>{r("/","/things"),r("/things",i.showThings.bind(i)),r("/things/:thingId",i.showThings.bind(i)),r("/things/:thingId/actions/:actionName",i.showThings.bind(i)),r("/things/:thingId/events",i.showThings.bind(i)),r("/settings",i.showSettings.bind(i)),r("/settings/:section",i.showSettings.bind(i)),r("/settings/:section/:subsection",i.showSettings.bind(i)),r("/settings/:section/:subsection/:id",i.showSettings.bind(i)),r("/floorplan",i.showFloorplan.bind(i)),r("/rules",i.showRules.bind(i)),r("/rules/:rule",i.showRule.bind(i)),r("/logs",i.showLogs.bind(i)),r("/logs/things/:thingId/properties",i.showLogs.bind(i)),r("/logs/things/:thingId/properties/:propId",i.showLogs.bind(i)),r("/extensions/:extensionId",i.showExtension.bind(i)),r()}};e.exports=s},89668:(e,t,n)=>{"use strict";n(66992),n(33948);var i=n(25290);e.exports=class{constructor(e,t){this.block=e,this.elt=document.createElement("div"),this.elt.classList.add("property-select"),this.elt.classList.add("block-configure-dropdown"),this.onClick=this.onClick.bind(this),this.elt.addEventListener("click",this.onClick),this.onDocumentClick=this.onDocumentClick.bind(this),document.body.addEventListener("click",this.onDocumentClick),this.valueElts={},this.addValue({openButton:!0,id:null,title:i.getMessage("rule-configure"),type:null}),this.elt.addEventListener("mousedown",(e=>{e.stopPropagation()})),this.elt.addEventListener("touchstart",(e=>{e.stopPropagation()})),t.appendChild(this.elt)}addValue(e){var t=document.createElement("div");t.classList.add("property-select-option"),t.dataset.schema=JSON.stringify(e),e.openButton&&t.classList.add("open-button");var n=document.createElement("span");n.classList.add("property-select-name"),n.textContent=e.title,n.title=e.title,t.appendChild(n);var i=e=>{e.stopPropagation()};if("number"===e.type||"integer"===e.type){var r,s;if(e.hasOwnProperty("enum")&&e.enum.length>0){for(var o of((s=document.createElement("select")).classList.add("value-select"),e.enum)){var a=document.createElement("option");a.value=o,a.innerText=o,s.appendChild(a)}s.addEventListener("click",i),s.value=e.value,this.valueElts[e.id]=s,t.appendChild(s)}else(r=document.createElement("input")).classList.add("value-input"),r.type="number",e.hasOwnProperty("multipleOf")?r.step="".concat(e.multipleOf):"number"===e.type?r.step="any":r.step="1",e.hasOwnProperty("minimum")&&(r.min="".concat(e.minimum)),e.hasOwnProperty("maximum")&&(r.max="".concat(e.maximum)),r.addEventListener("click",i),r.value=e.value,this.valueElts[e.id]=r,t.appendChild(r);t.addEventListener("change",(()=>{var t;t=r?parseFloat(r.value):parseFloat(s.options[s.selectedIndex].value),e.hasOwnProperty("multipleOf")&&(t=Math.round(t/e.multipleOf)*e.multipleOf),"integer"===e.type&&(t=parseInt(t)),e.hasOwnProperty("minimum")&&(t=Math.max(t,e.minimum)),e.hasOwnProperty("maximum")&&(t=Math.min(t,e.maximum)),r&&(r.value=t)}))}else if("string"===e.type)if(e.hasOwnProperty("enum")&&e.enum.length>0){var l=document.createElement("select");for(var c of(l.classList.add("value-select"),e.enum)){var u=document.createElement("option");u.value=c,u.innerText=c,l.appendChild(u)}l.addEventListener("click",i),l.value=e.value,this.valueElts[e.id]=l,t.appendChild(l)}else{var h=document.createElement("input");h.classList.add("value-input"),"color"===e.id?h.type="color":h.type="text",h.addEventListener("click",i),h.value=e.value,this.valueElts[e.id]=h,t.appendChild(h)}this.elt.appendChild(t)}onClick(e){this.elt.classList.add("open")}onDocumentClick(e){if(this.elt.classList.contains("open")){for(var t=e.target;t;){if(t===this.elt)return;t=t.parentNode}this.elt.classList.remove("open"),document.activeElement.blur(),this.onCommit()}}onCommit(){var e={};for(var t in this.valueElts){var n=this.valueElts[t];if("SELECT"===n.tagName){var i=n.options[n.selectedIndex].value,r=JSON.parse(n.parentNode.dataset.schema);"integer"===r.type?i=parseInt(i):"number"===r.type&&(i=parseFloat(i)),e[t]=i}else e[t]=n.value}this.block.updateValues(e)}setValue(e,t){this.valueElts[e].value=t}remove(){this.elt.removeEventListener("click",this.onClick),document.body.removeEventListener("click",this.onDocumentClick)}}},90071:(e,t,n)=>{"use strict";var i=n(90632),r=n(21720),s=n(12890);e.exports=class extends r{constructor(e,t,n,r){super(e,t,n,r.title,s.icon(r)),this.thing=r;var o=this.elt.querySelector(".rule-part-info");this.propertySelect=new i(this,o,r)}onUp(e,t){var n=this.role;super.onUp(e,t),this.role!==n&&(this.propertySelect.updateOptionsForRole(this.role),this.rulePart=null,this.onRuleChange())}setRulePart(e){super.setRulePart(e),this.propertySelect.updateOptionsForRole(this.role),this.propertySelect.selectByRuleFragment(e)}remove(){super.remove(),this.propertySelect.remove()}}},32490:e=>{"use strict";e.exports=class{constructor(e,t,n,i){this.elt=e,this.afterDown=t,this.afterMove=n,this.afterUp=i;var r=this.elt.parentNode.getBoundingClientRect();this.baseX=r.left,this.baseY=r.top,this.onDown=this.onDown.bind(this),this.onMove=this.onMove.bind(this),this.onUp=this.onUp.bind(this),e.addEventListener("mousedown",this.onDown),e.addEventListener("touchstart",this.onDown)}getClientCoords(e){return e.type.startsWith("touch")?{clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY}:{clientX:e.clientX,clientY:e.clientY}}onDown(e){if(window.addEventListener("mousemove",this.onMove),window.addEventListener("touchmove",this.onMove),window.addEventListener("mouseup",this.onUp),window.addEventListener("touchend",this.onUp),e.preventDefault(),this.afterDown){var t=this.getClientCoords(e);this.afterDown(t.clientX,t.clientY)}}onMove(e){var t=this.getClientCoords(e),n=t.clientX-this.baseX,i=t.clientY-this.baseY;this.elt.style.transform="translate(".concat(n,"px,").concat(i,"px)"),this.afterMove&&this.afterMove(t.clientX,t.clientY,n,i)}onUp(e){if(window.removeEventListener("mousemove",this.onMove),window.removeEventListener("touchmove",this.onMove),window.removeEventListener("mouseup",this.onUp),window.removeEventListener("touchend",this.onUp),this.afterUp){var t=this.getClientCoords(e);this.afterUp(t.clientX,t.clientY)}}}},76089:(e,t,n)=>{"use strict";function i(e,t,n,i,r,s,o){try{var a=e[s](o),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(i,r)}n(88674),n(2707);var r=n(28797).default;e.exports=class{constructor(){this.things=null,this.notifiers=null}readThings(){return r.getThings().then((e=>(this.things=e.sort(((e,t)=>e.layoutIndex-t.layoutIndex)),e)))}readNotifiers(){var e,t=this;return(e=function*(){return t.notifiers=yield r.getNotifiers(),t.notifiers},function(){var t=this,n=arguments;return new Promise((function(r,s){var o=e.apply(t,n);function a(e){i(o,r,s,a,l,"next",e)}function l(e){i(o,r,s,a,l,"throw",e)}a(void 0)}))})()}}},44037:(e,t,n)=>{"use strict";var i=n(21720),r=n(25290);e.exports=class extends i{constructor(e,t,n){super(e,t,n,r.getMessage("rule-notification"),"/images/thing-icons/notification.svg");var i=this.elt.querySelector(".rule-part-info"),s=document.createElement("div");s.classList.add("message-input-container");var o=document.createElement("span");o.classList.add("message-input-label"),o.innerText=r.getMessage("notification-message"),s.appendChild(o),this.messageInput=document.createElement("input"),this.messageInput.type="text",s.appendChild(this.messageInput),this.messageInput.addEventListener("mousedown",(e=>{e.stopPropagation()})),this.messageInput.addEventListener("touchstart",(e=>{e.stopPropagation()})),this.messageInput.addEventListener("change",(()=>{this.rulePart={effect:{type:"NotificationEffect",message:this.messageInput.value}},this.onRuleChange()})),i.appendChild(s)}setRulePart(e){if(this.rulePart=e,e.effect&&(this.role="effect",this.rulePartBlock.classList.add("effect"),this.messageInput.value=e.effect.message),e.trigger)throw new Error("NotificationEffectBlock can only be an effect")}onUp(e,t){super.onUp(e,t),"trigger"===this.role&&this.remove(),"effect"===this.role&&(this.rulePart={effect:{type:"NotificationEffect",message:this.messageInput.value}},this.onRuleChange())}}},22747:(e,t,n)=>{"use strict";n(66992),n(33948);var i=n(21720),r=n(89668),s=n(25290);e.exports=class extends i{constructor(e,t,n,i,o,a){super(e,t,n,"".concat(o.name," ").concat(s.getMessage("rule-notification")),"/images/thing-icons/notification.svg"),this.notifier=i,this.outlet=o,this.values={title:"",message:"",level:0},a&&(this.values=a);var l=this.elt.querySelector(".rule-part-block"),c=this.elt.querySelector(".rule-part-info");this.updateValues=this.updateValues.bind(this),this.dropdown=new r(this,c),this.dropdown.addValue({id:"title",title:s.getMessage("notification-title"),type:"string",value:this.values.title}),this.dropdown.addValue({id:"message",title:s.getMessage("notification-message"),type:"string",value:this.values.message}),this.levels=[s.getMessage("notification-low"),s.getMessage("notification-normal"),s.getMessage("notification-high")],this.dropdown.addValue({id:"level",title:s.getMessage("notification-level"),type:"string",enum:this.levels,value:this.levels[this.values.level]}),l.addEventListener("click",this.onBlockClick.bind(this)),c.addEventListener("click",this.onBlockClick.bind(this)),this.updateRulePart()}onBlockClick(){this.dropdown.elt.classList.contains("open")||this.dropdown.onCommit()}updateValues(e){this.values=e,this.values.level=this.levels.indexOf(this.values.level),this.updateRulePart(),this.onRuleChange()}updateRulePart(){this.setRulePart({effect:{type:"NotifierOutletEffect",notifier:this.notifier.id,outlet:this.outlet.id,title:this.values.title,message:this.values.message,level:this.values.level}})}setRulePart(e){if(this.rulePart=e,e.trigger)throw new Error("NotifierOutletBlock can only be an effect");if(e.effect){this.role="effect",this.rulePartBlock.classList.add("effect");var t=this.rulePart.effect;this.dropdown.setValue("title",t.title),this.dropdown.setValue("message",t.message),this.dropdown.setValue("level",this.levels[t.level])}}remove(){super.remove(),this.dropdown.remove()}}},90632:(e,t,n)=>{"use strict";n(74916),n(66992),n(33948);var i=n(25290),r=n(12890),s=n(37493),o=n(29705),a=n(25425);function l(e){return e.trigger?e.trigger.property:e.effect.property}function c(e,t){if(!!e!=!!t)return!1;if(e.trigger&&!t.trigger)return!1;if(e.effect&&!t.effect)return!1;var n=e.trigger||e.effect,i=t.trigger||t.effect,r=l(e);if(!function(e,t){return!e&&!t||e&&t&&e.type===t.type&&e.id===t.id&&e.thing===t.thing}(r,l(t)))return!1;if(n.type.match(/(Set|Pulse)Effect/)){if(!i.type.match(/(Set|Pulse)Effect/))return!1}else if(n.type!==i.type)return!1;return r&&"boolean"===r.type?e.trigger?n.onValue===i.onValue:n.value===i.value:"EventTrigger"===n.type?n.event===i.event:"ActionEffect"!==n.type||n.action===i.action}e.exports=class{constructor(e,t,n){this.devicePropertyBlock=e,this.thing=n,this.role="",this.elt=document.createElement("div"),this.elt.classList.add("property-select"),this.onClick=this.onClick.bind(this),this.elt.addEventListener("click",this.onClick),this.onDocumentClick=this.onDocumentClick.bind(this),document.body.addEventListener("click",this.onDocumentClick),this.clearOptions(),this.elt.addEventListener("mousedown",(e=>{e.stopPropagation()})),this.elt.addEventListener("touchstart",(e=>{e.stopPropagation()})),t.appendChild(this.elt)}clearOptions(){this.elt.innerHTML="",this.addOption(i.getMessage("rule-select-property"),null,!0)}addOption(e,t,n){var i=document.createElement("div");i.classList.add("property-select-option"),n&&i.classList.add("selected"),i.dataset.ruleFragment=JSON.stringify(t);var r=document.createElement("span");if(r.classList.add("property-select-name"),r.textContent=e,r.title=e,i.appendChild(r),t){var a=l(t);if(!a)return this.updateOption(i),void this.elt.appendChild(i);var c=e=>{e.stopPropagation()};if("number"===a.type||"integer"===a.type){var u,h,d,p,f;if(t.trigger){(u=document.createElement("option")).textContent="<",u.classList.add("lt-option"),"integer"===a.type&&((d=document.createElement("option")).textContent="=",d.classList.add("eq-option")),(h=document.createElement("option")).textContent=">",h.classList.add("gt-option");var m=document.createElement("select");m.appendChild(u),"integer"===a.type&&m.appendChild(d),m.appendChild(h),m.addEventListener("click",c),i.appendChild(m)}if(a.hasOwnProperty("enum")&&a.enum.length>0){for(var g of((f=document.createElement("select")).classList.add("value-select"),a.enum)){var v=document.createElement("option");v.value=s.convert(g,a.unit).value,v.innerText=v.value,f.appendChild(v)}f.addEventListener("click",c),i.appendChild(f)}else{var y=s.convert(0,a.unit).unit!==a.unit;(p=document.createElement("input")).classList.add("value-input"),p.type="number",a.hasOwnProperty("multipleOf")&&!y?p.step="".concat(a.multipleOf):"number"===a.type?p.step="any":p.step="1",a.hasOwnProperty("minimum")&&(p.min="".concat(s.convert(a.minimum,a.unit))),a.hasOwnProperty("maximum")&&(p.max="".concat(s.convert(a.maximum,a.unit))),p.addEventListener("click",c),i.appendChild(p)}i.addEventListener("change",(()=>{var e;e=p?parseFloat(p.value):parseFloat(f.options[f.selectedIndex].value),e=s.convert(e,s.convert(0,a.unit).unit,a.unit).value,e=o.adjustInputValue(e,a),p&&(p.value=e),t.trigger?(u.selected?t.trigger.levelType="LESS":h.selected?t.trigger.levelType="GREATER":"integer"===a.type&&d.selected&&(t.trigger.levelType="EQUAL"),t.trigger.value=e):t.effect.value=e,this.devicePropertyBlock.rulePart=t,this.devicePropertyBlock.onRuleChange(),i.dataset.ruleFragment=JSON.stringify(t),this.select(i)}))}else if("string"===a.type){var b,w;if(a.hasOwnProperty("enum")&&a.enum.length>0){for(var E of((w=document.createElement("select")).classList.add("value-select"),a.enum)){var _=document.createElement("option");_.value=E,_.innerText=E,w.appendChild(_)}w.addEventListener("click",c),i.appendChild(w)}else(b=document.createElement("input")).classList.add("value-input"),"color"===a.name?b.type="color":b.type="text",b.addEventListener("click",c),i.appendChild(b);i.addEventListener("change",(()=>{var e;e=b?b.value:w.options[w.selectedIndex].value;var n=this.devicePropertyBlock.rulePart,r=!n;t.trigger?(t.trigger.value=e,r=r||n.trigger&&n.trigger.type===t.trigger.type):(t.effect.value=e,r=r||n.effect&&n.effect.property.id===t.effect.property.id&&n.effect.property.thing===t.effect.property.thing),i.dataset.ruleFragment=JSON.stringify(t),r&&(this.devicePropertyBlock.rulePart=t,this.devicePropertyBlock.onRuleChange()),this.select(i)}))}this.updateOption(i),this.elt.appendChild(i)}else this.elt.appendChild(i)}updateOption(e){var t=JSON.parse(e.dataset.ruleFragment);if(t){var n=l(t);if(n){var i=t.trigger?t.trigger.value:t.effect.value,r=e.querySelector(".value-input")||e.querySelector(".value-select");"number"===n.type||"integer"===n.type?(t.trigger&&("GREATER"===t.trigger.levelType?e.querySelector(".gt-option").setAttribute("selected",""):"integer"===n.type&&"EQUAL"===t.trigger.levelType?e.querySelector(".eq-option").setAttribute("selected",""):e.querySelector(".lt-option").setAttribute("selected","")),r.value=s.convert(i,n.unit).value):"color"!==n.name&&"string"!==n.type||(r.value=i)}}}updateOptionsForRole(e){if(this.role!==e){for(var t of(this.role=e,this.clearOptions(),Object.keys(this.thing.properties))){var n=JSON.parse(JSON.stringify(this.thing.properties[t]));n.name||(n.name=t);var s=n.forms||[];if(0!==s.length){n.id=r.extractProperty(o.selectFormHref(s,a.WoTOperation.READ_PROPERTY)),n.thing=r.extractThing(o.selectFormHref(s,a.WoTOperation.READ_PROPERTY)),delete n.forms;var l=n.title||o.capitalize(n.name);if("trigger"===e){if("boolean"===n.type){var c={type:"BooleanTrigger",property:n,onValue:!0,label:l},u=Object.assign({},c,{onValue:!1}),h=l,d="".concat(i.getMessage("rule-not")," ").concat(h);"on"===n.name&&(h=i.getMessage("on"),d=i.getMessage("off")),this.addOption(h,{trigger:c}),this.addOption(d,{trigger:u})}else if("string"===n.type){var p="";"color"===n.name&&(p="#ffffff"),this.addOption(l,{trigger:{type:"EqualityTrigger",property:n,value:p,label:l}})}else if("number"===n.type||"integer"===n.type){var f=n.maximum||0,m=n.minimum||0,g=Math.round((f+m)/2);this.addOption(l,{trigger:{type:"LevelTrigger",property:n,levelType:"LESS",value:g,label:l}})}}else if("effect"===e){if(n.readOnly)continue;if("boolean"===n.type){var v={type:"PulseEffect",property:n,value:!0,label:l},y=Object.assign({},v,{value:!1}),b=l,w="".concat(i.getMessage("rule-not")," ").concat(b);"on"===n.name&&(b=i.getMessage("on"),w=i.getMessage("off")),this.addOption(b,{effect:v}),this.addOption(w,{effect:y})}else if("color"===n.name)this.addOption(l,{effect:{type:"PulseEffect",property:n,value:"#ffffff",label:l}});else if("string"===n.type)this.addOption(l,{effect:{type:"PulseEffect",property:n,value:"text",label:l}});else if("number"===n.type||"integer"===n.type){var E=((n.maximum||0)+(n.minimum||0))/2;this.addOption(l,{effect:{type:"PulseEffect",property:n,value:E,label:l}})}}}}"trigger"===e?this.addEventOptions():"effect"===e&&this.addActionOptions()}}addEventOptions(){for(var e of Object.keys(this.thing.events)){var t=this.thing.events[e].title||this.thing.events[e].label||e,n={type:"EventTrigger",thing:r.extractThing(this.thing.href),event:e,label:t};this.addOption("".concat(i.getMessage("rule-event"),' "').concat(n.label,'"'),{trigger:n})}}addActionOptions(){for(var e of Object.keys(this.thing.actions))if(!(this.thing.actions[e].input&&Object.keys(this.thing.actions[e].input).length>0)){var t=this.thing.actions[e].title||this.thing.actions[e].label||e,n={type:"ActionEffect",thing:r.extractThing(this.thing.href),action:e,label:t,parameters:{}};this.addOption("".concat(i.getMessage("rule-action"),' "').concat(n.label,'"'),{effect:n})}}onClick(e){if(this.elt.classList.toggle("open"),this.elt.classList.contains("open"))this.devicePropertyBlock.elt.classList.add("open");else{document.activeElement.blur();var t=e.target;t.classList.contains("property-select-option")||(t=t.parentNode),this.select(t);var n=JSON.parse(t.dataset.ruleFragment);if(!n)return;this.devicePropertyBlock.rulePart=n,this.devicePropertyBlock.elt.classList.remove("open"),this.devicePropertyBlock.onRuleChange()}}selectByRuleFragment(e){var t=this.elt.querySelectorAll(".property-select-option");for(var n of t)if(c(JSON.parse(n.dataset.ruleFragment),e))return n.dataset.ruleFragment=JSON.stringify(e),this.updateOption(n),void this.select(n)}select(e){var t=this.elt.querySelector(".selected");if(t)if(JSON.parse(t.dataset.ruleFragment))t.classList.remove("selected");else{if(t===e)return;this.elt.removeChild(t)}e.classList.add("selected")}onDocumentClick(e){if(this.elt.classList.contains("open")){for(var t=e.target;t;){if(t===this.elt)return;t=t.parentNode}this.elt.classList.remove("open"),document.activeElement.blur()}}remove(){this.elt.removeEventListener("click",this.onClick),document.body.removeEventListener("click",this.onDocumentClick)}}},44608:(e,t,n)=>{"use strict";n(88674),n(66992),n(33948);var i=n(28797).default,r=n(96710),s=n(12890),o=n(37493);e.exports=class{constructor(e,t,n){this.gateway=e,this.onUpdate=n,t?(this.id=t.id,this.enabled=t.enabled,t.name?this.name=t.name:this.name="Rule Name",this.trigger=t.trigger,this.effect=t.effect):this.enabled=!0}update(){this.onUpdate&&this.onUpdate();var e=this.toDescription();return e?void 0!==this.id?i.updateRule(this.id,e):i.addRule(e).then((e=>{this.id=e.id})):Promise.reject("invalid description")}delete(){if(void 0!==this.id)return i.deleteRule(this.id)}toDescription(){return this.trigger&&this.effect?{enabled:this.enabled,name:this.name,trigger:this.trigger,effect:this.effect}:null}singleTriggerToHumanRepresentation(e,t){if(!e)return null;if("MultiTrigger"===e.type){for(var n="",i=0;i<e.triggers.length;i++){if(i>0&&(e.triggers.length>2&&(n+=","),n+=" ",i===e.triggers.length-1))if(t){var a="AND"===e.op?"selected":"",l="OR"===e.op?"selected":"";n+='\n                <span class="triangle-select-container">\n                  <select class="triangle-select rule-trigger-select">\n                    <option '.concat(a,">and</option>\n                    <option ").concat(l,">or</option>\n                  </select>\n                </span>\n              ")}else n+="AND"===e.op?"and ":"or ";var c=this.singleTriggerToHumanRepresentation(e.triggers[i],t);if(!c)return null;n+=c}return n}if("TimeTrigger"===e.type){var u=new Date,h=e.time.split(":");u.setHours(parseInt(h[0],10),parseInt(h[1],10),0,0);var d=u.toLocaleTimeString(r.LANGUAGE,{hour:"2-digit",minute:"2-digit"});return"the time of day is ".concat(d)}if("EventTrigger"===e.type){var p=this.gateway.things.filter(s.byThing(e.thing))[0];return p?"".concat(p.title,' event "').concat(e.label,'" occurs'):null}var f=this.gateway.things.filter(s.byProperty(e.property))[0];if(!f)return null;var m,g=f.properties[e.property.id];if(!g)return null;e.hasOwnProperty("value")&&(m=o.convert(e.value,g.unit).value);var v="".concat(f.title," ");if("BooleanTrigger"===e.type)v+="is ",e.onValue||(v+="not "),"on"===e.property.id||"on"===g.name?v+="on":v+=e.label;else if("LevelTrigger"===e.type)v+="".concat(e.label," is "),"LESS"===e.levelType?v+="less than ":"EQUAL"===e.levelType?v+="equal to ":v+="greater than ",v+="".concat(m);else{if("EqualityTrigger"!==e.type)return console.error("Unknown trigger type",e),null;v+="".concat(e.label," is ").concat(m)}return v}singleEffectToHumanRepresentation(e){if(!e)return null;if("MultiEffect"===e.type){for(var t="",n=0;n<e.effects.length;n++){n>0&&(e.effects.length>2&&(t+=","),t+=" ",n===e.effects.length-1&&(t+="and "));var i=this.singleEffectToHumanRepresentation(e.effects[n]);if(!i)return null;t+=i}return t}if("NotificationEffect"===e.type)return"send a browser notification";if("NotifierOutletEffect"===e.type){var r=this.gateway.notifiers.filter((t=>t.id===e.notifier))[0];if(!r)return null;var a=r.outlets.filter((t=>t.id===e.outlet))[0];return a?"send a notification through ".concat(a.name):null}if("ActionEffect"===e.type){var l=this.gateway.things.filter(s.byThing(e.thing))[0];return l?"do ".concat(l.title,' action "').concat(e.label,'"'):null}var c=this.gateway.things.filter(s.byProperty(e.property))[0];if(!c)return null;var u=c.properties[e.property.id];if(!u)return null;var h="";return"on"===u.name||"on"===e.property.id?(h="turn ".concat(c.title," "),e.value?h+="on":h+="off"):(h+="set ".concat(c.title," ").concat(e.label," to "),h+="".concat(o.convert(e.value,u.unit).value)),h}toHumanDescription(){return this.toHumanRepresentation(!1)}toHumanInterface(){return this.toHumanRepresentation(!0)}toHumanRepresentation(e){var t="???",n="???";this.trigger&&(t=this.singleTriggerToHumanRepresentation(this.trigger,e)||t),this.effect&&(n=this.singleEffectToHumanRepresentation(this.effect)||n);var i=!0;if(this.effect&&this.effect.effects&&this.effect.effects.length>0)for(var r of this.effect.effects){if("SetEffect"===r.type){i=!0;break}if("PulseEffect"===r.type){i=!1;break}}var s=i?"If":"While";if(e){var o=i?"":"selected";s='<span class="triangle-select-container">\n        <select class="triangle-select rule-effect-select">\n          <option '.concat(i?"selected":"",">If</option>\n          <option ").concat(o,">While</option>\n        </select>\n      </span>")}return"".concat(s," ").concat(t,", ").concat(n)}setTrigger(e){return this.trigger=e,this.update()}setEffect(e){return this.effect=e,this.update()}valid(){return!(!this.singleTriggerToHumanRepresentation(this.trigger,!1)||!this.singleEffectToHumanRepresentation(this.effect,!1))}}},29332:(e,t,n)=>{"use strict";var i=n(44608),r=n(12890),s=n(55161),o=n(29705),a=n(25290);e.exports=class{constructor(e,t,n,s){this.elt=t,this.id=n,this.rule=new i(e,s);var l=this.rule.enabled?"checked":"",c="";this.rule.valid()||(l="",c="[".concat(a.getMessage("rule-invalid").toLocaleUpperCase(),"] "),this.elt.classList.add("invalid"));var u=a.getMessage("thing-icons-thing-src"),h=a.getMessage("thing-icons-thing-src");if(this.rule.trigger){var d=this.rule.trigger;d.triggers&&d.triggers.length>0&&(d=d.triggers[0]);var p=r.thingFromPart(e,d);p?u=r.icon(p):"TimeTrigger"===d.type&&(u="/images/thing-icons/clock.svg")}if(this.rule.effect){var f=this.rule.effect;f.effects&&f.effects.length>0&&(f=f.effects[0]);var m=r.thingFromPart(e,f);m&&(h=r.icon(m))}this.elt.innerHTML='\n      <div class="rule-edit-overlay">\n        <div class="rule-delete-button"></div>\n        <input class="rule-edit-button" type="button" value="Edit Rule"/>\n        <div class="rule-delete-dialog">\n          <p data-l10n-id="rule-delete-prompt"></p>\n          <input class="rule-delete-cancel-button" type="button"\n                 data-l10n-id="rule-delete-cancel-button" />\n          <input class="rule-delete-confirm-button" type="button"\n                 data-l10n-id="rule-delete-confirm-button" />\n        </div>\n      </div>\n      <div class="rule-preview">\n        <div class="rule-part-block trigger">\n          <img class="rule-part-icon" src="'.concat(u,'"/>\n        </div>\n        <div class="rule-part-block effect">\n          <img class="rule-part-icon" src="').concat(h,'"/>\n        </div>\n      </div>\n      <div class="rule-info">\n        <h3>').concat(c).concat(o.escapeHtml(this.rule.name),"</h3>\n        <p>").concat(o.escapeHtml(this.rule.toHumanDescription()),'</p>\n      </div>\n      <form class="rule-switch switch">\n        <input type="checkbox" id="rule-switch-').concat(o.escapeHtml(n),'"\n               class="switch-checkbox" ').concat(l,'/>\n        <label class="switch-slider" for="rule-switch-').concat(o.escapeHtml(n),'">\n        </label>\n      </form>\n    '),this.onEditButtonClick=this.onEditButtonClick.bind(this),this.onDeleteButtonClick=this.onDeleteButtonClick.bind(this),this.onDeleteCancelClick=this.onDeleteCancelClick.bind(this),this.onDeleteConfirmClick=this.onDeleteConfirmClick.bind(this),this.onEnabledCheckboxChange=this.onEnabledCheckboxChange.bind(this),this.editButton=this.elt.querySelector(".rule-edit-button"),this.editButton.addEventListener("click",this.onEditButtonClick),this.deleteButton=this.elt.querySelector(".rule-delete-button"),this.deleteButton.addEventListener("click",this.onDeleteButtonClick),this.deleteCancel=this.elt.querySelector(".rule-delete-cancel-button"),this.deleteCancel.addEventListener("click",this.onDeleteCancelClick),this.deleteConfirm=this.elt.querySelector(".rule-delete-confirm-button"),this.deleteConfirm.addEventListener("click",this.onDeleteConfirmClick),this.enabledCheckbox=this.elt.querySelector(".switch-checkbox"),this.enabledCheckbox.addEventListener("change",this.onEnabledCheckboxChange),this.editOverlay=this.elt.querySelector(".rule-edit-overlay")}onEditButtonClick(){s("/rules/".concat(encodeURIComponent(this.rule.id)))}onDeleteButtonClick(){this.editOverlay.classList.add("delete")}onDeleteCancelClick(){this.editOverlay.classList.remove("delete")}onDeleteConfirmClick(){this.rule.delete(),this.elt.parentNode.removeChild(this.elt)}onEnabledCheckboxChange(){this.enabledCheckbox.checked?this.rule.enabled=!0:this.rule.enabled=!1,this.rule.update()}}},21720:(e,t,n)=>{"use strict";var i=n(32490),r=n(29705);e.exports=class{constructor(e,t,n,s,o){this.onPresentationChange=t,this.onRuleChange=n,this.role="",this.rulePart=null,this.elt=document.createElement("div"),this.elt.classList.add("rule-part-container"),this.elt.innerHTML='<div class="rule-part-block">\n        <img class="rule-part-icon" src="'.concat(encodeURI(o),'"/>\n      </div>\n      <div class="rule-part-info">\n        <h3 class="rule-part-name">\n        ').concat(r.escapeHtml(s),"\n        </h3>\n      </div>"),this.rulePartBlock=this.elt.querySelector(".rule-part-block"),this.ruleArea=e,this.onDown=this.onDown.bind(this),this.onMove=this.onMove.bind(this),this.onUp=this.onUp.bind(this),this.ruleArea.appendChild(this.elt),this.draggable=new i(this.elt,this.onDown,this.onMove,this.onUp);var a=document.getElementById("drag-hint");this.flexDir=window.getComputedStyle(a).flexDirection}onDown(){var e=this.elt.querySelector(".open");e&&(e.classList.remove("open"),document.activeElement.blur()),this.resetState={transform:this.elt.style.transform},document.getElementById("delete-area").classList.add("delete-active"),this.elt.classList.add("dragging"),this.ruleArea.classList.add("drag-location-hint"),this.onPresentationChange()}onMove(e,t,n,i){var r=this.ruleArea.getBoundingClientRect(),s=document.getElementById("delete-area").getBoundingClientRect().height;t>window.innerHeight-s?(this.rulePartBlock.classList.remove("trigger"),this.rulePartBlock.classList.remove("effect")):"row"===this.flexDir?n<r.width/2?(this.rulePartBlock.classList.add("trigger"),this.rulePartBlock.classList.remove("effect")):(this.rulePartBlock.classList.remove("trigger"),this.rulePartBlock.classList.add("effect")):"column"===this.flexDir&&(i<r.height/2?(this.rulePartBlock.classList.add("trigger"),this.rulePartBlock.classList.remove("effect")):(this.rulePartBlock.classList.remove("trigger"),this.rulePartBlock.classList.add("effect"))),this.snapToGrid(n,i)}snapToGrid(e,t){var n=40*Math.floor((e-20)/40)+20,i=40*Math.floor((t-20)/40)+20;i<20&&(i=20),this.elt.style.transform="translate(".concat(n,"px,").concat(i,"px)")}onUp(e,t){this.elt.classList.remove("dragging");var n=document.getElementById("delete-area"),i=n.getBoundingClientRect().height;n.classList.remove("delete-active"),this.ruleArea.classList.remove("drag-location-hint"),this.rulePartBlock.classList.contains("trigger")?this.role="trigger":this.rulePartBlock.classList.contains("effect")&&(this.role="effect"),t>window.innerHeight-i&&this.remove(),this.onRuleChange()}reset(){this.elt.style.transform=this.resetState.transform,"trigger"===this.role?(this.rulePartBlock.classList.add("trigger"),this.rulePartBlock.classList.remove("effect")):"effect"===this.role?(this.rulePartBlock.classList.remove("trigger"),this.rulePartBlock.classList.add("effect")):this.remove()}setRulePart(e){this.rulePart=e,e.trigger?(this.role="trigger",this.rulePartBlock.classList.add("trigger")):e.effect&&(this.role="effect",this.rulePartBlock.classList.add("effect"))}snapToCenter(e,t){if(this.role){var n=document.getElementById("drag-hint"),i=window.getComputedStyle(n).flexDirection,r=this.ruleArea.getBoundingClientRect(),s=this.elt.getBoundingClientRect();void 0===e&&(e=0,t=1);var o=(e+1)/(t+1);if("row"===i){var a=r.height*o-s.height/2,l=r.width/4-s.width/2;"effect"===this.role&&(l=3*r.width/4-s.width/2),this.snapToGrid(l,a)}else if("column"===i){var c=r.width*o-s.width/2,u=r.height/4-s.height/2;"effect"===this.role&&(u=3*r.height/4-s.height/2),this.snapToGrid(c,u)}this.flexDir=i}}remove(){this.ruleArea.removeChild(this.elt),this.rulePart=null,this.role="removed",this.onRuleChange()}}},12890:(e,t,n)=>{"use strict";n(74916);var i=n(84816),r={icon:e=>e.selectedCapability?i.capabilityHasIcon(e.selectedCapability)||!e.iconHref?i.capabilityToIcon(e.selectedCapability):e.iconHref:e.iconHref?e.iconHref:i.defaultIcon(),byProperty:e=>t=>{if(!e)return console.warn("byProperty property undefined",(new Error).stack),!1;var n=t.properties[e.id];return n&&n.forms&&n.forms.length},byThing:e=>t=>t.href==="/things/".concat(encodeURIComponent(e)),thingFromPart:(e,t)=>{var n=null;return"EventTrigger"===t.type||"ActionEffect"===t.type?n=e.things.filter(r.byThing(t.thing))[0]:t.property&&(n=e.things.filter(r.byProperty(t.property))[0]),n},extractProperty:e=>decodeURIComponent(e.match(/properties\/([^/]+)/)[1]),extractThing:e=>decodeURIComponent(e.match(/things\/([^/]+)/)[1])};e.exports=r},60901:(e,t,n)=>{"use strict";n(83112);var i=n(21720),r=n(25290);class s extends i{constructor(e,t,n){super(e,t,n,r.getMessage("rule-time-title"),"/images/thing-icons/clock.svg");var i=this.elt.querySelector(".rule-part-info");this.timeInput=document.createElement("input"),this.timeInput.type="time";var o=new Date,a=s.leftPad(o.getHours()),l=s.leftPad(o.getMinutes());this.timeInput.value="".concat(a,":").concat(l),this.timeInput.classList.add("time-input"),this.timeInput.addEventListener("mousedown",(e=>{e.stopPropagation()})),this.timeInput.addEventListener("touchstart",(e=>{e.stopPropagation()})),this.timeInput.addEventListener("change",(()=>{this.rulePart={trigger:{type:"TimeTrigger",time:this.timeInput.value,localized:!0}},this.onRuleChange()})),i.appendChild(this.timeInput)}setRulePart(e){if(this.rulePart=e,e.trigger&&(this.role="trigger",this.rulePartBlock.classList.add("trigger"),setTimeout((()=>{this.timeInput.value=e.trigger.time}),0)),e.effect)throw new Error("TimeTriggerBlock can only be a trigger")}onUp(e,t){super.onUp(e,t),"effect"===this.role&&this.remove(),"trigger"===this.role&&(this.rulePart={trigger:{type:"TimeTrigger",time:this.timeInput.value,localized:!0}},this.onRuleChange())}static leftPad(e){return e.toString().padStart(2,"0")}}e.exports=s},95346:(e,t,n)=>{"use strict";n(74916),n(15306),n(66992),n(33948),n(41637);var i=n(28797).default,r=n(29705),s=n(55161);e.exports=class{constructor(e,t,n,i){this.thing=e,this.name=t,this.label=n.title||n.label||t,this.input=n.input,this.href=i,this.id="action-button-".concat(r.escapeHtmlForIdClass(this.name))}attach(){this.button=this.thing.element.querySelector("#".concat(this.id)),this.button.addEventListener("click",this.handleClick.bind(this))}view(){var e="";if(void 0!==this.input){var t="".concat(window.location.pathname,"/actions/").concat(encodeURIComponent(this.name).replace(/%2F/g,"%252F")),n=new URLSearchParams;n.set("referrer",encodeURIComponent(window.location.pathname)),this.inputPageRef="".concat(t,"?").concat(n.toString()),"object"==typeof this.input&&(this.input.hasOwnProperty("required")&&Array.isArray(this.input.required)&&this.input.required.length>0||"object"!==this.input.type)&&(e="disabled")}return"\n      <webthing-action ".concat(e,' id="').concat(this.id,'"\n        data-name="').concat(r.escapeHtml(this.label),'">\n      </webthing-action>')}handleClick(){void 0===this.input?i.postJson(this.href,{}).catch((e=>{console.error('Error performing action "'.concat(this.name,'": ').concat(e))})):s(this.inputPageRef)}}},84125:(e,t,n)=>{"use strict";var i=n(95346),r=n(29705);e.exports=class extends i{constructor(e,t,n,i){super(e,t,n,i),this.id="lock-action-button-".concat(r.escapeHtmlForIdClass(this.name))}view(){return'\n      <webthing-lock-action id="'.concat(this.id,'"\n        data-name="').concat(r.escapeHtml(this.label),'"\n      </webthing-lock-action>')}}},46552:(e,t,n)=>{"use strict";var i=n(95346),r=n(29705);e.exports=class extends i{constructor(e,t,n,i){super(e,t,n,i),this.id="unlock-action-button-".concat(r.escapeHtmlForIdClass(this.name))}view(){return'\n      <webthing-unlock-action id="'.concat(this.id,'"\n        data-name="').concat(r.escapeHtml(this.label),'"\n      </webthing-unlock-action>')}}},58816:(e,t,n)=>{"use strict";n(26699);var i=n(95486),r=n(37493),s=n(29705);e.exports=class extends i{constructor(e,t,n){super(e,t,n,{baseIcon:"/images/thing-icons/multi_level_sensor.svg"})}findProperties(){for(var e in this.airQualityProperty=null,this.displayedProperties){var t=this.displayedProperties[e].property["@type"];if("ConcentrationProperty"===t){this.airQualityProperty=e;break}if("DensityProperty"===t){this.airQualityProperty=e;break}}if(this.precision=0,this.unit="",this.airQualityProperty){var n=this.displayedProperties[this.airQualityProperty].convertedProperty;n.hasOwnProperty("multipleOf")&&"".concat(n.multipleOf).includes(".")&&(this.precision="".concat(n.multipleOf).split(".")[1].length),n.hasOwnProperty("unit")&&(this.unit=n.unit)}}get icon(){return this.element.querySelector("webthing-air-quality-sensor-capability")}updateProperty(e,t){t=super.updateProperty(e,t),this.displayedProperties.hasOwnProperty(e)&&e===this.airQualityProperty&&(t=parseFloat(t),this.icon.level=t)}iconView(){var e=s.escapeHtml(r.nameToAbbreviation(this.unit));return'\n      <webthing-air-quality-sensor-capability data-unit="'.concat(e,'"\n        data-precision="').concat(this.precision,'">\n      </webthing-air-quality-sensor-capability>')}}},83259:(e,t,n)=>{"use strict";var i=n(95486);e.exports=class extends i{constructor(e,t,n){super(e,t,n,{baseIcon:"/images/thing-icons/alarm.svg"})}findProperties(){for(var e in this.alarmProperty=null,this.displayedProperties)if("AlarmProperty"===this.displayedProperties[e].property["@type"]){this.alarmProperty=e;break}null===this.alarmProperty&&this.displayedProperties.alarm&&(this.alarmProperty="alarm")}get icon(){return this.element.querySelector("webthing-alarm-capability")}updateProperty(e,t){t=super.updateProperty(e,t),this.displayedProperties.hasOwnProperty(e)&&e===this.alarmProperty&&(this.icon.alarm=!!t)}iconView(){return"\n      <webthing-alarm-capability>\n      </webthing-alarm-capability>"}}},94175:(e,t,n)=>{"use strict";n(26699);var i=n(95486),r=n(37493),s=n(29705);e.exports=class extends i{constructor(e,t,n){super(e,t,n,{baseIcon:"/images/thing-icons/multi_level_sensor.svg"})}findProperties(){for(var e in this.barometricPressureProperty=null,this.displayedProperties)if("BarometricPressureProperty"===this.displayedProperties[e].property["@type"]){this.barometricPressureProperty=e;break}if(this.precision=0,this.unit="",this.barometricPressureProperty){var t=this.displayedProperties[this.barometricPressureProperty].convertedProperty;t.hasOwnProperty("multipleOf")&&"".concat(t.multipleOf).includes(".")&&(this.precision="".concat(t.multipleOf).split(".")[1].length),t.hasOwnProperty("unit")&&(this.unit=t.unit)}}get icon(){return this.element.querySelector("webthing-barometric-pressure-sensor-capability")}updateProperty(e,t){t=super.updateProperty(e,t),this.displayedProperties.hasOwnProperty(e)&&e===this.barometricPressureProperty&&(t=parseFloat(t),this.icon.level=t)}iconView(){var e=s.escapeHtml(r.nameToAbbreviation(this.unit));return'\n      <webthing-barometric-pressure-sensor-capability data-unit="'.concat(e,'"\n        data-precision="').concat(this.precision,'">\n      </webthing-barometric-pressure-sensor-capability>')}}},49543:(e,t,n)=>{"use strict";var i=n(95486);e.exports=class extends i{constructor(e,t,n){super(e,t,n,{baseIcon:"/images/thing-icons/binary_sensor.svg"})}findProperties(){for(var e in this.onProperty=null,this.displayedProperties)if("BooleanProperty"===this.displayedProperties[e].property["@type"]){this.onProperty=e;break}null===this.onProperty&&this.displayedProperties.hasOwnProperty("on")&&(this.onProperty="on")}get icon(){return this.element.querySelector("webthing-binary-sensor-capability")}updateProperty(e,t){t=super.updateProperty(e,t),this.displayedProperties.hasOwnProperty(e)&&e===this.onProperty&&(this.icon.on=!!t)}iconView(){return"\n      <webthing-binary-sensor-capability>\n      </webthing-binary-sensor-capability>"}}},42844:(e,t,n)=>{"use strict";var i=n(95486);e.exports=class extends i{constructor(e,t,n){super(e,t,n,{baseIcon:"/images/thing-icons/camera.svg"})}findProperties(){for(var e in this.imageProperty=null,this.displayedProperties)if("ImageProperty"===this.displayedProperties[e].property["@type"]){this.imageProperty=e;break}}get icon(){return this.element.querySelector("webthing-camera-capability")}iconView(){return"\n      <webthing-camera-capability>\n      </webthing-camera-capability>"}}},21310:(e,t,n)=>{"use strict";var i=n(83259),r=n(58816),s=n(94175),o=n(49543),a=n(42844),l=n(89138),c=n(73990),u=n(81044),h=n(10818),d=n(69940),p=n(40234),f=n(84014),m=n(59375),g=n(73396),v=n(13016),y=n(48687),b=n(26544),w=n(84851),E=n(7350),_=n(84060),x=n(2949),S=n(42064),T=n(95486),k=n(75990);e.exports={createThingFromCapability:function(e,t,n,C){if(e)switch(e){case"OnOffSwitch":return new b(t,n,C);case"MultiLevelSwitch":return new y(t,n,C);case"ColorControl":return new l(t,n,C);case"ColorSensor":return new c(t,n,C);case"EnergyMonitor":return new h(t,n,C);case"BinarySensor":return new o(t,n,C);case"MultiLevelSensor":return new v(t,n,C);case"SmartPlug":return new E(t,n,C);case"Light":return new f(t,n,C);case"DoorSensor":return new u(t,n,C);case"MotionSensor":return new g(t,n,C);case"LeakSensor":return new p(t,n,C);case"SmokeSensor":return new _(t,n,C);case"PushButton":return new w(t,n,C);case"VideoCamera":return new k(t,n,C);case"Camera":return new a(t,n,C);case"TemperatureSensor":return new x(t,n,C);case"HumiditySensor":return new d(t,n,C);case"Alarm":return new i(t,n,C);case"Thermostat":return new S(t,n,C);case"Lock":return new m(t,n,C);case"BarometricPressureSensor":return new s(t,n,C);case"AirQualitySensor":return new r(t,n,C)}return new T(t,n,C)},getClassFromCapability:function(e){switch(e){case"OnOffSwitch":return"on-off-switch";case"MultiLevelSwitch":return"multi-level-switch";case"ColorControl":return"color-control";case"ColorSensor":return"color-sensor";case"EnergyMonitor":return"energy-monitor";case"BinarySensor":return"binary-sensor";case"MultiLevelSensor":return"multi-level-sensor";case"SmartPlug":return"smart-plug";case"Light":return"light";case"DoorSensor":return"door-sensor";case"MotionSensor":return"motion-sensor";case"LeakSensor":return"leak-sensor";case"SmokeSensor":return"smoke-sensor";case"PushButton":return"push-button";case"VideoCamera":return"video-camera";case"Camera":return"camera";case"TemperatureSensor":return"temperature-sensor";case"HumiditySensor":return"humidity-sensor";case"Alarm":return"alarm";case"Thermostat":return"thermostat";case"Lock":return"lock";case"BarometricPressureSensor":return"barometric-pressure-sensor";case"AirQualitySensor":return"air-quality-sensor"}return""}}},89138:(e,t,n)=>{"use strict";var i=n(95486),r=n(29705);e.exports=class extends i{constructor(e,t,n){super(e,t,n,{baseIcon:"/images/thing-icons/color_control.svg"})}findProperties(){for(var e in this.colorProperty=null,this.colorTemperatureProperty=null,this.displayedProperties){var t=this.displayedProperties[e].property["@type"];null===this.colorProperty&&"ColorProperty"===t?this.colorProperty=e:null===this.colorTemperatureProperty&&"ColorTemperatureProperty"===t&&(this.colorTemperatureProperty=e)}null===this.colorProperty&&this.displayedProperties.hasOwnProperty("color")&&(this.colorProperty="color"),null===this.colorTemperatureProperty&&this.displayedProperties.hasOwnProperty("colorTemperature")&&(this.colorTemperatureProperty="colorTemperature")}get icon(){return this.element.querySelector("webthing-color-control-capability")}updateProperty(e,t){t=super.updateProperty(e,t),this.displayedProperties.hasOwnProperty(e)&&(e===this.colorProperty?this.icon.color=t:e===this.colorTemperatureProperty&&(t=parseInt(t,10),this.icon.color=r.colorTemperatureToRGB(t)))}iconView(){return"\n      <webthing-color-control-capability>\n      </webthing-color-control-capability>"}}},73990:(e,t,n)=>{"use strict";var i=n(89138);e.exports=class extends i{get icon(){return this.element.querySelector("webthing-color-sensor-capability")}iconView(){return"\n      <webthing-color-sensor-capability>\n      </webthing-color-sensor-capability>"}}},81044:(e,t,n)=>{"use strict";var i=n(95486);e.exports=class extends i{constructor(e,t,n){super(e,t,n,{baseIcon:"/images/thing-icons/door_sensor.svg"})}findProperties(){for(var e in this.openProperty=null,this.displayedProperties)if("OpenProperty"===this.displayedProperties[e].property["@type"]){this.openProperty=e;break}null===this.openProperty&&this.displayedProperties.open&&(this.openProperty="open")}get icon(){return this.element.querySelector("webthing-door-sensor-capability")}updateProperty(e,t){t=super.updateProperty(e,t),this.displayedProperties.hasOwnProperty(e)&&e===this.openProperty&&(this.icon.open=!!t)}iconView(){return"\n      <webthing-door-sensor-capability>\n      </webthing-door-sensor-capability>"}}},10818:(e,t,n)=>{"use strict";n(26699);var i=n(95486),r=n(37493),s=n(29705);e.exports=class extends i{constructor(e,t,n){super(e,t,n,{baseIcon:"/images/thing-icons/energy_monitor.svg"})}findProperties(){for(var e in this.powerProperty=null,this.displayedProperties)if("InstantaneousPowerProperty"===this.displayedProperties[e].property["@type"]){this.powerProperty=e;break}if(null===this.powerProperty&&this.displayedProperties.hasOwnProperty("instantaneousPower")&&(this.powerProperty="instantaneousPower"),this.precision=0,this.unit="watt",this.powerProperty){var t=this.displayedProperties[this.powerProperty].convertedProperty;t.hasOwnProperty("multipleOf")&&"".concat(t.multipleOf).includes(".")&&(this.precision="".concat(t.multipleOf).split(".")[1].length),t.hasOwnProperty("unit")&&(this.unit=t.unit)}}get icon(){return this.element.querySelector("webthing-energy-monitor-capability")}updateProperty(e,t){t=super.updateProperty(e,t),this.displayedProperties.hasOwnProperty(e)&&e===this.powerProperty&&(t=parseFloat(t),this.icon.power=t)}iconView(){var e=s.escapeHtml(r.nameToAbbreviation(this.unit));return'\n      <webthing-energy-monitor-capability data-unit="'.concat(e,'"\n        data-precision="').concat(this.precision,'">\n      </webthing-energy-monitor-capability>')}}},69940:(e,t,n)=>{"use strict";n(26699);var i=n(95486),r=n(37493),s=n(29705);e.exports=class extends i{constructor(e,t,n){super(e,t,n,{baseIcon:"/images/thing-icons/multi_level_sensor.svg"})}findProperties(){for(var e in this.humidityProperty=null,this.displayedProperties)if("HumidityProperty"===this.displayedProperties[e].property["@type"]){this.humidityProperty=e;break}if(this.precision=0,this.unit="",this.humidityProperty){var t=this.displayedProperties[this.humidityProperty].convertedProperty;t.hasOwnProperty("multipleOf")&&"".concat(t.multipleOf).includes(".")&&(this.precision="".concat(t.multipleOf).split(".")[1].length),t.hasOwnProperty("unit")&&(this.unit=t.unit)}}get icon(){return this.element.querySelector("webthing-humidity-sensor-capability")}updateProperty(e,t){t=super.updateProperty(e,t),this.displayedProperties.hasOwnProperty(e)&&e===this.humidityProperty&&(t=parseFloat(t),this.icon.level=t)}iconView(){var e=s.escapeHtml(r.nameToAbbreviation(this.unit));return'\n      <webthing-humidity-sensor-capability data-unit="'.concat(e,'"\n        data-precision="').concat(this.precision,'">\n      </webthing-humidity-sensor-capability>')}}},40234:(e,t,n)=>{"use strict";var i=n(95486);e.exports=class extends i{constructor(e,t,n){super(e,t,n,{baseIcon:"/images/thing-icons/leak_sensor.svg"})}findProperties(){for(var e in this.leakProperty=null,this.displayedProperties)if("LeakProperty"===this.displayedProperties[e].property["@type"]){this.leakProperty=e;break}}get icon(){return this.element.querySelector("webthing-leak-sensor-capability")}updateProperty(e,t){t=super.updateProperty(e,t),this.displayedProperties.hasOwnProperty(e)&&e===this.leakProperty&&(this.icon.leak=!!t)}iconView(){return"\n      <webthing-leak-sensor-capability>\n      </webthing-leak-sensor-capability>"}}},84014:(e,t,n)=>{"use strict";var i=n(26544);e.exports=class extends i{constructor(e,t,n){super(e,t,n,{baseIcon:"/images/thing-icons/light.svg"})}findProperties(){for(var e in super.findProperties(),this.brightnessProperty=null,this.colorProperty=null,this.colorTemperatureProperty=null,this.colorModeProperty=null,this.displayedProperties){var t=this.displayedProperties[e].property["@type"];null===this.brightnessProperty&&"BrightnessProperty"===t?this.brightnessProperty=e:null===this.colorProperty&&"ColorProperty"===t?this.colorProperty=e:null===this.colorTemperatureProperty&&"ColorTemperatureProperty"===t?this.colorTemperatureProperty=e:null===this.colorModeProperty&&"ColorModeProperty"===t&&(this.colorModeProperty=e)}null===this.brightnessProperty&&this.displayedProperties.hasOwnProperty("level")&&(this.brightnessProperty="level"),null===this.colorProperty&&this.displayedProperties.hasOwnProperty("color")&&(this.colorProperty="color"),null===this.colorTemperatureProperty&&this.displayedProperties.hasOwnProperty("colorTemperature")&&(this.colorTemperatureProperty="colorTemperature"),null===this.colorModeProperty&&this.displayedProperties.hasOwnProperty("colorMode")&&(this.colorModeProperty="colorMode")}get icon(){return this.element.querySelector("webthing-light-capability")}updateProperty(e,t){t=super.updateProperty(e,t),this.displayedProperties.hasOwnProperty(e)&&(e===this.brightnessProperty?(t=parseInt(t,10),this.icon.brightness=t):e===this.colorProperty?this.icon.color=t:e===this.colorTemperatureProperty?(t=parseInt(t,10),this.icon.colorTemperature=t):e===this.colorModeProperty&&(this.icon.colorMode=t))}iconView(){var e="";null!==this.colorProperty&&(e+=' data-have-color="true"'),null!==this.colorTemperatureProperty&&(e+=' data-have-color-temperature="true"'),null!==this.colorModeProperty&&(e+=' data-have-color-mode="true"');var t="";return null!==this.brightnessProperty&&(t='data-have-brightness="true"'),"\n      <webthing-light-capability ".concat(e," ").concat(t,">\n      </webthing-light-capability>")}}},59375:(e,t,n)=>{"use strict";var i=n(95486);e.exports=class extends i{constructor(e,t,n){super(e,t,n,{baseIcon:"/images/thing-icons/lock.svg"})}findProperties(){for(var e in this.onProperty=null,this.displayedProperties)if("LockedProperty"===this.displayedProperties[e].property["@type"]){this.lockedProperty=e;break}null===this.lockedProperty&&this.displayedProperties.hasOwnProperty("locked")&&(this.lockedProperty="locked")}get icon(){return this.element.querySelector("webthing-lock-capability")}updateProperty(e,t){t=super.updateProperty(e,t),this.displayedProperties.hasOwnProperty(e)&&e===this.lockedProperty&&(this.icon.state=t)}iconView(){return"\n      <webthing-lock-capability>\n      </webthing-lock-capability>"}}},73396:(e,t,n)=>{"use strict";var i=n(95486);e.exports=class extends i{constructor(e,t,n){super(e,t,n,{baseIcon:"/images/thing-icons/motion_sensor.svg"})}findProperties(){for(var e in this.motionProperty=null,this.displayedProperties)if("MotionProperty"===this.displayedProperties[e].property["@type"]){this.motionProperty=e;break}null===this.motionProperty&&this.displayedProperties.motion&&(this.motionProperty="motion")}get icon(){return this.element.querySelector("webthing-motion-sensor-capability")}updateProperty(e,t){t=super.updateProperty(e,t),this.displayedProperties.hasOwnProperty(e)&&e===this.motionProperty&&(this.icon.motion=!!t)}iconView(){return"\n      <webthing-motion-sensor-capability>\n      </webthing-motion-sensor-capability>"}}},13016:(e,t,n)=>{"use strict";n(26699);var i=n(95486),r=n(37493),s=n(29705);e.exports=class extends i{constructor(e,t,n){super(e,t,n,{baseIcon:"/images/thing-icons/multi_level_sensor.svg"})}findProperties(){for(var e in this.levelProperty=null,this.displayedProperties)if("LevelProperty"===this.displayedProperties[e].property["@type"]){this.levelProperty=e;break}if(null===this.levelProperty&&this.displayedProperties.hasOwnProperty("level")&&(this.levelProperty="level"),this.precision=0,this.unit="",this.levelProperty){var t=this.displayedProperties[this.levelProperty].convertedProperty;t.hasOwnProperty("multipleOf")&&"".concat(t.multipleOf).includes(".")&&(this.precision="".concat(t.multipleOf).split(".")[1].length),t.hasOwnProperty("unit")&&(this.unit=t.unit)}}get icon(){return this.element.querySelector("webthing-multi-level-sensor-capability")}updateProperty(e,t){t=super.updateProperty(e,t),this.displayedProperties.hasOwnProperty(e)&&e===this.levelProperty&&(t=parseFloat(t),this.icon.level=t)}iconView(){var e=s.escapeHtml(r.nameToAbbreviation(this.unit));return'\n      <webthing-multi-level-sensor-capability data-unit="'.concat(e,'"\n        data-precision="').concat(this.precision,'">\n      </webthing-multi-level-sensor-capability>')}}},48687:(e,t,n)=>{"use strict";n(26699);var i=n(26544),r=n(37493),s=n(29705);e.exports=class extends i{constructor(e,t,n){super(e,t,n,{baseIcon:"/images/thing-icons/multi_level_switch.svg"})}findProperties(){for(var e in super.findProperties(),this.levelProperty=null,this.displayedProperties)if("LevelProperty"===this.displayedProperties[e].property["@type"]){this.levelProperty=e;break}if(null===this.levelProperty&&this.displayedProperties.hasOwnProperty("level")&&(this.levelProperty="level"),this.precision=0,this.unit="",this.minimum=0,this.maximum=100,this.levelProperty){var t=this.displayedProperties[this.levelProperty].convertedProperty;t.hasOwnProperty("multipleOf")&&"".concat(t.multipleOf).includes(".")&&(this.precision="".concat(t.multipleOf).split(".")[1].length),t.hasOwnProperty("unit")&&(this.unit=t.unit),t.hasOwnProperty("minimum")&&(this.minimum=t.minimum),t.hasOwnProperty("maximum")&&(this.maximum=t.maximum)}}get icon(){return this.element.querySelector("webthing-multi-level-switch-capability")}updateProperty(e,t){t=super.updateProperty(e,t),this.displayedProperties.hasOwnProperty(e)&&e===this.levelProperty&&(t=parseFloat(t),this.icon.level=t)}handleClick(){this.onProperty&&super.handleClick()}iconView(){var e=s.escapeHtml(r.nameToAbbreviation(this.unit));return'\n      <webthing-multi-level-switch-capability data-unit="'.concat(e,'"\n        data-precision="').concat(this.precision,'" min="').concat(this.minimum,'"\n        max="').concat(this.maximum,'">\n      </webthing-multi-level-switch-capability>')}}},26544:(e,t,n)=>{"use strict";var i=n(25425),r=n(95486);e.exports=class extends r{constructor(e,t,n,r){super(e,t,n,r=r||{baseIcon:"/images/thing-icons/on_off_switch.svg"}),this.format!==i.ThingFormat.LINK_ICON&&this.icon.addEventListener("click",this.handleClick.bind(this))}findProperties(){for(var e in this.onProperty=null,this.displayedProperties)if("OnOffProperty"===this.displayedProperties[e].property["@type"]){this.onProperty=e;break}null===this.onProperty&&this.displayedProperties.hasOwnProperty("on")&&(this.onProperty="on")}get icon(){return this.element.querySelector("webthing-on-off-switch-capability")}updateProperty(e,t){if(t=super.updateProperty(e,t),this.displayedProperties.hasOwnProperty(e))return e===this.onProperty&&(this.icon.on=!!t),t}handleClick(){var e=!this.icon.on;this.icon.on=null,this.model.setProperty(this.onProperty,e).catch((e=>{console.error("Error trying to toggle switch: ".concat(e))}))}iconView(){return"\n      <webthing-on-off-switch-capability>\n      </webthing-on-off-switch-capability>"}}},84851:(e,t,n)=>{"use strict";var i=n(95486);e.exports=class extends i{constructor(e,t,n){if(super(e,t,n,{baseIcon:"/images/thing-icons/push_button.svg"}),this.pressedEventName=null,this.doublePressedEventName=null,this.longPressedEventName=null,t.events)for(var i in t.events)switch(t.events[i]["@type"]){case"PressedEvent":null===this.pressedEventName&&(this.pressedEventName=i);break;case"DoublePressedEvent":null===this.doublePressedEventName&&(this.doublePressedEventName=i);break;case"LongPressedEvent":null===this.longPressedEventName&&(this.longPressedEventName=i)}this.pushedProperty||(this.icon.pushed=!1)}findProperties(){for(var e in this.pushedProperty=null,this.displayedProperties)if("PushedProperty"===this.displayedProperties[e].property["@type"]){this.pushedProperty=e;break}}get icon(){return this.element.querySelector("webthing-push-button-capability")}updateProperty(e,t){t=super.updateProperty(e,t),this.displayedProperties.hasOwnProperty(e)&&e===this.pushedProperty&&(this.icon.pushed=!!t)}onEvent(e){if(super.onEvent(e),!this.pushedProperty)for(var t in e)t===this.pressedEventName?this.icon.dispatchEvent(new CustomEvent("press",{detail:"single"})):t===this.doublePressedEventName?this.icon.dispatchEvent(new CustomEvent("press",{detail:"double"})):t===this.longPressedEventName&&this.icon.dispatchEvent(new CustomEvent("press",{detail:"long"}))}iconView(){return"\n      <webthing-push-button-capability>\n      </webthing-push-button-capability>"}}},7350:(e,t,n)=>{"use strict";n(26699);var i=n(26544),r=n(37493),s=n(29705);e.exports=class extends i{constructor(e,t,n){super(e,t,n,{baseIcon:"/images/thing-icons/smart_plug.svg"})}findProperties(){for(var e in super.findProperties(),this.powerProperty=null,this.displayedProperties)if("InstantaneousPowerProperty"===this.displayedProperties[e].property["@type"]){this.powerProperty=e;break}if(null===this.powerProperty&&this.displayedProperties.hasOwnProperty("instantaneousPower")&&(this.powerProperty="instantaneousPower"),this.precision=0,this.unit="watt",this.powerProperty){var t=this.displayedProperties[this.powerProperty].convertedProperty;t.hasOwnProperty("multipleOf")&&"".concat(t.multipleOf).includes(".")&&(this.precision="".concat(t.multipleOf).split(".")[1].length),t.hasOwnProperty("unit")&&(this.unit=t.unit)}}get icon(){return this.element.querySelector("webthing-smart-plug-capability")}updateProperty(e,t){t=super.updateProperty(e,t),this.displayedProperties.hasOwnProperty(e)&&e===this.powerProperty&&(t=parseFloat(t),this.icon.power=t)}iconView(){var e=s.escapeHtml(r.nameToAbbreviation(this.unit)),t="";return null!==this.powerProperty&&(t='data-have-power="true"',t+=' data-precision="'.concat(this.precision,'"'),t+=' data-unit="'.concat(e,'"')),"\n      <webthing-smart-plug-capability ".concat(t,">\n      </webthing-smart-plug-capability>")}}},84060:(e,t,n)=>{"use strict";var i=n(95486);e.exports=class extends i{constructor(e,t,n){super(e,t,n,{baseIcon:"/images/thing-icons/smoke_sensor.svg"})}findProperties(){for(var e in this.smokeProperty=null,this.displayedProperties)if("SmokeProperty"===this.displayedProperties[e].property["@type"]){this.smokeProperty=e;break}}get icon(){return this.element.querySelector("webthing-smoke-sensor-capability")}updateProperty(e,t){t=super.updateProperty(e,t),this.displayedProperties.hasOwnProperty(e)&&e===this.smokeProperty&&(this.icon.smoke=!!t)}iconView(){return"\n      <webthing-smoke-sensor-capability>\n      </webthing-smoke-sensor-capability>"}}},2949:(e,t,n)=>{"use strict";n(26699);var i=n(95486),r=n(37493),s=n(29705);e.exports=class extends i{constructor(e,t,n){super(e,t,n,{baseIcon:"/images/thing-icons/temperature_sensor.svg"})}findProperties(){for(var e in this.temperatureProperty=null,this.displayedProperties)if("TemperatureProperty"===this.displayedProperties[e].property["@type"]){this.temperatureProperty=e;break}if(null===this.temperatureProperty&&this.displayedProperties.hasOwnProperty("temperature")&&(this.temperatureProperty="temperature"),this.precision=0,this.unit="degree celsius",this.temperatureProperty){var t=this.displayedProperties[this.temperatureProperty].convertedProperty;t.hasOwnProperty("multipleOf")&&"".concat(t.multipleOf).includes(".")&&(this.precision="".concat(t.multipleOf).split(".")[1].length),t.hasOwnProperty("unit")&&(this.unit=t.unit)}else this.precision=0}get icon(){return this.element.querySelector("webthing-temperature-sensor-capability")}updateProperty(e,t){t=super.updateProperty(e,t),this.displayedProperties.hasOwnProperty(e)&&e===this.temperatureProperty&&(t=parseFloat(t),this.icon.temperature=t)}iconView(){var e=s.escapeHtml(r.nameToAbbreviation(this.unit));return'\n      <webthing-temperature-sensor-capability data-unit="'.concat(e,'"\n        data-precision="').concat(this.precision,'">\n      </webthing-temperature-sensor-capability>')}}},42064:(e,t,n)=>{"use strict";n(26699);var i=n(95486),r=n(37493),s=n(29705);e.exports=class extends i{constructor(e,t,n){super(e,t,n,{baseIcon:"/images/thing-icons/thermostat.svg"})}findProperties(){for(var e in this.temperatureProperty=null,this.heatingCoolingProperty=null,this.displayedProperties){var t=this.displayedProperties[e].property["@type"];"TemperatureProperty"===t?this.temperatureProperty=e:"HeatingCoolingProperty"===t&&(this.heatingCoolingProperty=e)}if(null===this.temperatureProperty&&this.displayedProperties.hasOwnProperty("temperature")&&(this.temperatureProperty="temperature"),null===this.heatingCoolingProperty&&this.displayedProperties.hasOwnProperty("heatingCooling")&&(this.heatingCoolingProperty="heatingCooling"),this.precision=0,this.unit="degree celsius",this.temperatureProperty){var n=this.displayedProperties[this.temperatureProperty].convertedProperty;n.hasOwnProperty("multipleOf")&&"".concat(n.multipleOf).includes(".")&&(this.precision="".concat(n.multipleOf).split(".")[1].length),n.hasOwnProperty("unit")&&(this.unit=n.unit)}else this.precision=0}get icon(){return this.element.querySelector("webthing-thermostat-capability")}updateProperty(e,t){t=super.updateProperty(e,t),this.displayedProperties.hasOwnProperty(e)&&(e===this.temperatureProperty?(t=parseFloat(t),this.icon.temperature=t):e===this.heatingCoolingProperty&&(this.icon.state=t))}iconView(){var e=s.escapeHtml(r.nameToAbbreviation(this.unit));return'\n      <webthing-thermostat-capability data-unit="'.concat(e,'"\n        data-precision="').concat(this.precision,'">\n      </webthing-thermostat-capability>')}}},14504:e=>{"use strict";e.exports=class{constructor(e,t){this.elements=t,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.classList.add("thing-detail-layout-links");var n=document.getElementById("things");n.insertBefore(this.svg,n.firstChild),this.doLayout=this.doLayout.bind(this),this.doLayout(),e.registerEventListener(window,"resize",this.doLayout)}adjustXY(e,t){var n=0,i=0;if(e<Math.PI/2)n=Math.cos(e)*t,i=Math.sin(e)*t;else if(e<Math.PI){var r=Math.PI-e;n=-Math.cos(r)*t,i=Math.sin(r)*t}else if(e<3*Math.PI/2){var s=3*Math.PI/2-e;n=-Math.sin(s)*t,i=-Math.cos(s)*t}else{var o=2*Math.PI-e;n=Math.cos(o)*t,i=-Math.sin(o)*t}return{x:n,y:i}}doLayout(){var e=300,t=300,n=window.innerWidth/2-70;n<e&&(e=Math.max(120,n));var i=(window.innerHeight-96)/2-70;i<t&&(t=Math.max(135,i)),this.svg.setAttribute("width",2*e),this.svg.setAttribute("height",2*t),this.svg.innerHTML="";for(var r=0;r<this.elements.length;r++){var s=r/this.elements.length*2*Math.PI+0,o=e*Math.cos(s),a=t*Math.sin(s),l=Math.atan2(a,o);l<0&&(l+=2*Math.PI);var c=this.adjustXY(l,64),u=this.adjustXY((l+Math.PI)%(2*Math.PI),51);this.elements[r].style.transform="translate(".concat(o,"px, ").concat(a,"px)");var h=document.createElementNS("http://www.w3.org/2000/svg","line");h.classList.add("thing-detail-layout-link"),h.setAttribute("x1",e+c.x),h.setAttribute("y1",t+c.y),h.setAttribute("x2",o+e+u.x),h.setAttribute("y2",a+t+u.y),this.svg.appendChild(h)}}}},95486:(e,t,n)=>{"use strict";n(66992),n(33948),n(60285),n(41637),n(74916),n(15306),n(26699),n(2707),n(26833),n(73210),n(54747);var i=n(95346),r=n(8602),s=n(28797).default,o=n(96710),a=n(61626),l=n(36626),c=n(54489),u=n(82546),h=n(94258),d=n(25425),p=n(88713),f=n(50363),m=n(54462),g=n(25290),v=n(11153),y=n(15188),b=n(17075),w=n(82542),E=n(70917),_=n(58255),x=n(84125),S=n(44439),T=n(25179),k=n(82329),C=n(66870),P=n(51822),I=n(77265),L=n(66048),A=n(29585),M=n(5965),O=n(89879),N=n(8717),D=n(14504),R=n(46552),j=n(37493),B=n(29705),U=n(66891),$=n(38144);e.exports=class{constructor(e,t,n,D){var F,H=this,q=D||{},V={on:C,level:_,instantaneousPower:b,voltage:$,current:p,frequency:m,brightness:l,color:c,colorTemperature:h};if(this.title=t.title,this.model=e,this.listeners=[],this.connected=this.model.connected,Array.isArray(t["@type"])&&t["@type"].length>0?this["@type"]=t["@type"]:this["@type"]=[],this.selectedCapability=t.selectedCapability,this.floorplanVisibility="floorplanVisibility"in t!=0,this.layoutIndex=t.layoutIndex,this.iconHref=t.iconHref||"",this.baseIcon=q.baseIcon||g.getMessage("thing-icons-thing-src"),this.format=n,this.displayedProperties=this.displayedProperties||{},this.displayedActions=this.displayedActions||{},n===d.ThingFormat.LINK_ICON?(this.container=document.getElementById("floorplan"),this.x=t.floorplanX,this.y=t.floorplanY):this.model.group_id?this.container=document.querySelector("#group-".concat(this.model.group_id)):this.container=document.getElementById("things"),this.uiHref=null,t.links)for(var z of t.links)if("alternate"===z.rel&&"text/html"===z.type){z.href.startsWith("/proxy/")?this.uiHref="".concat(z.href,"?jwt=").concat(s.jwt):(z.href.startsWith("http://")||z.href.startsWith("https://")||z.href.startsWith("/extensions/"))&&(this.uiHref=z.href);break}if(this.base=null!==(F=t.base)&&void 0!==F?F:o.ORIGIN,t.href){this.href=new URL(t.href,o.ORIGIN);var G=new URLSearchParams;G.set("referrer",encodeURIComponent(this.href.pathname.replace(/%2F/g,"%252F"))),this.eventsHref="".concat(this.href.pathname.replace(/%2F/g,"%252F"),"/events?").concat(G.toString()),this.id=decodeURIComponent(this.href.pathname.split("/").pop())}if(t.properties){var K=function(e){var n=t.properties[e],i=JSON.parse(JSON.stringify(n));if(n.unit){var s=j.convert(0,n.unit).unit;s!==n.unit&&(i.unit=s,n.hasOwnProperty("minimum")&&(i.minimum=j.convert(n.minimum,n.unit).value),n.hasOwnProperty("maximum")&&(i.maximum=j.convert(n.maximum,n.unit).value),n.hasOwnProperty("enum")&&(i.enum=n.enum.map((e=>j.convert(e,n.unit).value))),n.hasOwnProperty("multipleOf")&&delete i.multipleOf)}var o=B.selectFormHref(n.forms,d.WoTOperation.READ_PROPERTY,H.base);if(!o)return"continue";var g=void 0;switch(n["@type"]){case"BooleanProperty":g=new a(H,e,i);break;case"OnOffProperty":g=new C(H,e,i);break;case"LevelProperty":g=new _(H,e,i);break;case"BrightnessProperty":g=new l(H,e,i);break;case"ColorProperty":g=new c(H,e,i);break;case"ColorModeProperty":g=new u(H,e,i);break;case"ColorTemperatureProperty":g=new h(H,e,i);break;case"InstantaneousPowerProperty":g=new b(H,e,i);break;case"InstantaneousPowerFactorProperty":g=new w(H,e,i);break;case"CurrentProperty":g=new p(H,e,i);break;case"VoltageProperty":g=new $(H,e,i);break;case"FrequencyProperty":g=new m(H,e,i);break;case"MotionProperty":g=new T(H,e,i);break;case"OpenProperty":g=new P(H,e,i);break;case"LeakProperty":g=new E(H,e,i);break;case"SmokeProperty":g=new L(H,e,i);break;case"PushedProperty":g=new I(H,e,i);break;case"ImageProperty":g=new y(H,e,i);break;case"VideoProperty":g=new U(H,e,i);break;case"TemperatureProperty":g=new O(H,e,i);break;case"AlarmProperty":g=new r(H,e,i);break;case"TargetTemperatureProperty":g=new M(H,e,i);break;case"ThermostatModeProperty":g=new N(H,e,i);break;case"HeatingCoolingProperty":g=new v(H,e,i);break;case"LockedProperty":g=new S(H,e,i);break;default:if(V.hasOwnProperty(e)){var x=V[e];"level"===e&&H["@type"].includes("Light")&&(x=V.brightness),g=new x(H,e,i)}else if(n.enum)g=new f(H,e,i);else switch(n.type){case"string":g=new A(H,e,i);break;case"integer":case"number":g=new k(H,e,i);break;case"boolean":g=new a(H,e,i);break;default:return console.warn("Unable to build property detail for:",n),"continue"}}H.displayedProperties[e]={href:o,detail:g,property:n,convertedProperty:i}};for(var W in t.properties)K(W)}if(n===d.ThingFormat.EXPANDED){if(t.actions)for(var X in t.actions){var J=t.actions[X],Y=B.selectFormHref(J.forms,d.WoTOperation.INVOKE_ACTION,this.base);if(Y){var Q=void 0;switch(J["@type"]){case"LockAction":Q=new x(this,X,J,Y);break;case"UnlockAction":Q=new R(this,X,J,Y);break;default:Q=new i(this,X,J,Y)}this.displayedActions[X]={detail:Q}}}var Z=[];t.events?(this.displayEvents=!0,Z.push({href:this.eventsHref,name:g.getMessage("event-log"),icon:"/images/rules-icon.png"})):this.displayEvents=!1,Z.push({listener:this.handleEdit.bind(this),name:g.getMessage("edit"),icon:"/images/edit-plain.svg"},{listener:this.handleRemove.bind(this),name:g.getMessage("remove"),icon:"/images/remove.svg"}),o.buildOverflowMenu(Z),document.getElementById("things-view").classList.contains("hidden")||o.showOverflowButton()}else o.hideOverflowButton();this.findProperties(),this.element=this.render(n),n===d.ThingFormat.EXPANDED&&(this.attachExpandedView(),this.connected||o.showPersistentMessage(g.getMessage("disconnected"))),this.onPropertyStatus=this.onPropertyStatus.bind(this),this.onEvent=this.onEvent.bind(this),this.onConnected=this.onConnected.bind(this),this.updateStatus()}findProperties(){}attachExpandedView(){var e=Array.from(Object.values(this.displayedProperties)).sort(((e,t)=>e.detail.label.localeCompare(t.detail.label)));for(var t of e)t.hasOwnProperty("attached")&&t.attached||!t.hasOwnProperty("detail")||(t.detail.attach(),t.attached=!0);var n=Array.from(Object.values(this.displayedActions)).sort(((e,t)=>e.detail.label.localeCompare(t.detail.label)));for(var i of n)i.hasOwnProperty("attached")&&i.attached||!i.hasOwnProperty("detail")||(i.detail.attach(),i.attached=!0);this.layout=new D(this,this.element.querySelectorAll(".thing-detail-container"))}iconView(){var e='data-icon-href="'.concat(this.iconHref,'"')||0;return"\n      <webthing-custom-capability ".concat(e,">\n      </webthing-custom-capability>")}detailLink(){return'<a href="'.concat(this.href.pathname.replace(/%2F/g,"%252F"),'"\n      class="thing-details-link" data-l10n-id="thing-details"></a>')}uiLink(){return this.uiHref.startsWith("/extensions/")?'<a href="'.concat(this.uiHref,'" class="thing-ui-link"></a>'):'<a href="'.concat(this.uiHref,'" class="thing-ui-link"\n              target="_blank" rel="noopener"></a>')}interactiveView(){var e="thing-".concat(B.escapeHtml(this.id));return'<div class="thing" draggable="true" id="'.concat(e,'"\n      data-layout-index="').concat(this.layoutIndex,'">\n      ').concat(this.uiHref?this.uiLink():"","\n      ").concat(this.detailLink(),"\n      ").concat(this.iconView(),'\n      <span class="thing-title">').concat(B.escapeHtml(this.title),"</span>\n    </div>")}expandedView(){var e="";for(var t of Object.values(this.displayedProperties))t.hasOwnProperty("detail")&&(e+='<div class="thing-detail-container">'.concat(t.detail.view(),"</div>"));for(var n of Object.values(this.displayedActions))n.hasOwnProperty("detail")&&(e+='<div class="thing-detail-container">'.concat(n.detail.view(),"</div>"));return'<div class="thing">\n      '.concat(this.iconView(),"\n      ").concat(e,"\n    </div>")}updateProperty(e,t){return this.displayedProperties.hasOwnProperty(e)&&(t=j.convert(t,this.displayedProperties[e].property.unit,this.displayedProperties[e].convertedProperty.unit).value,this.format===d.ThingFormat.EXPANDED&&this.displayedProperties[e].detail.update(t)),t}setProperty(e,t){t=j.convert(t,this.displayedProperties[e].convertedProperty.unit,this.displayedProperties[e].property.unit).value;var n=this.displayedProperties[e].property;t=B.adjustInputValue(t,n),this.model.setProperty(e,t)}updateStatus(){this.model.subscribe(d.PROPERTY_STATUS,this.onPropertyStatus),this.model.subscribe(d.EVENT_OCCURRED,this.onEvent),this.model.subscribe(d.CONNECTED,this.onConnected)}registerEventListener(e,t,n){e.addEventListener(t,n),this.listeners.push({element:e,event:t,handler:n})}cleanup(){for(var e;void 0!==(e=this.listeners.pop());)e.element.removeEventListener(e.event,e.handler);this.model.unsubscribe(d.PROPERTY_STATUS,this.onPropertyStatus),this.model.unsubscribe(d.EVENT_OCCURRED,this.onEvent),this.model.unsubscribe(d.CONNECTED,this.onConnected)}linkIconView(){return'<div\n        class="floorplan-thing"\n        data-x="'.concat(this.x,'"\n        data-y="').concat(this.y,'"\n        data-href="').concat(this.href.pathname.replace(/%2F/g,"%252F"),'"\n        >\n      ').concat(this.iconView(),'\n      <div class="floorplan-thing-title">').concat(B.escapeHtml(this.title),"</div>\n    </div>")}render(e){var t=document.createElement("div");if(e==d.ThingFormat.LINK_ICON)return t.innerHTML=this.linkIconView().trim(),this.container.appendChild(t.firstChild);if(e==d.ThingFormat.EXPANDED)return t.innerHTML=this.expandedView().trim(),document.getElementById("things").appendChild(t.firstChild);for(var n of(t.innerHTML=this.interactiveView().trim(),t.firstChild.ondragstart=this.handleDragStart.bind(this),t.firstChild.ondragover=this.handleDragOver.bind(this),t.firstChild.ondragenter=this.handleDragEnter.bind(this),t.firstChild.ondragleave=this.handleDragLeave.bind(this),t.firstChild.ondragend=this.handleDragEnd.bind(this),t.firstChild.ondrop=this.handleDrop.bind(this),this.container||(this.container=document.getElementById("things")),this.container.childNodes.values()))if(n.dataset.layoutIndex>this.layoutIndex)return this.container.insertBefore(t.firstChild,n);return this.container.appendChild(t.firstChild)}handleDragStart(e){e.target.style.cursor="grabbing",e.dataTransfer.setData("text",this.element.id),e.dataTransfer.items.add("","application/thing"),e.dataTransfer.effectAllowed="move",e.dataTransfer.dropEffect="move","vibrate"in navigator&&navigator.vibrate(50)}handleDragOver(e){e.preventDefault(),Array.from(e.dataTransfer.types).includes("application/thing")&&(this.container.childNodes.forEach((e=>{e.classList.remove("drag-start","drag-end")})),e.dataTransfer.dropEffect="move",e.clientX-this.element.getBoundingClientRect().x<this.element.getBoundingClientRect().width/2?this.element.classList.add("drag-start"):this.element.classList.add("drag-end"))}handleDragEnter(e){e.preventDefault()}handleDragLeave(e){e.preventDefault(),this.element.classList.remove("drag-start","drag-end")}handleDrop(e){if(e.preventDefault(),Array.from(e.dataTransfer.types).includes("application/thing")){e.stopPropagation();var t=document.getElementById(e.dataTransfer.getData("text"));if(t){var n=e.clientX,i=this.element.getBoundingClientRect().x,r=this.element.getBoundingClientRect().width,a=parseInt(this.element.getAttribute("data-layout-index"));if(t.parentNode===this.element.parentNode&&parseInt(t.getAttribute("data-layout-index"))<a&&(a-=1),t.parentNode.removeChild(t),n-i<r/2)this.container.insertBefore(t,this.element);else{var l=this.element.nextSibling;l?this.container.insertBefore(t,l):this.container.appendChild(t),a+=1}var c=B.unescapeHtml(t.id).replace(/^thing-/,"");s.setThingGroupAndLayoutIndex(c,this.model.group_id,a).then((()=>{o.gatewayModel.refreshThings()})).catch((e=>{console.error("Error trying to change group of thing ".concat(c,": ").concat(e))}))}}}handleDragEnd(){var e;(e=this.format===d.ThingFormat.LINK_ICON?document.getElementById("floorplan"):document.getElementById("things-container")).querySelectorAll(".drag-start, .drag-end, .drag-target").forEach((e=>{e.classList.remove("drag-start","drag-end","drag-target")})),e.querySelectorAll(".thing").forEach((e=>{e.style.cursor="grab"}))}handleEdit(){var e=new CustomEvent("_contextmenu",{detail:{thingId:this.id,thingTitle:this.title,floorplanVisibility:this.floorplanVisibility,thingIcon:this.baseIcon,action:"edit",capabilities:this["@type"],selectedCapability:this.selectedCapability,iconHref:this.iconHref}});window.dispatchEvent(e)}handleRemove(){var e=new CustomEvent("_contextmenu",{detail:{thingId:this.id,thingTitle:this.title,thingIcon:this.baseIcon,action:"remove"}});window.dispatchEvent(e)}onPropertyStatus(e){for(var t in e)if(this.displayedProperties.hasOwnProperty(t)){var n=e[t];null!=n&&this.updateProperty(t,n)}}onEvent(e){if(this.displayEvents)for(var t in e)o.showMessage('<a href="'.concat(this.eventsHref,'">').concat(B.escapeHtml(t),"</a>"),3e3)}onConnected(e){this.connected=e,this.format===d.ThingFormat.EXPANDED&&(e?(this.layout.svg.classList.add("connected"),o.hidePersistentMessage()):(this.layout.svg.classList.remove("connected"),o.showPersistentMessage(g.getMessage("disconnected")))),e?this.element.classList.add("connected"):this.element.classList.remove("connected")}}},75990:(e,t,n)=>{"use strict";var i=n(95486);e.exports=class extends i{constructor(e,t,n){super(e,t,n,{baseIcon:"/images/thing-icons/video_camera.svg"})}findProperties(){for(var e in this.imageProperty=null,this.videoProperty=null,this.displayedProperties){var t=this.displayedProperties[e].property["@type"];null===this.imageProperty&&"ImageProperty"===t?this.imageProperty=e:null===this.videoProperty&&"VideoProperty"===t&&(this.videoProperty=e)}}get icon(){return this.element.querySelector("webthing-video-camera-capability")}iconView(){return"\n      <webthing-video-camera-capability>\n      </webthing-video-camera-capability>"}}},8602:(e,t,n)=>{"use strict";var i=n(95924),r=n(29705),s=n(25290);e.exports=class extends i{constructor(e,t,n){super(e,t,!!n.readOnly,n.title||s.getMessage("alarm")),this.readOnly=!!n.readOnly,this.id="alarm-".concat(r.escapeHtmlForIdClass(this.name))}attach(){if(super.attach(),!this.readOnly){this.input=this.labelElement;var e=r.debounce(500,this.set.bind(this));this.input.addEventListener("change",e)}}view(){return this.readOnly?'\n        <webthing-alarm-property data-value="OK"\n          data-name="'.concat(r.escapeHtml(this.label),'" id="').concat(this.id,'">\n        </webthing-alarm-property>'):'\n        <webthing-boolean-property\n          data-name="'.concat(r.escapeHtml(this.label),'" id="').concat(this.id,'">\n        </webthing-boolean-property>')}update(e){if(this.labelElement)if(this.readOnly)this.labelElement.value=e?"ALARM":"OK",this.labelElement.inverted=e;else{if(e==this.input.checked)return;this.input.checked=e}}set(){this.thing.setProperty(this.name,this.input.checked)}}},61626:(e,t,n)=>{"use strict";var i=n(29705);e.exports=class{constructor(e,t,n){this.thing=e,this.name=t,this.readOnly=!!n.readOnly,this.label=n.title||t,this.id="boolean-".concat(i.escapeHtmlForIdClass(this.name))}attach(){this.input=this.thing.element.querySelector("#".concat(this.id));var e=i.debounce(500,this.set.bind(this));this.input.addEventListener("change",e)}view(){var e=this.readOnly?'data-read-only="true"':"";return'\n      <webthing-boolean-property data-name="'.concat(i.escapeHtml(this.label),'"\n        id="').concat(this.id,'" ').concat(e,">\n      </webthing-boolean-property>")}update(e){this.input&&e!=this.input.checked&&(this.input.checked=e)}set(){this.thing.setProperty(this.name,this.input.checked)}}},36626:(e,t,n)=>{"use strict";var i=n(29705),r=n(25290);e.exports=class{constructor(e,t,n){this.thing=e,this.name=t,this.readOnly=!!n.readOnly,this.label=n.title||r.getMessage("brightness"),n.hasOwnProperty("minimum")?this.min=n.minimum:this.min=0,n.hasOwnProperty("maximum")?this.max=n.maximum:this.max=100,n.hasOwnProperty("multipleOf")?this.step=n.multipleOf:"number"===n.type?this.step="any":this.step=1,this.id="brightness-".concat(i.escapeHtmlForIdClass(this.name))}attach(){this.brightness=this.thing.element.querySelector("#".concat(this.id));var e=i.debounce(500,this.set.bind(this));this.brightness.addEventListener("change",e)}view(){var e=this.readOnly?'data-read-only="true"':"";return'\n      <webthing-brightness-property data-name="'.concat(i.escapeHtml(this.label),'"\n        value="0" min="').concat(this.min,'" max="').concat(this.max,'" step="').concat(this.step,'"\n        id="').concat(this.id,'" ').concat(e,">\n      </webthing-brightness-property>")}update(e){this.brightness&&(this.brightness.value=e)}set(){this.thing.setProperty(this.name,this.brightness.value)}}},82546:(e,t,n)=>{"use strict";var i=n(50363),r=n(29705);e.exports=class extends i{constructor(e,t,n){super(e,t,n),this.id="color-mode-".concat(r.escapeHtmlForIdClass(this.name))}attach(){this.readOnly?this.labelElement=this.thing.element.querySelector("#".concat(this.id)):super.attach()}view(){return this.readOnly?'\n        <webthing-string-label-property\n          data-read-only="true" data-name="'.concat(r.escapeHtml(this.label),'"\n          id="').concat(this.id,'">\n        </webthing-string-label-property>'):'\n        <webthing-color-mode-property\n          data-choices="'.concat(btoa(JSON.stringify(this.choices)),'"\n          data-name="').concat(r.escapeHtml(this.label),'" id="').concat(this.id,'">\n        </webthing-color-mode-property>')}update(e){if(this.readOnly){if(!this.labelElement)return;this.labelElement.value="".concat(e).toUpperCase()}else super.update(e)}}},94258:(e,t,n)=>{"use strict";var i=n(29705),r=n(25290);e.exports=class{constructor(e,t,n){this.thing=e,this.name=t,this.readOnly=!!n.readOnly,this.label=n.title||r.getMessage("color-temperature"),this.min=n.minimum,this.max=n.maximum,n.hasOwnProperty("multipleOf")?this.step=n.multipleOf:"number"===n.type?this.step="any":this.step=1,this.id="color-temperature-".concat(i.escapeHtmlForIdClass(this.name))}attach(){this.temperature=this.thing.element.querySelector("#".concat(this.id)),this.temperature.addEventListener("change",this.set.bind(this))}view(){var e=this.readOnly?'data-read-only="true"':"";return'\n      <webthing-color-temperature-property min="'.concat(this.min,'" max="').concat(this.max,'"\n        data-name="').concat(i.escapeHtml(this.label),'" step="').concat(this.step,'"\n        id="').concat(this.id,'" ').concat(e,">\n      </webthing-color-temperature-property>")}update(e){this.temperature&&(this.temperature.value=e)}set(){this.thing.setProperty(this.name,this.temperature.value)}}},54489:(e,t,n)=>{"use strict";var i=n(29705),r=n(25290);e.exports=class{constructor(e,t,n){this.thing=e,this.name=t,this.readOnly=!!n.readOnly,this.label=n.title||r.getMessage("color"),this.id="color-".concat(i.escapeHtmlForIdClass(this.name))}attach(){this.color=this.thing.element.querySelector("#".concat(this.id)),this.color.addEventListener("change",this.set.bind(this))}view(){var e=this.readOnly?'data-read-only="true"':"";return'\n      <webthing-color-property data-name="'.concat(i.escapeHtml(this.label),'"\n        id="').concat(this.id,'" ').concat(e,">\n      </webthing-color-property>")}update(e){this.color&&(this.color.value=e)}set(){this.thing.setProperty(this.name,this.color.value)}}},88713:(e,t,n)=>{"use strict";n(26699);var i=n(37785),r=n(29705),s=n(25290);e.exports=class extends i{constructor(e,t,n){super(e,t,!!n.readOnly,n.title||s.getMessage("current"),"A",1),this.id="current-".concat(r.escapeHtmlForIdClass(this.name)),n.hasOwnProperty("multipleOf")&&"".concat(n.multipleOf).includes(".")?this.precision="".concat(n.multipleOf).split(".")[1].length:this.precision=1}view(){var e=this.readOnly?'data-read-only="true"':"";return'\n      <webthing-current-property data-value="0" '.concat(e,'\n        data-name="').concat(r.escapeHtml(this.label),'" data-unit="').concat(this.unit,'"\n        data-precision="').concat(this.precision,'" id="').concat(this.id,'">\n      </webthing-current-property>')}}},50363:(e,t,n)=>{"use strict";n(66992),n(33948);var i=n(37493),r=n(29705);e.exports=class{constructor(e,t,n){this.thing=e,this.name=t,this.readOnly=!!n.readOnly,this.label=n.title||t,this.type=n.type,this.unit=n.unit?i.nameToAbbreviation(n.unit):null,this.choices=n.enum,this.id="enum-".concat(r.escapeHtmlForIdClass(this.name))}attach(){this.select=this.thing.element.querySelector("#".concat(this.id));var e=r.debounce(500,this.set.bind(this));this.select.addEventListener("change",e)}view(){var e=this.unit||"";if(this.readOnly){if("number"===this.type||"integer"===this.type){var t=0;if("number"===this.type)for(var n of this.choices){var i="".concat(n).split(".")[1];"string"==typeof i&&(t=Math.max(t,i.length))}return'\n          <webthing-numeric-label-property\n            data-name="'.concat(r.escapeHtml(this.label),'" data-unit="').concat(e,'"\n            data-precision="').concat(t,'" id="').concat(this.id,'">\n          </webthing-numeric-label-property>')}return'\n          <webthing-string-label-property\n            data-name="'.concat(r.escapeHtml(this.label),'" id="').concat(this.id,'">\n          </webthing-string-label-property>')}return'\n        <webthing-enum-property data-name="'.concat(r.escapeHtml(this.label),'"\n          data-unit="').concat(e,'" data-type="').concat(this.type,'" id="').concat(this.id,'"\n          data-choices="').concat(btoa(JSON.stringify(this.choices)),'">\n        </webthing-enum-property>')}update(e){this.select&&(this.select.value=e)}set(){this.thing.setProperty(this.name,this.select.value)}}},54462:(e,t,n)=>{"use strict";n(26699);var i=n(37785),r=n(29705),s=n(25290);e.exports=class extends i{constructor(e,t,n){super(e,t,!!n.readOnly,n.title||s.getMessage("frequency"),"Hz",0),this.id="frequency-".concat(r.escapeHtmlForIdClass(this.name)),n.hasOwnProperty("multipleOf")&&"".concat(n.multipleOf).includes(".")?this.precision="".concat(n.multipleOf).split(".")[1].length:this.precision=0}view(){var e=this.readOnly?'data-read-only="true"':"";return'\n      <webthing-frequency-property data-value="0" '.concat(e,'\n        data-name="').concat(r.escapeHtml(this.label),'" data-unit="').concat(this.unit,'"\n        data-precision="').concat(this.precision,'" id="').concat(this.id,'">\n      </webthing-frequency-property>')}}},11153:(e,t,n)=>{"use strict";var i=n(95924),r=n(29705),s=n(25290);e.exports=class extends i{constructor(e,t,n){super(e,t,!!n.readOnly,n.title||s.getMessage("off")),this.id="heating-cooling-".concat(r.escapeHtmlForIdClass(this.name))}view(){return'\n      <webthing-heating-cooling-property\n        data-read-only="true" data-value="'.concat(s.getMessage("off"),'"\n        data-name="').concat(r.escapeHtml(this.label),'" id="').concat(this.id,'">\n      </webthing-heating-cooling-property>')}update(e){this.label&&(this.labelElement.value="".concat(e).toUpperCase())}}},15188:(e,t,n)=>{"use strict";n(66992),n(33948),n(60285),n(41637);var i=n(28797).default,r=n(29705);e.exports=class{constructor(e,t,n){for(var i of(this.thing=e,this.name=t,this.label=n.title||t,this.id="image-".concat(r.escapeHtmlForIdClass(this.name)),this.imageHref=null,n.forms))if(i.contentType&&i.contentType.startsWith("image/")){this.imageHref=i.href;break}this.expandImage=this._expandImage.bind(this),this.reloadImage=this._reloadImage.bind(this),this.positionButtons=this._positionButtons.bind(this)}attach(){this.thing.element.querySelector("#".concat(this.id)).addEventListener("click",this.expandImage)}view(){return'\n      <webthing-image-property data-name="'.concat(r.escapeHtml(this.label),'"\n        id="').concat(this.id,'">\n      </webthing-image-property>')}_expandImage(){var e=document.createElement("div");e.classList.add("media-modal-backdrop"),e.innerHTML='\n      <div class="media-modal">\n        <div class="media-modal-frame">\n          <div class="media-modal-close"></div>\n          <img class="media-modal-image"></img>\n          <div class="media-modal-refresh"></div>\n        </div>\n      </div>\n      ',e.querySelector(".media-modal-close").addEventListener("click",(()=>{document.body.removeChild(e),document.querySelector("#things").style.display="block",window.removeEventListener("resize",this.positionButtons)})),e.querySelector(".media-modal-refresh").addEventListener("click",this.reloadImage),e.querySelector(".media-modal-image").addEventListener("load",this.positionButtons),window.addEventListener("resize",this.positionButtons),document.body.appendChild(e),document.querySelector("#things").style.display="none",this.reloadImage()}_reloadImage(){if(null!==this.imageHref){var e=document.querySelector(".media-modal-image");e&&i.loadImage(this.imageHref).then((t=>{e.src=URL.createObjectURL(t)})).catch((e=>{console.error("Failed to load image: ".concat(e))}))}}_positionButtons(){var e=document.querySelector(".media-modal-image"),t=document.querySelector(".media-modal-close"),n=document.querySelector(".media-modal-refresh"),i=e.parentNode.offsetWidth,r=e.parentNode.offsetHeight,s=(i-e.offsetWidth)/2,o=(r-e.offsetHeight)/2;t.style.right="".concat(s,"px"),t.style.top="".concat(o,"px"),n.style.left="".concat(s,"px"),n.style.bottom="".concat(o,"px")}}},82542:(e,t,n)=>{"use strict";n(26699);var i=n(37785),r=n(29705),s=n(25290);e.exports=class extends i{constructor(e,t,n){super(e,t,!!n.readOnly,n.title||s.getMessage("power"),"",0),this.id="instantaneous-power-factor-".concat(r.escapeHtmlForIdClass(this.name)),n.hasOwnProperty("multipleOf")&&"".concat(n.multipleOf).includes(".")?this.precision="".concat(n.multipleOf).split(".")[1].length:this.precision=0}view(){var e=this.readOnly?'data-read-only="true"':"";return'\n      <webthing-instantaneous-power-factor-property data-value="0" '.concat(e,'\n        data-name="').concat(r.escapeHtml(this.label),'" data-unit="').concat(this.unit,'"\n        data-precision="').concat(this.precision,'" id="').concat(this.id,'">\n      </webthing-instantaneous-power-factor-property>')}}},17075:(e,t,n)=>{"use strict";n(26699);var i=n(37785),r=n(29705),s=n(25290);e.exports=class extends i{constructor(e,t,n){super(e,t,!!n.readOnly,n.title||s.getMessage("power"),"W",0),this.id="instantaneous-power-".concat(r.escapeHtmlForIdClass(this.name)),n.hasOwnProperty("multipleOf")&&"".concat(n.multipleOf).includes(".")?this.precision="".concat(n.multipleOf).split(".")[1].length:this.precision=0}view(){var e=this.readOnly?'data-read-only="true"':"";return'\n      <webthing-instantaneous-power-property data-value="0" '.concat(e,'\n        data-name="').concat(r.escapeHtml(this.label),'" data-unit="').concat(this.unit,'"\n        data-precision="').concat(this.precision,'" id="').concat(this.id,'">\n      </webthing-instantaneous-power-property>')}}},70917:(e,t,n)=>{"use strict";var i=n(95924),r=n(29705),s=n(25290);e.exports=class extends i{constructor(e,t,n){super(e,t,!!n.readOnly,n.title||s.getMessage("leak")),this.id="leak-".concat(r.escapeHtmlForIdClass(this.name))}view(){var e=this.readOnly?'data-read-only="true"':"";return'\n      <webthing-leak-property\n        data-value="'.concat(s.getMessage("dry"),'" ').concat(e,'\n        data-name="').concat(r.escapeHtml(this.label),'" id="').concat(this.id,'">\n      </webthing-leak-property>')}update(e){this.label&&(this.labelElement.value=e?s.getMessage("leak"):s.getMessage("dry"),this.labelElement.inverted=e)}}},58255:(e,t,n)=>{"use strict";n(26699);var i=n(37493),r=n(29705),s=n(25290);e.exports=class{constructor(e,t,n){this.thing=e,this.name=t,this.readOnly=!!n.readOnly,this.label=n.title||s.getMessage("level"),this.unit=n.unit?i.nameToAbbreviation(n.unit):null,n.hasOwnProperty("minimum")?this.min=n.minimum:this.min=0,n.hasOwnProperty("maximum")?this.max=n.maximum:this.max=100,this.precision=0,n.hasOwnProperty("multipleOf")?(this.step=n.multipleOf,"".concat(n.multipleOf).includes(".")&&(this.precision="".concat(n.multipleOf).split(".")[1].length)):"number"===n.type?this.step="any":this.step=1,this.id="level-".concat(r.escapeHtmlForIdClass(this.name))}attach(){this.level=this.thing.element.querySelector("#".concat(this.id));var e=r.debounce(500,this.set.bind(this));this.level.addEventListener("change",e)}view(){var e=this.unit||"",t=this.readOnly?'data-read-only="true"':"";return'\n      <webthing-level-property data-name="'.concat(r.escapeHtml(this.label),'"\n        data-unit="').concat(e,'" min="').concat(this.min,'" max="').concat(this.max,'"\n        step="').concat(this.step,'" id="').concat(this.id,'" ').concat(t,'\n        data-precision="').concat(this.precision,'">\n      </webthing-level-property>')}update(e){this.level&&(this.level.value=e)}set(){this.thing.setProperty(this.name,this.level.value)}}},44439:(e,t,n)=>{"use strict";n(26699);var i=n(95924),r=n(29705),s=n(25290);e.exports=class extends i{constructor(e,t,n){super(e,t,!!n.readOnly,n.title||s.getMessage("locked")),this.id="locked-".concat(r.escapeHtmlForIdClass(this.name))}view(){var e=this.readOnly?'data-read-only="true"':"";return'\n      <webthing-locked-property\n        data-value="'.concat(s.getMessage("unknown"),'" ').concat(e,'\n        data-name="').concat(r.escapeHtml(this.label),'" id="').concat(this.id,'">\n      </webthing-locked-property>')}update(e){this.label&&(["locked","unlocked","unknown","jammed"].includes(e)||(e="unknown"),this.labelElement.value=s.getMessage(e),this.labelElement.inverted="locked"!==e)}}},25179:(e,t,n)=>{"use strict";var i=n(95924),r=n(29705),s=n(25290);e.exports=class extends i{constructor(e,t,n){super(e,t,!!n.readOnly,n.title||s.getMessage("motion")),this.id="motion-".concat(r.escapeHtmlForIdClass(this.name))}view(){var e=this.readOnly?'data-read-only="true"':"";return'\n      <webthing-motion-property\n        data-value="'.concat(s.getMessage("no-motion"),'" ').concat(e,'\n        data-name="').concat(r.escapeHtml(this.label),'" id="').concat(this.id,'">\n      </webthing-motion-property>')}update(e){this.label&&(this.labelElement.value=e?s.getMessage("motion"):s.getMessage("no-motion"),this.labelElement.inverted=e)}}},82329:(e,t,n)=>{"use strict";n(26699);var i=n(37493),r=n(29705);e.exports=class{constructor(e,t,n){this.thing=e,this.name=t,this.readOnly=!!n.readOnly,this.label=n.title||t,this.type=n.type,this.unit=n.unit?i.nameToAbbreviation(n.unit):null,"integer"===n.type?this.precision=0:n.hasOwnProperty("multipleOf")&&"".concat(n.multipleOf).includes(".")?this.precision="".concat(n.multipleOf).split(".")[1].length:this.precision=3,n.hasOwnProperty("minimum")?this.min=n.minimum:this.min=null,n.hasOwnProperty("maximum")?this.max=n.maximum:this.max=null,n.hasOwnProperty("multipleOf")?this.step=n.multipleOf:"number"===n.type?this.step="any":this.step=1,this.id="number-".concat(r.escapeHtmlForIdClass(this.name))}attach(){this.input=this.thing.element.querySelector("#".concat(this.id));var e=r.debounce(500,this.set.bind(this));this.input.addEventListener("change",e)}view(){var e=this.unit||"";if(this.readOnly)return'\n        <webthing-numeric-label-property\n          data-name="'.concat(r.escapeHtml(this.label),'" data-unit="').concat(e,'"\n          data-precision="').concat(this.precision,'" id="').concat(this.id,'">\n        </webthing-numeric-label-property>');var t=null===this.min?"":'min="'.concat(this.min,'"'),n=null===this.max?"":'max="'.concat(this.max,'"');return'\n        <webthing-number-property data-name="'.concat(r.escapeHtml(this.label),'"\n          data-unit="').concat(e,'" ').concat(t," ").concat(n,' value="0" step="').concat(this.step,'"\n          id="').concat(this.id,'">\n        </webthing-number-property>')}update(e){this.input&&(this.input.value=e)}set(){this.thing.setProperty(this.name,this.input.value)}}},37785:(e,t,n)=>{"use strict";var i=n(37493),r=n(29705);e.exports=class{constructor(e,t,n,s,o,a){this.thing=e,this.name=t,this.readOnly=n,this.label=s,this.unit=i.nameToAbbreviation(o),this.precision=a,this.id="label-".concat(r.escapeHtmlForIdClass(this.name))}attach(){this.labelElement=this.thing.element.querySelector("#".concat(this.id))}view(){var e=r.escapeHtml(this.label),t=r.escapeHtml(this.unit),n=this.readOnly?'data-read-only="true"':"";return'\n      <webthing-numeric-label-property data-value="0" data-name="'.concat(e,'"\n        data-unit="').concat(t,'" data-precision="').concat(this.precision,'" id="').concat(this.id,'"\n        ').concat(n,">\n      </webthing-numeric-label-property>")}update(e){this.label&&(this.labelElement.value=parseFloat(e)||0)}}},66870:(e,t,n)=>{"use strict";var i=n(29705),r=n(25290);e.exports=class{constructor(e,t,n){this.thing=e,this.name=t,this.readOnly=!!n.readOnly,this.label=n.title||r.getMessage("on-off"),this.id="on-off-".concat(i.escapeHtmlForIdClass(this.name))}attach(){this.input=this.thing.element.querySelector("#".concat(this.id));var e=i.debounce(500,this.set.bind(this));this.input.addEventListener("change",e)}view(){var e=this.readOnly?'data-read-only="true"':"";return'\n      <webthing-on-off-property data-name="'.concat(i.escapeHtml(this.label),'"\n        id="').concat(this.id,'" ').concat(e,">\n      </webthing-on-off-property>")}update(e){this.input.checked=e}set(){this.thing.setProperty(this.name,this.input.checked)}}},51822:(e,t,n)=>{"use strict";var i=n(95924),r=n(29705),s=n(25290);e.exports=class extends i{constructor(e,t,n){super(e,t,!!n.readOnly,n.title||s.getMessage("open")),this.id="open-".concat(r.escapeHtmlForIdClass(this.name))}view(){var e=this.readOnly?'data-read-only="true"':"";return'\n      <webthing-open-property\n        data-value="'.concat(s.getMessage("closed"),'" ').concat(e,'\n        data-name="').concat(r.escapeHtml(this.label),'" id="').concat(this.id,'">\n      </webthing-open-property>')}update(e){this.label&&(this.labelElement.value=e?s.getMessage("open"):s.getMessage("closed"),this.labelElement.inverted=e)}}},77265:(e,t,n)=>{"use strict";var i=n(95924),r=n(29705),s=n(25290);e.exports=class extends i{constructor(e,t,n){super(e,t,!!n.readOnly,n.title||s.getMessage("pushed")),this.id="pushed-".concat(r.escapeHtmlForIdClass(this.name))}view(){var e=this.readOnly?'data-read-only="true"':"";return'\n      <webthing-pushed-property\n        data-value="'.concat(s.getMessage("not-pushed"),'" ').concat(e,'\n        data-name="').concat(r.escapeHtml(this.label),'" id="').concat(this.id,'">\n      </webthing-pushed-property>')}update(e){this.label&&(this.labelElement.value=e?s.getMessage("pushed"):s.getMessage("not-pushed"),this.labelElement.inverted=e)}}},66048:(e,t,n)=>{"use strict";var i=n(95924),r=n(29705),s=n(25290);e.exports=class extends i{constructor(e,t,n){super(e,t,!!n.readOnly,n.title||s.getMessage("smoke")),this.id="smoke-".concat(r.escapeHtmlForIdClass(this.name))}view(){var e=this.readOnly?'data-read-only="true"':"";return'\n      <webthing-smoke-property data-name="'.concat(r.escapeHtml(this.label),'"\n        id="').concat(this.id,'" ').concat(e,">\n      </webthing-smoke-property>")}update(e){this.label&&(this.labelElement.value=e)}}},95924:(e,t,n)=>{"use strict";var i=n(29705);e.exports=class{constructor(e,t,n,r){this.thing=e,this.name=t,this.readOnly=n,this.label=r,this.id="label-".concat(i.escapeHtmlForIdClass(this.name))}attach(){this.labelElement=this.thing.element.querySelector("#".concat(this.id))}view(){var e=i.escapeHtml(this.label),t=this.readOnly?'data-read-only="true"':"";return'\n      <webthing-string-label-property data-value="0" data-name="'.concat(e,'"\n        id="').concat(this.id,'" ').concat(t,">\n      </webthing-string-label-property>")}update(e){this.labelElement&&(this.labelElement.value=e)}}},29585:(e,t,n)=>{"use strict";var i=n(29705);e.exports=class{constructor(e,t,n){this.thing=e,this.name=t,this.readOnly=!!n.readOnly,this.label=n.title||t,this.id="string-".concat(i.escapeHtmlForIdClass(this.name))}attach(){this.input=this.thing.element.querySelector("#".concat(this.id)),this.input.addEventListener("change",(()=>{this.thing.setProperty(this.name,this.input.value)}))}view(){return this.readOnly?'\n        <webthing-string-label-property\n          data-name="'.concat(i.escapeHtml(this.label),'" id="').concat(this.id,'">\n        </webthing-string-label-property>'):'\n        <webthing-string-property data-name="'.concat(i.escapeHtml(this.label),'"\n          id="').concat(this.id,'">\n        </webthing-string-property>')}update(e){this.input&&(this.input.value=e)}}},5965:(e,t,n)=>{"use strict";var i=n(82329),r=n(29705);e.exports=class extends i{constructor(e,t,n){super(e,t,n),this.id="target-temperature-".concat(r.escapeHtmlForIdClass(this.name))}view(){var e=null===this.min?"":'min="'.concat(this.min,'"'),t=null===this.max?"":'max="'.concat(this.max,'"');return'\n      <webthing-target-temperature-property data-value="0"\n        data-name="'.concat(r.escapeHtml(this.label),'" data-unit="').concat(this.unit,'"\n        ').concat(e," ").concat(t,' value="0" step="').concat(this.step,'" id="').concat(this.id,'">\n      </webthing-target-temperature-property>')}}},89879:(e,t,n)=>{"use strict";n(26699);var i=n(37785),r=n(29705),s=n(25290);e.exports=class extends i{constructor(e,t,n){super(e,t,!!n.readOnly,n.title||s.getMessage("temperature"),n.unit||"degree celsius",0),this.id="temperature-".concat(r.escapeHtmlForIdClass(this.name)),n.hasOwnProperty("multipleOf")&&"".concat(n.multipleOf).includes(".")?this.precision="".concat(n.multipleOf).split(".")[1].length:this.precision=0}view(){var e=this.readOnly?'data-read-only="true"':"";return'\n      <webthing-temperature-property data-value="0" '.concat(e,'\n        data-name="').concat(r.escapeHtml(this.label),'" data-unit="').concat(this.unit,'"\n        data-precision="').concat(this.precision,'" id="').concat(this.id,'">\n      </webthing-temperature-property>')}}},8717:(e,t,n)=>{"use strict";var i=n(50363),r=n(29705);e.exports=class extends i{constructor(e,t,n){super(e,t,n),this.id="thermostat-mode-".concat(r.escapeHtmlForIdClass(this.name))}view(){var e=this.unit||"";return'\n      <webthing-thermostat-mode-property data-name="'.concat(r.escapeHtml(this.label),'"\n        data-unit="').concat(e,'" data-type="').concat(this.type,'" id="').concat(this.id,'"\n        data-choices="').concat(btoa(JSON.stringify(this.choices)),'">\n      </webthing-thermostat-mode-property>')}}},66891:(e,t,n)=>{"use strict";n(66992),n(33948);var i=n(28797).default,r=n(29705),s=n(81123);e.exports=class{constructor(e,t,n){for(var i of(this.thing=e,this.name=t,this.label=n.title||t,this.id="video-".concat(r.escapeHtmlForIdClass(this.name)),this.dashHref=null,this.hlsHref=null,this.mjpegHref=null,this.player=null,n.forms))null===this.dashHref&&"application/dash+xml"===i.contentType?this.dashHref=i.href:null===this.hlsHref&&"application/vnd.apple.mpegurl"===i.contentType?this.hlsHref=i.href:null!==this.mjpegHref||"video/x-motion-jpeg"!==i.contentType&&"video/x-jpeg"!==i.contentType||(this.mjpegHref=i.href);this.expandVideo=this._expandVideo.bind(this),this.positionButtons=this._positionButtons.bind(this)}attach(){this.thing.element.querySelector("#".concat(this.id)).addEventListener("click",this.expandVideo)}view(){return'\n      <webthing-video-property data-name="'.concat(r.escapeHtml(this.label),'"\n        id="').concat(this.id,'">\n      </webthing-video-property>')}_expandVideo(){var e=document.createElement("div");if(e.classList.add("media-modal-backdrop"),null!==this.mjpegHref?e.innerHTML='\n        <div class="media-modal">\n          <div class="media-modal-frame">\n            <div class="media-modal-close"></div>\n            <img class="media-modal-video"></img>\n          </div>\n        </div>\n        ':s.Player.isBrowserSupported()?e.innerHTML='\n        <div class="media-modal">\n          <div class="media-modal-frame">\n            <div class="media-modal-close"></div>\n            <video class="media-modal-video" controls autoplay></video>\n          </div>\n        </div>\n        ':e.innerHTML='\n        <div class="media-modal">\n          <div class="media-modal-frame">\n            <div class="media-modal-close"></div>\n            <div class="media-modal-error" data-l10n-id="video-unsupported">\n            </div>\n          </div>\n        </div>\n        ',document.body.appendChild(e),document.querySelector("#things").style.display="none",!this.mjpegHref&&s.Player.isBrowserSupported()||this.positionButtons(),e.querySelector(".media-modal-close").addEventListener("click",(()=>{this.player&&(this.player.destroy(),this.player=null),document.body.removeChild(e),document.querySelector("#things").style.display="block",window.removeEventListener("resize",this.positionButtons)})),window.addEventListener("resize",this.positionButtons),this.mjpegHref)e.querySelector(".media-modal-video").addEventListener("load",this.positionButtons),e.querySelector(".media-modal-video").src="".concat(this.mjpegHref,"?jwt=").concat(i.jwt);else if(s.Player.isBrowserSupported()&&(this.dashHref||this.hlsHref)){e.querySelector(".media-modal-video").addEventListener("loadeddata",this.positionButtons);var t=document.querySelector(".media-modal-video");this.player=new s.Player(t),this.player.getNetworkingEngine().registerRequestFilter(((e,t)=>{t.headers={Authorization:"Bearer ".concat(i.jwt)}})),this.player.addEventListener("error",(e=>{console.error("Error playing video:",e)})),this.player.load(this.dashHref||this.hlsHref).then((()=>{t.play()})).catch((e=>{console.error("Error loading video:",e)}))}}_positionButtons(){var e=document.querySelector(".media-modal-video");e||(e=document.querySelector(".media-modal-error"));var t=document.querySelector(".media-modal-close"),n=e.parentNode.offsetWidth,i=e.parentNode.offsetHeight,r=(n-e.offsetWidth)/2,s=(i-e.offsetHeight)/2;t.style.right="".concat(r,"px"),t.style.top="".concat(s,"px")}}},38144:(e,t,n)=>{"use strict";n(26699);var i=n(37785),r=n(29705),s=n(25290);e.exports=class extends i{constructor(e,t,n){super(e,t,!!n.readOnly,n.title||s.getMessage("voltage"),"V",0),this.id="voltage-".concat(r.escapeHtmlForIdClass(this.name)),n.hasOwnProperty("multipleOf")&&"".concat(n.multipleOf).includes(".")?this.precision="".concat(n.multipleOf).split(".")[1].length:this.precision=0}view(){var e=this.readOnly?'data-read-only="true"':"";return'\n      <webthing-voltage-property data-value="0" '.concat(e,'\n        data-name="').concat(r.escapeHtml(this.label),'" data-unit="').concat(this.unit,'"\n        data-precision=').concat(this.precision,'" id="').concat(this.id,'">\n      </webthing-voltage-property>')}}},37493:(e,t,n)=>{"use strict";var i=n(96710),r=n(25290),s={nameToAbbreviation:e=>{if(!e)return"";switch(e.toLowerCase()){case"volt":case"volts":return r.getMessage("abbrev-volt");case"hertz":return r.getMessage("abbrev-hertz");case"amp":case"amps":case"ampere":case"amperes":return r.getMessage("abbrev-amp");case"watt":case"watts":return r.getMessage("abbrev-watt");case"kilowatt hour":case"kilowatt-hour":case"kilowatt hours":case"kilowatt-hours":return r.getMessage("abbrev-kilowatt-hour");case"percent":return r.getMessage("abbrev-percent");case"degree fahrenheit":case"degrees fahrenheit":case"fahrenheit":return r.getMessage("abbrev-fahrenheit");case"degree celsius":case"degrees celsius":case"celsius":return r.getMessage("abbrev-celsius");case"kelvin":return r.getMessage("abbrev-kelvin");case"meter":case"meters":case"metre":case"metres":return r.getMessage("abbrev-meter");case"kilometer":case"kilometers":case"kilometre":case"kilometres":return r.getMessage("abbrev-kilometer");case"day":case"days":return r.getMessage("abbrev-day");case"hour":case"hours":return r.getMessage("abbrev-hour");case"minute":case"minutes":return r.getMessage("abbrev-minute");case"second":case"seconds":return r.getMessage("abbrev-second");case"millisecond":case"milliseconds":return r.getMessage("abbrev-millisecond");case"foot":case"feet":return r.getMessage("abbrev-foot");case"micrograms per cubic metre":case"micrograms per cubic meter":return r.getMessage("abbrev-micrograms-per-cubic-meter");case"hectopascal":case"hectopascals":return r.getMessage("abbrev-hectopascal");default:return e}},convert:(e,t,n)=>{switch(t){case"degree celsius":case"degrees celsius":case"celsius":"degree fahrenheit"===(n||i.UNITS.temperature)&&(n=i.UNITS.temperature,e=1.8*e+32);break;case"degree fahrenheit":case"degrees fahrenheit":case"fahrenheit":"degree celsius"===(n||i.UNITS.temperature)&&(n=i.UNITS.temperature,e=(e-32)/1.8)}return{value:e,unit:n||t}}};e.exports=s},52218:(e,t,n)=>{"use strict";n(2707),n(66992),n(33948),n(26699);var i=n(28797).default,r=n(37493),s=n(29705);e.exports=class{constructor(e,t,n,i){this.container=document.getElementById("things"),this.href=e,this.name=t,this.label=n||t,this.schema=i,this.inputs={},this.element=this.render(),this.form=this.element.querySelector(".action-input-form"),this.form.addEventListener("submit",this.handleSubmit.bind(this))}render(){var e=this,t=document.createElement("div"),n='<div class="action-input">\n      <div class="action-input-title">'.concat(s.escapeHtml(this.label),'</div>\n      <form class="action-input-form">'),i=[],o=[];if("object"===this.schema.type){this.schema.hasOwnProperty("required")&&Array.isArray(this.schema.required)&&(o=this.schema.required);var a=Array.from(Object.keys(this.schema.properties)).sort();for(var l of a)i.push(Object.assign({},this.schema.properties[l],{name:l}))}else i.push(Object.assign({},this.schema,{name:"__default__"})),o.push("__default__");var c=function(t){var i=s.escapeHtmlForIdClass(t.name);e.inputs[i]=t.name,n+='<span class="action-input-name">',"__default__"!==t.name&&(n+=s.escapeHtml(t.name)),n+="</span>";var a="";o.includes(t.name)&&(a="required");var l='<span class="action-input-unit">';if(t.hasOwnProperty("unit")&&(l+=s.escapeHtml(r.nameToAbbreviation(r.convert(0,t.unit).unit))),l+="</span>",Array.isArray(t.enum)&&("number"===t.type||"integer"===t.type||"string"===t.type)){var c=t.enum.map((e=>(e=r.convert(e,t.unit).value,'<option value="'.concat(s.escapeHtml(e),'">\n                    ').concat(s.escapeHtml(e),"\n                  </option>"))));return""===a&&c.unshift('<option value=""></option>'),n+='<select name="'.concat(i,'" class="action-input-enum" ').concat(a,">\n                   ").concat(c.join(" "),"\n                 </select>").concat(l),"continue"}switch(t.type){case"number":case"integer":var u,h=r.convert(0,t.unit).unit!==t.unit;u=t.hasOwnProperty("multipleOf")&&!h?"".concat(t.multipleOf):"number"===t.type?"any":"1";var d="";t.hasOwnProperty("minimum")&&(d='min="'.concat(r.convert(t.minimum,t.unit),'"'));var p="";t.hasOwnProperty("maximum")&&(p='max="'.concat(r.convert(t.maximum,t.unit),'"'));var f="";t.hasOwnProperty("default")&&(f='value="'.concat(t.default,'"'));var m=d&&p?"":"hide-number-spinner";n+='<input type="number" name="'.concat(i,'" ').concat(f,' step="').concat(u,'" ').concat(d,"\n                          ").concat(p,' class="action-input-number ').concat(m,'"\n                          ').concat(a,">").concat(l);break;case"boolean":n+='<span>\n            <input type="checkbox" name="'.concat(i,'" class="action-input-checkbox"\n                   id="checkbox-').concat(i,'">\n            <label for="checkbox-').concat(i,'"></label>\n            </span>\n            ').concat(l);break;default:n+='<input type="text" name="'.concat(i,'"\n                          class="action-input-string" ').concat(a,">").concat(l)}};for(var u of i)c(u);return n+='\n      <input id="action-submit-button" type="submit"\n        class="action-button" data-l10n-id="submit">\n      </form></div>',t.innerHTML=n,this.container.appendChild(t.firstChild)}handleSubmit(e){var t;for(var n of(e.preventDefault(),t="object"===this.schema.type?{}:null,this.element.getElementsByTagName("select")))if(0!=n.value.length){var o,a=void 0;if(a="number"===(o="__default__"===n.name?this.schema:this.schema.properties[n.name]).type?Number(n.value):n.value,a=r.convert(a,r.convert(0,o.unit).unit,o.unit).value,a=s.adjustInputValue(a,o),"__default__"===n.name){t=a;break}t[this.inputs[n.name]]=a}for(var l of this.element.getElementsByTagName("input")){var c=void 0;if("submit"!==l.type){if("checkbox"===l.type)c=l.checked;else{if(!(l.value.length>0))continue;c="number"===l.type?Number(l.value):l.value}var u;if(u="__default__"===l.name?this.schema:this.schema.properties[this.inputs[l.name]],c=r.convert(c,r.convert(0,u.unit).unit,u.unit).value,c=s.adjustInputValue(c,u),"__default__"===l.name){t=c;break}t[this.inputs[l.name]]=c}}i.postJson(this.href,t).then((()=>{window.history.back()})).catch((e=>{console.error('Error performing action "'.concat(this.name,'": ').concat(e))}))}}},68173:(e,t,n)=>{"use strict";var i=n(29705);e.exports=class{constructor(e){this.name=e.name,this.id=e.id,this.ready=e.ready,this.container=document.getElementById("adapters-list"),this.render()}view(){var e,t;return this.ready?(e="Disable",t="adapter-settings-disable"):(e="Enable",t="adapter-settings-enable"),'\n      <li class="adapter-item">\n        <div class="adapter-settings-header">\n          <span class="adapter-settings-name">'.concat(i.escapeHtml(this.name),'\n          </span>\n          <span class="adapter-settings-description">').concat(i.escapeHtml(this.id),'\n          </span>\n        </div>\n        <div class="adapter-settings-controls">\n          \x3c!-- add fluent if this is uncommented\n            button id="adapter-toggle-').concat(i.escapeHtml(this.id),'"\n            class="text-button ').concat(t,'"\n            adapterEnabled="').concat(i.escapeHtml(this.ready),'">\n            ').concat(e,"\n          </button--\x3e\n        </div>\n      </li>")}render(){this.container.insertAdjacentHTML("beforeend",this.view())}}},41395:(e,t,n)=>{"use strict";n(66992),n(33948);var i=n(28797).default,r=n(96710),s=n(25290),o=n(5834),a=n(89993),l=n(64502),c={actionUrl:null,init:function(){this.element=document.getElementById("add-thing-screen"),this.backButton=document.getElementById("add-thing-back-button"),this.cancelButton=document.getElementById("add-thing-cancel-button"),this.newThingsElement=document.getElementById("new-things"),this.scanStatus=document.getElementById("add-thing-status"),this.addonsHint=document.getElementById("add-adapters-hint"),this.addonsHintAnchor=document.getElementById("add-adapters-hint-anchor"),this.addByUrlAnchor=document.getElementById("add-by-url-anchor"),this.addGroupContainer=document.getElementById("add-group"),this.addGroupInput=document.getElementById("add-group-title-input"),this.addGroupButton=document.getElementById("add-group-add-button"),this.pairingTimeout=null,this.visibleThings=new Set,this.backButton.addEventListener("click",this.hide.bind(this)),this.cancelButton.addEventListener("click",this.hide.bind(this)),this.addonsHintAnchor.addEventListener("click",this.hide.bind(this)),this.addByUrlAnchor.addEventListener("click",this.showNewWebThing.bind(this)),this.addGroupButton.addEventListener("click",this.addGroup.bind(this)),this.closing=!1},requestPairing:function(){if(!this.closing){this.scanStatus.classList.remove("hidden"),this.addonsHint.classList.add("hidden");var e="ws:";"https:"===window.location.protocol&&(e="wss:");var t="".concat(e,"//").concat(r.HOST,"/new_things?jwt=").concat(i.jwt);this.socket=new WebSocket(t),window.addEventListener("beforeunload",(()=>{this.closing=!0,this.socket&&(this.socket.readyState!==WebSocket.OPEN&&this.socket.readyState!==WebSocket.CONNECTING||this.socket.close())})),this.socket.onmessage=e=>{this.showNewThing(JSON.parse(e.data))},i.startPairing(60).then((e=>{this.actionUrl=e.pair.href,this.pairingTimeout=setTimeout((()=>{this.scanStatus.classList.add("hidden"),0===this.visibleThings.size&&this.addonsHint.classList.remove("hidden"),this.pairingTimeout=null,this.requestCancelPairing()}),6e4)})).catch((e=>{console.error("Pairing request failed: ".concat(e))}))}},requestCancelPairing:function(){null!==this.pairingTimeout&&(clearTimeout(this.pairingTimeout),this.pairingTimeout=null),void 0!==this.socket&&(this.socket.close(),delete this.socket);var e=this.actionUrl;e&&i.cancelPairing(e).then((()=>{this.actionUrl=null})).catch((e=>{console.error("Error cancelling pairing request ".concat(e))}))},show:function(){this.addByUrlAnchor.classList.add("hidden"),l.fetchInstalledAddonList(!0).then((()=>{var e=l.installedAddons.has("wot-adapter")&&l.installedAddons.get("wot-adapter").enabled,t=l.installedAddons.has("thing-url-adapter")&&l.installedAddons.get("thing-url-adapter").enabled;(e||t)&&this.addByUrlAnchor.classList.remove("hidden")})),this.cancelButton.textContent=s.getMessage("add-thing-cancel"),this.element.classList.remove("hidden"),this.newThingsElement.innerHTML="",this.visibleThings.clear(),this.requestPairing()},hide:function(){this.element.classList.add("hidden"),this.addGroupInput.value="",this.requestCancelPairing(),r.gatewayModel.refreshThings()},showNewThing:function(e){this.visibleThings.has(e.id)||(this.visibleThings.add(e.id),new o(e.id,e))},showNewWebThing:e=>{e.preventDefault(),new a},addGroup:function(){r.gatewayModel.addGroup({title:this.addGroupInput.value}).then((()=>{this.hide()}))}};e.exports=c},35007:(e,t,n)=>{"use strict";var i=n(62531).default,r=n(55161),s=n(28797).default,o=n(25290);e.exports=class{constructor(e,t){this.schema=t.schema,this.id=e,this.name=t.name,this.primaryType=t.primary_type,this.container=document.getElementById("addon-config-settings"),this.render()}scrollToTop(){this.container.scrollTop=0}handleApply(e,t){t.length>0?this.scrollToTop():(this.configForm.submitButton.innerText=o.getMessage("addon-config-applying"),s.setAddonConfig(this.id,e).then((()=>{r("/settings/addons")})).catch((e=>{console.error("Failed to set config for add-on: ".concat(this.name,"\n").concat(e)),this.configForm.errorField.render([e]),this.configForm.submitButton.innerText=o.getMessage("addon-config-apply")})))}render(){var e=this.container.querySelector(".section-title-icon");switch(this.primaryType){case"adapter":e.src="/images/adapters-icon.png";break;case"notifier":e.src="/images/thing-icons/notification.svg";break;default:e.src="/images/add-on.svg"}s.getAddonConfig(this.id).then((e=>{this.configForm=new i(this.schema,"addon-config-".concat(this.id),this.name,e,this.handleApply.bind(this),{submitText:o.getMessage("addon-config-apply")}),this.container.appendChild(this.configForm.render())})).catch((e=>{console.error("Failed to get config for add-on: ".concat(this.name,"\n").concat(e))}))}}},3820:(e,t,n)=>{"use strict";n(41817),n(88674);var i=n(28797).default,r=n(25290),s=n(29705);e.exports=class{constructor(e,t,n){this.id=e.id,this.name=e.name,this.description=e.description,this.author=e.author,this.homepageUrl=e.homepage_url,this.licenseUrl=e.license_url,this.version=e.version,this.primaryType=e.primary_type,this.url=e.url,this.checksum=e.checksum,this.installed=e.installed,this.installedAddonsMap=t,this.availableAddonsMap=n,this.container=document.getElementById("discovered-addons-list"),this.render()}view(){var e;return e=this.installed?'<span class="addon-discovery-settings-added"\n        data-l10n-id="addon-discovery-added"></span>':'\n        <button id="addon-install-'.concat(s.escapeHtmlForIdClass(this.id),'"\n          class="text-button addon-discovery-settings-add"\n          data-l10n-id="addon-discovery-add">\n        </button>'),'\n      <li class="discovered-addon-item">\n        <div class="addon-settings-header '.concat(s.escapeHtmlForIdClass(this.primaryType),'">\n          <span class="addon-settings-name">\n            ').concat(s.escapeHtml(this.name),'\n          </span>\n          <span class="addon-settings-version">\n            ').concat(s.escapeHtml(this.version),'\n          </span>\n          <span class="addon-settings-description">\n            ').concat(s.escapeHtml(this.description),'\n          </span>\n          <span class="addon-settings-author">\n            ').concat(r.getMessage("by"),' <a href="').concat(this.homepageUrl,'" target="_blank"\n                                          rel="noopener">').concat(s.escapeHtml(this.author),'</a>\n          </span>\n          <span id="addon-license-').concat(s.escapeHtmlForIdClass(this.id),'"\n                class="addon-settings-license" data-license-href="').concat(this.licenseUrl,'"\n                data-id="').concat(s.escapeHtmlForIdClass(this.id),'">\n            (').concat(r.getMessage("license"),')\n          </span>\n        </div>\n        <div class="addon-settings-controls">\n          ').concat(e,"\n        </div>\n      </li>")}render(){this.container.insertAdjacentHTML("beforeend",this.view()),this.installed||document.getElementById("addon-install-".concat(s.escapeHtmlForIdClass(this.id))).addEventListener("click",this.handleInstall.bind(this)),document.getElementById("addon-license-".concat(s.escapeHtmlForIdClass(this.id))).addEventListener("click",this.handleLicense.bind(this))}handleInstall(e){var t=e.target.parentNode;t.innerHTML='<span class="addon-discovery-settings-installing"\n             data-l10n-id="addon-discovery-installing"></span>',i.installAddon(this.id,this.url,this.checksum).then((e=>{t.innerHTML='<span class="addon-discovery-settings-added"\n          data-l10n-id="addon-discovery-added"></span>';var n=this.availableAddonsMap.get(this.id);n&&(n.installed=!0),this.installedAddonsMap.set(this.id,e),e.content_scripts&&e.content_scripts.length>0&&window.location.reload()})).catch((e=>{console.error("Failed to install add-on: ".concat(this.id,"\n").concat(e)),t.innerHTML='<span class="addon-discovery-settings-install-failed"\n                 data-l10n-id="addon-discovery-failed"></span>'}))}handleLicense(e){e.target.dataset.id&&i.getAddonsInfo().then((t=>{var n="".concat(t.urls[0],"/license/").concat(e.target.dataset.id),i=document.getElementById("media-modal");if(null==i){var s=document.createElement("div");s.className="media-modal",s.id="media-modal";var o=document.createElement("div");o.className="media-modal-frame",o.innerHTML='<div class="media-modal-close"\n            id="modal-close-button"></div>\n            <div class="media-modal-content">\n            <p id="media-modal-text"></p></div>',s.appendChild(o),document.body.appendChild(s),document.getElementById("modal-close-button").addEventListener("click",(()=>{(i=document.getElementById("media-modal")).parentNode.removeChild(i)})),fetch(n).then((e=>e.text())).then((e=>{document.getElementById("media-modal-text").innerText=e})).catch((()=>{document.getElementById("media-modal-text").innerText=r.getMessage("failed-read-file")}))}}))}}},46293:(e,t,n)=>{"use strict";n(66992),n(33948),n(60285),n(41637),n(65069),n(2707);var i=n(96710),r=n(25425),s=n(37493),o=n(29705);e.exports=class{constructor(e,t){for(var n in this.limit=100,this.href=new URL(t.href,i.ORIGIN),this.model=e,this.schema={},t.events){this.schema[n]={};var s=t.events[n];if("object"===s.type){var o=Array.from(Object.keys(s.properties));for(var a of o)this.schema[n][a]=s.properties[a]}else this.schema[n].data=s}this.container=document.getElementById("things"),this.element=this.render();var l=e.events;for(var c of(l=l.map((e=>{var t=Object.keys(e)[0],n=new Date(e[t].timestamp);return Object.assign(e[t],{name:t,timestamp:n})})).sort(((e,t)=>t.timestamp-e.timestamp)).slice(0,this.limit).reverse(),l))this.prependEvent(c);this.onEvent=this.onEvent.bind(this),this.model.subscribe(r.EVENT_OCCURRED,this.onEvent),setInterval((()=>this.updateTimestamps()),1e4)}onEvent(e){var t=Object.keys(e).map((t=>{var n=new Date(e[t].timestamp);return Object.assign(e[t],{name:t,timestamp:n})})).sort(((e,t)=>e.timestamp-t.timestamp));for(var n of t)this.prependEvent(n)}cleanup(){this.model.unsubscribe(r.EVENT_OCCURRED,this.onEvent)}render(){var e=document.createElement("div");return e.innerHTML='<ul class="event-list"></ul>',this.container.appendChild(e.firstChild)}prependEvent(e){if(this.schema.hasOwnProperty(e.name)){var t=this.schema[e.name],n="",i=e.data;if(null!==i){for(var r of(("object"!=typeof i||Array.isArray(i))&&(i={data:i}),Array.from(Object.keys(i)).sort()))if(t.hasOwnProperty(r)){var{value:a,unit:l}=s.convert(i[r],t[r].unit);switch(t[r].type){case"number":case"integer":n+="".concat(o.escapeHtml(r),": ").concat(o.escapeHtml(a)),l&&(n+=" ".concat(s.nameToAbbreviation(l)));break;case"object":case"array":a=JSON.stringify(a);default:n+="".concat(o.escapeHtml(r),": ").concat(o.escapeHtml(a))}n+="<br>"}n=n.substring(0,n.length-4)}var c=document.createElement("div"),u='<li class="event-item">\n      <div class="event-header">\n        <span class="event-name">'.concat(o.escapeHtml(e.name),'</span>\n        <span class="event-time" data-original="').concat(e.timestamp.toISOString(),'"\n              title="').concat(e.timestamp.toLocaleString(),'">\n          ').concat(o.fuzzyTime(e.timestamp),'\n        </span>\n      </div>\n      <div class="event-body">').concat(n,"</div>\n    </li>");for(c.innerHTML=u;this.element.childNodes.length>=this.limit;)this.element.removeChild(this.element.lastChild);this.element.insertBefore(c.firstChild,this.element.firstChild)}}updateTimestamps(){for(var e of this.element.querySelectorAll(".event-time"))e.innerText=o.fuzzyTime(new Date(e.dataset.original).getTime())}}},36533:(e,t,n)=>{"use strict";n(54747),n(66992),n(33948),n(60285),n(41637);var i=n(55161),r=n(28797).default,s=n(96710),o=n(25425),{createThingFromCapability:a}=n(21310),l={ORIGIN_X:6,ORIGIN_Y:7,MAX_X:100,MAX_Y:100,THING_GAP:11,init:function(){this.things=[],this.view=document.getElementById("floorplan-view"),this.floorplan=document.getElementById("floorplan"),this.backButton=document.getElementById("back-button"),this.menuButton=document.getElementById("menu-button"),this.editButton=document.getElementById("floorplan-edit-button"),this.doneButton=document.getElementById("floorplan-done-button"),this.floorplanBackButton=document.getElementById("floorplan-back-button"),this.uploadForm=document.getElementById("floorplan-upload-form"),this.uploadButton=document.getElementById("floorplan-upload-button"),this.fileInput=document.getElementById("floorplan-file-input"),this.thingsElement=this.floorplan,this.updateVminRequest=null,this.vmin=1,this.onResize=this.onResize.bind(this),this.updateVmin=this.updateVmin.bind(this),this.interactTimeout=null,this.onPointerDown=this.onPointerDown.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.selectThing=this.selectThing.bind(this),this.moveThing=this.moveThing.bind(this),this.deselectThing=this.deselectThing.bind(this),this.editButton.addEventListener("click",this.edit.bind(this)),this.doneButton.addEventListener("click",this.done.bind(this)),this.floorplanBackButton.addEventListener("click",this.done.bind(this)),this.uploadButton.addEventListener("click",this.requestFile.bind(this)),this.uploadForm.addEventListener("submit",this.blackHole),this.fileInput.addEventListener("change",this.upload.bind(this)),this.refreshThings=this.refreshThings.bind(this),this.things=[]},refreshThings:function(e){if(!this.view.classList.contains("edit")){for(var t;void 0!==(t=this.things.pop());)this.removeInteract(t),t.cleanup();if(this.thingsElement.innerHTML="",0!==e.length){var n=this.ORIGIN_X,i=this.ORIGIN_Y;e.forEach(((e,t)=>{s.gatewayModel.getThingModel(t).then((t=>{if(!1!==e.floorplanVisibility){e.floorplanX&&e.floorplanY||(e.floorplanX=n,e.floorplanY=i,(n+=this.THING_GAP)>this.MAX_X&&(n=this.ORIGIN_X,i+=this.THING_GAP),i>this.MAX_Y&&(i=this.ORIGIN_Y));var r=o.ThingFormat.LINK_ICON,s=a(e.selectedCapability,t,e,r);s.element.dataset.index=this.things.length,this.addInteract(s),this.things.push(s),this.updateVmin()}}))}))}}},addInteract:function(e){e.element.addEventListener("click",this.blackHole),e.element.addEventListener("mousedown",this.onPointerDown),e.element.addEventListener("mouseup",this.onPointerUp),e.element.addEventListener("touchstart",this.onPointerDown),e.element.addEventListener("touchend",this.onPointerUp)},removeInteract:function(e){e.element.removeEventListener("click",this.blackHole),e.element.removeEventListener("mousedown",this.onPointerDown),e.element.removeEventListener("mouseup",this.onPointerUp),e.element.removeEventListener("touchstart",this.onPointerDown),e.element.removeEventListener("touchend",this.onPointerUp)},show:function(){window.addEventListener("resize",this.onResize),this.backButton.classList.add("hidden"),this.menuButton.classList.remove("hidden"),s.gatewayModel.subscribe(o.DELETE_THINGS,this.refreshThings),s.gatewayModel.subscribe(o.REFRESH_THINGS,this.refreshThings,!0)},edit:function(){this.view.classList.add("edit"),this.editButton.classList.add("hidden"),this.doneButton.classList.remove("hidden"),this.uploadForm.classList.remove("hidden"),this.thingsElement.classList.add("editing"),this.things.forEach((e=>{e.element.addEventListener("click",this.blackHole),e.element.addEventListener("mousedown",this.selectThing),e.element.addEventListener("touchstart",this.selectThing)}),this),this.pointerOffsetX=0,this.pointerOffsetY=0,this.thingsElement.addEventListener("mousemove",this.moveThing),this.thingsElement.addEventListener("mouseup",this.deselectThing),this.thingsElement.addEventListener("touchmove",this.moveThing),this.thingsElement.addEventListener("touchend",this.deselectThing)},done:function(){this.view.classList.remove("edit"),this.doneButton.classList.add("hidden"),this.editButton.classList.remove("hidden"),this.uploadForm.classList.add("hidden"),this.thingsElement.classList.remove("editing"),this.things.forEach((e=>{e.element.removeEventListener("click",this.blackHole),e.element.removeEventListener("mousedown",this.selectThing),e.element.removeEventListener("touchstart",this.selectThing)}),this),this.thingsElement.removeEventListener("mousemove",this.moveThing),this.thingsElement.removeEventListener("mouseup",this.deselectThing),this.thingsElement.removeEventListener("touchmove",this.moveThing),this.thingsElement.removeEventListener("touchend",this.deselectThing)},requestFile:function(){this.fileInput.click()},upload:function(e){this.uploadButton.classList.add("loading"),r.uploadFloorplan(e.target.files[0]).then((()=>{this.uploadButton.classList.remove("loading"),r.loadImage("/uploads/floorplan.svg").then((e=>{this.floorplan.style.backgroundImage="url(".concat(URL.createObjectURL(e),")")}))})).catch((e=>{this.uploadButton.classList.remove("loading"),console.error("Failed to upload floorplan ".concat(e))}))},onResize:function(){this.view.classList.contains("selected")?this.updateVminRequest||(this.updateVminRequest=window.requestAnimationFrame(this.updateVmin)):window.removeEventListener("resize",this.onResize)},updateVmin:function(){this.updateVminRequest=null;var e=Math.min(window.innerWidth,window.innerHeight)/100;this.vmin=e,this.things.forEach((e=>{var t=e.element;t.style.transform=this.makeTransform(parseFloat(t.dataset.x),parseFloat(t.dataset.y))}))},screenToRelVmin:function(e){var t=this.thingsElement.getBoundingClientRect();return{x:(e.x-t.left)/this.vmin,y:(e.y-t.right)/this.vmin}},selectThing:function(e){e.preventDefault(),this.selectedThing=e.currentTarget;var t={x:e.clientX||e.touches[0].clientX,y:e.clientY||e.touches[0].clientY},n=this.screenToRelVmin(t);this.pointerOffsetX=n.x-parseFloat(this.selectedThing.dataset.x),this.pointerOffsetY=n.y-parseFloat(this.selectedThing.dataset.y),this.selectedThing.style.cursor="grabbing"},deselectThing:function(){if(this.selectedThing){var e=this.selectedThing,t=parseFloat(e.dataset.x),n=parseFloat(e.dataset.y),i=decodeURIComponent(e.dataset.href),o=i.split("/").pop();e.style.cursor="",r.setThingFloorplanPosition(o,t,n).then((()=>s.gatewayModel.getThing(o))).then((e=>{e&&(e.floorplanX=t,e.floorplanY=n)})).catch((e=>{console.error("Error trying to move thing ".concat(i," ").concat(e))})),this.selectedThing=null,this.pointerOffsetX=0,this.pointerOffsetY=0}},moveThing:function(e){if(this.selectedThing){var t={x:e.clientX||e.touches[0].clientX,y:e.clientY||e.touches[0].clientY},n=this.screenToRelVmin(t);n.x-=this.pointerOffsetX,n.y-=this.pointerOffsetY,n.x<0||n.x>100||n.y<0||n.y>100||(this.selectedThing.dataset.x=n.x,this.selectedThing.dataset.y=n.y,this.selectedThing.style.transform=this.makeTransform(n.x,n.y))}},makeTransform:function(e,t){var n=10*this.vmin/128,i="translate(".concat(e,"vmin,").concat(t,"vmin)"),r="scale(".concat(n,")");return"".concat(i," translate(-50%, -50%) ").concat(r)},onPointerDown:function(e){this.thingsElement.classList.contains("editing")||"mousedown"===e.type&&1!==e.buttons||(e.preventDefault(),e.stopPropagation(),this.selectedThing=e.currentTarget,this.interactTimeout=setTimeout((()=>{this.selectedThing&&i("".concat(this.selectedThing.dataset.href,"?referrer=%2Ffloorplan")),this.interactTimeout=null}),750))},onPointerUp:function(e){if(!this.thingsElement.classList.contains("editing")&&this.selectedThing){e.preventDefault(),e.stopPropagation();var t=this.things[this.selectedThing.dataset.index];this.interactTimeout&&(t.handleClick&&t.handleClick(),clearTimeout(this.interactTimeout),this.interactTimeout=null),this.selectedThing=null}},blackHole:e=>(e.preventDefault(),e.stopPropagation(),!1)};e.exports=l},52677:(e,t,n)=>{"use strict";n(66992),n(33948),n(26699),n(73210),n(54747),n(74916),n(15306);var i=n(28797).default,r=n(96710),s=n(29705),o=n(25290);e.exports=class{constructor(e){this.title=e.title,this.layoutIndex=e.layoutIndex,this.id=decodeURIComponent(e.href.split("/").pop()),this.groupsElement=document.getElementById("groups"),this.element=this.render()}render(){for(var e of(this.element=document.createElement("div"),this.element.setAttribute("class","group"),this.element.setAttribute("id","group-".concat(this.id)),this.element.setAttribute("data-layout-index","".concat(this.layoutIndex)),this.initializeView(),this.element.firstChild.ondragstart=this.handleDragStart.bind(this),this.element.ondragover=this.handleDragOver.bind(this),this.element.ondragenter=this.handleDragEnter.bind(this),this.element.ondragleave=this.handleDragLeave.bind(this),this.element.firstChild.ondragend=this.handleDragEnd.bind(this),this.element.ondrop=this.handleDrop.bind(this),this.groupsElement.childNodes.values()))if(e.dataset.layoutIndex>this.layoutIndex)return this.groupsElement.insertBefore(this.element,e);return this.groupsElement.appendChild(this.element)}initializeView(){var e=document.createElement("DIV");e.setAttribute("class","bar"),e.setAttribute("draggable","true"),e.setAttribute("data-layout-index","-1");var t=document.createElement("DIV");t.setAttribute("class","leftcontainer");var n=document.createElement("BUTTON");n.setAttribute("class","foldIn");var i="group-".concat(this.id,"-closed=1");document.cookie.split(";").map((e=>e.trim())).includes(i)||this.element.classList.add("open"),n.addEventListener("click",(()=>{if(document.cookie="".concat(i,";expires=Thu, 01 Jan 1970 00:00:01 GMT"),this.element.classList.contains("open")){this.element.classList.remove("open");var e=new Date;e.setTime(e.getTime()+31536e6),document.cookie="".concat(i,";expires=").concat(e.toUTCString())}else this.element.classList.add("open")})),t.appendChild(n);var r=document.createElement("DIV");r.setAttribute("class","title"),r.innerText=this.title,t.appendChild(r),e.appendChild(t);var s=document.createElement("BUTTON");s.setAttribute("class","edit"),s.addEventListener("click",(()=>{this.overflowMenu.classList.contains("hidden")?this.overflowMenu.classList.remove("hidden"):this.overflowMenu.classList.add("hidden")})),e.appendChild(s),this.buildOverflowMenu(),e.appendChild(this.overflowMenu),this.element.appendChild(e)}buildOverflowMenu(){this.overflowMenu=document.createElement("DIV"),this.overflowMenu.setAttribute("class","group-overflow-menu hidden");var e=document.createElement("A");e.href="#",e.innerHTML='<img src="/images/edit-plain.svg">'.concat(o.getMessage("edit")),e.addEventListener("click",(()=>{var e=new CustomEvent("_groupcontextmenu",{detail:{groupId:this.id,groupTitle:this.title,action:"edit"}});window.dispatchEvent(e)})),this.overflowMenu.appendChild(e);var t=document.createElement("A");t.href="#",t.innerHTML='<img src="/images/remove.svg">'.concat(o.getMessage("remove")),t.addEventListener("click",(()=>{var e=new CustomEvent("_groupcontextmenu",{detail:{groupId:this.id,groupTitle:this.title,action:"remove"}});window.dispatchEvent(e)})),this.overflowMenu.appendChild(t)}handleDragStart(e){e.target.style.cursor="grabbing",e.dataTransfer.setData("text",this.element.id),e.dataTransfer.items.add("","application/group"),e.dataTransfer.effectAllowed="move",e.dataTransfer.dropEffect="move",this.overflowMenu.classList.add("hidden"),"vibrate"in navigator&&navigator.vibrate(50)}handleDragOver(e){e.preventDefault(),Array.from(e.dataTransfer.types).includes("application/thing")?(this.element.classList.add("drag-target"),e.dataTransfer.dropEffect="move"):Array.from(e.dataTransfer.types).includes("application/group")&&(this.groupsElement.childNodes.forEach((e=>{e.classList.remove("drag-before","drag-after")})),e.dataTransfer.dropEffect="move",e.clientY-this.element.getBoundingClientRect().y<this.element.getBoundingClientRect().height/2?this.element.classList.add("drag-before"):this.element.classList.add("drag-after"))}handleDragEnter(e){e.preventDefault()}handleDragLeave(e){e.preventDefault(),this.element.classList.remove("drag-target")}handleDrop(e){e.preventDefault();var t=Array.from(e.dataTransfer.types);if(t.includes("application/thing")||t.includes("application/group")){e.stopPropagation();var n=document.getElementById(e.dataTransfer.getData("text"));if(n&&n!=this.element)if(Array.from(e.dataTransfer.types).includes("application/thing")){n.parentNode.removeChild(n),this.element.appendChild(n);var o=s.unescapeHtml(n.id).replace(/^thing-/,"");i.setThingGroup(o,this.id).then((()=>{r.gatewayModel.refreshThings()})).catch((e=>{console.error("Error trying to change group of thing ".concat(o,": ").concat(e))}))}else{var a=e.clientY,l=this.element.getBoundingClientRect().y,c=this.element.getBoundingClientRect().height,u=parseInt(this.element.getAttribute("data-layout-index"));if(n.parentNode===this.element.parentNode&&parseInt(n.getAttribute("data-layout-index"))<u&&(u-=1),n.parentNode.removeChild(n),a-l<c/2)this.groupsElement.insertBefore(n,this.element);else{var h=this.element.nextSibling;h?this.groupsElement.insertBefore(n,h):this.groupsElement.appendChild(n),u+=1}var d=s.unescapeHtml(n.id).replace(/^group-/,"");i.setGroupLayoutIndex(d,u).then((()=>{r.gatewayModel.refreshThings()})).catch((e=>{console.error("Error trying to change group ".concat(d,": ").concat(e))}))}}}handleDragEnd(){this.groupsElement.querySelectorAll(".drag-before, .drag-after").forEach((e=>{e.classList.remove("drag-before","drag-after")})),this.groupsElement.querySelectorAll(".group .bar").forEach((e=>{e.style.cursor="grab"}))}}},48826:(e,t,n)=>{"use strict";n(41817),n(88674);var i=n(28797).default,r=n(25290),s=n(29705),o=n(55161);e.exports=class{constructor(e,t,n){this.id=e.id,this.name=e.name,this.description=e.description,this.author=e.author,this.homepageUrl=e.homepage_url,this.licenseUrl="/addons/".concat(encodeURIComponent(this.id),"/license?jwt=").concat(i.jwt),this.version=e.version,this.primaryType=e.primary_type,this.enabled=e.enabled,this.schema=e.schema,this.metadata=e,this.updateUrl=null,this.updateVersion=null,this.updateChecksum=null,this.container=document.getElementById("installed-addons-list"),this.installedAddonsMap=t,this.availableAddonsMap=n,this.render()}view(){var e,t;this.enabled?(e=r.getMessage("disable"),t="addon-settings-disable"):(e=r.getMessage("enable"),t="addon-settings-enable");var n=this.schema?"":"hidden",i=this.name||this.id;return'\n      <li id="addon-item-'.concat(s.escapeHtmlForIdClass(this.id),'"\n        class="addon-item">\n        <div class="addon-settings-header ').concat(s.escapeHtmlForIdClass(this.primaryType),'">\n          <span class="addon-settings-name">\n            ').concat(s.escapeHtml(i),'\n          </span>\n          <span class="addon-settings-version">\n            ').concat(s.escapeHtml(this.version),'\n          </span>\n          <span class="addon-settings-description">\n            ').concat(s.escapeHtml(this.description),'\n          </span>\n          <span class="addon-settings-author">\n            ').concat(r.getMessage("by"),' <a href="').concat(this.homepageUrl,'" target="_blank"\n                                          rel="noopener">').concat(s.escapeHtml(this.author),'</a>\n          </span>\n          <span id="addon-license-').concat(s.escapeHtmlForIdClass(this.id),'"\n                class="addon-settings-license" data-license-href="').concat(this.licenseUrl,'"\n                data-id="').concat(s.escapeHtmlForIdClass(this.id),'">\n            (').concat(r.getMessage("license"),')\n          </span>\n        </div>\n        <div class="addon-settings-controls">\n          <button id="addon-config-').concat(s.escapeHtmlForIdClass(this.id),'"\n            class="text-button addon-settings-config ').concat(n,'"\n            data-l10n-id="addon-configure">\n          </button>\n          <button id="addon-update-').concat(s.escapeHtmlForIdClass(this.id),'"\n            class="text-button addon-settings-update hidden"\n            data-l10n-id="addon-update">\n          </button>\n          <span class="addon-settings-spacer"></span>\n          <button id="addon-remove-').concat(s.escapeHtmlForIdClass(this.id),'"\n            class="text-button addon-settings-remove"\n            data-l10n-id="addon-remove">\n          </button>\n          <button id="addon-toggle-').concat(s.escapeHtmlForIdClass(this.id),'"\n            class="text-button ').concat(t,'">\n            ').concat(e,"\n          </button>\n        </div>\n      </li>")}render(){this.container.insertAdjacentHTML("beforeend",this.view()),document.getElementById("addon-config-".concat(s.escapeHtmlForIdClass(this.id))).addEventListener("click",this.handleConfig.bind(this)),document.getElementById("addon-update-".concat(s.escapeHtmlForIdClass(this.id))).addEventListener("click",this.handleUpdate.bind(this)),document.getElementById("addon-remove-".concat(s.escapeHtmlForIdClass(this.id))).addEventListener("click",this.handleRemove.bind(this)),document.getElementById("addon-toggle-".concat(s.escapeHtmlForIdClass(this.id))).addEventListener("click",this.handleToggle.bind(this)),document.getElementById("addon-license-".concat(s.escapeHtmlForIdClass(this.id))).addEventListener("click",this.handleLicense.bind(this))}setUpdateAvailable(e,t,n){this.updateUrl=e,this.updateVersion=t,this.updateChecksum=n,document.getElementById("addon-update-".concat(s.escapeHtmlForIdClass(this.id))).classList.remove("hidden")}handleConfig(){o("/settings/addons/config/".concat(this.id))}handleUpdate(e){var t=e.target.parentNode,n=document.querySelector("#addon-item-".concat(s.escapeHtmlForIdClass(this.id)," .addon-settings-version")),o=document.createElement("span");o.classList.add("addon-updating"),o.innerText=r.getMessage("addon-updating"),t.replaceChild(o,e.target),i.updateAddon(this.id,this.updateUrl,this.updateChecksum).then((e=>{this.version=this.updateVersion,this.installedAddonsMap.get(this.id).version=this.version,n.innerText=this.version,o.innerText=r.getMessage("addon-updated"),e.content_scripts&&e.content_scripts.length>0&&e.enabled&&window.location.reload()})).catch((e=>{console.error("Failed to update add-on: ".concat(this.id,"\n").concat(e)),o.innerText=r.getMessage("addon-update-failed")}))}handleRemove(e){var t=e.target;t.disabled=!0,i.uninstallAddon(this.id).then((()=>{var e=document.getElementById("addon-item-".concat(s.escapeHtmlForIdClass(this.id)));e.parentNode.removeChild(e),this.installedAddonsMap.delete(this.id);var t=this.availableAddonsMap.get(this.id);t&&(t.installed=!1),this.metadata.content_scripts&&this.metadata.content_scripts.length>0&&this.enabled&&window.location.reload()})).catch((e=>{console.error("Failed to uninstall add-on: ".concat(this.id,"\n").concat(e)),t.disabled=!1}))}handleToggle(e){var t=e.target,n=!this.enabled;t.disabled=!0,i.setAddonSetting(this.id,n).then((()=>{this.enabled=n,this.installedAddonsMap.get(this.id).enabled=n,this.enabled?(t.innerText=r.getMessage("disable"),t.classList.remove("addon-settings-enable"),t.classList.add("addon-settings-disable")):(t.innerText=r.getMessage("enable"),t.classList.remove("addon-settings-disable"),t.classList.add("addon-settings-enable")),t.disabled=!1})).catch((e=>{console.error("Failed to toggle add-on: ".concat(this.id,"\n").concat(e)),t.disabled=!1}))}handleLicense(e){e.target.dataset.id&&i.getAddonsInfo().then((t=>{var n="".concat(t.urls[0],"/license/").concat(e.target.dataset.id),i=document.getElementById("media-modal");if(null==i){var s=document.createElement("div");s.className="media-modal",s.id="media-modal";var o=document.createElement("div");o.className="media-modal-frame",o.innerHTML='<div class="media-modal-close"\n            id="modal-close-button"></div>\n            <div class="media-modal-content">\n            <p id="media-modal-text"></p></div>',s.appendChild(o),document.body.appendChild(s),document.getElementById("modal-close-button").addEventListener("click",(()=>{(i=document.getElementById("media-modal")).parentNode.removeChild(i)})),fetch(n).then((e=>e.text())).then((e=>{document.getElementById("media-modal-text").innerText=e})).catch((()=>{document.getElementById("media-modal-text").innerText=r.getMessage("failed-read-file")}))}}))}}},36054:(e,t,n)=>{"use strict";function i(e,t,n,i,r,s,o){try{var a=e[s](o),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(i,r)}n(66992),n(33948),n(88674),n(74916),n(15306),n(54747);var r=n(28797).default,s=n(96710),o=n(25425),a=n(25290),l=n(47097),c=n(55161),u=n(29705);e.exports=new class{constructor(){this.logs={},this.logDescr=null,this.resizeTimeout=null,this.start=new Date(Date.now()-6048e5),this.end=new Date(Date.now()),this.refreshThings=this.refreshThings.bind(this),this.onWindowResize=this.onWindowResize.bind(this),this.showCreateLog=this.showCreateLog.bind(this),this.hideCreateLog=this.hideCreateLog.bind(this),this.onCreateLogDeviceSelect=this.onCreateLogDeviceSelect.bind(this),this.onCreateLog=this.onCreateLog.bind(this),this.hideRemoveDialog=this.hideRemoveDialog.bind(this),this.onRemoveConfirm=this.onRemoveConfirm.bind(this),window.addEventListener("resize",this.onWindowResize),this.closing=!1}init(){this.view=document.getElementById("logs-view"),this.createLogScreen=document.getElementById("create-log-screen"),this.createLogHint=document.querySelector(".create-log-hint"),this.createLogDevice=document.querySelector(".create-log-device"),this.createLogDevice.addEventListener("change",this.onCreateLogDeviceSelect),this.createLogProperty=document.querySelector(".create-log-property"),this.createLogSaveButton=document.getElementById("create-log-save-button"),this.createLogSaveButton.addEventListener("click",this.onCreateLog),this.createLogButton=document.querySelector(".create-log-button"),this.createLogButton.addEventListener("click",this.showCreateLog),this.createLogRetentionNumber=document.querySelector(".create-log-retention-duration-number"),this.createLogRetentionUnit=document.querySelector(".create-log-retention-duration-unit"),this.createLogBackButton=document.getElementById("create-log-back-button"),this.createLogBackButton.addEventListener("click",this.hideCreateLog),this.logsContainer=this.view.querySelector(".logs"),this.logsHeader=document.querySelector(".logs-header"),this.logRemoveDialog=document.getElementById("log-remove-dialog"),this.logRemoveButton=document.getElementById("log-remove-button"),this.logRemoveButton.addEventListener("click",this.onRemoveConfirm),this.logRemoveName=document.getElementById("log-remove-name"),this.logRemoveBackButton=document.getElementById("log-remove-back-button"),this.logRemoveBackButton.addEventListener("click",this.hideRemoveDialog),this.logsBackButton=document.getElementById("logs-back-button"),this.logsBackButton.addEventListener("click",(()=>{c("/logs")})),this.menuButton=document.getElementById("menu-button"),this.onWindowResize()}show(e){this.logDescr=e,this.reload(),s.gatewayModel.unsubscribe(o.REFRESH_THINGS,this.refreshThings),s.gatewayModel.subscribe(o.REFRESH_THINGS,this.refreshThings,!0)}reload(){this.end=new Date(Date.now());var e=!!this.logDescr;if(e){var t=[{listener:this.handleRemove.bind(this),name:a.getMessage("remove"),icon:"/images/remove.svg"}];s.buildOverflowMenu(t),s.showOverflowButton(),this.createLogButton.classList.add("hidden"),this.menuButton.classList.add("hidden"),this.logsBackButton.classList.remove("hidden"),this.view.classList.add("solo-view")}else s.hideOverflowButton(),this.createLogButton.classList.remove("hidden"),this.menuButton.classList.remove("hidden"),this.logsBackButton.classList.add("hidden"),this.logsHeader.textContent="Logs",this.view.classList.remove("solo-view");r.getLogs().then((t=>{for(var n in this.logs)this.logs[n].remove(),delete this.logs[n];var i=[];for(var r of t){var s=!0;if(e&&(s=r.thing===this.logDescr.thing&&r.property===this.logDescr.property),s){var o=new l(r.thing,r.property,this.start,this.end,e);this.logs[r.id]=o,this.logsContainer.appendChild(o.elt),i.push(o.load())}}return t&&0!==t.length?this.createLogHint.classList.add("hidden"):this.createLogHint.classList.remove("hidden"),Promise.all(i)})).then((()=>{this.streamAll()})).catch((e=>{s.showMessage("Server error: unable to retrieve logs",5e3),console.error("Unable to fetch schema",e)}))}streamAll(){if(!this.closing&&!this.messageSocket){var e="start=".concat(this.start.getTime(),"&end=").concat(this.end.getTime()),t="jwt=".concat(r.jwt,"&").concat(e),n="";this.thing&&(n="things/".concat(this.thing,"/properties/").concat(this.property));var i="".concat(s.ORIGIN.replace(/^http/,"ws"),"/logs/").concat(n,"?").concat(t);this.messageSocket=new WebSocket(i);var o=()=>{this.closing=!0,this.messageSocket&&(this.messageSocket.readyState!==WebSocket.OPEN&&this.messageSocket.readyState!==WebSocket.CONNECTING||this.messageSocket.close())};window.addEventListener("beforeunload",o);var a=e=>{var t=JSON.parse(e.data);for(var n of t)this.logs.hasOwnProperty(n.id)&&this.logs[n.id].addRawPoint(n)},l=()=>{for(var e in this.messageSocket.removeEventListener("message",a),this.messageSocket.removeEventListener("close",l),this.messageSocket.removeEventListener("error",l),this.messageSocket.close(),this.messageSocket=null,window.removeEventListener("beforeunload",o),this.logs)this.logs[e].loading=!1,this.logs[e].redraw()};this.messageSocket.addEventListener("message",a),this.messageSocket.addEventListener("close",l),this.messageSocket.addEventListener("error",l)}}refreshThings(e){this.createLogDevice.innerHTML="",this.things=e,e.forEach(((e,t)=>{for(var n in e.properties){var i=e.properties[n];if("boolean"===i.type||"number"===i.type||"integer"===i.type){var r=document.createElement("option");r.innerText=e.title,r.value=t,this.createLogDevice.appendChild(r);break}}})),this.createLogSaveButton.disabled=0===this.createLogDevice.childNodes.length,this.onCreateLogDeviceSelect()}onCreateLogDeviceSelect(){this.createLogProperty.innerHTML="";var e=this.things.get(this.createLogDevice.value);if(e)for(var t in e.properties){var n=e.properties[t];if("boolean"===n.type||"number"===n.type||"integer"===n.type){var i=document.createElement("option");i.innerText=n.title||u.capitalize(t),i.value=t,this.createLogProperty.appendChild(i)}}}showCreateLog(){this.createLogScreen.classList.remove("hidden"),s.hideOverflowButton()}hideCreateLog(){this.createLogScreen.classList.add("hidden"),this.reload()}onCreateLog(){var e,t=this;return(e=function*(){var e=t.createLogRetentionNumber.value;switch(t.createLogRetentionUnit.value){case"hours":e*=36e5;break;case"days":default:e*=864e5;break;case"weeks":e*=6048e5}r.addLog({descr:{type:"property",thing:t.createLogDevice.value,property:t.createLogProperty.value},maxAge:e}).then((e=>{var[n,i]=e;if(n)return t.createLogHint.classList.add("hidden"),void t.hideCreateLog();i?s.showMessage("".concat(a.getMessage("logs-unable-to-create"),": ").concat(i),5e3):s.showMessage(a.getMessage("logs-unable-to-create"),5e3)}))},function(){var t=this,n=arguments;return new Promise((function(r,s){var o=e.apply(t,n);function a(e){i(o,r,s,a,l,"next",e)}function l(e){i(o,r,s,a,l,"throw",e)}a(void 0)}))})()}onWindowResize(){this.resizeTimeout&&window.clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout((()=>{for(var e in this.logs)this.logs[e].dimension(),this.logs[e].drawSkeleton(),this.logs[e].redraw();this.resizeTimeout=null}),100)}handleEdit(){}handleRemove(){this.logRemoveName.textContent=this.logsHeader.textContent,this.logRemoveDialog.classList.remove("hidden")}hideRemoveDialog(){this.logRemoveDialog.classList.add("hidden")}onRemoveConfirm(){if(this.hideRemoveDialog(),this.logDescr){var e=this.logDescr.thing,t=this.logDescr.property;r.deleteLog(e,t).then((()=>{c("/logs")})).catch((()=>{s.showMessage(a.getMessage("logs-server-remove-error"),5e3)}))}else console.warn("Ignoring attempt to remove log from logs view")}}},2777:(e,t,n)=>{"use strict";n(66992),n(33948);var i=n(28797).default,r=n(29705),s={init:function(){this.element=document.getElementById("main-menu"),this.scrim=document.getElementById("menu-scrim"),this.hidden=!0,this.element.addEventListener("click",this.handleClick.bind(this)),this.scrim.addEventListener("click",this.handleScrimClick.bind(this)),this.items={},this.items.things=[document.getElementById("things-menu-item")],this.items.settings=[document.getElementById("settings-menu-item")],this.items.floorplan=[document.getElementById("floorplan-menu-item")],this.items.rules=[document.getElementById("rules-menu-item")],this.items.rule=[document.getElementById("rules-menu-item")],this.items.logs=[document.getElementById("logs-menu-item")],this.currentItem="things",this.menuButton=document.getElementById("menu-button")},getExperimentSetting:e=>{i.getExperimentSetting(e).then((t=>{t?s.showItem(e):s.hideItem(e)})).catch((t=>{console.warn("".concat(e," experiment setting is not yet set ").concat(t))}))},show:function(){this.element.classList.remove("hidden"),this.scrim.classList.remove("hidden"),this.menuButton.classList.add("menu-shown"),this.hidden=!1},hide:function(){this.element.classList.add("hidden"),this.scrim.classList.add("hidden"),this.menuButton.classList.remove("menu-shown"),this.hidden=!0},toggle:function(){this.hidden?this.show():this.hide()},handleClick:function(e){"A"==e.target.tagName&&this.hide()},handleScrimClick:function(e){this.hide()},selectItem:function(e){if(this.items[e]){for(var t of this.items[this.currentItem])t.classList.remove("selected");for(var n of this.items[e])n.classList.add("selected");this.currentItem=e}else e.startsWith("extension-")||console.error("Tried to select a menu item that didn't exist:",e)},showItem:function(e){for(var t of this.items[e])t.classList.remove("hidden")},hideItem:function(e){for(var t of this.items[e])t.classList.add("hidden")},addExtensionItem:function(e,t){var n=r.escapeHtmlForIdClass(e.id),i=document.createElement("a");i.id="extension-".concat(n,"-menu-item"),i.href="/extensions/".concat(encodeURIComponent(e.id)),i.innerText=t;var s=document.createElement("li");s.appendChild(i);var o=document.querySelector("#main-menu > ul"),a=Array.from(o.querySelectorAll("li")),l=document.getElementById("settings-menu-item").parentNode,c=document.getElementById("logout").parentNode,u=a.slice(a.indexOf(l)+1,a.indexOf(c));if(0===u.length)o.insertBefore(s,c);else{for(var h=c;u.length>0;){var d=u.pop();if(t.localeCompare(d.firstChild.innerText)>0)break;h=d}o.insertBefore(s,h)}this.items[e.view.id]=[i]}};e.exports=s},5834:(e,t,n)=>{"use strict";n(41817),n(24603),n(74916),n(66992),n(33948),n(73210),n(26699),n(60285),n(41637);var i=n(28797).default,r=n(29705),s=n(25290),{getClassFromCapability:o}=n(21310);e.exports=class{constructor(e,t){this.id=e,this.description=t,this.pinSet=!1,this.credentialsSet=!1,this.iconData=null,this.re=null,t.hasOwnProperty("pin")&&null!==t.pin.pattern&&(this.re=RegExp(t.pin.pattern)),this.container=document.getElementById("new-things"),this.element=document.createElement("div"),this.element.classList.add("new-thing"),this.element.id="new-thing-".concat(r.escapeHtmlForIdClass(this.id)),this.render(),this.container.appendChild(this.element)}requiresPin(){return this.description.hasOwnProperty("pin")&&this.description.pin.required&&!this.pinSet}requiresCredentials(){return this.description.credentialsRequired&&!this.credentialsSet}buildStandardView(){this.element.classList.remove("pin-required"),this.element.classList.remove("credentials-required");var e=[];Array.isArray(this.description["@type"])&&this.description["@type"].length>0&&(e=this.description["@type"]),(e=r.sortCapabilities(e)).push("Custom");var t="",n="",i="hidden",a=[];for(var l of e){n=s.getMessageStrict(l)||l,t||(t=o(l))||1!=e.length||(t="custom-thing"),l=r.escapeHtml(l),n=r.escapeHtml(n);var c="";0===a.length&&(c="selected","Custom"===l&&(i="")),a.push('<option value="'.concat(l,'" ').concat(c,">").concat(n,"</option>"))}(t=t.trim()||"custom-thing")&&this.element.classList.add(t),n||(n=s.getMessage("unknown-device-type"));var u=r.escapeHtmlForIdClass("new-thing-custom-icon-".concat(this.id));this.element.innerHTML='\n      <div class="new-thing-icon">\n        <webthing-custom-icon class="new-thing-custom-icon '.concat(i,'">\n        </webthing-custom-icon>\n      </div>\n      <div class="new-thing-metadata">\n        <input type="text" class="new-thing-title"\n               value="').concat(r.escapeHtml(this.description.title),'"/>\n        <select class="new-thing-type">').concat(a.join(""),'</select>\n        <span class="new-thing-spacer"></span>\n        <input type="file" class="new-thing-custom-icon-input hidden"\n          id="').concat(u,'" accept="image/jpeg,image/png,image/svg+xml">\n        <label for="').concat(u,'"\n          class="new-thing-custom-icon-label text-button ').concat(i,'"\n          data-l10n-id="new-thing-choose-icon">\n        </label>\n        <span class="new-thing-label"></span>\n      </div>\n      <button class="new-thing-save-button text-button"\n              data-l10n-id="new-thing-save">\n      </button>')}buildPinView(){this.element.classList.add("pin-required"),this.element.innerHTML='\n      <div class="new-thing-icon"></div>\n      <div class="new-thing-metadata">\n        <span class="new-thing-initial-title">\n          '.concat(r.escapeHtml(this.description.title),'\n        </span>\n        <input type="text" class="new-thing-pin" required autofocus\n               data-l10n-id="new-thing-pin"/>\n        <span class="new-thing-pin-error hidden"\n              data-l10n-id="new-thing-pin-error"></span>\n      </div>\n      <div class="new-thing-controls">\n        <button class="new-thing-cancel-button text-button"\n                data-l10n-id="new-thing-cancel">\n        </button>\n        <button class="new-thing-submit-button text-button"\n                data-l10n-id="new-thing-submit" disabled>\n        </button>\n      </div>')}buildCredentialsView(){this.element.classList.add("credentials-required"),this.element.innerHTML='\n      <div class="new-thing-icon"></div>\n      <div class="new-thing-metadata">\n        <span class="new-thing-initial-title">\n          '.concat(r.escapeHtml(this.description.title),'\n        </span>\n        <input type="text" class="new-thing-username" required autofocus\n               data-l10n-id="new-thing-username"/>\n        <input type="password" class="new-thing-password" required\n               data-l10n-id="new-thing-password"/>\n        <span class="new-thing-credentials-error hidden"\n              data-l10n-id="new-thing-credentials-error">\n        </span>\n      </div>\n      <div class="new-thing-controls">\n        <button class="new-thing-cancel-button text-button"\n                data-l10n-id="new-thing-cancel">\n        </button>\n        <button class="new-thing-submit-button text-button" disabled\n                data-l10n-id="new-thing-submit">\n        </button>\n      </div>')}buildView(){this.requiresPin()?this.buildPinView():this.requiresCredentials()?this.buildCredentialsView():this.buildStandardView()}render(){this.buildView(),this.requiresPin()?(this.pinInput=this.element.querySelector(".new-thing-pin"),this.pinError=this.element.querySelector(".new-thing-pin-error"),this.cancelButton=this.element.querySelector(".new-thing-cancel-button"),this.submitButton=this.element.querySelector(".new-thing-submit-button"),this.pinInput.addEventListener("input",this.handlePinInput.bind(this)),this.cancelButton.addEventListener("click",this.handleCancel.bind(this)),this.submitButton.addEventListener("click",this.handleSubmit.bind(this))):this.requiresCredentials()?(this.usernameInput=this.element.querySelector(".new-thing-username"),this.passwordInput=this.element.querySelector(".new-thing-password"),this.credentialsError=this.element.querySelector(".new-thing-credentials-error"),this.cancelButton=this.element.querySelector(".new-thing-cancel-button"),this.submitButton=this.element.querySelector(".new-thing-submit-button"),this.usernameInput.addEventListener("input",this.handleCredentialsInput.bind(this)),this.passwordInput.addEventListener("input",this.handleCredentialsInput.bind(this)),this.cancelButton.addEventListener("click",this.handleCancel.bind(this)),this.submitButton.addEventListener("click",this.handleSubmit.bind(this))):(this.titleInput=this.element.querySelector(".new-thing-title"),this.saveButton=this.element.querySelector(".new-thing-save-button"),this.thingType=this.element.querySelector(".new-thing-type"),this.customIcon=this.element.querySelector(".new-thing-custom-icon"),this.customIconInput=this.element.querySelector(".new-thing-custom-icon-input"),this.customIconLabel=this.element.querySelector(".new-thing-custom-icon-label"),this.label=this.element.querySelector(".new-thing-label"),this.saveButton.addEventListener("click",this.handleSave.bind(this)),this.thingType.addEventListener("change",this.handleTypeChange.bind(this)),this.customIconInput.addEventListener("change",this.handleIconUpload.bind(this)))}handlePinInput(){var e,t=this.pinInput.value.trim();e=null!==this.re?this.re.test(t):t.length>0,this.submitButton.disabled=!e,e?this.pinInput.setCustomValidity(""):this.pinInput.setCustomValidity(s.getMessage("new-thing-pin-invalid"))}handleCredentialsInput(){var e=this.usernameInput.value,t=this.passwordInput.value;this.submitButton.disabled=0===e.length||0===t.length}handleCancel(){this.container.removeChild(this.element)}handleSubmit(){this.submitButton.disabled=!0;var e={};this.requiresPin()?e.pin=this.pinInput.value.trim():this.requiresCredentials()&&(e.username=this.usernameInput.value,e.password=this.passwordInput.value),i.setThingCredentials(this.id,e).then((e=>{this.description=e,this.requiresPin()?(this.pinError.classList.add("hidden"),this.pinSet=!0):this.requiresCredentials()&&(this.credentialsError.classList.add("hidden"),this.credentialsSet=!0),this.render()})).catch((e=>{console.error("Failed to set PIN/credentials: ".concat(e)),this.submitButton.disabled=!1,this.pinError?this.pinError.classList.remove("hidden"):this.credentialsError&&this.credentialsError.classList.remove("hidden")}))}handleTypeChange(){var e=this.thingType.options[this.thingType.selectedIndex].value;this.customIconLabel.classList.add("hidden"),this.customIcon.classList.add("hidden");var t=o(e);"Custom"==e&&(this.customIconLabel.classList.remove("hidden"),this.customIcon.classList.remove("hidden")),this.element.classList.remove("on-off-switch","multi-level-switch","color-control","energy-monitor","binary-sensor","multi-level-sensor","smart-plug","light","door-sensor","motion-sensor","leak-sensor","smoke-sensor","push-button","video-camera","camera","temperature-sensor","alarm","thermostat","lock","humidity-sensor","air-quality-sensor","barometric-pressure-sensor"),t&&this.element.classList.add(t)}handleIconUpload(){if(this.label.classList.add("hidden"),0!==this.customIconInput.files.length){var e=this.customIconInput.files[0];if(!["image/jpeg","image/png","image/svg+xml"].includes(e.type))return this.label.innerText=s.getMessage("invalid-file"),this.label.classList.add("error"),void this.label.classList.remove("hidden");var t=new FileReader;t.onloadend=t=>{if(t.target.error)return console.error(t.target.error),this.label.innerText=s.getMessage("failed-read-file"),this.label.classList.add("error"),this.label.classList.remove("hidden"),void(this.saveButton.disabled=!1);this.iconData={mime:e.type,data:btoa(t.target.result)},this.saveButton.disabled=!1,this.customIcon.iconHref=URL.createObjectURL(e),this.customIcon.classList.remove("hidden")},this.saveButton.disabled=!0,t.readAsBinaryString(e)}}handleSave(){this.thingType.disabled=!0,this.titleInput.disabled=!0,this.saveButton.disabled=!0,this.customIconInput.disabled=!0;var e=this.description;e.id=this.id,e.title=this.titleInput.value,this.thingType.options.length>0&&(e.selectedCapability=this.thingType.options[this.thingType.selectedIndex].value),"Custom"===e.selectedCapability&&this.iconData&&(e.iconData=this.iconData),i.addThing(e).then((()=>{this.saveButton.textContent=s.getMessage("new-thing-saved");var e=document.getElementById("add-thing-cancel-button");e&&(e.textContent=s.getMessage("new-thing-done"))})).catch((e=>{console.error("Failed to save thing ".concat(e)),this.label.innerText=s.getMessage("failed-save"),this.label.classList.add("error"),this.label.classList.remove("hidden"),this.thingType.disabled=!1,this.titleInput.disabled=!1,this.saveButton.disabled=!1,this.customIconInput.disabled=!1}))}}},89993:(e,t,n)=>{"use strict";n(41817),n(26699),n(66992),n(33948),n(60285),n(41637),n(74916),n(15306),n(73210);var i=n(28797).default,r=n(25290),s=n(29705),{getClassFromCapability:o}=n(21310),a=-1;e.exports=class{constructor(){this.id="web-thing-".concat(a+=1),this.originalId=this.id,this.url=null,this.iconData=null,this.description=null,this.container=document.getElementById("new-things"),this.render(),this.element=document.getElementById("new-web-thing-".concat(s.escapeHtmlForIdClass(this.originalId))),this.thingType=this.element.querySelector(".new-thing-type"),this.customIcon=this.element.querySelector(".new-thing-custom-icon"),this.customIconInput=this.element.querySelector(".new-thing-custom-icon-input"),this.customIconLabel=this.element.querySelector(".new-thing-custom-icon-label"),this.label=this.element.querySelector(".new-web-thing-label"),this.originLabel=this.element.querySelector(".new-web-thing-origin"),this.urlInput=this.element.querySelector(".new-web-thing-url"),this.titleInput=this.element.querySelector(".new-web-thing-title"),this.cancelButton=this.element.querySelector(".new-web-thing-cancel-button"),this.submitButton=this.element.querySelector(".new-web-thing-submit-button"),this.saveButton=this.element.querySelector(".new-web-thing-save-button"),this.element.addEventListener("click",this.handleClick.bind(this)),this.thingType.addEventListener("change",this.handleTypeChange.bind(this)),this.customIconInput.addEventListener("change",this.handleIconUpload.bind(this))}view(){var e=s.escapeHtmlForIdClass("new-thing-custom-icon-".concat(this.id));return'\n      <div id="new-web-thing-'.concat(s.escapeHtmlForIdClass(this.originalId),'"\n           class="new-thing web-thing">\n        <div class="new-thing-icon">\n          <webthing-custom-icon class="new-thing-custom-icon hidden">\n          </webthing-custom-icon>\n        </div>\n        <div class="new-thing-metadata">\n          <input type="text" class="new-web-thing-url"\n            data-l10n-id="new-web-thing-url"></input>\n          <input type="text" class="new-web-thing-title hidden"></input>\n          <span class="new-web-thing-origin hidden"></span>\n          <select class="new-thing-type hidden"></select>\n          <span class="new-thing-spacer"></span>\n          <input type="file" class="new-thing-custom-icon-input hidden"\n            id="').concat(e,'" accept="image/jpeg,image/png,image/svg+xml">\n          <label for="').concat(e,'"\n            class="new-thing-custom-icon-label text-button hidden"\n            data-l10n-id="new-thing-choose-icon">\n          </label>\n          <span class="new-web-thing-label"\n                data-l10n-id="new-web-thing-label"></span>\n          <div class="new-web-thing-controls">\n            <button class="new-web-thing-cancel-button text-button"\n              data-l10n-id="new-thing-cancel">\n            </button>\n            <button class="new-web-thing-submit-button text-button"\n              data-l10n-id="new-thing-submit">\n            </button>\n            <button class="new-web-thing-save-button text-button hidden"\n              data-l10n-id="new-thing-save">\n            </button>\n          </div>\n        </div>\n      </div>')}render(){this.container.insertAdjacentHTML("beforeend",this.view())}handleTypeChange(){var e=this.thingType.options[this.thingType.selectedIndex].value;this.customIconLabel.classList.add("hidden"),this.customIcon.classList.add("hidden");var t=o(e);"Custom"==e&&(this.customIconLabel.classList.remove("hidden"),this.customIcon.classList.remove("hidden")),this.element.classList.remove("on-off-switch","multi-level-switch","color-control","color-sensor","energy-monitor","binary-sensor","multi-level-sensor","smart-plug","light","door-sensor","motion-sensor","leak-sensor","smoke-sensor","push-button","video-camera","camera","temperature-sensor","alarm","thermostat","lock","humidity-sensor","air-quality-sensor","barometric-pressure-sensor"),t&&this.element.classList.add(t)}handleIconUpload(){if(this.label.classList.add("hidden"),0!==this.customIconInput.files.length){var e=this.customIconInput.files[0];if(!["image/jpeg","image/png","image/svg+xml"].includes(e.type))return this.label.innerText=r.getMessage("invalid-file"),this.label.classList.add("error"),void this.label.clsssList.remove("hidden");var t=new FileReader;t.onloadend=t=>{if(t.target.error)return console.error(t.target.error),this.label.innerText=r.getMessage("failed-read-file"),this.label.classList.add("error"),this.label.clsssList.remove("hidden"),void(this.saveButton.disabled=!1);this.iconData={mime:e.type,data:btoa(t.target.result)},this.saveButton.disabled=!1,this.customIcon.iconHref=URL.createObjectURL(e),this.customIcon.classList.remove("hidden")},this.saveButton.disabled=!0,t.readAsBinaryString(e)}}handleClick(e){e.target.classList.contains("new-web-thing-save-button")?this.save():e.target.classList.contains("new-web-thing-submit-button")?this.submit():e.target.classList.contains("new-web-thing-cancel-button")&&this.cancel()}cancel(){this.container.removeChild(this.element)}submit(){this.label.innerText=r.getMessage("loading"),this.label.classList.remove("error");var e,t=this.urlInput.value.replace(/\/$/,"");t.startsWith("http://")||t.startsWith("https://")||(t="http://".concat(t)),this.urlInput.value=t,this.url=t;try{e=new URL(t)}catch(e){return}i.addWebThing(t).then((t=>{if(Array.isArray(t))return this.label.innerText=r.getMessage("new-web-thing-multiple"),void this.label.classList.add("error");var n=[];Array.isArray(t["@type"])&&t["@type"].length>0&&(n=t["@type"]),(n=s.sortCapabilities(n)).push("Custom"),this.customIconLabel.classList.add("hidden");var i="";for(var a of n){var l=document.createElement("option");l.value=a,l.innerText=r.getMessageStrict(a)||a,i||(i=o(a))||1!=n.length||(i="custom-thing"),0===this.thingType.options.length&&(l.selected=!0,"Custom"===a&&this.customIconLabel.classList.remove("hidden")),this.thingType.appendChild(l)}this.description=t,this.description.hasOwnProperty("href")&&(this.url=e.origin+t.href),this.id=this.url.replace(/[:/]/g,"-"),this.element.classList.remove("web-thing"),this.label.classList.remove("error"),this.label.classList.add("hidden"),this.thingType.classList.remove("hidden"),this.titleInput.value=t.title,this.originLabel.innerText="".concat(r.getMessage("new-web-thing-from")," ").concat(e.host),this.urlInput.classList.add("hidden"),this.titleInput.classList.remove("hidden"),this.submitButton.classList.add("hidden"),this.saveButton.classList.remove("hidden"),this.originLabel.classList.remove("hidden"),(i=i.trim()||"custom-thing")&&this.element.classList.add(i)})).catch((e=>{this.label.innerText=e.message,this.label.classList.add("error"),console.error("Failed to check web thing:",e.message)}))}save(){this.thingType.disabled=!0,this.titleInput.disabled=!0,this.saveButton.disabled=!0,this.customIconInput.disabled=!0,this.cancelButton.classList.add("hidden");var e=this.description;e.id=this.id,e.title=this.titleInput.value,e.webthingUrl=this.url,this.thingType.options.length>0&&(e.selectedCapability=this.thingType.options[this.thingType.selectedIndex].value),"Custom"===e.selectedCapability&&this.iconData&&(e.iconData=this.iconData),i.addThing(e).then((()=>{this.saveButton.innerHTML=r.getMessage("new-thing-saved");var e=document.getElementById("add-thing-cancel-button");e&&(e.textContent=r.getMessage("new-thing-done"))})).catch((e=>{console.error("Failed to save web thing:",e.message),this.label.innerText=r.getMessage("failed-save"),this.label.classList.add("error"),this.label.classList.remove("hidden"),this.thingType.disabled=!1,this.titleInput.disabled=!1,this.saveButton.disabled=!1,this.customIconInput.disabled=!1,this.cancelButton.classList.remove("hidden"),this.reset()}))}reset(){this.description=null,this.url=null,this.id=this.originalId,this.urlInput.value="",this.titleInput.value="",this.originLabel.innerText="",this.element.classList.remove("binary-sensor","multi-level-sensor","light","on-off-switch","multi-level-switch","color-control","color-sensor","energy-monitor","smart-plug","door-sensor","motion-sensor","leak-sensor","smoke-sensor","push-button","video-camera","camera","temperature-sensor","alarm","thermostat","lock","humidity-sensor","air-quality-sensor","barometric-pressure-sensor"),this.element.classList.add("web-thing"),this.urlInput.classList.remove("hidden"),this.titleInput.classList.add("hidden"),this.submitButton.classList.remove("hidden"),this.saveButton.classList.add("hidden"),this.originLabel.classList.add("hidden")}}},89108:(e,t,n)=>{"use strict";function i(e,t,n,i,r,s,o){try{var a=e[s](o),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(i,r)}function r(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var o=e.apply(t,n);function a(e){i(o,r,s,a,l,"next",e)}function l(e){i(o,r,s,a,l,"throw",e)}a(void 0)}))}}n(66992),n(33948),n(74916),n(88674),n(54747);var s,o,a,l=n(28797).default,c=n(90071),u=n(76089),h=n(44608),d=n(12890),p=n(44037),f=n(22747),m=n(60901),g=n(55161),v={init:function(){this.gateway=new u,this.onPresentationChange=this.onPresentationChange.bind(this),this.onRuleChange=this.onRuleChange.bind(this),this.onRuleDescriptionInput=this.onRuleDescriptionInput.bind(this),this.onAnimatePlayStopClick=this.onAnimatePlayStopClick.bind(this),this.animate=this.animate.bind(this),this.animateDelay=1e3,this.rule=null,this.partBlocks=[],this.ruleEffectType="SetEffect",this.view=document.getElementById("rule-view"),this.titleBar=this.view.querySelector(".title-bar"),this.ruleArea=document.getElementById("rule-area"),this.ruleName=this.view.querySelector(".rule-name"),this.ruleNameCustomize=this.view.querySelector(".rule-name-customize"),this.animatePlayStop=this.view.querySelector(".rule-preview-button"),this.animatePlayStop.addEventListener("click",this.onAnimatePlayStopClick);var e=()=>{var e=document.createRange();e.selectNodeContents(this.ruleName);var t=window.getSelection();t.removeAllRanges(),t.addRange(e)};this.ruleNameCustomize.addEventListener("click",e),this.ruleName.addEventListener("dblclick",(t=>{t.preventDefault(),e()})),this.ruleName.contentEditable=!0,this.ruleName.addEventListener("keypress",(e=>{"Enter"===e.key&&(e.preventDefault(),this.ruleName.blur())})),this.ruleName.addEventListener("blur",(()=>{this.rule.name=this.ruleName.textContent,this.rule.update(),this.onPresentationChange()})),this.ruleDescription=this.view.querySelector(".rule-info > p"),this.ruleDescription.addEventListener("input",this.onRuleDescriptionInput),this.rulePartsList=document.getElementById("rule-parts-list"),this.onboardingHint=document.getElementById("onboarding-hint"),this.connection=document.getElementById("connection"),this.deleteOverlay=document.getElementById("rule-delete-overlay"),this.deleteButton=document.getElementById("delete-button"),this.deleteCancel=this.view.querySelector(".rule-delete-cancel-button"),this.deleteConfirm=this.view.querySelector(".rule-delete-confirm-button"),this.deleteButton.addEventListener("click",(()=>{this.deleteOverlay.classList.add("active")})),this.deleteCancel.addEventListener("click",(()=>{this.deleteOverlay.classList.remove("active")})),this.deleteConfirm.addEventListener("click",(()=>{this.rule.delete().then((()=>{this.deleteOverlay.classList.remove("active"),g("/rules")}))})),this.onScrollLeftClick=this.onScrollLeftClick.bind(this),this.onScrollRightClick=this.onScrollRightClick.bind(this);var t=document.getElementById("rule-parts-list-scroll-left"),n=document.getElementById("rule-parts-list-scroll-right");t.addEventListener("click",this.onScrollLeftClick),t.addEventListener("touchstart",this.onScrollLeftClick,{passive:!0}),n.addEventListener("click",this.onScrollRightClick),n.addEventListener("touchstart",this.onScrollRightClick,{passive:!0}),this.onWindowResize=this.onWindowResize.bind(this),window.addEventListener("resize",this.onWindowResize),this.onWindowResize()},getEffectType:function(){return"If"===this.ruleDescription.querySelector(".rule-effect-select").value?"SetEffect":"PulseEffect"},onRuleDescriptionInput:function(e){var t=e.target.value;if(e.target.classList.contains("rule-trigger-select"))"and"===t?this.rule.trigger.op="AND":"or"===t&&(this.rule.trigger.op="OR");else if(e.target.classList.contains("rule-effect-select")){var n=this.getEffectType();for(var i of(this.ruleEffectType=n,this.rule.effect.effects))"SetEffect"!==i.type&&"PulseEffect"!==i.type||(i.type=n)}else console.warn("Unexpected input event",e);this.onRuleChange()},onDeviceBlockDown:function(e,t){if(this.rule){var n=t.target.getBoundingClientRect(),i=n.left,r=n.top,s=new c(this.ruleArea,this.onPresentationChange,this.onRuleChange,e);s.snapToGrid(i,r),s.draggable.onDown(t),this.partBlocks.push(s)}},onBlockDown:function(e,t){if(this.rule){var n=t.target.getBoundingClientRect(),i=n.left,r=n.top,s=e();s.snapToGrid(i,r),s.draggable.onDown(t),this.partBlocks.push(s)}},makeBlock:(e,t,n)=>{var i=document.createElement("div");return i.classList.add("rule-part"),i.innerHTML='<div class="rule-part-block '.concat(e,'">\n      <img class="rule-part-icon" src="').concat(t,'"/>\n    </div>\n    <p>').concat(n,"</p>"),i},makeRulePartBlock:function(e,t){var n=null;if("TimeTrigger"===t.type)n=new m(this.ruleArea,this.onPresentationChange,this.onRuleChange);else if("NotificationEffect"===t.type)n=new p(this.ruleArea,this.onPresentationChange,this.onRuleChange);else if("NotifierOutletEffect"===t.type){var i=this.gateway.notifiers.filter((e=>e.id===t.notifier))[0];if(!i)return;var r=i.outlets.filter((e=>e.id===t.outlet))[0];if(!r)return;n=new f(this.ruleArea,this.onPresentationChange,this.onRuleChange,i,r,{title:t.title,message:t.message,level:t.level})}else{var s=d.thingFromPart(this.gateway,t);if(!s)return;n=new c(this.ruleArea,this.onPresentationChange,this.onRuleChange,s)}var o={};o[e]=t,n.setRulePart(o),n.snapToCenter(),this.partBlocks.push(n)},showConnection:function(){this.connection.classList.remove("hidden");var e=document.getElementById("drag-hint"),t=window.getComputedStyle(e).flexDirection;function n(e){var t=e.querySelector(".selected");return t?JSON.parse(t.dataset.ruleFragment):e.querySelector(".time-input")||e.querySelector(".message-input-container")||e.querySelector(".open-button")}var i=Array.from(this.ruleArea.querySelectorAll(".rule-part-block.trigger")).map((e=>e.parentNode)).filter(n),r=Array.from(this.ruleArea.querySelectorAll(".rule-part-block.effect")).map((e=>e.parentNode)).filter(n);if(0!==i.length&&0!==r.length){var s=this.ruleArea.getBoundingClientRect(),o={x:s.width/2,y:s.height/2},a=i.length>1,l=r.length>1,c=i[0].getBoundingClientRect();for(var u of(this.connection.innerHTML="",r)){var h=x(u),d=o;a||(d=_(i[0]));var p=document.createElementNS("http://www.w3.org/2000/svg","circle");if(p.classList.add("effect"),p.setAttribute("r",6),p.setAttribute("cx",h.x),p.setAttribute("cy",h.y),this.connection.appendChild(p),!a||l){var f=S(d,h);f.classList.add("effect"),this.connection.appendChild(f)}}for(var m of i){var g=_(m),v=document.createElementNS("http://www.w3.org/2000/svg","circle");if(v.classList.add("trigger"),v.setAttribute("r",6),v.setAttribute("cx",g.x),v.setAttribute("cy",g.y),this.connection.insertBefore(v,this.connection.firstChild),a){var y=o;l||(y=x(r[0]));var b=S(g,y);b.classList.add("trigger"),this.connection.appendChild(b)}}if(a&&l){var w=document.createElementNS("http://www.w3.org/2000/svg","circle");w.classList.add("center"),w.setAttribute("r",6),w.setAttribute("cx",o.x),w.setAttribute("cy",o.y),this.connection.appendChild(w)}}function E(e){var t=e.style.transform.match(/translate\((\d+)px, +(\d+)px\)/);return t?{x:parseFloat(t[1]),y:parseFloat(t[2])}:{x:0,y:0}}function _(e){var n=E(e);return"column"===t?(n.x+=c.width/2,n.y+=c.height+10):(n.x+=c.width+10,n.y+=c.height/2),n}function x(e){var n=E(e);return"column"===t?(n.x+=c.width/2,n.y-=10):(n.x-=10,n.y+=c.height/2),n}function S(e,t){var n=(e.x+t.x)/2,i=["M",e.x,e.y,"C",n,e.y,n,t.y,t.x,t.y].join(" "),r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("d",i),r}},hideConnection:function(){this.connection.classList.add("hidden")},partBlocksByRole:function(){var e=[],t=[];for(var n of this.partBlocks)n.rulePart&&(n.rulePart.trigger&&e.push(n),n.rulePart.effect&&t.push(n));return{triggerBlocks:e,effectBlocks:t}},onRuleChange:function(){if(this.rule){this.partBlocks=this.partBlocks.filter((e=>"removed"!==e.role));var{triggerBlocks:e,effectBlocks:t}=this.partBlocksByRole(),n=e.map((e=>e.rulePart.trigger)),i="AND";this.rule.trigger&&(i=this.rule.trigger.op||i),this.rule.trigger={type:"MultiTrigger",op:i,triggers:n};var r=t.map((e=>e.rulePart.effect));this.rule.effect={type:"MultiEffect",effects:r};var s=this.getEffectType();for(var o of this.rule.effect.effects)"SetEffect"!==o.type&&"PulseEffect"!==o.type||(o.type=s);this.rule.update(),this.onPresentationChange()}},onPresentationChange:function(){this.ruleName.textContent=this.rule.name||"Rule Name",this.ruleDescription.innerHTML=this.rule.toHumanInterface();var e=this.ruleDescription.querySelector(".rule-effect-select");this.rule.effect&&0===this.rule.effect.effects.length&&(e.value="SetEffect"===this.ruleEffectType?"If":"While"),"If"===e.value?e.style.width="1.8rem":delete e.style.width;var t=this.rule.valid();t?this.titleBar.classList.remove("invalid"):this.titleBar.classList.add("invalid"),t&&!document.querySelector(".dragging")?this.showConnection():this.hideConnection(),document.querySelector(".rule-part-container")?this.onboardingHint.classList.add("hidden"):this.onboardingHint.classList.remove("hidden")},show:(a=r((function*(e){this.rule=null,this.ruleEffectType="SetEffect";var t=Promise.resolve(null);function n(e){return e.parentNode.removeChild(e)}"new"!==e&&(t=l.getRule(e)),this.partBlocks.forEach((e=>{e.remove()})),this.rulePartsList.querySelectorAll(".rule-part").forEach(n),this.showSimpleBlocks(),yield this.showNotifierOutletBlocks(),yield this.showDeviceBlocks(),this.onWindowResize();var i=yield t;if(this.rule=new h(this.gateway,i),this.ruleArea.querySelectorAll(".rule-part-container").forEach(n),i){var r=document.getElementById("drag-hint"),s=window.getComputedStyle(r).flexDirection,o=this.ruleArea.getBoundingClientRect(),a={width:300,height:100},c=o.width/2-a.width/2,u=o.height/2-a.height/2;this.rule.trigger||(this.rule.trigger={type:"MultiTrigger",op:"AND",triggers:[]}),"MultiTrigger"!==this.rule.trigger.type&&(this.rule.trigger={type:"MultiTrigger",op:"AND",triggers:[this.rule.trigger]});var d=this.rule.trigger.triggers;for(var p of d)"column"===s?this.makeRulePartBlock("trigger",p,c,o.height/4-a.height/2):this.makeRulePartBlock("trigger",p,o.width/4-a.width/2,u);this.rule.effect||(this.rule.effect={type:"MultiEffect",effects:[]}),"MultiEffect"!==this.rule.effect.type&&(this.rule.effect={type:"MultiEffect",effects:[this.rule.effect]});var f=this.rule.effect.effects;for(var m of f)"column"===s?this.makeRulePartBlock("effect",m,c,3*o.height/4-a.height/2):this.makeRulePartBlock("effect",m,3*o.width/4-a.width/2,u)}this.onWindowResize(),this.onRuleChange()})),function(e){return a.apply(this,arguments)}),showSimpleBlocks:function(){var e=this.makeBlock("time-trigger-block","/images/thing-icons/clock.svg","Clock"),t=this.onBlockDown.bind(this,(()=>new m(this.ruleArea,this.onPresentationChange,this.onRuleChange)));e.addEventListener("mousedown",t),e.addEventListener("touchstart",t),this.rulePartsList.appendChild(e);var n=this.makeBlock("notification-effect-block","/images/thing-icons/notification.svg","Browser Notification"),i=this.onBlockDown.bind(this,(()=>new p(this.ruleArea,this.onPresentationChange,this.onRuleChange)));n.addEventListener("mousedown",i),n.addEventListener("touchstart",i),this.rulePartsList.appendChild(n)},showNotifierOutletBlocks:(o=r((function*(){var e=yield this.gateway.readNotifiers(),t=(e,t)=>()=>new f(this.ruleArea,this.onPresentationChange,this.onRuleChange,e,t);for(var n of e)for(var i of n.outlets){var r=this.makeBlock("notifier-outlet-block","/images/thing-icons/notification.svg","".concat(i.name," Notification")),s=this.onBlockDown.bind(this,t(n,i));r.addEventListener("mousedown",s),r.addEventListener("touchstart",s),this.rulePartsList.appendChild(r)}})),function(){return o.apply(this,arguments)}),showDeviceBlocks:(s=r((function*(){var e=yield this.gateway.readThings();for(var t of e){var n=this.makeBlock("device-block",d.icon(t),t.title);n.addEventListener("mousedown",this.onDeviceBlockDown.bind(this,t)),n.addEventListener("touchstart",this.onDeviceBlockDown.bind(this,t)),this.rulePartsList.appendChild(n)}})),function(){return s.apply(this,arguments)}),onWindowResize:function(){var e=this.rulePartsList.scrollWidth,t=this.rulePartsList.getBoundingClientRect().width,n=document.getElementById("rule-parts-list-scroll-left"),i=document.getElementById("rule-parts-list-scroll-right");if(t<e?(n.classList.remove("hidden"),i.classList.remove("hidden")):(n.classList.add("hidden"),i.classList.add("hidden")),this.rule){var{triggerBlocks:r,effectBlocks:s}=this.partBlocksByRole();r.forEach(((e,t)=>{e.snapToCenter(t,r.length)})),s.forEach(((e,t)=>{e.snapToCenter(t,s.length)})),this.onPresentationChange()}},onScrollLeftClick:function(){this.rulePartsList.scrollLeft-=128},onScrollRightClick:function(){this.rulePartsList.scrollLeft+=128},onAnimatePlayStopClick:function(){this.animatePlayStop.classList.contains("stop")?this.stopAnimate():this.startAnimate()},startAnimate:function(){this.animateTimeout&&clearTimeout(this.animateTimeout),this.rule&&this.rule.valid()&&(this.animateStep=-1,this.ruleArea.querySelectorAll(".rule-part-block").forEach((e=>{e.classList.add("inactive")})),this.animatePlayStop.classList.add("stop"),setTimeout(this.animate,this.animateDelay))},animate:function(){this.animateStep+=1;var e=this.animateStep>>1,t=!!(1&this.animateStep);if(e>this.rule.trigger.triggers.length)this.stopAnimate();else{var n=this.ruleArea.querySelectorAll(".rule-part-block.trigger"),i=this.ruleArea.querySelectorAll(".rule-part-block.effect"),r=this.connection.querySelectorAll("path.trigger"),s=this.connection.querySelectorAll("path.effect"),o=this.connection.querySelectorAll("circle.trigger"),a=this.connection.querySelectorAll("circle.effect"),l=this.connection.querySelector("circle.center");if(t)if(e===n.length)for(var c=0;c<n.length;c++)f(c);else f(e);else e>0&&f(e-1);var u=e===n.length||1===n.length;if(!t)if(e===this.rule.trigger.triggers.length)for(var h=0;h<n.length;h++)p(h);else p(e);t&&"SetEffect"!==this.getEffectType()||!u&&"OR"!==this.rule.trigger.op?(i.forEach((e=>{e.classList.add("inactive")})),l&&l.classList.remove("active"),s.forEach((e=>{e.classList.remove("active")})),a.forEach((e=>{e.classList.remove("active")}))):(i.forEach((e=>{e.classList.remove("inactive")})),l&&l.classList.add("active"),s.forEach((e=>{e.classList.add("active")})),a.forEach((e=>{e.classList.add("active")})));var d=this.animateDelay;t&&(d/=1.5),this.animateTimeout=setTimeout(this.animate,d)}function p(e){n[e].classList.remove("inactive"),r.length>0&&r[e].classList.add("active"),o[e].classList.add("active")}function f(e){n[e].classList.add("inactive"),r.length>0&&r[e].classList.remove("active"),o[e].classList.remove("active")}},stopAnimate:function(){this.animateTimeout&&(clearTimeout(this.animateTimeout),this.animateTimeout=null),this.ruleArea.querySelectorAll(".rule-part-block.inactive").forEach((e=>{e.classList.remove("inactive")})),this.connection.querySelectorAll(".active").forEach((e=>{e.classList.remove("active")})),this.animatePlayStop.classList.remove("stop")}};window.RuleScreen=v,e.exports=v},68188:(e,t,n)=>{"use strict";n(54747),n(66992),n(33948),n(88674);var i=n(28797).default,r=n(76089),s=n(29332),o=n(55161),a={init:function(){this.createRuleButton=document.getElementById("create-rule-button"),this.createRuleHint=document.getElementById("create-rule-hint"),this.rulesList=document.getElementById("rules"),this.gateway=new r,this.nextId=0,this.createRuleButton.addEventListener("click",(()=>{o("/rules/new")}))},readRules:function(){return i.getRules().then((e=>{for(var t of(this.rulesList.querySelectorAll(".rule").forEach((e=>{e.parentNode.removeChild(e)})),e))this.addRuleCard(t);0===e.length?this.createRuleHint.classList.remove("hidden"):this.createRuleHint.classList.add("hidden")}))},addRuleCard:function(e){var t=document.createElement("div");t.classList.add("rule");try{new s(this.gateway,t,this.nextId,e)}catch(t){return console.error("Invalid rule",e,t),void(this.nextId+=1)}this.nextId+=1,this.rulesList.appendChild(t)},show:function(){Promise.all([this.gateway.readThings(),this.gateway.readNotifiers()]).then((()=>this.readRules()))}};e.exports=a},64502:(e,t,n)=>{"use strict";n(66992),n(33948),n(54747),n(74916),n(88674),n(2707),n(41637),n(41817),n(60285);var i=n(68173),r=n(28797).default,s=n(96710),o=n(35007),a=n(3820),l=n(25290),c=n(48826),u=n(1476)({exact:!0}),h=n(2777),d=n(55161),p=n(37304),f=n(19733),m=n(29705),g=n(26113),v={init:function(){this.elements={},this.view=document.getElementById("settings-view"),this.menu=document.getElementById("settings-menu"),this.domainSettings=document.getElementById("domain-settings"),this.userSettings=document.getElementById("user-settings"),this.userSettingsMain=document.getElementById("user-settings-main"),this.userSettingsEdit=document.getElementById("user-settings-edit"),this.userSettingsAdd=document.getElementById("user-settings-add"),this.addUserButton=document.getElementById("add-user-button"),this.adapterSettings=document.getElementById("adapter-settings"),this.addonSettings=document.getElementById("addon-settings"),this.addonMainSettings=document.getElementById("addon-main-settings"),this.addonConfigSettings=document.getElementById("addon-config-settings"),this.addonDiscoverySettings=document.getElementById("addon-discovery-settings"),this.addonConfigSettings=document.getElementById("addon-config-settings"),this.discoverAddonsButton=document.getElementById("discover-addons-button"),this.discoveredAddonsSearch=document.getElementById("discovered-addons-search"),this.experimentSettings=document.getElementById("experiment-settings"),this.localizationSettings=document.getElementById("localization-settings"),this.updateSettings=document.getElementById("update-settings"),this.authorizationSettings=document.getElementById("authorization-settings"),this.developerSettings=document.getElementById("developer-settings"),this.backButton=document.getElementById("settings-back-button"),this.availableAddons=new Map,this.installedAddons=new Map,this.fetchInstalledAddonsDeferred=null,this.fetchAvailableAddonsDeferred=null,this.availableAddonsLastFetched=null,this.insertTitleElement(this.menu,l.getMessage("settings"),"/images/settings-icon.png"),this.insertTitleElement(this.domainSettings,l.getMessage("domain"),"/images/domain-icon.png"),this.insertTitleElement(this.userSettingsMain,l.getMessage("users"),"/images/users-icon.png"),this.insertTitleElement(this.userSettingsEdit,l.getMessage("edit-user"),"/images/user.svg"),this.insertTitleElement(this.userSettingsAdd,l.getMessage("add-user"),"/images/user.svg"),this.insertTitleElement(this.adapterSettings,l.getMessage("adapters"),"/images/adapters-icon.png"),this.insertTitleElement(this.addonMainSettings,l.getMessage("addons"),"/images/add-on.svg");var e=this.insertTitleElement(this.addonConfigSettings,l.getMessage("addon-config"),"/images/add-on.svg");this.addonConfigTitleName=e.querySelector(".section-title-name"),this.insertTitleElement(this.addonDiscoverySettings,l.getMessage("addon-discovery"),"/images/add-on.svg"),this.insertTitleElement(this.experimentSettings,l.getMessage("experiments"),"/images/experiments-icon.png"),this.insertTitleElement(this.localizationSettings,l.getMessage("localization"),"/images/localization-icon.svg"),this.insertTitleElement(this.updateSettings,l.getMessage("updates"),"/images/update-icon.svg"),this.insertTitleElement(this.authorizationSettings,l.getMessage("authorizations"),"/images/authorization.svg"),this.insertTitleElement(this.developerSettings,l.getMessage("developer"),"/images/developer-icon.svg"),this.discoverAddonsButton.addEventListener("click",(()=>{d("/settings/addons/discovered")})),this.backButton.addEventListener("click",(()=>{this.discoveredAddonsSearch.value=""})),this.discoveredAddonsSearch.addEventListener("input",(()=>{this.updateDiscoveredAddonsList()})),this.addUserButton.addEventListener("click",(()=>{d("/settings/users/add")})),this.setupDomainElements(),this.setupNetworkElements(),this.setupUserElements(),this.setupLocalizationElements(),this.setupUpdateElements(),this.setupExperimentElements(),this.setupDeveloperElements()},setupDomainElements:function(){this.elements.domain={update:document.getElementById("domain-settings-local-update"),localName:document.getElementById("domain-settings-local-name"),localCheckbox:document.getElementById("domain-settings-local-checkbox"),tunnelName:document.getElementById("domain-settings-tunnel-name")},this.elements.domain.update.addEventListener("click",this.onLocalDomainClick.bind(this)),this.elements.domain.localCheckbox.addEventListener("change",this.onLocalDomainCheckboxChange.bind(this))},setupNetworkElements:function(){this.elements.network={main:document.getElementById("network-settings"),unsupported:{main:document.getElementById("network-settings-unsupported")},client:{main:document.getElementById("network-settings-client"),ethernet:{main:document.getElementById("network-settings-ethernet"),mainIp:document.getElementById("network-settings-list-item-ethernet-ip"),configure:document.getElementById("network-settings-list-item-ethernet-configure"),mode:document.getElementById("network-settings-ethernet-mode"),ipLabel:document.getElementById("network-settings-ethernet-ip-label"),ip:document.getElementById("network-settings-ethernet-ip"),netmaskLabel:document.getElementById("network-settings-ethernet-netmask-label"),netmask:document.getElementById("network-settings-ethernet-netmask"),gatewayLabel:document.getElementById("network-settings-ethernet-gateway-label"),gateway:document.getElementById("network-settings-ethernet-gateway"),done:document.getElementById("network-settings-ethernet-done")},wifi:{main:document.getElementById("network-settings-wifi"),mainSsid:document.getElementById("network-settings-list-item-wifi-ssid"),mainIp:document.getElementById("network-settings-list-item-wifi-ip"),configure:document.getElementById("network-settings-list-item-wifi-configure"),list:document.getElementById("network-settings-wifi-network-list"),wrap:document.getElementById("network-settings-wifi-wrap"),ssid:document.getElementById("network-settings-wifi-ssid"),password:document.getElementById("network-settings-wifi-password"),showPassword:document.getElementById("network-settings-wifi-show-password"),connect:document.getElementById("network-settings-wifi-connect")}}},this.insertTitleElement(this.elements.network.unsupported.main,l.getMessage("network"),"/images/network.svg"),this.insertTitleElement(this.elements.network.client.main,l.getMessage("network"),"/images/network.svg"),this.insertTitleElement(this.elements.network.client.ethernet.main,l.getMessage("network-settings-ethernet"),"/images/ethernet.svg"),this.elements.network.client.wifi.title=this.insertTitleElement(this.elements.network.client.wifi.main,l.getMessage("network-settings-wifi"),"/images/wifi.svg").querySelector(".section-title-name"),this.elements.network.client.ethernet.configure.addEventListener("click",(()=>d("/settings/network/ethernet"))),this.elements.network.client.wifi.configure.addEventListener("click",(()=>d("/settings/network/wifi")));var e=[this.elements.network.client.ethernet.ipLabel,this.elements.network.client.ethernet.ip,this.elements.network.client.ethernet.netmaskLabel,this.elements.network.client.ethernet.netmask,this.elements.network.client.ethernet.gatewayLabel,this.elements.network.client.ethernet.gateway];this.elements.network.client.ethernet.ip.addEventListener("input",this.validateEthernet.bind(this)),this.elements.network.client.ethernet.netmask.addEventListener("input",this.validateEthernet.bind(this)),this.elements.network.client.ethernet.gateway.addEventListener("input",this.validateEthernet.bind(this)),this.elements.network.client.ethernet.mode.addEventListener("change",(t=>{this.validateEthernet(),"static"===t.target.value?e.forEach((e=>e.classList.remove("hidden"))):e.forEach((e=>e.classList.add("hidden")))})),this.elements.network.client.ethernet.mode.value="dhcp",e.forEach((e=>e.classList.add("hidden"))),this.elements.network.client.ethernet.done.addEventListener("click",(e=>{e.target.disabled=!0,s.showMessage(l.getMessage("network-settings-changing"),3e3);var t={mode:this.elements.network.client.ethernet.mode.value};"static"===t.mode&&(t.options={ipaddr:this.elements.network.client.ethernet.ip.value,netmask:this.elements.network.client.ethernet.netmask.value,gateway:this.elements.network.client.ethernet.gateway.value}),r.setLanSettings(t).then((()=>{d("/settings/network"),e.target.disabled=!1})).catch((t=>{s.showMessage(l.getMessage("failed-ethernet-configure"),3e3),console.error("Failed to set ethernet config: ".concat(t)),e.target.disabled=!1}))})),this.elements.network.client.wifi.showPassword.addEventListener("change",(e=>{e.target.checked?this.elements.network.client.wifi.password.setAttribute("type","text"):this.elements.network.client.wifi.password.setAttribute("type","password")})),this.elements.network.client.wifi.password.addEventListener("input",this.validateWifi.bind(this)),this.elements.network.client.wifi.connect.addEventListener("click",(e=>{e.target.disabled=!0,s.showMessage(l.getMessage("network-settings-changing"),3e3);var t={enabled:!0,mode:"sta",options:{ssid:this.elements.network.client.wifi.ssid.value,key:this.elements.network.client.wifi.password.value}};r.setWlanSettings(t).then((()=>{d("/settings/network"),e.target.disabled=!1})).catch((t=>{s.showMessage(l.getMessage("failed-wifi-configure"),3e3),console.error("Failed to set Wi-Fi config: ".concat(t)),e.target.disabled=!1}))})),this.validateWifi()},setupUserElements:function(){this.elements.user={edit:{save:document.getElementById("user-settings-edit-save"),form:document.getElementById("edit-user-form"),id:document.getElementById("user-settings-edit-id"),email:document.getElementById("user-settings-edit-email"),name:document.getElementById("user-settings-edit-name"),password:document.getElementById("user-settings-edit-password"),newPassword:document.getElementById("user-settings-edit-new-password"),confirmPassword:document.getElementById("user-settings-edit-confirm-password"),passwordMismatch:document.getElementById("user-settings-edit-password-mismatch"),mfaEnabled:document.getElementById("user-settings-edit-mfa-enabled"),mfaForm:document.getElementById("user-settings-edit-mfa-form"),mfaQrCode:document.getElementById("user-settings-mfa-qr-code"),mfaSecret:document.getElementById("user-settings-mfa-secret"),mfaTotp:document.getElementById("user-settings-mfa-totp"),mfaVerify:document.getElementById("user-settings-mfa-verify"),mfaError:document.getElementById("user-settings-mfa-error"),mfaRegenerateCodes:document.getElementById("user-settings-mfa-regenerate-codes"),mfaBackupCodesMessage:document.getElementById("user-settings-mfa-backup-codes-message"),mfaBackupCodes:document.getElementById("user-settings-mfa-backup-codes"),error:document.getElementById("user-settings-edit-error")},add:{save:document.getElementById("user-settings-add-save"),form:document.getElementById("add-user-form"),email:document.getElementById("user-settings-add-email"),name:document.getElementById("user-settings-add-name"),password:document.getElementById("user-settings-add-password"),confirmPassword:document.getElementById("user-settings-add-confirm-password"),passwordMismatch:document.getElementById("user-settings-add-password-mismatch"),error:document.getElementById("user-settings-add-error")}},this.elements.user.edit.mfaEnabled.addEventListener("change",(e=>{var t=parseInt(this.elements.user.edit.id.value,10);e.target.checked?r.userEnableMfa(t).then((e=>{this.elements.user.edit.mfaForm.classList.remove("hidden");var t=new p({content:e.url,container:"svg-viewbox",join:!0});this.elements.user.edit.mfaQrCode.innerHTML=t.svg(),this.elements.user.edit.mfaSecret.innerText=e.secret,this.elements.user.edit.mfaVerify.disabled=!0})).catch(console.error):r.userDisableMfa(t).then((()=>{this.elements.user.edit.mfaError.classList.add("hidden"),this.elements.user.edit.mfaForm.classList.add("hidden"),this.elements.user.edit.mfaRegenerateCodes.classList.add("hidden")})).catch(console.error)})),this.elements.user.edit.mfaTotp.addEventListener("input",(e=>{this.elements.user.edit.mfaVerify.disabled=6!==e.target.value.length})),this.elements.user.edit.mfaVerify.addEventListener("click",(e=>{e.target.disabled=!0;var t=parseInt(this.elements.user.edit.id.value,10);r.userEnableMfa(t,this.elements.user.edit.mfaTotp.value).then((t=>{e.target.disabled=!1,this.elements.user.edit.mfaError.classList.add("hidden"),this.elements.user.edit.mfaForm.classList.add("hidden"),this.elements.user.edit.mfaBackupCodesMessage.classList.remove("hidden"),this.elements.user.edit.mfaBackupCodes.classList.remove("hidden"),t.backupCodes.forEach((e=>{var t=document.createElement("p");t.innerText=e,this.elements.user.edit.mfaBackupCodes.appendChild(t)}))})).catch((()=>{e.target.disabled=!1,this.elements.user.edit.mfaError.classList.remove("hidden")}))})),this.elements.user.edit.mfaRegenerateCodes.addEventListener("click",(e=>{e.target.disabled=!0;var t=parseInt(this.elements.user.edit.id.value,10);r.userRegenerateMfaBackupCodes(t).then((t=>{e.target.disabled=!1,this.elements.user.edit.mfaBackupCodesMessage.classList.remove("hidden"),this.elements.user.edit.mfaBackupCodes.classList.remove("hidden"),this.elements.user.edit.mfaBackupCodes.innerHTML="",t.backupCodes.forEach((e=>{var t=document.createElement("p");t.innerText=e,this.elements.user.edit.mfaBackupCodes.appendChild(t)}))})).catch((t=>{e.target.disabled=!1,console.error(t)}))})),this.elements.user.edit.form.addEventListener("submit",(e=>{if(e.preventDefault(),this.elements.user.edit.save.disabled=!0,this.elements.user.edit.error.classList.add("hidden"),""===this.elements.user.edit.newPassword.value||this.elements.user.edit.newPassword.value===this.elements.user.edit.confirmPassword.value){this.elements.user.edit.passwordMismatch.classList.add("hidden");var t=parseInt(this.elements.user.edit.id.value,10),n=this.elements.user.edit.email.value,i=this.elements.user.edit.name.value,s=this.elements.user.edit.password.value,o=""!==this.elements.user.edit.newPassword.value?this.elements.user.edit.newPassword.value:null;r.editUser(t,i,n,s,o).then((()=>{this.elements.user.edit.save.disabled=!1,d("/settings/users")})).catch((e=>{this.elements.user.edit.save.disabled=!1,this.elements.user.edit.error.classList.remove("hidden"),this.elements.user.edit.error.textContent=e.message,console.error(e)}))}else this.elements.user.edit.passwordMismatch.classList.remove("hidden")})),this.elements.user.add.form.addEventListener("submit",(e=>{if(e.preventDefault(),this.elements.user.add.save.disabled=!0,this.elements.user.add.error.classList.add("hidden"),this.elements.user.add.password.value===this.elements.user.add.confirmPassword.value){this.elements.user.add.passwordMismatch.classList.add("hidden");var t=this.elements.user.add.email.value,n=this.elements.user.add.name.value,i=this.elements.user.add.password.value;r.addUser(n,t,i).then((()=>{this.elements.user.add.save.disabled=!1,d("/settings/users")})).catch((e=>{this.elements.user.add.save.disabled=!1,this.elements.user.add.error.classList.remove("hidden"),this.elements.user.add.error.textContent=e.message,console.error(e)}))}else this.elements.user.add.passwordMismatch.classList.remove("hidden")}))},setupLocalizationElements:function(){this.elements.localization={country:document.getElementById("localization-settings-country"),timezone:document.getElementById("localization-settings-timezone"),language:document.getElementById("localization-settings-language"),units:{temperature:document.getElementById("localization-settings-units-temperature")}},this.elements.localization.country.addEventListener("change",(e=>{r.setCountry(e.target.value).catch(console.error)})),this.elements.localization.timezone.addEventListener("change",(e=>{r.setTimezone(e.target.value).then((()=>window.location.reload())).catch(console.error)})),this.elements.localization.language.addEventListener("change",(e=>{r.setLanguage(e.target.value).then((()=>window.location.reload())).catch(console.error)})),this.elements.localization.units.temperature.addEventListener("change",(e=>{r.setUnits({temperature:e.target.value}).then((()=>window.location.reload())).catch(console.error)}))},setupUpdateElements:function(){this.elements.update={updateNow:document.getElementById("update-now"),enableSelfUpdatesCheckbox:document.getElementById("enable-self-updates-checkbox")},this.elements.update.updateNow.addEventListener("click",this.onUpdateClick),this.elements.update.enableSelfUpdatesCheckbox.addEventListener("change",this.onEnableSelfUpdatesCheckboxChange)},setupExperimentElements:function(){},setupDeveloperElements:function(){this.elements.developer={sshCheckbox:document.getElementById("enable-ssh-checkbox"),logsLink:document.getElementById("view-internal-logs")},this.elements.developer.sshCheckbox.addEventListener("change",(e=>{var t=e.target.checked;r.setSshStatus(t).catch((e=>{console.error("Failed to toggle SSH: ".concat(e))}))}))},validateEthernet:function(){var e="dhcp"===this.elements.network.client.ethernet.mode.value||u.test(this.elements.network.client.ethernet.ip.value)&&u.test(this.elements.network.client.ethernet.netmask.value)&&u.test(this.elements.network.client.ethernet.gateway.value);this.elements.network.client.ethernet.done.disabled=!e},validateWifi:function(){var e=this.elements.network.client.wifi.password.value.length>=8;this.elements.network.client.wifi.connect.disabled=!e},hideNetworkElements:function(){this.elements.network.main.classList.add("hidden"),this.elements.network.unsupported.main.classList.add("hidden"),this.elements.network.client.main.classList.add("hidden"),this.elements.network.client.ethernet.main.classList.add("hidden"),this.elements.network.client.wifi.main.classList.add("hidden")},insertTitleElement:(e,t,n)=>{var i=document.createElement("div");return i.classList.add("section-title"),i.innerHTML='\n      <div class="section-title-back-flex"></div>\n      <div class="section-title-container">\n        <img class="section-title-icon" alt="'.concat(t," ").concat(l.getMessage("icon"),'" src="').concat(n,'" />\n        <span class="section-title-name">').concat(t,'</span>\n      </div>\n      <div class="section-title-right-flex"></div>\n    '),e.insertBefore(i,e.firstChild),i},show:function(e,t,n){this.backButton.href="/settings",this.view.classList.remove("dark"),this.discoverAddonsButton.classList.add("hidden"),this.addUserButton.classList.add("hidden"),e?this.showSection(e,t,n):this.showMenu()},showMenu:function(){s.showMenuButton(),this.hideBackButton(),this.menu.classList.remove("hidden"),this.domainSettings.classList.add("hidden"),this.userSettings.classList.add("hidden"),this.userSettingsMain.classList.add("hidden"),this.userSettingsEdit.classList.add("hidden"),this.userSettingsAdd.classList.add("hidden"),this.adapterSettings.classList.add("hidden"),this.addonSettings.classList.add("hidden"),this.addonMainSettings.classList.add("hidden"),this.addonConfigSettings.classList.add("hidden"),this.addonDiscoverySettings.classList.add("hidden"),this.experimentSettings.classList.add("hidden"),this.localizationSettings.classList.add("hidden"),this.updateSettings.classList.add("hidden"),this.authorizationSettings.classList.add("hidden"),this.developerSettings.classList.add("hidden"),this.discoverAddonsButton.classList.add("hidden"),this.addUserButton.classList.add("hidden"),this.hideNetworkElements()},hideMenu:function(){this.menu.classList.add("hidden")},showBackButton:function(){this.backButton.classList.remove("hidden")},hideBackButton:function(){this.backButton.classList.add("hidden")},showSection:function(e,t,n){switch(e){case"domain":this.showDomainSettings();break;case"network":if(t)switch(t){case"ethernet":this.showEthernetSettings();break;case"wifi":n&&"configure"===n?this.showWifiConfigure():this.showWifiSettings();break;default:return void console.error("Tried to display undefined subsection")}else this.showNetworkSettings();break;case"users":if(t)switch(t){case"edit":this.showEditUserScreen(n);break;case"add":this.showAddUserScreen(n);break;default:return void console.error("Tried to display undefined subsection")}else this.showUserSettings();break;case"adapters":this.showAdapterSettings();break;case"addons":if(t)switch(t){case"discovered":this.showDiscoveredAddonsScreen();break;case"config":this.showAddonConfigScreen(n);break;default:return void console.error("Tried to display undefined subsection")}else this.showAddonSettings();break;case"experiments":this.showExperimentSettings();break;case"localization":this.showLocalizationSettings();break;case"updates":this.showUpdateSettings();break;case"authorizations":this.showAuthorizationSettings();break;case"developer":this.showDeveloperSettings();break;default:return void console.error("Tried to display undefined section")}this.hideMenu(),s.hideMenuButton(),this.showBackButton()},showDomainSettings:function(){this.domainSettings.classList.remove("hidden"),r.getTunnelInfo().then((e=>{this.elements.domain.tunnelName.innerText=e?e.tunnelDomain:l.getMessage("unknown-state")})),r.getDomainSettings().then((e=>{e?(this.elements.domain.localCheckbox.checked=e.enabled,this.elements.domain.localName.value=e.hostname):this.elements.domain.localName.value=l.getMessage("unknown-state"),this.elements.domain.localCheckbox.checked||(this.elements.domain.localName.disabled=!0,this.elements.domain.update.disabled=!0)}))},onLocalDomainCheckboxChange:e=>{var t=document.getElementById("domain-settings-error"),n=!!e.target.checked;r.setDomainSettings({enabled:n}).then((()=>{document.getElementById("domain-settings-local-update").disabled=!n,document.getElementById("domain-settings-local-name").disabled=!n,t.classList.add("hidden")})).catch((i=>{var r="".concat(l.getMessage("error"),": ").concat(i);console.error(r),t.classList.remove("hidden"),t.textContent=i,e.target.checked=!n,document.getElementById("domain-settings-local-update").disabled=n,document.getElementById("domain-settings-local-name").disabled=n}))},onLocalDomainClick:()=>{var e=document.getElementById("domain-settings-local-name"),t=document.getElementById("domain-settings-error");r.setDomainSettings({hostname:e.value}).then((e=>{e.update&&e.localDomain.length>0&&e.enabled?s.showMessage("Update succeeded.",3e3):(t.classList.remove("hidden"),t.textContent=e.error,document.getElementById("domain-settings-local-name").value=e.localDomain)})).catch((e=>{var n="".concat(l.getMessage("error"),": ").concat(e);console.error(n),t.classList.remove("hidden"),t.textContent=e}))},showNetworkSettings:function(){this.hideNetworkElements(),this.elements.network.main.classList.remove("hidden"),r.getPlatform().then((e=>{switch(e.os){case"linux-debian":case"linux-raspbian":this.elements.network.client.main.classList.remove("hidden");break;default:return this.elements.network.unsupported.main.classList.remove("hidden"),Promise.resolve(null)}return r.getNetworkAddresses()})).then((e=>{e&&(this.elements.network.client.ethernet.mainIp.innerText=e.lan,this.elements.network.client.wifi.mainIp.innerText=e.wlan.ip,this.elements.network.client.wifi.mainSsid.innerText=e.wlan.ssid)})).catch((e=>{console.error("Error getting platform setting: ".concat(e))}))},showEthernetSettings:function(){this.backButton.href="/settings/network",this.view.classList.add("dark"),this.hideNetworkElements(),this.elements.network.main.classList.remove("hidden"),this.elements.network.client.ethernet.netmask.value="255.255.255.0",this.elements.network.client.ethernet.main.classList.remove("hidden"),r.getLanSettings().then((e=>{this.elements.network.client.ethernet.mode.value=e.mode||"dhcp",this.elements.network.client.ethernet.ip.value=e.ipdaddr||"",this.elements.network.client.ethernet.netmask.value=e.netmask||"255.255.255.0",this.elements.network.client.ethernet.gateway.value=e.gateway||""})).catch((e=>{console.error("Failed to get ethernet config: ".concat(e))})).then((()=>{this.validateEthernet()}))},showWifiSettings:function(){this.backButton.href="/settings/network",this.view.classList.add("dark"),this.hideNetworkElements(),this.elements.network.client.wifi.wrap.classList.add("hidden"),this.elements.network.client.wifi.list.classList.remove("hidden"),this.elements.network.main.classList.remove("hidden"),this.elements.network.client.wifi.main.classList.remove("hidden"),r.getWirelessNetworks().then((e=>{this.elements.network.client.wifi.list.innerHTML="",e.forEach((e=>new g(e)))})).catch((e=>{console.error("Failed to scan for wireless networks: ".concat(e))})).then((()=>{this.validateWlan()}))},showWifiConfigure:function(){this.backButton.href="/settings/network/wifi",this.view.classList.add("dark"),this.hideNetworkElements(),this.elements.network.client.wifi.password.value="",this.elements.network.client.wifi.list.classList.add("hidden"),this.elements.network.client.wifi.wrap.classList.remove("hidden"),this.elements.network.main.classList.remove("hidden"),this.elements.network.client.wifi.main.classList.remove("hidden")},showUserSettings:function(){this.userSettings.classList.remove("hidden"),this.userSettingsEdit.classList.add("hidden"),this.userSettingsAdd.classList.add("hidden"),this.userSettingsMain.classList.remove("hidden"),this.addUserButton.classList.remove("hidden"),r.getAllUserInfo().then((e=>{var t=document.getElementById("users-list");for(var n of(t.innerHTML="",e))new f(n)}))},showEditUserScreen:function(e){this.backButton.href="/settings/users",this.userSettings.classList.remove("hidden"),this.userSettingsMain.classList.add("hidden"),this.userSettingsAdd.classList.add("hidden"),this.userSettingsEdit.classList.remove("hidden"),this.elements.user.edit.mfaForm.classList.add("hidden"),this.elements.user.edit.mfaError.classList.add("hidden"),this.elements.user.edit.mfaBackupCodes.innerHTML="",this.elements.user.edit.mfaBackupCodes.classList.add("hidden"),this.elements.user.edit.mfaBackupCodesMessage.classList.add("hidden"),this.elements.user.edit.mfaRegenerateCodes.classList.add("hidden"),this.view.classList.add("dark"),this.elements.user.edit.id.value=e,r.getUser(e).then((e=>{this.elements.user.edit.email.value=e.email,this.elements.user.edit.name.value=e.name,this.elements.user.edit.password.value="",this.elements.user.edit.newPassword.value="",this.elements.user.edit.confirmPassword.value="",this.elements.user.edit.mfaEnabled.checked=e.mfaEnrolled,e.mfaEnrolled&&this.elements.user.edit.mfaRegenerateCodes.classList.remove("hidden"),this.elements.user.edit.name.focus()}))},showAddUserScreen:function(){this.backButton.href="/settings/users",this.userSettings.classList.remove("hidden"),this.userSettingsMain.classList.add("hidden"),this.userSettingsEdit.classList.add("hidden"),this.userSettingsAdd.classList.remove("hidden"),this.view.classList.add("dark"),this.elements.user.add.email.value="",this.elements.user.add.name.value="",this.elements.user.add.password.value="",this.elements.user.add.confirmPassword.value="",this.elements.user.add.name.focus()},showAdapterSettings:function(){this.adapterSettings.classList.remove("hidden"),r.getAdapters().then((e=>{var t=document.getElementById("no-adapters"),n=document.getElementById("adapters-list");n.innerHTML="",0==e.length?(t.classList.remove("hidden"),n.classList.add("hidden")):(t.classList.add("hidden"),n.classList.remove("hidden"),e.sort(((e,t)=>e.name.localeCompare(t.name))).forEach((e=>new i(e))))}))},fetchInstalledAddonList:function(e){return e&&(this.fetchInstalledAddonsDeferred=null),this.fetchInstalledAddonsDeferred?this.fetchInstalledAddonsDeferred.catch((()=>(this.fetchInstalledAddonsDeferred=null,this.fetchInstalledAddonList()))):(this.fetchInstalledAddonsDeferred=r.getInstalledAddons().then((e=>{if(e)for(var t of(this.installedAddons.clear(),e))try{this.installedAddons.set(t.id,t)}catch(e){console.error("Failed to parse add-on settings: ".concat(e))}})),this.fetchInstalledAddonsDeferred)},fetchAvailableAddonList:function(e){return(!this.availableAddonsLastFetched||new Date-this.availableAddonsLastFetched>3e5)&&(e=!0),e&&(this.fetchAvailableAddonsDeferred=null),this.fetchAvailableAddonsDeferred?this.fetchAvailableAddonsDeferred.catch((()=>(this.fetchAvailableAddonsDeferred=null,this.fetchAvailableAddonList()))):(this.fetchAvailableAddonsDeferred=r.getAddonsInfo().then((e=>{if(e&&e.urls&&e.architecture&&e.version&&e.nodeVersion){var t=new URLSearchParams;t.set("arch",e.architecture),t.set("version",e.version),t.set("node",e.nodeVersion),e.pythonVersions&&e.pythonVersions.length>0&&t.set("python",e.pythonVersions.join(",")),e.testAddons&&t.set("test","1");var n=[];for(var i of e.urls)n.push(fetch("".concat(i,"?").concat(t.toString()),{method:"GET",cache:"reload",headers:{Accept:"application/json"}}));return Promise.all(n)}})).then((e=>{var t=[];for(var n of e)t.push(n.json());return Promise.all(t)})).then((e=>{for(var t of(this.availableAddons.clear(),e))for(var n of t){var i={id:n.id,name:n.name,description:n.description,author:n.author,homepage_url:n.homepage_url,license_url:n.license_url,version:n.version,url:n.url,checksum:n.checksum,primary_type:n.primary_type,installed:this.installedAddons.has(n.id)};this.availableAddons.has(n.id)&&this.compareSemver(this.availableAddons.get(n.id).version,i.version)>=0||this.availableAddons.set(n.id,i)}})),this.fetchAvailableAddonsDeferred)},showAddonSettings:function(){this.addonSettings.classList.remove("hidden"),this.addonConfigSettings.classList.add("hidden"),this.addonDiscoverySettings.classList.add("hidden"),this.addonConfigSettings.classList.add("hidden"),this.addonMainSettings.classList.remove("hidden"),this.discoverAddonsButton.classList.remove("hidden");var e=new Map;this.fetchInstalledAddonList(!0).then((()=>(document.getElementById("installed-addons-list").innerHTML="",Array.from(this.installedAddons.entries()).sort(((e,t)=>{var n=e[1].name||e[1].id||"",i=t[1].name||t[1].id||"";return n.localeCompare(i)})).forEach((t=>{e.set(t[0],new c(t[1],this.installedAddons,this.availableAddons))})),this.fetchAvailableAddonList(!0)))).then((()=>{for(var t of Array.from(this.installedAddons.keys()).sort()){var n=this.installedAddons.get(t);if(this.availableAddons.has(t)){var i=this.availableAddons.get(t);if(this.compareSemver(n.version,i.version)<0){var r=e.get(t);r&&r.setUpdateAvailable(i.url,i.version,i.checksum)}}}})).catch(console.error)},showAddonConfigScreen:function(e){this.backButton.href="/settings/addons",this.addonSettings.classList.remove("hidden"),this.addonMainSettings.classList.add("hidden"),this.addonConfigSettings.classList.remove("hidden"),this.addonDiscoverySettings.classList.add("hidden"),this.addonConfigTitleName.textContent="Configure ".concat(e),this.view.classList.add("dark"),this.fetchInstalledAddonList(!0).then((()=>{var t=this.addonConfigSettings.querySelector(".json-schema-form");t&&t.parentNode.removeChild(t);var n=this.installedAddons.get(e);new o(e,n)})).catch(console.error)},showDiscoveredAddonsScreen:function(){this.backButton.href="/settings/addons",this.addonSettings.classList.remove("hidden"),this.addonMainSettings.classList.add("hidden"),this.addonConfigSettings.classList.add("hidden"),this.addonDiscoverySettings.classList.remove("hidden"),this.view.classList.add("dark"),this.fetchInstalledAddonList(!1).then((()=>this.fetchAvailableAddonList(!1))).then((()=>{this.updateDiscoveredAddonsList()})).catch(console.error)},updateDiscoveredAddonsList:function(){document.getElementById("discovered-addons-list").innerHTML="";var e=this.discoveredAddonsSearch.value.toLowerCase(),t=(e,t)=>e.toLowerCase().indexOf(t.toLowerCase())>-1;Array.from(this.availableAddons.entries()).filter((n=>(n=>t(n.id,e)||t(n.name,e)||t(n.description,e)||t(n.primary_type,e))(n[1]))).sort(((e,t)=>e[1].name.localeCompare(t[1].name))).forEach((e=>new a(e[1],this.installedAddons,this.availableAddons)))},showExperimentCheckbox:(e,t)=>{var n=document.getElementById(t);r.getExperimentSetting(e).then((e=>{n.checked=e})).catch((t=>{console.error("Error getting ".concat(e," experiment setting ").concat(t))})),n.addEventListener("change",(t=>{var n=!!t.target.checked;r.setExperimentSetting(e,n).then((()=>{n?h.showItem(e):h.hideItem(e)})).catch((t=>{console.error("Failed to enable ".concat(e," experiment: ").concat(t))}))}))},showExperimentSettings:function(){this.experimentSettings.classList.remove("hidden")},compareSemver:(e,t)=>{if(e===t)return 0;function n(e){return parseInt(e,10)}for(var i=e.split(".").map(n),r=t.split(".").map(n),s=0;s<i.length;s++){var o=i[s],a=r[s];if(o!==a)return o<a?-1:1}return 0},showLocalizationSettings:function(){this.localizationSettings.classList.remove("hidden");var e=this.elements.localization.country;e.innerHTML="",e.disabled=!0,r.getCountry().then((t=>{for(var n of t.valid){var i=document.createElement("option");i.value=n,i.innerText=n,n===t.current&&(i.selected="selected"),e.appendChild(i)}e.disabled=!t.setImplemented||0===t.valid.length})).catch(console.error);var t=this.elements.localization.timezone;t.innerHTML="",t.disabled=!0,r.getTimezone().then((e=>{for(var n of e.valid){var i=document.createElement("option");i.value=n,i.innerText=n,n===e.current&&(i.selected="selected"),t.appendChild(i)}t.disabled=!e.setImplemented||0===e.valid.length})).catch(console.error);var n=this.elements.localization.language;n.innerHTML="",r.getLanguage().then((e=>{for(var t of("en"===e.current&&(e.current="en-US"),e.valid)){var i=document.createElement("option");i.value=t.code,i.innerText=t.name,t.code===e.current&&(i.selected="selected"),n.appendChild(i)}})).catch(console.error);var i=this.elements.localization.units.temperature;r.getUnits().then((e=>{i.value=e.temperature})).catch(console.error)},showUpdateSettings:function(){this.updateSettings.classList.remove("hidden"),this.fetchUpdateInfo()},onEnableSelfUpdatesCheckboxChange:e=>{var t=!!e.target.checked;r.setSelfUpdateStatus(t).catch((e=>{console.error("Failed to toggle auto-updates: ".concat(e))}))},fetchUpdateInfo:function(){var e,t,n=document.getElementById("update-settings-up-to-date"),i=document.getElementById("update-now"),s=document.getElementById("update-settings-version"),o=document.getElementById("update-settings-status");Promise.all([r.getUpdateStatus(),r.getSelfUpdateStatus()]).then((a=>{e=a[0],(t=a[1]).available||(n.textContent=l.getMessage("updates-not-supported")),s.textContent="".concat(l.getMessage("current-version"),": ").concat(m.escapeHtml(e.version));var c="".concat(l.getMessage("last-update"),": ");e.timestamp?(c+=new Date(e.timestamp).toString(),e.success||(c+=" (".concat(l.getMessage("failed"),")"))):c+=l.getMessage("never"),this.elements.update.enableSelfUpdatesCheckbox.checked=t.enabled,this.elements.update.enableSelfUpdatesCheckbox.disabled=!t.available,t.available?o.textContent=c:o.classList.add("hidden"),t.available&&(n.textContent=l.getMessage("checking-for-updates"),i.classList.add("hidden"),r.getUpdateLatest().then((t=>{t.version&&(this.compareSemver(e.version,t.version)<0?(n.textContent=l.getMessage("update-available"),i.classList.remove("hidden"),i.classList.remove("disabled")):(n.textContent=l.getMessage("update-up-to-date"),i.classList.add("hidden")))})).catch((()=>{n.textContent=l.getMessage("failed-to-check-for-updates")})))}))},onUpdateClick:function(){var e=document.getElementById("update-now");e.removeEventListener("click",this.onUpdateClick),e.classList.add("disabled"),r.startUpdate().then((()=>{e.textContent=l.getMessage("in-progress");var t=!1;!function n(){r.getUpdateStatus().then((()=>{t?window.location.reload(!0):setTimeout(n,5e3)})).catch((()=>{t||(e.textContent=l.getMessage("restarting"),t=!0),setTimeout(n,5e3)}))}()})).catch((()=>{e.textContent=l.getMessage("error")}))},showAuthorizationSettings:function(){this.authorizationSettings.classList.remove("hidden"),r.getAuthorizations().then((e=>{var t=document.getElementById("authorizations"),n=document.getElementById("no-authorizations");for(var i of t.children)"no-authorizations"!==i.id&&"new-local-authorization"!==i.id&&i.parentNode.removeChild(i);if(0!==e.length)for(var r of(n.classList.add("hidden"),e)){var s=document.createElement("li");s.classList.add("authorization-item");var o=document.createElement("p");o.textContent=r.name;var a=document.createElement("p");a.classList.add("origin"),a.textContent=new URL(r.redirect_uri).host;var l=document.createElement("input");l.classList.add("revoke-button","text-button"),l.type="button",l.value="Revoke",l.dataset.clientId=r.id,l.addEventListener("click",this.revokeAuthorization),s.appendChild(o),s.appendChild(a),s.appendChild(l),t.insertBefore(s,n)}else n.classList.remove("hidden")}))},revokeAuthorization:e=>{var t=e.target;if(t.dataset.clientId){var n=t.dataset.clientId;r.revokeAuthorization(n).then((()=>{var e=t.parentNode,n=e.parentNode;n.removeChild(e),0===n.children.length&&document.getElementById("no-authorizations").classList.remove("hidden")})).catch((e=>{console.warn("Unable to revoke",e)}))}else console.warn("Missing clientId on revoke",t)},showDeveloperSettings:function(){this.developerSettings.classList.remove("hidden"),this.elements.developer.logsLink.href="/internal-logs?jwt=".concat(r.jwt),r.getSshStatus().then((e=>{this.elements.developer.sshCheckbox.checked=e.enabled,e.toggleImplemented||(this.elements.developer.sshCheckbox.disabled=!0)})).catch((e=>{console.error("Error getting SSH setting: ".concat(e))}))}};e.exports=v},22509:(e,t,n)=>{"use strict";function i(e,t,n,i,r,s,o){try{var a=e[s](o),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(i,r)}function r(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var o=e.apply(t,n);function a(e){i(o,r,s,a,l,"next",e)}function l(e){i(o,r,s,a,l,"throw",e)}a(void 0)}))}}n(88674),n(66992),n(33948),n(41637),n(54747),n(26699),n(74916),n(15306);var s=n(55161),o=n(52218),a=n(41395),l=n(96710),c=n(25425),u=n(46293),h=n(25290),d=n(84816),{createThingFromCapability:p}=n(21310),f=n(52677),m=n(28797).default,g=n(29705),v={init:function(){this.thingsElement=document.getElementById("things"),this.groupsElement=document.getElementById("groups"),this.thingTitleElement=document.getElementById("thing-title"),this.addButton=document.getElementById("add-button"),this.menuButton=document.getElementById("menu-button"),this.backButton=document.getElementById("back-button"),this.backRef="/things",this.backButton.addEventListener("click",(()=>s(this.backRef))),this.addButton.addEventListener("click",a.show.bind(a)),this.refreshThings=this.refreshThings.bind(this),this.things=[],this.thingsElement.ondragover=this.handleDragOver.bind(this),this.thingsElement.ondragenter=this.handleDragEnter.bind(this),this.thingsElement.ondragleave=this.handleDragLeave.bind(this),this.thingsElement.ondrop=this.handleDrop.bind(this)},renderThing:function(e,t,n){var i=p(t.selectedCapability,e,t,n);return this.things.push(i),i},show:function(e,t,n,i){var r=new URLSearchParams("?".concat(i||""));if(r.has("referrer")?this.backRef=r.get("referrer"):this.backRef="/things",l.hideOverflowButton(),e)this.addButton.classList.add("hidden"),this.backButton.classList.remove("hidden"),this.menuButton.classList.add("hidden"),this.thingTitleElement.classList.remove("hidden"),this.thingsElement.classList.add("single-thing"),t?this.showActionInputForm(e,t):n?this.showEvents(e):this.showThing(e);else{this.addButton.classList.remove("hidden"),this.menuButton.classList.remove("hidden"),this.backButton.classList.add("hidden"),this.thingTitleElement.classList.add("hidden"),this.thingsElement.classList.remove("single-thing"),this.showThings();var s=document.getElementById("message-area");l.blockMessages&&s.innerText===h.getMessage("disconnected")&&l.hidePersistentMessage()}},refreshThings:function(e,t){for(var n;void 0!==(n=this.things.pop());)n.cleanup();0===e.size&&0===t.size?this.thingsElement.innerHTML=h.getMessage("no-things"):this.thingsElement.innerHTML="",this.groupsElement.innerHTML="",0!==t.size&&t.forEach((e=>{new f(e)})),0!==e.size&&e.forEach(((e,t)=>{l.gatewayModel.getThingModel(t).then((t=>{this.renderThing(t,e)}))}))},showThings:function(){l.gatewayModel.unsubscribe(c.REFRESH_THINGS,this.refreshThing),l.gatewayModel.unsubscribe(c.DELETE_THINGS,this.refreshThing),l.gatewayModel.subscribe(c.DELETE_THINGS,this.refreshThings),l.gatewayModel.subscribe(c.REFRESH_THINGS,this.refreshThings,!0)},showThing:function(e){var t=this;l.gatewayModel.unsubscribe(c.REFRESH_THINGS,this.refreshThing),l.gatewayModel.unsubscribe(c.DELETE_THINGS,this.refreshThing),l.gatewayModel.unsubscribe(c.REFRESH_THINGS,this.refreshThings),l.gatewayModel.unsubscribe(c.DELETE_THINGS,this.refreshThings),this.refreshThing=()=>l.gatewayModel.getThing(e).then(function(){var n=r((function*(n){if(!n)return t.thingsElement.innerHTML=h.getMessage("thing-not-found"),void(t.groupsElement.innerHTML="");t.thingsElement.innerHTML="",t.groupsElement.innerHTML="";var i=yield l.gatewayModel.getThingModel(e),r=t.renderThing(i,n,c.ThingFormat.EXPANDED),s=document.getElementById("thing-title-icon"),o=document.getElementById("thing-title-custom-icon");r.iconHref&&"Custom"===r.selectedCapability?(o.iconHref=r.iconHref,o.classList.remove("hidden"),s.style.backgroundImage="",s.classList.add("custom-thing")):(s.style.backgroundImage='url("'.concat(r.baseIcon,'")'),s.classList.remove("custom-thing"),o.classList.add("hidden")),document.getElementById("thing-title-title").innerText=r.title,t.thingTitleElement.classList.remove("hidden")}));return function(e){return n.apply(this,arguments)}}()).catch((t=>{console.error("Thing id ".concat(e," not found ").concat(t)),this.thingsElement.innerHTML=h.getMessage("thing-not-found"),this.groupsElement.innerHTML=""})),l.gatewayModel.subscribe(c.REFRESH_THINGS,this.refreshThing,!0),l.gatewayModel.subscribe(c.DELETE_THINGS,this.refreshThing)},showActionInputForm:function(e,t){l.gatewayModel.getThing(e).then((e=>{var n;if(this.thingsElement.innerHTML="",this.groupsElement.innerHTML="",!e.hasOwnProperty("actions")||!e.actions.hasOwnProperty(t)||!e.actions[t].hasOwnProperty("input"))return this.thingsElement.innerHTML=h.getMessage("action-not-found"),void(this.groupsElement.innerHTML="");var i=g.selectFormHref(e.actions[t].forms,c.WoTOperation.INVOKE_ACTION,null!==(n=e.base)&&void 0!==n?n:l.ORIGIN),r=d.capabilityToIcon(e.selectedCapability),s=document.getElementById("thing-title-icon"),a=document.getElementById("thing-title-custom-icon");e.iconHref&&"Custom"===e.selectedCapability?(a.iconHref=e.iconHref,a.classList.remove("hidden"),s.style.backgroundImage="",s.classList.add("custom-thing")):(s.style.backgroundImage='url("'.concat(r,'")'),s.classList.remove("custom-thing"),a.classList.add("hidden")),document.getElementById("thing-title-title").innerText=e.title,this.thingsElement.innerHTML="",this.groupsElement.innerHTML="",new o(i,t,e.actions[t].title||e.actions[t].label,e.actions[t].input)})).catch((t=>{console.error("Thing id ".concat(e," not found ").concat(t)),this.thingsElement.innerHTML=h.getMessage("thing-not-found"),this.groupsElement.innerHTML=""}))},showEvents:function(e){var t=this;void 0!==this.eventList&&this.eventList.cleanup(),l.gatewayModel.getThing(e).then(function(){var n=r((function*(n){if(t.thingsElement.innerHTML="",t.groupsElement.innerHTML="",n.hasOwnProperty("events")){var i=yield l.gatewayModel.getThingModel(e),r=d.capabilityToIcon(n.selectedCapability),s=document.getElementById("thing-title-icon"),o=document.getElementById("thing-title-custom-icon");n.iconHref&&"Custom"===n.selectedCapability?(o.iconHref=n.iconHref,o.classList.remove("hidden"),s.style.backgroundImage="",s.classList.add("custom-thing")):(s.style.backgroundImage='url("'.concat(r,'")'),s.classList.remove("custom-thing"),o.classList.add("hidden")),document.getElementById("thing-title-title").innerText=n.title,t.thingsElement.innerHTML="",t.groupsElement.innerHTML="",t.eventList=new u(i,n)}else t.thingsElement.innerHTML=h.getMessage("events-not-found")}));return function(e){return n.apply(this,arguments)}}()).catch((t=>{console.error("Thing id ".concat(e," not found ").concat(t)),this.thingsElement.innerHTML=h.getMessage("thing-not-found"),this.groupsElement.innerHTML=""}))},handleDragOver(e){e.preventDefault(),0!==this.groupsElement.childNodes.length&&Array.from(e.dataTransfer.types).includes("application/thing")&&(e.dataTransfer.dropEffect="move",this.thingsElement.classList.add("drag-target"))},handleDragEnter(e){e.preventDefault()},handleDragLeave(e){e.preventDefault(),this.thingsElement.classList.remove("drag-target")},handleDrop(e){if(e.preventDefault(),0!==this.groupsElement.childNodes.length&&Array.from(e.dataTransfer.types).includes("application/thing")){e.stopPropagation();var t=document.getElementById(e.dataTransfer.getData("text"));if(t){t.parentNode.removeChild(t),this.thingsElement.appendChild(t);var n=g.unescapeHtml(t.id).replace(/^thing-/,"");m.setThingGroup(n,null).then((()=>{l.gatewayModel.refreshThings()})).catch((e=>{console.error("Error trying to change group of thing ".concat(n,": ").concat(e))}))}}}};e.exports=v},19733:(e,t,n)=>{"use strict";var i=n(28797).default,r=n(55161),s=n(29705);e.exports=class{constructor(e){this.email=e.email,this.name=e.name,this.id=e.id,this.loggedIn=e.loggedIn,this.container=document.getElementById("users-list"),this.render()}view(){return'\n      <li id="user-item-'.concat(s.escapeHtml(this.id),'" class="user-item">\n        <div class="user-settings-header">\n          <span class="user-settings-name">').concat(s.escapeHtml(this.name),'</span>\n          <span class="user-settings-description">\n            ').concat(s.escapeHtml(this.email),'\n          </span>\n        </div>\n        <div class="user-settings-controls">\n          <button id="user-remove-').concat(s.escapeHtml(this.id),'"\n            class="text-button user-settings-remove"\n            data-l10n-id="remove">\n          </button>\n          <button id="user-edit-').concat(s.escapeHtml(this.id),'"\n            class="text-button user-settings-edit"\n            data-l10n-id="edit">\n          </button>\n        </div>\n      </li>')}render(){this.container.insertAdjacentHTML("beforeend",this.view()),document.getElementById("user-remove-".concat(s.escapeHtml(this.id))).addEventListener("click",this.handleRemove.bind(this)),document.getElementById("user-edit-".concat(s.escapeHtml(this.id))).addEventListener("click",this.handleEdit.bind(this))}handleRemove(e){var t=e.target;t.disabled=!0,i.deleteUser(this.id).then((()=>{var e=document.getElementById("user-item-".concat(s.escapeHtml(this.id)));e.parentNode.removeChild(e),this.loggedIn&&i.logout().then((()=>{window.location.href="/login"}))})).catch((e=>{console.error("Failed to delete user: ".concat(this.email,"\n").concat(e)),t.disabled=!1}))}handleEdit(){r("/settings/users/edit/".concat(encodeURIComponent(this.id)))}}},26113:(e,t,n)=>{"use strict";var i=n(29705),r=n(55161);e.exports=class{constructor(e){this.ssid=e.ssid,this.encryption=e.encryption,this.quality=e.quality,this.configured=e.configured,this.connected=e.connected,this.container=document.getElementById("network-settings-wifi-network-list"),this.render()}view(){var e="",t="";this.configured&&(e="configured",t=this.connected?'<div class="wireless-network-info-connected"\n                data-l10n-id="wireless-connected"></div>':'<div class="wireless-network-info-disconnected"\n                data-l10n-id="wireless-connected"></div>');var n="/images/".concat(this.encryption?"wifi-secure":"wifi",".svg");return'<li class="wireless-network-item">\n        <div class="wireless-network-info '.concat(e,'">\n          <div class="wireless-network-info-ssid">\n            ').concat(i.escapeHtml(this.ssid),"\n          </div>\n          ").concat(t,'\n        </div>\n        <img class="wireless-network-icon" src="').concat(n,'" data-l10n-id="wireless-icon">\n      </li>')}render(){var e=document.createElement("ul");e.innerHTML=this.view();var t=e.firstChild;t.addEventListener("click",(()=>{document.getElementById("network-settings-wifi-ssid").value=this.ssid,r("/settings/network/wifi/configure")})),this.container.appendChild(t)}}},19662:(e,t,n)=>{var i=n(60614),r=n(66330),s=TypeError;e.exports=function(e){if(i(e))return e;throw s(r(e)+" is not a function")}},39483:(e,t,n)=>{var i=n(4411),r=n(66330),s=TypeError;e.exports=function(e){if(i(e))return e;throw s(r(e)+" is not a constructor")}},96077:(e,t,n)=>{var i=n(60614),r=String,s=TypeError;e.exports=function(e){if("object"==typeof e||i(e))return e;throw s("Can't set "+r(e)+" as a prototype")}},51223:(e,t,n)=>{var i=n(5112),r=n(70030),s=n(3070).f,o=i("unscopables"),a=Array.prototype;null==a[o]&&s(a,o,{configurable:!0,value:r(null)}),e.exports=function(e){a[o][e]=!0}},31530:(e,t,n)=>{"use strict";var i=n(28710).charAt;e.exports=function(e,t,n){return t+(n?i(e,t).length:1)}},25787:(e,t,n)=>{var i=n(47976),r=TypeError;e.exports=function(e,t){if(i(t,e))return e;throw r("Incorrect invocation")}},19670:(e,t,n)=>{var i=n(70111),r=String,s=TypeError;e.exports=function(e){if(i(e))return e;throw s(r(e)+" is not an object")}},23013:e=>{e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},90260:(e,t,n)=>{"use strict";var i,r,s,o=n(23013),a=n(19781),l=n(17854),c=n(60614),u=n(70111),h=n(92597),d=n(70648),p=n(66330),f=n(68880),m=n(98052),g=n(3070).f,v=n(47976),y=n(79518),b=n(27674),w=n(5112),E=n(69711),_=n(29909),x=_.enforce,S=_.get,T=l.Int8Array,k=T&&T.prototype,C=l.Uint8ClampedArray,P=C&&C.prototype,I=T&&y(T),L=k&&y(k),A=Object.prototype,M=l.TypeError,O=w("toStringTag"),N=E("TYPED_ARRAY_TAG"),D=o&&!!b&&"Opera"!==d(l.opera),R=!1,j={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},B={BigInt64Array:8,BigUint64Array:8},U=function(e){var t=y(e);if(u(t)){var n=S(t);return n&&h(n,"TypedArrayConstructor")?n.TypedArrayConstructor:U(t)}},$=function(e){if(!u(e))return!1;var t=d(e);return h(j,t)||h(B,t)};for(i in j)(s=(r=l[i])&&r.prototype)?x(s).TypedArrayConstructor=r:D=!1;for(i in B)(s=(r=l[i])&&r.prototype)&&(x(s).TypedArrayConstructor=r);if((!D||!c(I)||I===Function.prototype)&&(I=function(){throw M("Incorrect invocation")},D))for(i in j)l[i]&&b(l[i],I);if((!D||!L||L===A)&&(L=I.prototype,D))for(i in j)l[i]&&b(l[i].prototype,L);if(D&&y(P)!==L&&b(P,L),a&&!h(L,O))for(i in R=!0,g(L,O,{get:function(){return u(this)?this[N]:void 0}}),j)l[i]&&f(l[i],N,i);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:D,TYPED_ARRAY_TAG:R&&N,aTypedArray:function(e){if($(e))return e;throw M("Target is not a typed array")},aTypedArrayConstructor:function(e){if(c(e)&&(!b||v(I,e)))return e;throw M(p(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n,i){if(a){if(n)for(var r in j){var s=l[r];if(s&&h(s.prototype,e))try{delete s.prototype[e]}catch(n){try{s.prototype[e]=t}catch(e){}}}L[e]&&!n||m(L,e,n?t:D&&k[e]||t,i)}},exportTypedArrayStaticMethod:function(e,t,n){var i,r;if(a){if(b){if(n)for(i in j)if((r=l[i])&&h(r,e))try{delete r[e]}catch(e){}if(I[e]&&!n)return;try{return m(I,e,n?t:D&&I[e]||t)}catch(e){}}for(i in j)!(r=l[i])||r[e]&&!n||m(r,e,t)}},getTypedArrayConstructor:U,isView:function(e){if(!u(e))return!1;var t=d(e);return"DataView"===t||h(j,t)||h(B,t)},isTypedArray:$,TypedArray:I,TypedArrayPrototype:L}},13331:(e,t,n)=>{"use strict";var i=n(17854),r=n(1702),s=n(19781),o=n(23013),a=n(76530),l=n(68880),c=n(89190),u=n(47293),h=n(25787),d=n(19303),p=n(17466),f=n(57067),m=n(11179),g=n(79518),v=n(27674),y=n(8006).f,b=n(3070).f,w=n(21285),E=n(41589),_=n(58003),x=n(29909),S=a.PROPER,T=a.CONFIGURABLE,k=x.get,C=x.set,P="ArrayBuffer",I="Wrong index",L=i.ArrayBuffer,A=L,M=A&&A.prototype,O=i.DataView,N=O&&O.prototype,D=Object.prototype,R=i.Array,j=i.RangeError,B=r(w),U=r([].reverse),$=m.pack,F=m.unpack,H=function(e){return[255&e]},q=function(e){return[255&e,e>>8&255]},V=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},z=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},G=function(e){return $(e,23,4)},K=function(e){return $(e,52,8)},W=function(e,t){b(e.prototype,t,{get:function(){return k(this)[t]}})},X=function(e,t,n,i){var r=f(n),s=k(e);if(r+t>s.byteLength)throw j(I);var o=k(s.buffer).bytes,a=r+s.byteOffset,l=E(o,a,a+t);return i?l:U(l)},J=function(e,t,n,i,r,s){var o=f(n),a=k(e);if(o+t>a.byteLength)throw j(I);for(var l=k(a.buffer).bytes,c=o+a.byteOffset,u=i(+r),h=0;h<t;h++)l[c+h]=u[s?h:t-h-1]};if(o){var Y=S&&L.name!==P;if(u((function(){L(1)}))&&u((function(){new L(-1)}))&&!u((function(){return new L,new L(1.5),new L(NaN),1!=L.length||Y&&!T})))Y&&T&&l(L,"name",P);else{(A=function(e){return h(this,M),new L(f(e))}).prototype=M;for(var Q,Z=y(L),ee=0;Z.length>ee;)(Q=Z[ee++])in A||l(A,Q,L[Q]);M.constructor=A}v&&g(N)!==D&&v(N,D);var te=new O(new A(2)),ne=r(N.setInt8);te.setInt8(0,2147483648),te.setInt8(1,2147483649),!te.getInt8(0)&&te.getInt8(1)||c(N,{setInt8:function(e,t){ne(this,e,t<<24>>24)},setUint8:function(e,t){ne(this,e,t<<24>>24)}},{unsafe:!0})}else M=(A=function(e){h(this,M);var t=f(e);C(this,{bytes:B(R(t),0),byteLength:t}),s||(this.byteLength=t)}).prototype,N=(O=function(e,t,n){h(this,N),h(e,M);var i=k(e).byteLength,r=d(t);if(r<0||r>i)throw j("Wrong offset");if(r+(n=void 0===n?i-r:p(n))>i)throw j("Wrong length");C(this,{buffer:e,byteLength:n,byteOffset:r}),s||(this.buffer=e,this.byteLength=n,this.byteOffset=r)}).prototype,s&&(W(A,"byteLength"),W(O,"buffer"),W(O,"byteLength"),W(O,"byteOffset")),c(N,{getInt8:function(e){return X(this,1,e)[0]<<24>>24},getUint8:function(e){return X(this,1,e)[0]},getInt16:function(e){var t=X(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=X(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return z(X(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return z(X(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return F(X(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return F(X(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){J(this,1,e,H,t)},setUint8:function(e,t){J(this,1,e,H,t)},setInt16:function(e,t){J(this,2,e,q,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){J(this,2,e,q,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){J(this,4,e,V,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){J(this,4,e,V,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){J(this,4,e,G,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){J(this,8,e,K,t,arguments.length>2?arguments[2]:void 0)}});_(A,P),_(O,"DataView"),e.exports={ArrayBuffer:A,DataView:O}},21285:(e,t,n)=>{"use strict";var i=n(47908),r=n(51400),s=n(26244);e.exports=function(e){for(var t=i(this),n=s(t),o=arguments.length,a=r(o>1?arguments[1]:void 0,n),l=o>2?arguments[2]:void 0,c=void 0===l?n:r(l,n);c>a;)t[a++]=e;return t}},18533:(e,t,n)=>{"use strict";var i=n(42092).forEach,r=n(9341)("forEach");e.exports=r?[].forEach:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}},48457:(e,t,n)=>{"use strict";var i=n(49974),r=n(46916),s=n(47908),o=n(53411),a=n(97659),l=n(4411),c=n(26244),u=n(86135),h=n(18554),d=n(71246),p=Array;e.exports=function(e){var t=s(e),n=l(this),f=arguments.length,m=f>1?arguments[1]:void 0,g=void 0!==m;g&&(m=i(m,f>2?arguments[2]:void 0));var v,y,b,w,E,_,x=d(t),S=0;if(!x||this===p&&a(x))for(v=c(t),y=n?new this(v):p(v);v>S;S++)_=g?m(t[S],S):t[S],u(y,S,_);else for(E=(w=h(t,x)).next,y=n?new this:[];!(b=r(E,w)).done;S++)_=g?o(w,m,[b.value,S],!0):b.value,u(y,S,_);return y.length=S,y}},41318:(e,t,n)=>{var i=n(45656),r=n(51400),s=n(26244),o=function(e){return function(t,n,o){var a,l=i(t),c=s(l),u=r(o,c);if(e&&n!=n){for(;c>u;)if((a=l[u++])!=a)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},42092:(e,t,n)=>{var i=n(49974),r=n(1702),s=n(68361),o=n(47908),a=n(26244),l=n(65417),c=r([].push),u=function(e){var t=1==e,n=2==e,r=3==e,u=4==e,h=6==e,d=7==e,p=5==e||h;return function(f,m,g,v){for(var y,b,w=o(f),E=s(w),_=i(m,g),x=a(E),S=0,T=v||l,k=t?T(f,x):n||d?T(f,0):void 0;x>S;S++)if((p||S in E)&&(b=_(y=E[S],S,w),e))if(t)k[S]=b;else if(b)switch(e){case 3:return!0;case 5:return y;case 6:return S;case 2:c(k,y)}else switch(e){case 4:return!1;case 7:c(k,y)}return h?-1:r||u?u:k}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},9341:(e,t,n)=>{"use strict";var i=n(47293);e.exports=function(e,t){var n=[][e];return!!n&&i((function(){n.call(null,t||function(){return 1},1)}))}},41589:(e,t,n)=>{var i=n(51400),r=n(26244),s=n(86135),o=Array,a=Math.max;e.exports=function(e,t,n){for(var l=r(e),c=i(t,l),u=i(void 0===n?l:n,l),h=o(a(u-c,0)),d=0;c<u;c++,d++)s(h,d,e[c]);return h.length=d,h}},50206:(e,t,n)=>{var i=n(1702);e.exports=i([].slice)},94362:(e,t,n)=>{var i=n(41589),r=Math.floor,s=function(e,t){var n=e.length,l=r(n/2);return n<8?o(e,t):a(e,s(i(e,0,l),t),s(i(e,l),t),t)},o=function(e,t){for(var n,i,r=e.length,s=1;s<r;){for(i=s,n=e[s];i&&t(e[i-1],n)>0;)e[i]=e[--i];i!==s++&&(e[i]=n)}return e},a=function(e,t,n,i){for(var r=t.length,s=n.length,o=0,a=0;o<r||a<s;)e[o+a]=o<r&&a<s?i(t[o],n[a])<=0?t[o++]:n[a++]:o<r?t[o++]:n[a++];return e};e.exports=s},77475:(e,t,n)=>{var i=n(43157),r=n(4411),s=n(70111),o=n(5112)("species"),a=Array;e.exports=function(e){var t;return i(e)&&(t=e.constructor,(r(t)&&(t===a||i(t.prototype))||s(t)&&null===(t=t[o]))&&(t=void 0)),void 0===t?a:t}},65417:(e,t,n)=>{var i=n(77475);e.exports=function(e,t){return new(i(e))(0===t?0:t)}},53411:(e,t,n)=>{var i=n(19670),r=n(99212);e.exports=function(e,t,n,s){try{return s?t(i(n)[0],n[1]):t(n)}catch(t){r(e,"throw",t)}}},17072:(e,t,n)=>{var i=n(5112)("iterator"),r=!1;try{var s=0,o={next:function(){return{done:!!s++}},return:function(){r=!0}};o[i]=function(){return this},Array.from(o,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!r)return!1;var n=!1;try{var s={};s[i]=function(){return{next:function(){return{done:n=!0}}}},e(s)}catch(e){}return n}},84326:(e,t,n)=>{var i=n(1702),r=i({}.toString),s=i("".slice);e.exports=function(e){return s(r(e),8,-1)}},70648:(e,t,n)=>{var i=n(51694),r=n(60614),s=n(84326),o=n(5112)("toStringTag"),a=Object,l="Arguments"==s(function(){return arguments}());e.exports=i?s:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=a(e),o))?n:l?s(t):"Object"==(i=s(t))&&r(t.callee)?"Arguments":i}},99920:(e,t,n)=>{var i=n(92597),r=n(53887),s=n(31236),o=n(3070);e.exports=function(e,t,n){for(var a=r(t),l=o.f,c=s.f,u=0;u<a.length;u++){var h=a[u];i(e,h)||n&&i(n,h)||l(e,h,c(t,h))}}},49920:(e,t,n)=>{var i=n(47293);e.exports=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},76178:e=>{e.exports=function(e,t){return{value:e,done:t}}},68880:(e,t,n)=>{var i=n(19781),r=n(3070),s=n(79114);e.exports=i?function(e,t,n){return r.f(e,t,s(1,n))}:function(e,t,n){return e[t]=n,e}},79114:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},86135:(e,t,n)=>{"use strict";var i=n(34948),r=n(3070),s=n(79114);e.exports=function(e,t,n){var o=i(t);o in e?r.f(e,o,s(0,n)):e[o]=n}},47045:(e,t,n)=>{var i=n(56339),r=n(3070);e.exports=function(e,t,n){return n.get&&i(n.get,t,{getter:!0}),n.set&&i(n.set,t,{setter:!0}),r.f(e,t,n)}},98052:(e,t,n)=>{var i=n(60614),r=n(3070),s=n(56339),o=n(13072);e.exports=function(e,t,n,a){a||(a={});var l=a.enumerable,c=void 0!==a.name?a.name:t;if(i(n)&&s(n,c,a),a.global)l?e[t]=n:o(t,n);else{try{a.unsafe?e[t]&&(l=!0):delete e[t]}catch(e){}l?e[t]=n:r.f(e,t,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return e}},89190:(e,t,n)=>{var i=n(98052);e.exports=function(e,t,n){for(var r in t)i(e,r,t[r],n);return e}},13072:(e,t,n)=>{var i=n(17854),r=Object.defineProperty;e.exports=function(e,t){try{r(i,e,{value:t,configurable:!0,writable:!0})}catch(n){i[e]=t}return t}},85117:(e,t,n)=>{"use strict";var i=n(66330),r=TypeError;e.exports=function(e,t){if(!delete e[t])throw r("Cannot delete property "+i(t)+" of "+i(e))}},19781:(e,t,n)=>{var i=n(47293);e.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4154:e=>{var t="object"==typeof document&&document.all,n=void 0===t&&void 0!==t;e.exports={all:t,IS_HTMLDDA:n}},80317:(e,t,n)=>{var i=n(17854),r=n(70111),s=i.document,o=r(s)&&r(s.createElement);e.exports=function(e){return o?s.createElement(e):{}}},48324:e=>{e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},98509:(e,t,n)=>{var i=n(80317)("span").classList,r=i&&i.constructor&&i.constructor.prototype;e.exports=r===Object.prototype?void 0:r},68886:(e,t,n)=>{var i=n(88113).match(/firefox\/(\d+)/i);e.exports=!!i&&+i[1]},7871:(e,t,n)=>{var i=n(83823),r=n(35268);e.exports=!i&&!r&&"object"==typeof window&&"object"==typeof document},83823:e=>{e.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},30256:(e,t,n)=>{var i=n(88113);e.exports=/MSIE|Trident/.test(i)},71528:(e,t,n)=>{var i=n(88113),r=n(17854);e.exports=/ipad|iphone|ipod/i.test(i)&&void 0!==r.Pebble},6833:(e,t,n)=>{var i=n(88113);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(i)},35268:(e,t,n)=>{var i=n(84326),r=n(17854);e.exports="process"==i(r.process)},71036:(e,t,n)=>{var i=n(88113);e.exports=/web0s(?!.*chrome)/i.test(i)},88113:(e,t,n)=>{var i=n(35005);e.exports=i("navigator","userAgent")||""},7392:(e,t,n)=>{var i,r,s=n(17854),o=n(88113),a=s.process,l=s.Deno,c=a&&a.versions||l&&l.version,u=c&&c.v8;u&&(r=(i=u.split("."))[0]>0&&i[0]<4?1:+(i[0]+i[1])),!r&&o&&(!(i=o.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=o.match(/Chrome\/(\d+)/))&&(r=+i[1]),e.exports=r},98008:(e,t,n)=>{var i=n(88113).match(/AppleWebKit\/(\d+)\./);e.exports=!!i&&+i[1]},80748:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},82109:(e,t,n)=>{var i=n(17854),r=n(31236).f,s=n(68880),o=n(98052),a=n(13072),l=n(99920),c=n(54705);e.exports=function(e,t){var n,u,h,d,p,f=e.target,m=e.global,g=e.stat;if(n=m?i:g?i[f]||a(f,{}):(i[f]||{}).prototype)for(u in t){if(d=t[u],h=e.dontCallGetSet?(p=r(n,u))&&p.value:n[u],!c(m?u:f+(g?".":"#")+u,e.forced)&&void 0!==h){if(typeof d==typeof h)continue;l(d,h)}(e.sham||h&&h.sham)&&s(d,"sham",!0),o(n,u,d,e)}}},47293:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},27007:(e,t,n)=>{"use strict";n(74916);var i=n(1702),r=n(98052),s=n(22261),o=n(47293),a=n(5112),l=n(68880),c=a("species"),u=RegExp.prototype;e.exports=function(e,t,n,h){var d=a(e),p=!o((function(){var t={};return t[d]=function(){return 7},7!=""[e](t)})),f=p&&!o((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[c]=function(){return n},n.flags="",n[d]=/./[d]),n.exec=function(){return t=!0,null},n[d](""),!t}));if(!p||!f||n){var m=i(/./[d]),g=t(d,""[e],(function(e,t,n,r,o){var a=i(e),l=t.exec;return l===s||l===u.exec?p&&!o?{done:!0,value:m(t,n,r)}:{done:!0,value:a(n,t,r)}:{done:!1}}));r(String.prototype,e,g[0]),r(u,d,g[1])}h&&l(u[d],"sham",!0)}},22104:(e,t,n)=>{var i=n(34374),r=Function.prototype,s=r.apply,o=r.call;e.exports="object"==typeof Reflect&&Reflect.apply||(i?o.bind(s):function(){return o.apply(s,arguments)})},49974:(e,t,n)=>{var i=n(1702),r=n(19662),s=n(34374),o=i(i.bind);e.exports=function(e,t){return r(e),void 0===t?e:s?o(e,t):function(){return e.apply(t,arguments)}}},34374:(e,t,n)=>{var i=n(47293);e.exports=!i((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},46916:(e,t,n)=>{var i=n(34374),r=Function.prototype.call;e.exports=i?r.bind(r):function(){return r.apply(r,arguments)}},76530:(e,t,n)=>{var i=n(19781),r=n(92597),s=Function.prototype,o=i&&Object.getOwnPropertyDescriptor,a=r(s,"name"),l=a&&"something"===function(){}.name,c=a&&(!i||i&&o(s,"name").configurable);e.exports={EXISTS:a,PROPER:l,CONFIGURABLE:c}},1702:(e,t,n)=>{var i=n(34374),r=Function.prototype,s=r.bind,o=r.call,a=i&&s.bind(o,o);e.exports=i?function(e){return e&&a(e)}:function(e){return e&&function(){return o.apply(e,arguments)}}},35005:(e,t,n)=>{var i=n(17854),r=n(60614),s=function(e){return r(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?s(i[e]):i[e]&&i[e][t]}},71246:(e,t,n)=>{var i=n(70648),r=n(58173),s=n(68554),o=n(97497),a=n(5112)("iterator");e.exports=function(e){if(!s(e))return r(e,a)||r(e,"@@iterator")||o[i(e)]}},18554:(e,t,n)=>{var i=n(46916),r=n(19662),s=n(19670),o=n(66330),a=n(71246),l=TypeError;e.exports=function(e,t){var n=arguments.length<2?a(e):t;if(r(n))return s(i(n,e));throw l(o(e)+" is not iterable")}},58173:(e,t,n)=>{var i=n(19662),r=n(68554);e.exports=function(e,t){var n=e[t];return r(n)?void 0:i(n)}},10647:(e,t,n)=>{var i=n(1702),r=n(47908),s=Math.floor,o=i("".charAt),a=i("".replace),l=i("".slice),c=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,u=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,i,h,d){var p=n+e.length,f=i.length,m=u;return void 0!==h&&(h=r(h),m=c),a(d,m,(function(r,a){var c;switch(o(a,0)){case"$":return"$";case"&":return e;case"`":return l(t,0,n);case"'":return l(t,p);case"<":c=h[l(a,1,-1)];break;default:var u=+a;if(0===u)return r;if(u>f){var d=s(u/10);return 0===d?r:d<=f?void 0===i[d-1]?o(a,1):i[d-1]+o(a,1):r}c=i[u-1]}return void 0===c?"":c}))}},17854:(e,t,n)=>{var i=function(e){return e&&e.Math==Math&&e};e.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},92597:(e,t,n)=>{var i=n(1702),r=n(47908),s=i({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return s(r(e),t)}},3501:e=>{e.exports={}},842:(e,t,n)=>{var i=n(17854);e.exports=function(e,t){var n=i.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))}},60490:(e,t,n)=>{var i=n(35005);e.exports=i("document","documentElement")},64664:(e,t,n)=>{var i=n(19781),r=n(47293),s=n(80317);e.exports=!i&&!r((function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a}))},11179:e=>{var t=Array,n=Math.abs,i=Math.pow,r=Math.floor,s=Math.log,o=Math.LN2;e.exports={pack:function(e,a,l){var c,u,h,d=t(l),p=8*l-a-1,f=(1<<p)-1,m=f>>1,g=23===a?i(2,-24)-i(2,-77):0,v=e<0||0===e&&1/e<0?1:0,y=0;for((e=n(e))!=e||e===1/0?(u=e!=e?1:0,c=f):(c=r(s(e)/o),e*(h=i(2,-c))<1&&(c--,h*=2),(e+=c+m>=1?g/h:g*i(2,1-m))*h>=2&&(c++,h/=2),c+m>=f?(u=0,c=f):c+m>=1?(u=(e*h-1)*i(2,a),c+=m):(u=e*i(2,m-1)*i(2,a),c=0));a>=8;)d[y++]=255&u,u/=256,a-=8;for(c=c<<a|u,p+=a;p>0;)d[y++]=255&c,c/=256,p-=8;return d[--y]|=128*v,d},unpack:function(e,t){var n,r=e.length,s=8*r-t-1,o=(1<<s)-1,a=o>>1,l=s-7,c=r-1,u=e[c--],h=127&u;for(u>>=7;l>0;)h=256*h+e[c--],l-=8;for(n=h&(1<<-l)-1,h>>=-l,l+=t;l>0;)n=256*n+e[c--],l-=8;if(0===h)h=1-a;else{if(h===o)return n?NaN:u?-1/0:1/0;n+=i(2,t),h-=a}return(u?-1:1)*n*i(2,h-t)}}},68361:(e,t,n)=>{var i=n(1702),r=n(47293),s=n(84326),o=Object,a=i("".split);e.exports=r((function(){return!o("z").propertyIsEnumerable(0)}))?function(e){return"String"==s(e)?a(e,""):o(e)}:o},79587:(e,t,n)=>{var i=n(60614),r=n(70111),s=n(27674);e.exports=function(e,t,n){var o,a;return s&&i(o=t.constructor)&&o!==n&&r(a=o.prototype)&&a!==n.prototype&&s(e,a),e}},42788:(e,t,n)=>{var i=n(1702),r=n(60614),s=n(5465),o=i(Function.toString);r(s.inspectSource)||(s.inspectSource=function(e){return o(e)}),e.exports=s.inspectSource},29909:(e,t,n)=>{var i,r,s,o=n(94811),a=n(17854),l=n(1702),c=n(70111),u=n(68880),h=n(92597),d=n(5465),p=n(6200),f=n(3501),m="Object already initialized",g=a.TypeError,v=a.WeakMap;if(o||d.state){var y=d.state||(d.state=new v),b=l(y.get),w=l(y.has),E=l(y.set);i=function(e,t){if(w(y,e))throw g(m);return t.facade=e,E(y,e,t),t},r=function(e){return b(y,e)||{}},s=function(e){return w(y,e)}}else{var _=p("state");f[_]=!0,i=function(e,t){if(h(e,_))throw g(m);return t.facade=e,u(e,_,t),t},r=function(e){return h(e,_)?e[_]:{}},s=function(e){return h(e,_)}}e.exports={set:i,get:r,has:s,enforce:function(e){return s(e)?r(e):i(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=r(t)).type!==e)throw g("Incompatible receiver, "+e+" required");return n}}}},97659:(e,t,n)=>{var i=n(5112),r=n(97497),s=i("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[s]===e)}},43157:(e,t,n)=>{var i=n(84326);e.exports=Array.isArray||function(e){return"Array"==i(e)}},44067:(e,t,n)=>{var i=n(70648),r=n(1702)("".slice);e.exports=function(e){return"Big"===r(i(e),0,3)}},60614:(e,t,n)=>{var i=n(4154),r=i.all;e.exports=i.IS_HTMLDDA?function(e){return"function"==typeof e||e===r}:function(e){return"function"==typeof e}},4411:(e,t,n)=>{var i=n(1702),r=n(47293),s=n(60614),o=n(70648),a=n(35005),l=n(42788),c=function(){},u=[],h=a("Reflect","construct"),d=/^\s*(?:class|function)\b/,p=i(d.exec),f=!d.exec(c),m=function(e){if(!s(e))return!1;try{return h(c,u,e),!0}catch(e){return!1}},g=function(e){if(!s(e))return!1;switch(o(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!p(d,l(e))}catch(e){return!0}};g.sham=!0,e.exports=!h||r((function(){var e;return m(m.call)||!m(Object)||!m((function(){e=!0}))||e}))?g:m},54705:(e,t,n)=>{var i=n(47293),r=n(60614),s=/#|\.prototype\./,o=function(e,t){var n=l[a(e)];return n==u||n!=c&&(r(t)?i(t):!!t)},a=o.normalize=function(e){return String(e).replace(s,".").toLowerCase()},l=o.data={},c=o.NATIVE="N",u=o.POLYFILL="P";e.exports=o},55988:(e,t,n)=>{var i=n(70111),r=Math.floor;e.exports=Number.isInteger||function(e){return!i(e)&&isFinite(e)&&r(e)===e}},68554:e=>{e.exports=function(e){return null==e}},70111:(e,t,n)=>{var i=n(60614),r=n(4154),s=r.all;e.exports=r.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:i(e)||e===s}:function(e){return"object"==typeof e?null!==e:i(e)}},31913:e=>{e.exports=!1},47850:(e,t,n)=>{var i=n(70111),r=n(84326),s=n(5112)("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[s])?!!t:"RegExp"==r(e))}},52190:(e,t,n)=>{var i=n(35005),r=n(60614),s=n(47976),o=n(43307),a=Object;e.exports=o?function(e){return"symbol"==typeof e}:function(e){var t=i("Symbol");return r(t)&&s(t.prototype,a(e))}},20408:(e,t,n)=>{var i=n(49974),r=n(46916),s=n(19670),o=n(66330),a=n(97659),l=n(26244),c=n(47976),u=n(18554),h=n(71246),d=n(99212),p=TypeError,f=function(e,t){this.stopped=e,this.result=t},m=f.prototype;e.exports=function(e,t,n){var g,v,y,b,w,E,_,x=n&&n.that,S=!(!n||!n.AS_ENTRIES),T=!(!n||!n.IS_RECORD),k=!(!n||!n.IS_ITERATOR),C=!(!n||!n.INTERRUPTED),P=i(t,x),I=function(e){return g&&d(g,"normal",e),new f(!0,e)},L=function(e){return S?(s(e),C?P(e[0],e[1],I):P(e[0],e[1])):C?P(e,I):P(e)};if(T)g=e.iterator;else if(k)g=e;else{if(!(v=h(e)))throw p(o(e)+" is not iterable");if(a(v)){for(y=0,b=l(e);b>y;y++)if((w=L(e[y]))&&c(m,w))return w;return new f(!1)}g=u(e,v)}for(E=T?e.next:g.next;!(_=r(E,g)).done;){try{w=L(_.value)}catch(e){d(g,"throw",e)}if("object"==typeof w&&w&&c(m,w))return w}return new f(!1)}},99212:(e,t,n)=>{var i=n(46916),r=n(19670),s=n(58173);e.exports=function(e,t,n){var o,a;r(e);try{if(!(o=s(e,"return"))){if("throw"===t)throw n;return n}o=i(o,e)}catch(e){a=!0,o=e}if("throw"===t)throw n;if(a)throw o;return r(o),n}},63061:(e,t,n)=>{"use strict";var i=n(13383).IteratorPrototype,r=n(70030),s=n(79114),o=n(58003),a=n(97497),l=function(){return this};e.exports=function(e,t,n,c){var u=t+" Iterator";return e.prototype=r(i,{next:s(+!c,n)}),o(e,u,!1,!0),a[u]=l,e}},51656:(e,t,n)=>{"use strict";var i=n(82109),r=n(46916),s=n(31913),o=n(76530),a=n(60614),l=n(63061),c=n(79518),u=n(27674),h=n(58003),d=n(68880),p=n(98052),f=n(5112),m=n(97497),g=n(13383),v=o.PROPER,y=o.CONFIGURABLE,b=g.IteratorPrototype,w=g.BUGGY_SAFARI_ITERATORS,E=f("iterator"),_="keys",x="values",S="entries",T=function(){return this};e.exports=function(e,t,n,o,f,g,k){l(n,t,o);var C,P,I,L=function(e){if(e===f&&D)return D;if(!w&&e in O)return O[e];switch(e){case _:case x:case S:return function(){return new n(this,e)}}return function(){return new n(this)}},A=t+" Iterator",M=!1,O=e.prototype,N=O[E]||O["@@iterator"]||f&&O[f],D=!w&&N||L(f),R="Array"==t&&O.entries||N;if(R&&(C=c(R.call(new e)))!==Object.prototype&&C.next&&(s||c(C)===b||(u?u(C,b):a(C[E])||p(C,E,T)),h(C,A,!0,!0),s&&(m[A]=T)),v&&f==x&&N&&N.name!==x&&(!s&&y?d(O,"name",x):(M=!0,D=function(){return r(N,this)})),f)if(P={values:L(x),keys:g?D:L(_),entries:L(S)},k)for(I in P)(w||M||!(I in O))&&p(O,I,P[I]);else i({target:t,proto:!0,forced:w||M},P);return s&&!k||O[E]===D||p(O,E,D,{name:f}),m[t]=D,P}},13383:(e,t,n)=>{"use strict";var i,r,s,o=n(47293),a=n(60614),l=n(70111),c=n(70030),u=n(79518),h=n(98052),d=n(5112),p=n(31913),f=d("iterator"),m=!1;[].keys&&("next"in(s=[].keys())?(r=u(u(s)))!==Object.prototype&&(i=r):m=!0),!l(i)||o((function(){var e={};return i[f].call(e)!==e}))?i={}:p&&(i=c(i)),a(i[f])||h(i,f,(function(){return this})),e.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:m}},97497:e=>{e.exports={}},26244:(e,t,n)=>{var i=n(17466);e.exports=function(e){return i(e.length)}},56339:(e,t,n)=>{var i=n(47293),r=n(60614),s=n(92597),o=n(19781),a=n(76530).CONFIGURABLE,l=n(42788),c=n(29909),u=c.enforce,h=c.get,d=Object.defineProperty,p=o&&!i((function(){return 8!==d((function(){}),"length",{value:8}).length})),f=String(String).split("String"),m=e.exports=function(e,t,n){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!s(e,"name")||a&&e.name!==t)&&(o?d(e,"name",{value:t,configurable:!0}):e.name=t),p&&n&&s(n,"arity")&&e.length!==n.arity&&d(e,"length",{value:n.arity});try{n&&s(n,"constructor")&&n.constructor?o&&d(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var i=u(e);return s(i,"source")||(i.source=f.join("string"==typeof t?t:"")),e};Function.prototype.toString=m((function(){return r(this)&&h(this).source||l(this)}),"toString")},74758:e=>{var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var i=+e;return(i>0?n:t)(i)}},95948:(e,t,n)=>{var i,r,s,o,a,l,c,u,h=n(17854),d=n(49974),p=n(31236).f,f=n(20261).set,m=n(6833),g=n(71528),v=n(71036),y=n(35268),b=h.MutationObserver||h.WebKitMutationObserver,w=h.document,E=h.process,_=h.Promise,x=p(h,"queueMicrotask"),S=x&&x.value;S||(i=function(){var e,t;for(y&&(e=E.domain)&&e.exit();r;){t=r.fn,r=r.next;try{t()}catch(e){throw r?o():s=void 0,e}}s=void 0,e&&e.enter()},m||y||v||!b||!w?!g&&_&&_.resolve?((c=_.resolve(void 0)).constructor=_,u=d(c.then,c),o=function(){u(i)}):y?o=function(){E.nextTick(i)}:(f=d(f,h),o=function(){f(i)}):(a=!0,l=w.createTextNode(""),new b(i).observe(l,{characterData:!0}),o=function(){l.data=a=!a})),e.exports=S||function(e){var t={fn:e,next:void 0};s&&(s.next=t),r||(r=t,o()),s=t}},78523:(e,t,n)=>{"use strict";var i=n(19662),r=TypeError,s=function(e){var t,n;this.promise=new e((function(e,i){if(void 0!==t||void 0!==n)throw r("Bad Promise constructor");t=e,n=i})),this.resolve=i(t),this.reject=i(n)};e.exports.f=function(e){return new s(e)}},21574:(e,t,n)=>{"use strict";var i=n(19781),r=n(1702),s=n(46916),o=n(47293),a=n(81956),l=n(25181),c=n(55296),u=n(47908),h=n(68361),d=Object.assign,p=Object.defineProperty,f=r([].concat);e.exports=!d||o((function(){if(i&&1!==d({b:1},d(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=d({},e)[n]||a(d({},t)).join("")!=r}))?function(e,t){for(var n=u(e),r=arguments.length,o=1,d=l.f,p=c.f;r>o;)for(var m,g=h(arguments[o++]),v=d?f(a(g),d(g)):a(g),y=v.length,b=0;y>b;)m=v[b++],i&&!s(p,g,m)||(n[m]=g[m]);return n}:d},70030:(e,t,n)=>{var i,r=n(19670),s=n(36048),o=n(80748),a=n(3501),l=n(60490),c=n(80317),u=n(6200)("IE_PROTO"),h=function(){},d=function(e){return"<script>"+e+"<\/script>"},p=function(e){e.write(d("")),e.close();var t=e.parentWindow.Object;return e=null,t},f=function(){try{i=new ActiveXObject("htmlfile")}catch(e){}var e,t;f="undefined"!=typeof document?document.domain&&i?p(i):((t=c("iframe")).style.display="none",l.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(d("document.F=Object")),e.close(),e.F):p(i);for(var n=o.length;n--;)delete f.prototype[o[n]];return f()};a[u]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(h.prototype=r(e),n=new h,h.prototype=null,n[u]=e):n=f(),void 0===t?n:s.f(n,t)}},36048:(e,t,n)=>{var i=n(19781),r=n(3353),s=n(3070),o=n(19670),a=n(45656),l=n(81956);t.f=i&&!r?Object.defineProperties:function(e,t){o(e);for(var n,i=a(t),r=l(t),c=r.length,u=0;c>u;)s.f(e,n=r[u++],i[n]);return e}},3070:(e,t,n)=>{var i=n(19781),r=n(64664),s=n(3353),o=n(19670),a=n(34948),l=TypeError,c=Object.defineProperty,u=Object.getOwnPropertyDescriptor;t.f=i?s?function(e,t,n){if(o(e),t=a(t),o(n),"function"==typeof e&&"prototype"===t&&"value"in n&&"writable"in n&&!n.writable){var i=u(e,t);i&&i.writable&&(e[t]=n.value,n={configurable:"configurable"in n?n.configurable:i.configurable,enumerable:"enumerable"in n?n.enumerable:i.enumerable,writable:!1})}return c(e,t,n)}:c:function(e,t,n){if(o(e),t=a(t),o(n),r)try{return c(e,t,n)}catch(e){}if("get"in n||"set"in n)throw l("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},31236:(e,t,n)=>{var i=n(19781),r=n(46916),s=n(55296),o=n(79114),a=n(45656),l=n(34948),c=n(92597),u=n(64664),h=Object.getOwnPropertyDescriptor;t.f=i?h:function(e,t){if(e=a(e),t=l(t),u)try{return h(e,t)}catch(e){}if(c(e,t))return o(!r(s.f,e,t),e[t])}},8006:(e,t,n)=>{var i=n(16324),r=n(80748).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},25181:(e,t)=>{t.f=Object.getOwnPropertySymbols},79518:(e,t,n)=>{var i=n(92597),r=n(60614),s=n(47908),o=n(6200),a=n(49920),l=o("IE_PROTO"),c=Object,u=c.prototype;e.exports=a?c.getPrototypeOf:function(e){var t=s(e);if(i(t,l))return t[l];var n=t.constructor;return r(n)&&t instanceof n?n.prototype:t instanceof c?u:null}},47976:(e,t,n)=>{var i=n(1702);e.exports=i({}.isPrototypeOf)},16324:(e,t,n)=>{var i=n(1702),r=n(92597),s=n(45656),o=n(41318).indexOf,a=n(3501),l=i([].push);e.exports=function(e,t){var n,i=s(e),c=0,u=[];for(n in i)!r(a,n)&&r(i,n)&&l(u,n);for(;t.length>c;)r(i,n=t[c++])&&(~o(u,n)||l(u,n));return u}},81956:(e,t,n)=>{var i=n(16324),r=n(80748);e.exports=Object.keys||function(e){return i(e,r)}},55296:(e,t)=>{"use strict";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,r=i&&!n.call({1:2},1);t.f=r?function(e){var t=i(this,e);return!!t&&t.enumerable}:n},27674:(e,t,n)=>{var i=n(1702),r=n(19670),s=n(96077);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=i(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(e){}return function(n,i){return r(n),s(i),t?e(n,i):n.__proto__=i,n}}():void 0)},44699:(e,t,n)=>{var i=n(19781),r=n(1702),s=n(81956),o=n(45656),a=r(n(55296).f),l=r([].push),c=function(e){return function(t){for(var n,r=o(t),c=s(r),u=c.length,h=0,d=[];u>h;)n=c[h++],i&&!a(r,n)||l(d,e?[n,r[n]]:r[n]);return d}};e.exports={entries:c(!0),values:c(!1)}},92140:(e,t,n)=>{var i=n(46916),r=n(60614),s=n(70111),o=TypeError;e.exports=function(e,t){var n,a;if("string"===t&&r(n=e.toString)&&!s(a=i(n,e)))return a;if(r(n=e.valueOf)&&!s(a=i(n,e)))return a;if("string"!==t&&r(n=e.toString)&&!s(a=i(n,e)))return a;throw o("Can't convert object to primitive value")}},53887:(e,t,n)=>{var i=n(35005),r=n(1702),s=n(8006),o=n(25181),a=n(19670),l=r([].concat);e.exports=i("Reflect","ownKeys")||function(e){var t=s.f(a(e)),n=o.f;return n?l(t,n(e)):t}},40857:(e,t,n)=>{var i=n(17854);e.exports=i},12534:e=>{e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},63702:(e,t,n)=>{var i=n(17854),r=n(2492),s=n(60614),o=n(54705),a=n(42788),l=n(5112),c=n(7871),u=n(83823),h=n(31913),d=n(7392),p=r&&r.prototype,f=l("species"),m=!1,g=s(i.PromiseRejectionEvent),v=o("Promise",(function(){var e=a(r),t=e!==String(r);if(!t&&66===d)return!0;if(h&&(!p.catch||!p.finally))return!0;if(!d||d<51||!/native code/.test(e)){var n=new r((function(e){e(1)})),i=function(e){e((function(){}),(function(){}))};if((n.constructor={})[f]=i,!(m=n.then((function(){}))instanceof i))return!0}return!t&&(c||u)&&!g}));e.exports={CONSTRUCTOR:v,REJECTION_EVENT:g,SUBCLASSING:m}},2492:(e,t,n)=>{var i=n(17854);e.exports=i.Promise},69478:(e,t,n)=>{var i=n(19670),r=n(70111),s=n(78523);e.exports=function(e,t){if(i(e),r(t)&&t.constructor===e)return t;var n=s.f(e);return(0,n.resolve)(t),n.promise}},80612:(e,t,n)=>{var i=n(2492),r=n(17072),s=n(63702).CONSTRUCTOR;e.exports=s||!r((function(e){i.all(e).then(void 0,(function(){}))}))},2626:(e,t,n)=>{var i=n(3070).f;e.exports=function(e,t,n){n in e||i(e,n,{configurable:!0,get:function(){return t[n]},set:function(e){t[n]=e}})}},18572:e=>{var t=function(){this.head=null,this.tail=null};t.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}},e.exports=t},97651:(e,t,n)=>{var i=n(46916),r=n(19670),s=n(60614),o=n(84326),a=n(22261),l=TypeError;e.exports=function(e,t){var n=e.exec;if(s(n)){var c=i(n,e,t);return null!==c&&r(c),c}if("RegExp"===o(e))return i(a,e,t);throw l("RegExp#exec called on incompatible receiver")}},22261:(e,t,n)=>{"use strict";var i,r,s=n(46916),o=n(1702),a=n(41340),l=n(67066),c=n(52999),u=n(72309),h=n(70030),d=n(29909).get,p=n(9441),f=n(38173),m=u("native-string-replace",String.prototype.replace),g=RegExp.prototype.exec,v=g,y=o("".charAt),b=o("".indexOf),w=o("".replace),E=o("".slice),_=(r=/b*/g,s(g,i=/a/,"a"),s(g,r,"a"),0!==i.lastIndex||0!==r.lastIndex),x=c.BROKEN_CARET,S=void 0!==/()??/.exec("")[1];(_||S||x||p||f)&&(v=function(e){var t,n,i,r,o,c,u,p=this,f=d(p),T=a(e),k=f.raw;if(k)return k.lastIndex=p.lastIndex,t=s(v,k,T),p.lastIndex=k.lastIndex,t;var C=f.groups,P=x&&p.sticky,I=s(l,p),L=p.source,A=0,M=T;if(P&&(I=w(I,"y",""),-1===b(I,"g")&&(I+="g"),M=E(T,p.lastIndex),p.lastIndex>0&&(!p.multiline||p.multiline&&"\n"!==y(T,p.lastIndex-1))&&(L="(?: "+L+")",M=" "+M,A++),n=new RegExp("^(?:"+L+")",I)),S&&(n=new RegExp("^"+L+"$(?!\\s)",I)),_&&(i=p.lastIndex),r=s(g,P?n:p,M),P?r?(r.input=E(r.input,A),r[0]=E(r[0],A),r.index=p.lastIndex,p.lastIndex+=r[0].length):p.lastIndex=0:_&&r&&(p.lastIndex=p.global?r.index+r[0].length:i),S&&r&&r.length>1&&s(m,r[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r&&C)for(r.groups=c=h(null),o=0;o<C.length;o++)c[(u=C[o])[0]]=r[u[1]];return r}),e.exports=v},67066:(e,t,n)=>{"use strict";var i=n(19670);e.exports=function(){var e=i(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},34706:(e,t,n)=>{var i=n(46916),r=n(92597),s=n(47976),o=n(67066),a=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in a||r(e,"flags")||!s(a,e)?t:i(o,e)}},52999:(e,t,n)=>{var i=n(47293),r=n(17854).RegExp,s=i((function(){var e=r("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),o=s||i((function(){return!r("a","y").sticky})),a=s||i((function(){var e=r("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:a,MISSED_STICKY:o,UNSUPPORTED_Y:s}},9441:(e,t,n)=>{var i=n(47293),r=n(17854).RegExp;e.exports=i((function(){var e=r(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},38173:(e,t,n)=>{var i=n(47293),r=n(17854).RegExp;e.exports=i((function(){var e=r("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},84488:(e,t,n)=>{var i=n(68554),r=TypeError;e.exports=function(e){if(i(e))throw r("Can't call method on "+e);return e}},96340:(e,t,n)=>{"use strict";var i=n(35005),r=n(3070),s=n(5112),o=n(19781),a=s("species");e.exports=function(e){var t=i(e),n=r.f;o&&t&&!t[a]&&n(t,a,{configurable:!0,get:function(){return this}})}},58003:(e,t,n)=>{var i=n(3070).f,r=n(92597),s=n(5112)("toStringTag");e.exports=function(e,t,n){e&&!n&&(e=e.prototype),e&&!r(e,s)&&i(e,s,{configurable:!0,value:t})}},6200:(e,t,n)=>{var i=n(72309),r=n(69711),s=i("keys");e.exports=function(e){return s[e]||(s[e]=r(e))}},5465:(e,t,n)=>{var i=n(17854),r=n(13072),s="__core-js_shared__",o=i[s]||r(s,{});e.exports=o},72309:(e,t,n)=>{var i=n(31913),r=n(5465);(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.25.3",mode:i?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.3/LICENSE",source:"https://github.com/zloirock/core-js"})},36707:(e,t,n)=>{var i=n(19670),r=n(39483),s=n(68554),o=n(5112)("species");e.exports=function(e,t){var n,a=i(e).constructor;return void 0===a||s(n=i(a)[o])?t:r(n)}},28710:(e,t,n)=>{var i=n(1702),r=n(19303),s=n(41340),o=n(84488),a=i("".charAt),l=i("".charCodeAt),c=i("".slice),u=function(e){return function(t,n){var i,u,h=s(o(t)),d=r(n),p=h.length;return d<0||d>=p?e?"":void 0:(i=l(h,d))<55296||i>56319||d+1===p||(u=l(h,d+1))<56320||u>57343?e?a(h,d):i:e?c(h,d,d+2):u-56320+(i-55296<<10)+65536}};e.exports={codeAt:u(!1),charAt:u(!0)}},54986:(e,t,n)=>{var i=n(88113);e.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(i)},76650:(e,t,n)=>{var i=n(1702),r=n(17466),s=n(41340),o=n(38415),a=n(84488),l=i(o),c=i("".slice),u=Math.ceil,h=function(e){return function(t,n,i){var o,h,d=s(a(t)),p=r(n),f=d.length,m=void 0===i?" ":s(i);return p<=f||""==m?d:((h=l(m,u((o=p-f)/m.length))).length>o&&(h=c(h,0,o)),e?d+h:h+d)}};e.exports={start:h(!1),end:h(!0)}},33197:(e,t,n)=>{"use strict";var i=n(1702),r=2147483647,s=/[^\0-\u007E]/,o=/[.\u3002\uFF0E\uFF61]/g,a="Overflow: input needs wider integers to process",l=RangeError,c=i(o.exec),u=Math.floor,h=String.fromCharCode,d=i("".charCodeAt),p=i([].join),f=i([].push),m=i("".replace),g=i("".split),v=i("".toLowerCase),y=function(e){return e+22+75*(e<26)},b=function(e,t,n){var i=0;for(e=n?u(e/700):e>>1,e+=u(e/t);e>455;)e=u(e/35),i+=36;return u(i+36*e/(e+38))},w=function(e){var t=[];e=function(e){for(var t=[],n=0,i=e.length;n<i;){var r=d(e,n++);if(r>=55296&&r<=56319&&n<i){var s=d(e,n++);56320==(64512&s)?f(t,((1023&r)<<10)+(1023&s)+65536):(f(t,r),n--)}else f(t,r)}return t}(e);var n,i,s=e.length,o=128,c=0,m=72;for(n=0;n<e.length;n++)(i=e[n])<128&&f(t,h(i));var g=t.length,v=g;for(g&&f(t,"-");v<s;){var w=r;for(n=0;n<e.length;n++)(i=e[n])>=o&&i<w&&(w=i);var E=v+1;if(w-o>u((r-c)/E))throw l(a);for(c+=(w-o)*E,o=w,n=0;n<e.length;n++){if((i=e[n])<o&&++c>r)throw l(a);if(i==o){for(var _=c,x=36;;){var S=x<=m?1:x>=m+26?26:x-m;if(_<S)break;var T=_-S,k=36-S;f(t,h(y(S+T%k))),_=u(T/k),x+=36}f(t,h(y(_))),m=b(c,E,v==g),c=0,v++}}c++,o++}return p(t,"")};e.exports=function(e){var t,n,i=[],r=g(m(v(e),o,"."),".");for(t=0;t<r.length;t++)n=r[t],f(i,c(s,n)?"xn--"+w(n):n);return p(i,".")}},38415:(e,t,n)=>{"use strict";var i=n(19303),r=n(41340),s=n(84488),o=RangeError;e.exports=function(e){var t=r(s(this)),n="",a=i(e);if(a<0||a==1/0)throw o("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(n+=t);return n}},76091:(e,t,n)=>{var i=n(76530).PROPER,r=n(47293),s=n(81361);e.exports=function(e){return r((function(){return!!s[e]()||"​᠎"!=="​᠎"[e]()||i&&s[e].name!==e}))}},53111:(e,t,n)=>{var i=n(1702),r=n(84488),s=n(41340),o=n(81361),a=i("".replace),l="["+o+"]",c=RegExp("^"+l+l+"*"),u=RegExp(l+l+"*$"),h=function(e){return function(t){var n=s(r(t));return 1&e&&(n=a(n,c,"")),2&e&&(n=a(n,u,"")),n}};e.exports={start:h(1),end:h(2),trim:h(3)}},36293:(e,t,n)=>{var i=n(7392),r=n(47293);e.exports=!!Object.getOwnPropertySymbols&&!r((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&i&&i<41}))},20261:(e,t,n)=>{var i,r,s,o,a=n(17854),l=n(22104),c=n(49974),u=n(60614),h=n(92597),d=n(47293),p=n(60490),f=n(50206),m=n(80317),g=n(48053),v=n(6833),y=n(35268),b=a.setImmediate,w=a.clearImmediate,E=a.process,_=a.Dispatch,x=a.Function,S=a.MessageChannel,T=a.String,k=0,C={};try{i=a.location}catch(e){}var P=function(e){if(h(C,e)){var t=C[e];delete C[e],t()}},I=function(e){return function(){P(e)}},L=function(e){P(e.data)},A=function(e){a.postMessage(T(e),i.protocol+"//"+i.host)};b&&w||(b=function(e){g(arguments.length,1);var t=u(e)?e:x(e),n=f(arguments,1);return C[++k]=function(){l(t,void 0,n)},r(k),k},w=function(e){delete C[e]},y?r=function(e){E.nextTick(I(e))}:_&&_.now?r=function(e){_.now(I(e))}:S&&!v?(o=(s=new S).port2,s.port1.onmessage=L,r=c(o.postMessage,o)):a.addEventListener&&u(a.postMessage)&&!a.importScripts&&i&&"file:"!==i.protocol&&!d(A)?(r=A,a.addEventListener("message",L,!1)):r="onreadystatechange"in m("script")?function(e){p.appendChild(m("script")).onreadystatechange=function(){p.removeChild(this),P(e)}}:function(e){setTimeout(I(e),0)}),e.exports={set:b,clear:w}},51400:(e,t,n)=>{var i=n(19303),r=Math.max,s=Math.min;e.exports=function(e,t){var n=i(e);return n<0?r(n+t,0):s(n,t)}},64599:(e,t,n)=>{var i=n(57593),r=TypeError;e.exports=function(e){var t=i(e,"number");if("number"==typeof t)throw r("Can't convert number to bigint");return BigInt(t)}},57067:(e,t,n)=>{var i=n(19303),r=n(17466),s=RangeError;e.exports=function(e){if(void 0===e)return 0;var t=i(e),n=r(t);if(t!==n)throw s("Wrong length or index");return n}},45656:(e,t,n)=>{var i=n(68361),r=n(84488);e.exports=function(e){return i(r(e))}},19303:(e,t,n)=>{var i=n(74758);e.exports=function(e){var t=+e;return t!=t||0===t?0:i(t)}},17466:(e,t,n)=>{var i=n(19303),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},47908:(e,t,n)=>{var i=n(84488),r=Object;e.exports=function(e){return r(i(e))}},84590:(e,t,n)=>{var i=n(73002),r=RangeError;e.exports=function(e,t){var n=i(e);if(n%t)throw r("Wrong offset");return n}},73002:(e,t,n)=>{var i=n(19303),r=RangeError;e.exports=function(e){var t=i(e);if(t<0)throw r("The argument can't be less than 0");return t}},57593:(e,t,n)=>{var i=n(46916),r=n(70111),s=n(52190),o=n(58173),a=n(92140),l=n(5112),c=TypeError,u=l("toPrimitive");e.exports=function(e,t){if(!r(e)||s(e))return e;var n,l=o(e,u);if(l){if(void 0===t&&(t="default"),n=i(l,e,t),!r(n)||s(n))return n;throw c("Can't convert object to primitive value")}return void 0===t&&(t="number"),a(e,t)}},34948:(e,t,n)=>{var i=n(57593),r=n(52190);e.exports=function(e){var t=i(e,"string");return r(t)?t:t+""}},51694:(e,t,n)=>{var i={};i[n(5112)("toStringTag")]="z",e.exports="[object z]"===String(i)},41340:(e,t,n)=>{var i=n(70648),r=String;e.exports=function(e){if("Symbol"===i(e))throw TypeError("Cannot convert a Symbol value to a string");return r(e)}},66330:e=>{var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},19843:(e,t,n)=>{"use strict";var i=n(82109),r=n(17854),s=n(46916),o=n(19781),a=n(63832),l=n(90260),c=n(13331),u=n(25787),h=n(79114),d=n(68880),p=n(55988),f=n(17466),m=n(57067),g=n(84590),v=n(34948),y=n(92597),b=n(70648),w=n(70111),E=n(52190),_=n(70030),x=n(47976),S=n(27674),T=n(8006).f,k=n(97321),C=n(42092).forEach,P=n(96340),I=n(3070),L=n(31236),A=n(29909),M=n(79587),O=A.get,N=A.set,D=A.enforce,R=I.f,j=L.f,B=Math.round,U=r.RangeError,$=c.ArrayBuffer,F=$.prototype,H=c.DataView,q=l.NATIVE_ARRAY_BUFFER_VIEWS,V=l.TYPED_ARRAY_TAG,z=l.TypedArray,G=l.TypedArrayPrototype,K=l.aTypedArrayConstructor,W=l.isTypedArray,X="BYTES_PER_ELEMENT",J="Wrong length",Y=function(e,t){K(e);for(var n=0,i=t.length,r=new e(i);i>n;)r[n]=t[n++];return r},Q=function(e,t){R(e,t,{get:function(){return O(this)[t]}})},Z=function(e){var t;return x(F,e)||"ArrayBuffer"==(t=b(e))||"SharedArrayBuffer"==t},ee=function(e,t){return W(e)&&!E(t)&&t in e&&p(+t)&&t>=0},te=function(e,t){return t=v(t),ee(e,t)?h(2,e[t]):j(e,t)},ne=function(e,t,n){return t=v(t),!(ee(e,t)&&w(n)&&y(n,"value"))||y(n,"get")||y(n,"set")||n.configurable||y(n,"writable")&&!n.writable||y(n,"enumerable")&&!n.enumerable?R(e,t,n):(e[t]=n.value,e)};o?(q||(L.f=te,I.f=ne,Q(G,"buffer"),Q(G,"byteOffset"),Q(G,"byteLength"),Q(G,"length")),i({target:"Object",stat:!0,forced:!q},{getOwnPropertyDescriptor:te,defineProperty:ne}),e.exports=function(e,t,n){var o=e.match(/\d+$/)[0]/8,l=e+(n?"Clamped":"")+"Array",c="get"+e,h="set"+e,p=r[l],v=p,y=v&&v.prototype,b={},E=function(e,t){R(e,t,{get:function(){return function(e,t){var n=O(e);return n.view[c](t*o+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,i){var r=O(e);n&&(i=(i=B(i))<0?0:i>255?255:255&i),r.view[h](t*o+r.byteOffset,i,!0)}(this,t,e)},enumerable:!0})};q?a&&(v=t((function(e,t,n,i){return u(e,y),M(w(t)?Z(t)?void 0!==i?new p(t,g(n,o),i):void 0!==n?new p(t,g(n,o)):new p(t):W(t)?Y(v,t):s(k,v,t):new p(m(t)),e,v)})),S&&S(v,z),C(T(p),(function(e){e in v||d(v,e,p[e])})),v.prototype=y):(v=t((function(e,t,n,i){u(e,y);var r,a,l,c=0,h=0;if(w(t)){if(!Z(t))return W(t)?Y(v,t):s(k,v,t);r=t,h=g(n,o);var d=t.byteLength;if(void 0===i){if(d%o)throw U(J);if((a=d-h)<0)throw U(J)}else if((a=f(i)*o)+h>d)throw U(J);l=a/o}else l=m(t),r=new $(a=l*o);for(N(e,{buffer:r,byteOffset:h,byteLength:a,length:l,view:new H(r)});c<l;)E(e,c++)})),S&&S(v,z),y=v.prototype=_(G)),y.constructor!==v&&d(y,"constructor",v),D(y).TypedArrayConstructor=v,V&&d(y,V,l);var x=v!=p;b[l]=v,i({global:!0,constructor:!0,forced:x,sham:!q},b),X in v||d(v,X,o),X in y||d(y,X,o),P(l)}):e.exports=function(){}},63832:(e,t,n)=>{var i=n(17854),r=n(47293),s=n(17072),o=n(90260).NATIVE_ARRAY_BUFFER_VIEWS,a=i.ArrayBuffer,l=i.Int8Array;e.exports=!o||!r((function(){l(1)}))||!r((function(){new l(-1)}))||!s((function(e){new l,new l(null),new l(1.5),new l(e)}),!0)||r((function(){return 1!==new l(new a(2),1,void 0).length}))},97321:(e,t,n)=>{var i=n(49974),r=n(46916),s=n(39483),o=n(47908),a=n(26244),l=n(18554),c=n(71246),u=n(97659),h=n(44067),d=n(90260).aTypedArrayConstructor,p=n(64599);e.exports=function(e){var t,n,f,m,g,v,y,b,w=s(this),E=o(e),_=arguments.length,x=_>1?arguments[1]:void 0,S=void 0!==x,T=c(E);if(T&&!u(T))for(b=(y=l(E,T)).next,E=[];!(v=r(b,y)).done;)E.push(v.value);for(S&&_>2&&(x=i(x,arguments[2])),n=a(E),f=new(d(w))(n),m=h(f),t=0;n>t;t++)g=S?x(E[t],t):E[t],f[t]=m?p(g):+g;return f}},69711:(e,t,n)=>{var i=n(1702),r=0,s=Math.random(),o=i(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+o(++r+s,36)}},85143:(e,t,n)=>{var i=n(47293),r=n(5112),s=n(31913),o=r("iterator");e.exports=!i((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,i){t.delete("b"),n+=i+e})),s&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[o]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},43307:(e,t,n)=>{var i=n(36293);e.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:(e,t,n)=>{var i=n(19781),r=n(47293);e.exports=i&&r((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},48053:e=>{var t=TypeError;e.exports=function(e,n){if(e<n)throw t("Not enough arguments");return e}},94811:(e,t,n)=>{var i=n(17854),r=n(60614),s=i.WeakMap;e.exports=r(s)&&/native code/.test(String(s))},26800:(e,t,n)=>{var i=n(40857),r=n(92597),s=n(6061),o=n(3070).f;e.exports=function(e){var t=i.Symbol||(i.Symbol={});r(t,e)||o(t,e,{value:s.f(e)})}},6061:(e,t,n)=>{var i=n(5112);t.f=i},5112:(e,t,n)=>{var i=n(17854),r=n(72309),s=n(92597),o=n(69711),a=n(36293),l=n(43307),c=r("wks"),u=i.Symbol,h=u&&u.for,d=l?u:u&&u.withoutSetter||o;e.exports=function(e){if(!s(c,e)||!a&&"string"!=typeof c[e]){var t="Symbol."+e;a&&s(u,e)?c[e]=u[e]:c[e]=l&&h?h(t):d(t)}return c[e]}},81361:e=>{e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},39575:(e,t,n)=>{"use strict";var i=n(82109),r=n(1702),s=n(47293),o=n(13331),a=n(19670),l=n(51400),c=n(17466),u=n(36707),h=o.ArrayBuffer,d=o.DataView,p=d.prototype,f=r(h.prototype.slice),m=r(p.getUint8),g=r(p.setUint8);i({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:s((function(){return!new h(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(f&&void 0===t)return f(a(this),e);for(var n=a(this).byteLength,i=l(e,n),r=l(void 0===t?n:t,n),s=new(u(this,h))(c(r-i)),o=new d(this),p=new d(s),v=0;i<r;)g(p,v++,m(o,i++));return s}})},26699:(e,t,n)=>{"use strict";var i=n(82109),r=n(41318).includes,s=n(47293),o=n(51223);i({target:"Array",proto:!0,forced:s((function(){return!Array(1).includes()}))},{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),o("includes")},66992:(e,t,n)=>{"use strict";var i=n(45656),r=n(51223),s=n(97497),o=n(29909),a=n(3070).f,l=n(51656),c=n(76178),u=n(31913),h=n(19781),d="Array Iterator",p=o.set,f=o.getterFor(d);e.exports=l(Array,"Array",(function(e,t){p(this,{type:d,target:i(e),index:0,kind:t})}),(function(){var e=f(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?(e.target=void 0,c(void 0,!0)):c("keys"==n?i:"values"==n?t[i]:[i,t[i]],!1)}),"values");var m=s.Arguments=s.Array;if(r("keys"),r("values"),r("entries"),!u&&h&&"values"!==m.name)try{a(m,"name",{value:"values"})}catch(e){}},65069:(e,t,n)=>{"use strict";var i=n(82109),r=n(1702),s=n(43157),o=r([].reverse),a=[1,2];i({target:"Array",proto:!0,forced:String(a)===String(a.reverse())},{reverse:function(){return s(this)&&(this.length=this.length),o(this)}})},2707:(e,t,n)=>{"use strict";var i=n(82109),r=n(1702),s=n(19662),o=n(47908),a=n(26244),l=n(85117),c=n(41340),u=n(47293),h=n(94362),d=n(9341),p=n(68886),f=n(30256),m=n(7392),g=n(98008),v=[],y=r(v.sort),b=r(v.push),w=u((function(){v.sort(void 0)})),E=u((function(){v.sort(null)})),_=d("sort"),x=!u((function(){if(m)return m<70;if(!(p&&p>3)){if(f)return!0;if(g)return g<603;var e,t,n,i,r="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)v.push({k:t+i,v:n})}for(v.sort((function(e,t){return t.v-e.v})),i=0;i<v.length;i++)t=v[i].k.charAt(0),r.charAt(r.length-1)!==t&&(r+=t);return"DGBEFHACIJK"!==r}}));i({target:"Array",proto:!0,forced:w||!E||!_||!x},{sort:function(e){void 0!==e&&s(e);var t=o(this);if(x)return void 0===e?y(t):y(t,e);var n,i,r=[],u=a(t);for(i=0;i<u;i++)i in t&&b(r,t[i]);for(h(r,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:c(t)>c(n)?1:-1}}(e)),n=a(r),i=0;i<n;)t[i]=r[i++];for(;i<u;)l(t,i++);return t}})},69720:(e,t,n)=>{var i=n(82109),r=n(44699).entries;i({target:"Object",stat:!0},{entries:function(e){return r(e)}})},49337:(e,t,n)=>{var i=n(82109),r=n(19781),s=n(53887),o=n(45656),a=n(31236),l=n(86135);i({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(e){for(var t,n,i=o(e),r=a.f,c=s(i),u={},h=0;c.length>h;)void 0!==(n=r(i,t=c[h++]))&&l(u,t,n);return u}})},26833:(e,t,n)=>{var i=n(82109),r=n(44699).values;i({target:"Object",stat:!0},{values:function(e){return r(e)}})},70821:(e,t,n)=>{"use strict";var i=n(82109),r=n(46916),s=n(19662),o=n(78523),a=n(12534),l=n(20408);i({target:"Promise",stat:!0,forced:n(80612)},{all:function(e){var t=this,n=o.f(t),i=n.resolve,c=n.reject,u=a((function(){var n=s(t.resolve),o=[],a=0,u=1;l(e,(function(e){var s=a++,l=!1;u++,r(n,t,e).then((function(e){l||(l=!0,o[s]=e,--u||i(o))}),c)})),--u||i(o)}));return u.error&&c(u.value),n.promise}})},94164:(e,t,n)=>{"use strict";var i=n(82109),r=n(31913),s=n(63702).CONSTRUCTOR,o=n(2492),a=n(35005),l=n(60614),c=n(98052),u=o&&o.prototype;if(i({target:"Promise",proto:!0,forced:s,real:!0},{catch:function(e){return this.then(void 0,e)}}),!r&&l(o)){var h=a("Promise").prototype.catch;u.catch!==h&&c(u,"catch",h,{unsafe:!0})}},43401:(e,t,n)=>{"use strict";var i,r,s,o=n(82109),a=n(31913),l=n(35268),c=n(17854),u=n(46916),h=n(98052),d=n(27674),p=n(58003),f=n(96340),m=n(19662),g=n(60614),v=n(70111),y=n(25787),b=n(36707),w=n(20261).set,E=n(95948),_=n(842),x=n(12534),S=n(18572),T=n(29909),k=n(2492),C=n(63702),P=n(78523),I="Promise",L=C.CONSTRUCTOR,A=C.REJECTION_EVENT,M=C.SUBCLASSING,O=T.getterFor(I),N=T.set,D=k&&k.prototype,R=k,j=D,B=c.TypeError,U=c.document,$=c.process,F=P.f,H=F,q=!!(U&&U.createEvent&&c.dispatchEvent),V="unhandledrejection",z=function(e){var t;return!(!v(e)||!g(t=e.then))&&t},G=function(e,t){var n,i,r,s=t.value,o=1==t.state,a=o?e.ok:e.fail,l=e.resolve,c=e.reject,h=e.domain;try{a?(o||(2===t.rejection&&Y(t),t.rejection=1),!0===a?n=s:(h&&h.enter(),n=a(s),h&&(h.exit(),r=!0)),n===e.promise?c(B("Promise-chain cycle")):(i=z(n))?u(i,n,l,c):l(n)):c(s)}catch(e){h&&!r&&h.exit(),c(e)}},K=function(e,t){e.notified||(e.notified=!0,E((function(){for(var n,i=e.reactions;n=i.get();)G(n,e);e.notified=!1,t&&!e.rejection&&X(e)})))},W=function(e,t,n){var i,r;q?((i=U.createEvent("Event")).promise=t,i.reason=n,i.initEvent(e,!1,!0),c.dispatchEvent(i)):i={promise:t,reason:n},!A&&(r=c["on"+e])?r(i):e===V&&_("Unhandled promise rejection",n)},X=function(e){u(w,c,(function(){var t,n=e.facade,i=e.value;if(J(e)&&(t=x((function(){l?$.emit("unhandledRejection",i,n):W(V,n,i)})),e.rejection=l||J(e)?2:1,t.error))throw t.value}))},J=function(e){return 1!==e.rejection&&!e.parent},Y=function(e){u(w,c,(function(){var t=e.facade;l?$.emit("rejectionHandled",t):W("rejectionhandled",t,e.value)}))},Q=function(e,t,n){return function(i){e(t,i,n)}},Z=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,K(e,!0))},ee=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw B("Promise can't be resolved itself");var i=z(t);i?E((function(){var n={done:!1};try{u(i,t,Q(ee,n,e),Q(Z,n,e))}catch(t){Z(n,t,e)}})):(e.value=t,e.state=1,K(e,!1))}catch(t){Z({done:!1},t,e)}}};if(L&&(j=(R=function(e){y(this,j),m(e),u(i,this);var t=O(this);try{e(Q(ee,t),Q(Z,t))}catch(e){Z(t,e)}}).prototype,(i=function(e){N(this,{type:I,done:!1,notified:!1,parent:!1,reactions:new S,rejection:!1,state:0,value:void 0})}).prototype=h(j,"then",(function(e,t){var n=O(this),i=F(b(this,R));return n.parent=!0,i.ok=!g(e)||e,i.fail=g(t)&&t,i.domain=l?$.domain:void 0,0==n.state?n.reactions.add(i):E((function(){G(i,n)})),i.promise})),r=function(){var e=new i,t=O(e);this.promise=e,this.resolve=Q(ee,t),this.reject=Q(Z,t)},P.f=F=function(e){return e===R||void 0===e?new r(e):H(e)},!a&&g(k)&&D!==Object.prototype)){s=D.then,M||h(D,"then",(function(e,t){var n=this;return new R((function(e,t){u(s,n,e,t)})).then(e,t)}),{unsafe:!0});try{delete D.constructor}catch(e){}d&&d(D,j)}o({global:!0,constructor:!0,wrap:!0,forced:L},{Promise:R}),p(R,I,!1,!0),f(I)},88674:(e,t,n)=>{n(43401),n(70821),n(94164),n(6027),n(60683),n(96294)},6027:(e,t,n)=>{"use strict";var i=n(82109),r=n(46916),s=n(19662),o=n(78523),a=n(12534),l=n(20408);i({target:"Promise",stat:!0,forced:n(80612)},{race:function(e){var t=this,n=o.f(t),i=n.reject,c=a((function(){var o=s(t.resolve);l(e,(function(e){r(o,t,e).then(n.resolve,i)}))}));return c.error&&i(c.value),n.promise}})},60683:(e,t,n)=>{"use strict";var i=n(82109),r=n(46916),s=n(78523);i({target:"Promise",stat:!0,forced:n(63702).CONSTRUCTOR},{reject:function(e){var t=s.f(this);return r(t.reject,void 0,e),t.promise}})},96294:(e,t,n)=>{"use strict";var i=n(82109),r=n(35005),s=n(31913),o=n(2492),a=n(63702).CONSTRUCTOR,l=n(69478),c=r("Promise"),u=s&&!a;i({target:"Promise",stat:!0,forced:s||a},{resolve:function(e){return l(u&&this===c?o:this,e)}})},24603:(e,t,n)=>{var i=n(19781),r=n(17854),s=n(1702),o=n(54705),a=n(79587),l=n(68880),c=n(8006).f,u=n(47976),h=n(47850),d=n(41340),p=n(34706),f=n(52999),m=n(2626),g=n(98052),v=n(47293),y=n(92597),b=n(29909).enforce,w=n(96340),E=n(5112),_=n(9441),x=n(38173),S=E("match"),T=r.RegExp,k=T.prototype,C=r.SyntaxError,P=s(k.exec),I=s("".charAt),L=s("".replace),A=s("".indexOf),M=s("".slice),O=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,N=/a/g,D=/a/g,R=new T(N)!==N,j=f.MISSED_STICKY,B=f.UNSUPPORTED_Y;if(o("RegExp",i&&(!R||j||_||x||v((function(){return D[S]=!1,T(N)!=N||T(D)==D||"/a/i"!=T(N,"i")}))))){for(var U=function(e,t){var n,i,r,s,o,c,f=u(k,this),m=h(e),g=void 0===t,v=[],w=e;if(!f&&m&&g&&e.constructor===U)return e;if((m||u(k,e))&&(e=e.source,g&&(t=p(w))),e=void 0===e?"":d(e),t=void 0===t?"":d(t),w=e,_&&"dotAll"in N&&(i=!!t&&A(t,"s")>-1)&&(t=L(t,/s/g,"")),n=t,j&&"sticky"in N&&(r=!!t&&A(t,"y")>-1)&&B&&(t=L(t,/y/g,"")),x&&(s=function(e){for(var t,n=e.length,i=0,r="",s=[],o={},a=!1,l=!1,c=0,u="";i<=n;i++){if("\\"===(t=I(e,i)))t+=I(e,++i);else if("]"===t)a=!1;else if(!a)switch(!0){case"["===t:a=!0;break;case"("===t:P(O,M(e,i+1))&&(i+=2,l=!0),r+=t,c++;continue;case">"===t&&l:if(""===u||y(o,u))throw new C("Invalid capture group name");o[u]=!0,s[s.length]=[u,c],l=!1,u="";continue}l?u+=t:r+=t}return[r,s]}(e),e=s[0],v=s[1]),o=a(T(e,t),f?this:k,U),(i||r||v.length)&&(c=b(o),i&&(c.dotAll=!0,c.raw=U(function(e){for(var t,n=e.length,i=0,r="",s=!1;i<=n;i++)"\\"!==(t=I(e,i))?s||"."!==t?("["===t?s=!0:"]"===t&&(s=!1),r+=t):r+="[\\s\\S]":r+=t+I(e,++i);return r}(e),n)),r&&(c.sticky=!0),v.length&&(c.groups=v)),e!==w)try{l(o,"source",""===w?"(?:)":w)}catch(e){}return o},$=c(T),F=0;$.length>F;)m(U,T,$[F++]);k.constructor=U,U.prototype=k,g(r,"RegExp",U,{constructor:!0})}w("RegExp")},74916:(e,t,n)=>{"use strict";var i=n(82109),r=n(22261);i({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},78783:(e,t,n)=>{"use strict";var i=n(28710).charAt,r=n(41340),s=n(29909),o=n(51656),a=n(76178),l="String Iterator",c=s.set,u=s.getterFor(l);o(String,"String",(function(e){c(this,{type:l,string:r(e),index:0})}),(function(){var e,t=u(this),n=t.string,r=t.index;return r>=n.length?a(void 0,!0):(e=i(n,r),t.index+=e.length,a(e,!1))}))},83112:(e,t,n)=>{"use strict";var i=n(82109),r=n(76650).start;i({target:"String",proto:!0,forced:n(54986)},{padStart:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},15306:(e,t,n)=>{"use strict";var i=n(22104),r=n(46916),s=n(1702),o=n(27007),a=n(47293),l=n(19670),c=n(60614),u=n(68554),h=n(19303),d=n(17466),p=n(41340),f=n(84488),m=n(31530),g=n(58173),v=n(10647),y=n(97651),b=n(5112)("replace"),w=Math.max,E=Math.min,_=s([].concat),x=s([].push),S=s("".indexOf),T=s("".slice),k="$0"==="a".replace(/./,"$0"),C=!!/./[b]&&""===/./[b]("a","$0");o("replace",(function(e,t,n){var s=C?"$":"$0";return[function(e,n){var i=f(this),s=u(e)?void 0:g(e,b);return s?r(s,e,i,n):r(t,p(i),e,n)},function(e,r){var o=l(this),a=p(e);if("string"==typeof r&&-1===S(r,s)&&-1===S(r,"$<")){var u=n(t,o,a,r);if(u.done)return u.value}var f=c(r);f||(r=p(r));var g=o.global;if(g){var b=o.unicode;o.lastIndex=0}for(var k=[];;){var C=y(o,a);if(null===C)break;if(x(k,C),!g)break;""===p(C[0])&&(o.lastIndex=m(a,d(o.lastIndex),b))}for(var P,I="",L=0,A=0;A<k.length;A++){for(var M=p((C=k[A])[0]),O=w(E(h(C.index),a.length),0),N=[],D=1;D<C.length;D++)x(N,void 0===(P=C[D])?P:String(P));var R=C.groups;if(f){var j=_([M],N,O,a);void 0!==R&&x(j,R);var B=p(i(r,void 0,j))}else B=v(M,a,O,N,R,r);O>=L&&(I+=T(a,L,O)+B,L=O+M.length)}return I+T(a,L)}]}),!!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!k||C)},73210:(e,t,n)=>{"use strict";var i=n(82109),r=n(53111).trim;i({target:"String",proto:!0,forced:n(76091)("trim")},{trim:function(){return r(this)}})},72443:(e,t,n)=>{n(26800)("asyncIterator")},41817:(e,t,n)=>{"use strict";var i=n(82109),r=n(19781),s=n(17854),o=n(1702),a=n(92597),l=n(60614),c=n(47976),u=n(41340),h=n(3070).f,d=n(99920),p=s.Symbol,f=p&&p.prototype;if(r&&l(p)&&(!("description"in f)||void 0!==p().description)){var m={},g=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:u(arguments[0]),t=c(f,this)?new p(e):void 0===e?p():p(e);return""===e&&(m[t]=!0),t};d(g,p),g.prototype=f,f.constructor=g;var v="Symbol(test)"==String(p("test")),y=o(f.valueOf),b=o(f.toString),w=/^Symbol\((.*)\)[^)]+$/,E=o("".replace),_=o("".slice);h(f,"description",{configurable:!0,get:function(){var e=y(this);if(a(m,e))return"";var t=b(e),n=v?_(t,7,-1):E(t,w,"$1");return""===n?void 0:n}}),i({global:!0,constructor:!0,forced:!0},{Symbol:g})}},33105:(e,t,n)=>{"use strict";var i=n(90260),r=n(21285),s=n(64599),o=n(70648),a=n(46916),l=n(1702),c=n(47293),u=i.aTypedArray,h=i.exportTypedArrayMethod,d=l("".slice);h("fill",(function(e){var t=arguments.length;u(this);var n="Big"===d(o(this),0,3)?s(e):+e;return a(r,this,n,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)}),c((function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),1!==e})))},3462:(e,t,n)=>{"use strict";var i=n(17854),r=n(46916),s=n(90260),o=n(26244),a=n(84590),l=n(47908),c=n(47293),u=i.RangeError,h=i.Int8Array,d=h&&h.prototype,p=d&&d.set,f=s.aTypedArray,m=s.exportTypedArrayMethod,g=!c((function(){var e=new Uint8ClampedArray(2);return r(p,e,{length:1,0:3},1),3!==e[1]})),v=g&&s.NATIVE_ARRAY_BUFFER_VIEWS&&c((function(){var e=new h(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));m("set",(function(e){f(this);var t=a(arguments.length>1?arguments[1]:void 0,1),n=l(e);if(g)return r(p,this,n,t);var i=this.length,s=o(n),c=0;if(s+t>i)throw u("Wrong length");for(;c<s;)this[t+c]=n[c++]}),!g||v)},33824:(e,t,n)=>{"use strict";var i=n(17854),r=n(1702),s=n(47293),o=n(19662),a=n(94362),l=n(90260),c=n(68886),u=n(30256),h=n(7392),d=n(98008),p=l.aTypedArray,f=l.exportTypedArrayMethod,m=i.Uint16Array,g=m&&r(m.prototype.sort),v=!(!g||s((function(){g(new m(2),null)}))&&s((function(){g(new m(2),{})}))),y=!!g&&!s((function(){if(h)return h<74;if(c)return c<67;if(u)return!0;if(d)return d<602;var e,t,n=new m(516),i=Array(516);for(e=0;e<516;e++)t=e%4,n[e]=515-e,i[e]=e-2*t+3;for(g(n,(function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(n[e]!==i[e])return!0}));f("sort",(function(e){return void 0!==e&&o(e),y?g(this,e):a(p(this),function(e){return function(t,n){return void 0!==e?+e(t,n)||0:n!=n?-1:t!=t?1:0===t&&0===n?1/t>0&&1/n<0?1:-1:t>n}}(e))}),!y||v)},82472:(e,t,n)=>{n(19843)("Uint8",(function(e){return function(t,n,i){return e(this,t,n,i)}}))},54747:(e,t,n)=>{var i=n(17854),r=n(48324),s=n(98509),o=n(18533),a=n(68880),l=function(e){if(e&&e.forEach!==o)try{a(e,"forEach",o)}catch(t){e.forEach=o}};for(var c in r)r[c]&&l(i[c]&&i[c].prototype);l(s)},33948:(e,t,n)=>{var i=n(17854),r=n(48324),s=n(98509),o=n(66992),a=n(68880),l=n(5112),c=l("iterator"),u=l("toStringTag"),h=o.values,d=function(e,t){if(e){if(e[c]!==h)try{a(e,c,h)}catch(t){e[c]=h}if(e[u]||a(e,u,t),r[t])for(var n in o)if(e[n]!==o[n])try{a(e,n,o[n])}catch(t){e[n]=o[n]}}};for(var p in r)d(i[p]&&i[p].prototype,p);d(s,"DOMTokenList")},65556:(e,t,n)=>{"use strict";n(66992);var i=n(82109),r=n(17854),s=n(46916),o=n(1702),a=n(19781),l=n(85143),c=n(98052),u=n(89190),h=n(58003),d=n(63061),p=n(29909),f=n(25787),m=n(60614),g=n(92597),v=n(49974),y=n(70648),b=n(19670),w=n(70111),E=n(41340),_=n(70030),x=n(79114),S=n(18554),T=n(71246),k=n(48053),C=n(5112),P=n(94362),I=C("iterator"),L="URLSearchParams",A="URLSearchParamsIterator",M=p.set,O=p.getterFor(L),N=p.getterFor(A),D=Object.getOwnPropertyDescriptor,R=function(e){if(!a)return r[e];var t=D(r,e);return t&&t.value},j=R("fetch"),B=R("Request"),U=R("Headers"),$=B&&B.prototype,F=U&&U.prototype,H=r.RegExp,q=r.TypeError,V=r.decodeURIComponent,z=r.encodeURIComponent,G=o("".charAt),K=o([].join),W=o([].push),X=o("".replace),J=o([].shift),Y=o([].splice),Q=o("".split),Z=o("".slice),ee=/\+/g,te=Array(4),ne=function(e){return te[e-1]||(te[e-1]=H("((?:%[\\da-f]{2}){"+e+"})","gi"))},ie=function(e){try{return V(e)}catch(t){return e}},re=function(e){var t=X(e,ee," "),n=4;try{return V(t)}catch(e){for(;n;)t=X(t,ne(n--),ie);return t}},se=/[!'()~]|%20/g,oe={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ae=function(e){return oe[e]},le=function(e){return X(z(e),se,ae)},ce=d((function(e,t){M(this,{type:A,iterator:S(O(e).entries),kind:t})}),"Iterator",(function(){var e=N(this),t=e.kind,n=e.iterator.next(),i=n.value;return n.done||(n.value="keys"===t?i.key:"values"===t?i.value:[i.key,i.value]),n}),!0),ue=function(e){this.entries=[],this.url=null,void 0!==e&&(w(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===G(e,0)?Z(e,1):e:E(e)))};ue.prototype={type:L,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,i,r,o,a,l,c=T(e);if(c)for(n=(t=S(e,c)).next;!(i=s(n,t)).done;){if(o=(r=S(b(i.value))).next,(a=s(o,r)).done||(l=s(o,r)).done||!s(o,r).done)throw q("Expected sequence with length 2");W(this.entries,{key:E(a.value),value:E(l.value)})}else for(var u in e)g(e,u)&&W(this.entries,{key:u,value:E(e[u])})},parseQuery:function(e){if(e)for(var t,n,i=Q(e,"&"),r=0;r<i.length;)(t=i[r++]).length&&(n=Q(t,"="),W(this.entries,{key:re(J(n)),value:re(K(n,"="))}))},serialize:function(){for(var e,t=this.entries,n=[],i=0;i<t.length;)e=t[i++],W(n,le(e.key)+"="+le(e.value));return K(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var he=function(){f(this,de);var e=arguments.length>0?arguments[0]:void 0;M(this,new ue(e))},de=he.prototype;if(u(de,{append:function(e,t){k(arguments.length,2);var n=O(this);W(n.entries,{key:E(e),value:E(t)}),n.updateURL()},delete:function(e){k(arguments.length,1);for(var t=O(this),n=t.entries,i=E(e),r=0;r<n.length;)n[r].key===i?Y(n,r,1):r++;t.updateURL()},get:function(e){k(arguments.length,1);for(var t=O(this).entries,n=E(e),i=0;i<t.length;i++)if(t[i].key===n)return t[i].value;return null},getAll:function(e){k(arguments.length,1);for(var t=O(this).entries,n=E(e),i=[],r=0;r<t.length;r++)t[r].key===n&&W(i,t[r].value);return i},has:function(e){k(arguments.length,1);for(var t=O(this).entries,n=E(e),i=0;i<t.length;)if(t[i++].key===n)return!0;return!1},set:function(e,t){k(arguments.length,1);for(var n,i=O(this),r=i.entries,s=!1,o=E(e),a=E(t),l=0;l<r.length;l++)(n=r[l]).key===o&&(s?Y(r,l--,1):(s=!0,n.value=a));s||W(r,{key:o,value:a}),i.updateURL()},sort:function(){var e=O(this);P(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,n=O(this).entries,i=v(e,arguments.length>1?arguments[1]:void 0),r=0;r<n.length;)i((t=n[r++]).value,t.key,this)},keys:function(){return new ce(this,"keys")},values:function(){return new ce(this,"values")},entries:function(){return new ce(this,"entries")}},{enumerable:!0}),c(de,I,de.entries,{name:"entries"}),c(de,"toString",(function(){return O(this).serialize()}),{enumerable:!0}),h(he,L),i({global:!0,constructor:!0,forced:!l},{URLSearchParams:he}),!l&&m(U)){var pe=o(F.has),fe=o(F.set),me=function(e){if(w(e)){var t,n=e.body;if(y(n)===L)return t=e.headers?new U(e.headers):new U,pe(t,"content-type")||fe(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),_(e,{body:x(0,E(n)),headers:x(0,t)})}return e};if(m(j)&&i({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return j(e,arguments.length>1?me(arguments[1]):{})}}),m(B)){var ge=function(e){return f(this,$),new B(e,arguments.length>1?me(arguments[1]):{})};$.constructor=ge,ge.prototype=$,i({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:ge})}}e.exports={URLSearchParams:he,getState:O}},41637:(e,t,n)=>{n(65556)},68789:(e,t,n)=>{"use strict";n(78783);var i,r=n(82109),s=n(19781),o=n(85143),a=n(17854),l=n(49974),c=n(1702),u=n(98052),h=n(47045),d=n(25787),p=n(92597),f=n(21574),m=n(48457),g=n(41589),v=n(28710).codeAt,y=n(33197),b=n(41340),w=n(58003),E=n(48053),_=n(65556),x=n(29909),S=x.set,T=x.getterFor("URL"),k=_.URLSearchParams,C=_.getState,P=a.URL,I=a.TypeError,L=a.parseInt,A=Math.floor,M=Math.pow,O=c("".charAt),N=c(/./.exec),D=c([].join),R=c(1..toString),j=c([].pop),B=c([].push),U=c("".replace),$=c([].shift),F=c("".split),H=c("".slice),q=c("".toLowerCase),V=c([].unshift),z="Invalid scheme",G="Invalid host",K="Invalid port",W=/[a-z]/i,X=/[\d+-.a-z]/i,J=/\d/,Y=/^0x/i,Q=/^[0-7]+$/,Z=/^\d+$/,ee=/^[\da-f]+$/i,te=/[\0\t\n\r #%/:<>?@[\\\]^|]/,ne=/[\0\t\n\r #/:<>?@[\\\]^|]/,ie=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,re=/[\t\n\r]/g,se=function(e){var t,n,i,r;if("number"==typeof e){for(t=[],n=0;n<4;n++)V(t,e%256),e=A(e/256);return D(t,".")}if("object"==typeof e){for(t="",i=function(e){for(var t=null,n=1,i=null,r=0,s=0;s<8;s++)0!==e[s]?(r>n&&(t=i,n=r),i=null,r=0):(null===i&&(i=s),++r);return r>n&&(t=i,n=r),t}(e),n=0;n<8;n++)r&&0===e[n]||(r&&(r=!1),i===n?(t+=n?":":"::",r=!0):(t+=R(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},oe={},ae=f({},oe,{" ":1,'"':1,"<":1,">":1,"`":1}),le=f({},ae,{"#":1,"?":1,"{":1,"}":1}),ce=f({},le,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),ue=function(e,t){var n=v(e,0);return n>32&&n<127&&!p(t,e)?e:encodeURIComponent(e)},he={ftp:21,file:null,http:80,https:443,ws:80,wss:443},de=function(e,t){var n;return 2==e.length&&N(W,O(e,0))&&(":"==(n=O(e,1))||!t&&"|"==n)},pe=function(e){var t;return e.length>1&&de(H(e,0,2))&&(2==e.length||"/"===(t=O(e,2))||"\\"===t||"?"===t||"#"===t)},fe=function(e){return"."===e||"%2e"===q(e)},me={},ge={},ve={},ye={},be={},we={},Ee={},_e={},xe={},Se={},Te={},ke={},Ce={},Pe={},Ie={},Le={},Ae={},Me={},Oe={},Ne={},De={},Re=function(e,t,n){var i,r,s,o=b(e);if(t){if(r=this.parse(o))throw I(r);this.searchParams=null}else{if(void 0!==n&&(i=new Re(n,!0)),r=this.parse(o,null,i))throw I(r);(s=C(new k)).bindURL(this),this.searchParams=s}};Re.prototype={type:"URL",parse:function(e,t,n){var r,s,o,a,l,c=this,u=t||me,h=0,d="",f=!1,v=!1,y=!1;for(e=b(e),t||(c.scheme="",c.username="",c.password="",c.host=null,c.port=null,c.path=[],c.query=null,c.fragment=null,c.cannotBeABaseURL=!1,e=U(e,ie,"")),e=U(e,re,""),r=m(e);h<=r.length;){switch(s=r[h],u){case me:if(!s||!N(W,s)){if(t)return z;u=ve;continue}d+=q(s),u=ge;break;case ge:if(s&&(N(X,s)||"+"==s||"-"==s||"."==s))d+=q(s);else{if(":"!=s){if(t)return z;d="",u=ve,h=0;continue}if(t&&(c.isSpecial()!=p(he,d)||"file"==d&&(c.includesCredentials()||null!==c.port)||"file"==c.scheme&&!c.host))return;if(c.scheme=d,t)return void(c.isSpecial()&&he[c.scheme]==c.port&&(c.port=null));d="","file"==c.scheme?u=Pe:c.isSpecial()&&n&&n.scheme==c.scheme?u=ye:c.isSpecial()?u=_e:"/"==r[h+1]?(u=be,h++):(c.cannotBeABaseURL=!0,B(c.path,""),u=Oe)}break;case ve:if(!n||n.cannotBeABaseURL&&"#"!=s)return z;if(n.cannotBeABaseURL&&"#"==s){c.scheme=n.scheme,c.path=g(n.path),c.query=n.query,c.fragment="",c.cannotBeABaseURL=!0,u=De;break}u="file"==n.scheme?Pe:we;continue;case ye:if("/"!=s||"/"!=r[h+1]){u=we;continue}u=xe,h++;break;case be:if("/"==s){u=Se;break}u=Me;continue;case we:if(c.scheme=n.scheme,s==i)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=g(n.path),c.query=n.query;else if("/"==s||"\\"==s&&c.isSpecial())u=Ee;else if("?"==s)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=g(n.path),c.query="",u=Ne;else{if("#"!=s){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=g(n.path),c.path.length--,u=Me;continue}c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=g(n.path),c.query=n.query,c.fragment="",u=De}break;case Ee:if(!c.isSpecial()||"/"!=s&&"\\"!=s){if("/"!=s){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,u=Me;continue}u=Se}else u=xe;break;case _e:if(u=xe,"/"!=s||"/"!=O(d,h+1))continue;h++;break;case xe:if("/"!=s&&"\\"!=s){u=Se;continue}break;case Se:if("@"==s){f&&(d="%40"+d),f=!0,o=m(d);for(var w=0;w<o.length;w++){var E=o[w];if(":"!=E||y){var _=ue(E,ce);y?c.password+=_:c.username+=_}else y=!0}d=""}else if(s==i||"/"==s||"?"==s||"#"==s||"\\"==s&&c.isSpecial()){if(f&&""==d)return"Invalid authority";h-=m(d).length+1,d="",u=Te}else d+=s;break;case Te:case ke:if(t&&"file"==c.scheme){u=Le;continue}if(":"!=s||v){if(s==i||"/"==s||"?"==s||"#"==s||"\\"==s&&c.isSpecial()){if(c.isSpecial()&&""==d)return G;if(t&&""==d&&(c.includesCredentials()||null!==c.port))return;if(a=c.parseHost(d))return a;if(d="",u=Ae,t)return;continue}"["==s?v=!0:"]"==s&&(v=!1),d+=s}else{if(""==d)return G;if(a=c.parseHost(d))return a;if(d="",u=Ce,t==ke)return}break;case Ce:if(!N(J,s)){if(s==i||"/"==s||"?"==s||"#"==s||"\\"==s&&c.isSpecial()||t){if(""!=d){var x=L(d,10);if(x>65535)return K;c.port=c.isSpecial()&&x===he[c.scheme]?null:x,d=""}if(t)return;u=Ae;continue}return K}d+=s;break;case Pe:if(c.scheme="file","/"==s||"\\"==s)u=Ie;else{if(!n||"file"!=n.scheme){u=Me;continue}if(s==i)c.host=n.host,c.path=g(n.path),c.query=n.query;else if("?"==s)c.host=n.host,c.path=g(n.path),c.query="",u=Ne;else{if("#"!=s){pe(D(g(r,h),""))||(c.host=n.host,c.path=g(n.path),c.shortenPath()),u=Me;continue}c.host=n.host,c.path=g(n.path),c.query=n.query,c.fragment="",u=De}}break;case Ie:if("/"==s||"\\"==s){u=Le;break}n&&"file"==n.scheme&&!pe(D(g(r,h),""))&&(de(n.path[0],!0)?B(c.path,n.path[0]):c.host=n.host),u=Me;continue;case Le:if(s==i||"/"==s||"\\"==s||"?"==s||"#"==s){if(!t&&de(d))u=Me;else if(""==d){if(c.host="",t)return;u=Ae}else{if(a=c.parseHost(d))return a;if("localhost"==c.host&&(c.host=""),t)return;d="",u=Ae}continue}d+=s;break;case Ae:if(c.isSpecial()){if(u=Me,"/"!=s&&"\\"!=s)continue}else if(t||"?"!=s)if(t||"#"!=s){if(s!=i&&(u=Me,"/"!=s))continue}else c.fragment="",u=De;else c.query="",u=Ne;break;case Me:if(s==i||"/"==s||"\\"==s&&c.isSpecial()||!t&&("?"==s||"#"==s)){if(".."===(l=q(l=d))||"%2e."===l||".%2e"===l||"%2e%2e"===l?(c.shortenPath(),"/"==s||"\\"==s&&c.isSpecial()||B(c.path,"")):fe(d)?"/"==s||"\\"==s&&c.isSpecial()||B(c.path,""):("file"==c.scheme&&!c.path.length&&de(d)&&(c.host&&(c.host=""),d=O(d,0)+":"),B(c.path,d)),d="","file"==c.scheme&&(s==i||"?"==s||"#"==s))for(;c.path.length>1&&""===c.path[0];)$(c.path);"?"==s?(c.query="",u=Ne):"#"==s&&(c.fragment="",u=De)}else d+=ue(s,le);break;case Oe:"?"==s?(c.query="",u=Ne):"#"==s?(c.fragment="",u=De):s!=i&&(c.path[0]+=ue(s,oe));break;case Ne:t||"#"!=s?s!=i&&("'"==s&&c.isSpecial()?c.query+="%27":c.query+="#"==s?"%23":ue(s,oe)):(c.fragment="",u=De);break;case De:s!=i&&(c.fragment+=ue(s,ae))}h++}},parseHost:function(e){var t,n,i;if("["==O(e,0)){if("]"!=O(e,e.length-1))return G;if(t=function(e){var t,n,i,r,s,o,a,l=[0,0,0,0,0,0,0,0],c=0,u=null,h=0,d=function(){return O(e,h)};if(":"==d()){if(":"!=O(e,1))return;h+=2,u=++c}for(;d();){if(8==c)return;if(":"!=d()){for(t=n=0;n<4&&N(ee,d());)t=16*t+L(d(),16),h++,n++;if("."==d()){if(0==n)return;if(h-=n,c>6)return;for(i=0;d();){if(r=null,i>0){if(!("."==d()&&i<4))return;h++}if(!N(J,d()))return;for(;N(J,d());){if(s=L(d(),10),null===r)r=s;else{if(0==r)return;r=10*r+s}if(r>255)return;h++}l[c]=256*l[c]+r,2!=++i&&4!=i||c++}if(4!=i)return;break}if(":"==d()){if(h++,!d())return}else if(d())return;l[c++]=t}else{if(null!==u)return;h++,u=++c}}if(null!==u)for(o=c-u,c=7;0!=c&&o>0;)a=l[c],l[c--]=l[u+o-1],l[u+--o]=a;else if(8!=c)return;return l}(H(e,1,-1)),!t)return G;this.host=t}else if(this.isSpecial()){if(e=y(e),N(te,e))return G;if(t=function(e){var t,n,i,r,s,o,a,l=F(e,".");if(l.length&&""==l[l.length-1]&&l.length--,(t=l.length)>4)return e;for(n=[],i=0;i<t;i++){if(""==(r=l[i]))return e;if(s=10,r.length>1&&"0"==O(r,0)&&(s=N(Y,r)?16:8,r=H(r,8==s?1:2)),""===r)o=0;else{if(!N(10==s?Z:8==s?Q:ee,r))return e;o=L(r,s)}B(n,o)}for(i=0;i<t;i++)if(o=n[i],i==t-1){if(o>=M(256,5-t))return null}else if(o>255)return null;for(a=j(n),i=0;i<n.length;i++)a+=n[i]*M(256,3-i);return a}(e),null===t)return G;this.host=t}else{if(N(ne,e))return G;for(t="",n=m(e),i=0;i<n.length;i++)t+=ue(n[i],oe);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return p(he,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"==this.scheme&&1==t&&de(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,i=e.password,r=e.host,s=e.port,o=e.path,a=e.query,l=e.fragment,c=t+":";return null!==r?(c+="//",e.includesCredentials()&&(c+=n+(i?":"+i:"")+"@"),c+=se(r),null!==s&&(c+=":"+s)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?o[0]:o.length?"/"+D(o,"/"):"",null!==a&&(c+="?"+a),null!==l&&(c+="#"+l),c},setHref:function(e){var t=this.parse(e);if(t)throw I(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"==e)try{return new je(e.path[0]).origin}catch(e){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+se(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(b(e)+":",me)},getUsername:function(){return this.username},setUsername:function(e){var t=m(b(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=ue(t[n],ce)}},getPassword:function(){return this.password},setPassword:function(e){var t=m(b(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=ue(t[n],ce)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?se(e):se(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,Te)},getHostname:function(){var e=this.host;return null===e?"":se(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,ke)},getPort:function(){var e=this.port;return null===e?"":b(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""==(e=b(e))?this.port=null:this.parse(e,Ce))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+D(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,Ae))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""==(e=b(e))?this.query=null:("?"==O(e,0)&&(e=H(e,1)),this.query="",this.parse(e,Ne)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!=(e=b(e))?("#"==O(e,0)&&(e=H(e,1)),this.fragment="",this.parse(e,De)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var je=function(e){var t=d(this,Be),n=E(arguments.length,1)>1?arguments[1]:void 0,i=S(t,new Re(e,!1,n));s||(t.href=i.serialize(),t.origin=i.getOrigin(),t.protocol=i.getProtocol(),t.username=i.getUsername(),t.password=i.getPassword(),t.host=i.getHost(),t.hostname=i.getHostname(),t.port=i.getPort(),t.pathname=i.getPathname(),t.search=i.getSearch(),t.searchParams=i.getSearchParams(),t.hash=i.getHash())},Be=je.prototype,Ue=function(e,t){return{get:function(){return T(this)[e]()},set:t&&function(e){return T(this)[t](e)},configurable:!0,enumerable:!0}};if(s&&(h(Be,"href",Ue("serialize","setHref")),h(Be,"origin",Ue("getOrigin")),h(Be,"protocol",Ue("getProtocol","setProtocol")),h(Be,"username",Ue("getUsername","setUsername")),h(Be,"password",Ue("getPassword","setPassword")),h(Be,"host",Ue("getHost","setHost")),h(Be,"hostname",Ue("getHostname","setHostname")),h(Be,"port",Ue("getPort","setPort")),h(Be,"pathname",Ue("getPathname","setPathname")),h(Be,"search",Ue("getSearch","setSearch")),h(Be,"searchParams",Ue("getSearchParams")),h(Be,"hash",Ue("getHash","setHash"))),u(Be,"toJSON",(function(){return T(this).serialize()}),{enumerable:!0}),u(Be,"toString",(function(){return T(this).serialize()}),{enumerable:!0}),P){var $e=P.createObjectURL,Fe=P.revokeObjectURL;$e&&u(je,"createObjectURL",l($e,P)),Fe&&u(je,"revokeObjectURL",l(Fe,P))}w(je,"URL"),r({global:!0,constructor:!0,forced:!o,sham:!s},{URL:je})},60285:(e,t,n)=>{n(68789)},64063:e=>{"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var i,r,s;if(Array.isArray(t)){if((i=t.length)!=n.length)return!1;for(r=i;0!=r--;)if(!e(t[r],n[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((i=(s=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(r=i;0!=r--;)if(!Object.prototype.hasOwnProperty.call(n,s[r]))return!1;for(r=i;0!=r--;){var o=s[r];if(!e(t[o],n[o]))return!1}return!0}return t!=t&&n!=n}},1476:e=>{"use strict";const t="[a-fA-F\\d:]",n=e=>e&&e.includeBoundaries?`(?:(?<=\\s|^)(?=${t})|(?<=${t})(?=\\s|$))`:"",i="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",r="[a-fA-F\\d]{1,4}",s=`\n(?:\n(?:${r}:){7}(?:${r}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:${r}:){6}(?:${i}|:${r}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:${r}:){5}(?::${i}|(?::${r}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:${r}:){4}(?:(?::${r}){0,1}:${i}|(?::${r}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:${r}:){3}(?:(?::${r}){0,2}:${i}|(?::${r}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:${r}:){2}(?:(?::${r}){0,3}:${i}|(?::${r}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:${r}:){1}(?:(?::${r}){0,4}:${i}|(?::${r}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::(?:(?::${r}){0,5}:${i}|(?::${r}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1\n`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),o=new RegExp(`(?:^${i}$)|(?:^${s}$)`),a=new RegExp(`^${i}$`),l=new RegExp(`^${s}$`),c=e=>e&&e.exact?o:new RegExp(`(?:${n(e)}${i}${n(e)})|(?:${n(e)}${s}${n(e)})`,"g");c.v4=e=>e&&e.exact?a:new RegExp(`${n(e)}${i}${n(e)}`,"g"),c.v6=e=>e&&e.exact?l:new RegExp(`${n(e)}${s}${n(e)}`,"g"),e.exports=c},49461:e=>{"use strict";var t=e.exports=function(e,t,i){"function"==typeof t&&(i=t,t={}),n(t,"function"==typeof(i=t.cb||i)?i:i.pre||function(){},i.post||function(){},e,"",e)};function n(e,i,r,s,o,a,l,c,u,h){if(s&&"object"==typeof s&&!Array.isArray(s)){for(var d in i(s,o,a,l,c,u,h),s){var p=s[d];if(Array.isArray(p)){if(d in t.arrayKeywords)for(var f=0;f<p.length;f++)n(e,i,r,p[f],o+"/"+d+"/"+f,a,o,d,s,f)}else if(d in t.propsKeywords){if(p&&"object"==typeof p)for(var m in p)n(e,i,r,p[m],o+"/"+d+"/"+m.replace(/~/g,"~0").replace(/\//g,"~1"),a,o,d,s,m)}else(d in t.keywords||e.allKeys&&!(d in t.skipKeywords))&&n(e,i,r,p,o+"/"+d,a,o,d,s)}r(s,o,a,l,c,u,h)}}t.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},t.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},t.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},t.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},22356:function(e,t){!function(e){"use strict";var t="dnd-poly-",n=["none","copy","copyLink","copyMove","link","linkMove","move","all"],i=["none","copy","move","link"],r=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(e){}return e}();function s(e){return e&&e.tagName}function o(e,t,n){void 0===n&&(n=!0),document.addEventListener(e,t,!!r&&{passive:n})}function a(e,t){document.removeEventListener(e,t)}function l(e,t,n,i){void 0===i&&(i=!1);var s=r?{passive:!0,capture:i}:i;return e.addEventListener(t,n,s),{off:function(){e.removeEventListener(t,n,s)}}}function c(e){return 0===e.length?0:e.reduce((function(e,t){return t+e}),0)/e.length}function u(e,t){for(var n=0;n<e.changedTouches.length;n++)if(e.changedTouches[n].identifier===t)return!0;return!1}function h(e,t,n){for(var i=[],r=[],s=0;s<t.touches.length;s++){var o=t.touches[s];i.push(o[e+"X"]),r.push(o[e+"Y"])}n.x=c(i),n.y=c(r)}var d=["","-webkit-"];function p(e,t,n,i,r){void 0===r&&(r=!0);var s=t.x,o=t.y;i&&(s+=i.x,o+=i.y),r&&(s-=parseInt(e.offsetWidth,10)/2,o-=parseInt(e.offsetHeight,10)/2);for(var a="translate3d("+s+"px,"+o+"px, 0)",l=0;l<d.length;l++){var c=d[l]+"transform";e.style[c]=a+" "+n[l]}}var f=function(){function e(e,t){this.t=e,this.i=t,this.s=i[0]}return Object.defineProperty(e.prototype,"dropEffect",{get:function(){return this.s},set:function(e){0!==this.t.mode&&n.indexOf(e)>-1&&(this.s=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"types",{get:function(){if(0!==this.t.mode)return Object.freeze(this.t.types)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"effectAllowed",{get:function(){return this.t.effectAllowed},set:function(e){2===this.t.mode&&n.indexOf(e)>-1&&(this.t.effectAllowed=e)},enumerable:!0,configurable:!0}),e.prototype.setData=function(e,t){if(2===this.t.mode){if(e.indexOf(" ")>-1)throw new Error("illegal arg: type contains space");this.t.data[e]=t,-1===this.t.types.indexOf(e)&&this.t.types.push(e)}},e.prototype.getData=function(e){if(1===this.t.mode||2===this.t.mode)return this.t.data[e]||""},e.prototype.clearData=function(e){if(2===this.t.mode){if(e&&this.t.data[e]){delete this.t.data[e];var t=this.t.types.indexOf(e);return void(t>-1&&this.t.types.splice(t,1))}this.t.data={},this.t.types=[]}},e.prototype.setDragImage=function(e,t,n){2===this.t.mode&&this.i(e,t,n)},e}();function m(e,t){return e?e===n[0]?i[0]:0===e.indexOf(n[1])||e===n[7]?i[1]:0===e.indexOf(n[4])?i[3]:e===n[6]?i[2]:i[1]:3===t.nodeType&&"A"===t.tagName?i[3]:i[1]}function g(e,t,n,i,r,s,o){void 0===s&&(s=!0),void 0===o&&(o=null);var a=function(e,t,n,i,r,s,o){void 0===o&&(o=null);var a=t.changedTouches[0],l=new Event(n,{bubbles:!0,cancelable:i});l.dataTransfer=s,l.relatedTarget=o,l.screenX=a.screenX,l.screenY=a.screenY,l.clientX=a.clientX,l.clientY=a.clientY,l.pageX=a.pageX,l.pageY=a.pageY;var c=e.getBoundingClientRect();return l.offsetX=l.clientX-c.left,l.offsetY=l.clientY-c.top,l}(t,n,e,s,document.defaultView,r,o),l=!t.dispatchEvent(a);return i.mode=0,l}function v(e,t){if(!e||e===n[7])return t;if(t===i[1]){if(0===e.indexOf(i[1]))return i[1]}else if(t===i[3]){if(0===e.indexOf(i[3])||e.indexOf("Link")>-1)return i[3]}else if(t===i[2]&&(0===e.indexOf(i[2])||e.indexOf("Move")>-1))return i[2];return i[0]}var y,b=function(){function e(e,t,n,i){this.h=e,this.o=t,this.u=n,this.l=i,this.v=0,this.p=null,this.g=null,this.m=e,this.I=e.changedTouches[0],this.j=this.C.bind(this),this.S=this.k.bind(this),o("touchmove",this.j,!1),o("touchend",this.S,!1),o("touchcancel",this.S,!1)}return e.prototype.A=function(){var e=this;this.v=1,this.O=i[0],this.D={data:{},effectAllowed:void 0,mode:3,types:[]},this.M={x:null,y:null},this.F={x:null,y:null};var t=this.u;if(this.N=new f(this.D,(function(n,i,r){t=n,"number"!=typeof i&&"number"!=typeof r||(e.P={x:i||0,y:r||0})})),this.D.mode=2,this.N.dropEffect=i[0],g("dragstart",this.u,this.m,this.D,this.N))return this.v=3,this.T(),!1;h("page",this.m,this.F);var n,r=this.o.dragImageSetup(t);if(this.L=(n=r,d.map((function(e){var t=n.style[e+"transform"];return t&&"none"!==t?t.replace(/translate\(\D*\d+[^,]*,\D*\d+[^,]*\)\s*/g,""):""}))),r.style.position="absolute",r.style.left="0px",r.style.top="0px",r.style.zIndex="999999",r.classList.add("dnd-poly-drag-image"),r.classList.add("dnd-poly-icon"),this._=r,!this.P)if(this.o.dragImageOffset)this.P={x:this.o.dragImageOffset.x,y:this.o.dragImageOffset.y};else if(this.o.dragImageCenterOnTouch){var s=getComputedStyle(t);this.P={x:0-parseInt(s.marginLeft,10),y:0-parseInt(s.marginTop,10)}}else{var o=t.getBoundingClientRect();s=getComputedStyle(t),this.P={x:o.left-this.I.clientX-parseInt(s.marginLeft,10)+o.width/2,y:o.top-this.I.clientY-parseInt(s.marginTop,10)+o.height/2}}return p(this._,this.F,this.L,this.P,this.o.dragImageCenterOnTouch),document.body.appendChild(this._),this.V=window.setInterval((function(){e.X||(e.X=!0,e.Y(),e.X=!1)}),this.o.iterationInterval),!0},e.prototype.T=function(){this.V&&(clearInterval(this.V),this.V=null),a("touchmove",this.j),a("touchend",this.S),a("touchcancel",this.S),this._&&(this._.parentNode.removeChild(this._),this._=null),this.l(this.o,this.m,this.v)},e.prototype.C=function(e){var t=this;if(!1!==u(e,this.I.identifier)){if(this.m=e,0===this.v){var n=void 0;if(this.o.dragStartConditionOverride)try{n=this.o.dragStartConditionOverride(e)}catch(e){n=!1}else n=1===e.touches.length;return n?void(!0===this.A()&&(this.h.preventDefault(),e.preventDefault())):void this.T()}if(e.preventDefault(),h("client",e,this.M),h("page",e,this.F),this.o.dragImageTranslateOverride)try{var i=!1;if(this.o.dragImageTranslateOverride(e,{x:this.M.x,y:this.M.y},this.p,(function(e,n){t._&&(i=!0,t.M.x+=e,t.M.y+=n,t.F.x+=e,t.F.y+=n,p(t._,t.F,t.L,t.P,t.o.dragImageCenterOnTouch))})),i)return}catch(e){}p(this._,this.F,this.L,this.P,this.o.dragImageCenterOnTouch)}},e.prototype.k=function(e){if(!1!==u(e,this.I.identifier)){if(this.o.dragImageTranslateOverride)try{this.o.dragImageTranslateOverride(void 0,void 0,void 0,(function(){}))}catch(e){}0!==this.v?(e.preventDefault(),this.v="touchcancel"===e.type?3:2):this.T()}},e.prototype.Y=function(){var e=this,n=this.O;this.D.mode=3,this.N.dropEffect=i[0];var r=g("drag",this.u,this.m,this.D,this.N);if(r&&(this.O=i[0]),r||2===this.v||3===this.v)return this.q(this.v)?void function(e,t,n,i){var r=getComputedStyle(e);if("hidden"!==r.visibility&&"none"!==r.display){t.classList.add("dnd-poly-snapback");var s=getComputedStyle(t),o=parseFloat(s.transitionDuration);if(isNaN(o)||0===o)i();else{var a=e.getBoundingClientRect(),l={x:a.left,y:a.top};l.x+=document.body.scrollLeft||document.documentElement.scrollLeft,l.y+=document.body.scrollTop||document.documentElement.scrollTop,l.x-=parseInt(r.marginLeft,10),l.y-=parseInt(r.marginTop,10);var c=parseFloat(s.transitionDelay),u=Math.round(1e3*(o+c));p(t,l,n,void 0,!1),setTimeout(i,u)}}else i()}(this.u,this._,this.L,(function(){e.B()})):void this.B();var o=this.o.elementFromPoint(this.M.x,this.M.y),a=this.g;o!==this.p&&o!==this.g&&(this.p=o,null!==this.g&&(this.D.mode=3,this.N.dropEffect=i[0],g("dragexit",this.g,this.m,this.D,this.N,!1)),null===this.p?this.g=this.p:(this.D.mode=3,this.N.dropEffect=m(this.D.effectAllowed,this.u),g("dragenter",this.p,this.m,this.D,this.N)?(this.g=this.p,this.O=v(this.N.effectAllowed,this.N.dropEffect)):this.p!==document.body&&(this.g=document.body))),a!==this.g&&s(a)&&(this.D.mode=3,this.N.dropEffect=i[0],g("dragleave",a,this.m,this.D,this.N,!1,this.g)),s(this.g)&&(this.D.mode=3,this.N.dropEffect=m(this.D.effectAllowed,this.u),!1===g("dragover",this.g,this.m,this.D,this.N)?this.O=i[0]:this.O=v(this.N.effectAllowed,this.N.dropEffect)),n!==this.O&&this._.classList.remove(t+n);var l=t+this.O;this._.classList.add(l)},e.prototype.q=function(e){var t=this.O===i[0]||null===this.g||3===e;return t?s(this.g)&&(this.D.mode=3,this.N.dropEffect=i[0],g("dragleave",this.g,this.m,this.D,this.N,!1)):s(this.g)&&(this.D.mode=1,this.N.dropEffect=this.O,!0===g("drop",this.g,this.m,this.D,this.N)?this.O=this.N.dropEffect:this.O=i[0]),t},e.prototype.B=function(){this.D.mode=3,this.N.dropEffect=this.O,g("dragend",this.u,this.m,this.D,this.N,!1),this.v=2,this.T()},e}(),w={iterationInterval:150,tryFindDraggableTarget:function(e){var t=e.target;do{if(!1!==t.draggable){if(!0===t.draggable)return t;if(t.getAttribute&&"true"===t.getAttribute("draggable"))return t}}while((t=t.parentNode)&&t!==document.body)},dragImageSetup:function(e){var t=e.cloneNode(!0);return function e(t,n){if(1===t.nodeType){for(var i=getComputedStyle(t),r=0;r<i.length;r++){var s=i[r];n.style.setProperty(s,i.getPropertyValue(s),i.getPropertyPriority(s))}if(n.style.pointerEvents="none",n.removeAttribute("id"),n.removeAttribute("class"),n.removeAttribute("draggable"),"CANVAS"===n.nodeName){var o=t,a=n,l=o.getContext("2d").getImageData(0,0,o.width,o.height);a.getContext("2d").putImageData(l,0,0)}}if(t.hasChildNodes())for(r=0;r<t.childNodes.length;r++)e(t.childNodes[r],n.childNodes[r])}(e,t),t},elementFromPoint:function(e,t){return document.elementFromPoint(e,t)}};function E(e){if(!y){var t=w.tryFindDraggableTarget(e);if(t)try{y=new b(e,w,t,x)}catch(t){throw x(w,e,3),t}}}function _(e){var t=e.target,n=function(e){r.off(),s.off(),o.off(),a.off(),t&&t.dispatchEvent(new CustomEvent("dnd-poly-dragstart-cancel",{bubbles:!0,cancelable:!0})),clearTimeout(i)};t&&t.dispatchEvent(new CustomEvent("dnd-poly-dragstart-pending",{bubbles:!0,cancelable:!0}));var i=window.setTimeout((function(){r.off(),s.off(),o.off(),a.off(),E(e)}),w.holdToDrag),r=l(t,"touchend",n),s=l(t,"touchcancel",n),o=l(t,"touchmove",n),a=l(window,"scroll",n,!0)}function x(e,t,n){if(0===n&&e.defaultActionOverride)try{e.defaultActionOverride(t),t.defaultPrevented}catch(e){}y=null}e.polyfill=function(e){if(e&&Object.keys(e).forEach((function(t){w[t]=e[t]})),!w.forceApply){var t=(n={dragEvents:"ondragstart"in document.documentElement,draggable:"draggable"in document.documentElement,userAgentSupportingNativeDnD:void 0},i=!!window.chrome||/chrome/i.test(navigator.userAgent),n.userAgentSupportingNativeDnD=!(/iPad|iPhone|iPod|Android/.test(navigator.userAgent)||i&&"ontouchstart"in document.documentElement),n);if(t.userAgentSupportingNativeDnD&&t.draggable&&t.dragEvents)return!1}var n,i;return w.holdToDrag?o("touchstart",_,!1):o("touchstart",E,!1),!0},Object.defineProperty(e,"__esModule",{value:!0})}(t)},34358:function(e,t){!function(e){"use strict";function t(e){return e===document.body||e===document.documentElement}function n(e,n){var i;if(t(e))i=0===n?e.clientLeft:e.clientTop;else{var r=e.getBoundingClientRect();i=0===n?r.left:r.top}return i}function i(e,n){return t(e)?0===n?window.innerWidth:window.innerHeight:0===n?e.clientWidth:e.clientHeight}function r(e,n,i){var r=0===n?"scrollLeft":"scrollTop",s=t(e);if(2===arguments.length)return s?document.body[r]||document.documentElement[r]:e[r];s?(document.documentElement[r]+=i,document.body[r]+=i):e[r]+=i}function s(e,t,n){return e<n?-1:t-e<n?1:0}function o(e,t,n,i){return-1===e?Math.abs(t-i):1===e?Math.abs(n-t-i):0}function a(e,t,n){var i=0===e?n.scrollX:n.scrollY;return 1===t?i>=(0===e?n.scrollWidth-n.width:n.scrollHeight-n.height):-1!==t||i<=0}var l,c,u,h,d,p=75,f=function(e,t){var n=e/t;return n*n*n*t},m={horizontal:0,vertical:0},g={x:0,y:0};function v(){l||(l=window.requestAnimationFrame(y))}function y(){var e=0,n=0,i=t(h);0!==m.horizontal&&(e=Math.round(f(g.x,p)*m.horizontal),r(h,0,e)),0!==m.vertical&&(n=Math.round(f(g.y,p)*m.vertical),r(h,1,n)),i?d(e,n):d(0,0),l=null,b(c,h,p,m,g)&&v()}function b(e,t,l,c,u){if(!e||!t)return!1;var h={x:n(t,0),y:n(t,1),width:i(t,0),height:i(t,1),scrollX:r(t,0),scrollY:r(t,1),scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight},d={x:e.x-h.x,y:e.y-h.y};return c.horizontal=s(d.x,h.width,l),c.vertical=s(d.y,h.height,l),c.horizontal&&a(0,c.horizontal,h)?c.horizontal=0:c.horizontal&&(u.x=o(c.horizontal,d.x,h.width,l)),c.vertical&&a(1,c.vertical,h)?c.vertical=0:c.vertical&&(u.y=o(c.vertical,d.y,h.height,l)),!(!c.horizontal&&!c.vertical)}e.scrollBehaviourDragImageTranslateOverride=function(e,t,n,i){c=t,d=i,u!==n&&(h=function(e){do{if(!e)return;if(t=e,n=getComputedStyle(t),t.scrollHeight>t.clientHeight&&("scroll"===n.overflowY||"auto"===n.overflowY)||t.scrollWidth>t.clientWidth&&("scroll"===n.overflowX||"auto"===n.overflowX))return e;if(e===document.documentElement)return null}while(e=e.parentNode);var t,n;return null}(u=n)),b(c,h,p,m,g)?v():l&&(window.cancelAnimationFrame(l),l=null)},Object.defineProperty(e,"__esModule",{value:!0})}(t)},55161:function(e){e.exports=function(){"use strict";var e=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},t=f,n=a,i=function(e){return l(a(e))},r=l,s=p,o=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function a(e){for(var t,n=[],i=0,r=0,s="";null!=(t=o.exec(e));){var a=t[0],l=t[1],c=t.index;if(s+=e.slice(r,c),r=c+a.length,l)s+=l[1];else{s&&(n.push(s),s="");var h=t[2],d=t[3],p=t[4],f=t[5],m=t[6],g=t[7],v="+"===m||"*"===m,y="?"===m||"*"===m,b=h||"/",w=p||f||(g?".*":"[^"+b+"]+?");n.push({name:d||i++,prefix:h||"",delimiter:b,optional:y,repeat:v,pattern:u(w)})}}return r<e.length&&(s+=e.substr(r)),s&&n.push(s),n}function l(t){for(var n=new Array(t.length),i=0;i<t.length;i++)"object"==typeof t[i]&&(n[i]=new RegExp("^"+t[i].pattern+"$"));return function(i){for(var r="",s=i||{},o=0;o<t.length;o++){var a=t[o];if("string"!=typeof a){var l,c=s[a.name];if(null==c){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to be defined')}if(e(c)){if(!a.repeat)throw new TypeError('Expected "'+a.name+'" to not repeat, but received "'+c+'"');if(0===c.length){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to not be empty')}for(var u=0;u<c.length;u++){if(l=encodeURIComponent(c[u]),!n[o].test(l))throw new TypeError('Expected all "'+a.name+'" to match "'+a.pattern+'", but received "'+l+'"');r+=(0===u?a.prefix:a.delimiter)+l}}else{if(l=encodeURIComponent(c),!n[o].test(l))throw new TypeError('Expected "'+a.name+'" to match "'+a.pattern+'", but received "'+l+'"');r+=a.prefix+l}}else r+=a}return r}}function c(e){return e.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function u(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function h(e,t){return e.keys=t,e}function d(e){return e.sensitive?"":"i"}function p(e,t){for(var n=(t=t||{}).strict,i=!1!==t.end,r="",s=e[e.length-1],o="string"==typeof s&&/\/$/.test(s),a=0;a<e.length;a++){var l=e[a];if("string"==typeof l)r+=c(l);else{var u=c(l.prefix),h=l.pattern;l.repeat&&(h+="(?:"+u+h+")*"),r+=h=l.optional?u?"(?:"+u+"("+h+"))?":"("+h+")?":u+"("+h+")"}}return n||(r=(o?r.slice(0,-2):r)+"(?:\\/(?=$))?"),r+=i?"$":n&&o?"":"(?=\\/|$)",new RegExp("^"+r,d(t))}function f(t,n,i){return e(n=n||[])?i||(i={}):(i=n,n=[]),t instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var i=0;i<n.length;i++)t.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return h(e,t)}(t,n):e(t)?function(e,t,n){for(var i=[],r=0;r<e.length;r++)i.push(f(e[r],t,n).source);return h(new RegExp("(?:"+i.join("|")+")",d(n)),t)}(t,n,i):function(e,t,n){for(var i=a(e),r=p(i,n),s=0;s<i.length;s++)"string"!=typeof i[s]&&t.push(i[s]);return h(r,t)}(t,n,i)}t.parse=n,t.compile=i,t.tokensToFunction=r,t.tokensToRegExp=s;var m,g="undefined"!=typeof document,v="undefined"!=typeof window,y="undefined"!=typeof history,b="undefined"!=typeof process,w=g&&document.ontouchstart?"touchstart":"click",E=v&&!(!window.history.location&&!window.location);function _(){this.callbacks=[],this.exits=[],this.current="",this.len=0,this._decodeURLComponents=!0,this._base="",this._strict=!1,this._running=!1,this._hashbang=!1,this.clickHandler=this.clickHandler.bind(this),this._onpopstate=this._onpopstate.bind(this)}function x(e,t){if("function"==typeof e)return x.call(this,"*",e);if("function"==typeof t)for(var n=new k(e,null,this),i=1;i<arguments.length;++i)this.callbacks.push(n.middleware(arguments[i]));else"string"==typeof e?this["string"==typeof t?"redirect":"show"](e,t):this.start(e)}function S(e){if(!e.handled){var t=this,n=t._window;(t._hashbang?E&&this._getBase()+n.location.hash.replace("#!",""):E&&n.location.pathname+n.location.search)!==e.canonicalPath&&(t.stop(),e.handled=!1,E&&(n.location.href=e.canonicalPath))}}function T(e,t,n){var i=this.page=n||x,r=i._window,s=i._hashbang,o=i._getBase();"/"===e[0]&&0!==e.indexOf(o)&&(e=o+(s?"#!":"")+e);var a=e.indexOf("?");this.canonicalPath=e;var l=new RegExp("^"+o.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"));if(this.path=e.replace(l,"")||"/",s&&(this.path=this.path.replace("#!","")||"/"),this.title=g&&r.document.title,this.state=t||{},this.state.path=e,this.querystring=~a?i._decodeURLEncodedURIComponent(e.slice(a+1)):"",this.pathname=i._decodeURLEncodedURIComponent(~a?e.slice(0,a):e),this.params={},this.hash="",!s){if(!~this.path.indexOf("#"))return;var c=this.path.split("#");this.path=this.pathname=c[0],this.hash=i._decodeURLEncodedURIComponent(c[1])||"",this.querystring=this.querystring.split("#")[0]}}function k(e,n,i){var r=this.page=i||C,s=n||{};s.strict=s.strict||r._strict,this.path="*"===e?"(.*)":e,this.method="GET",this.regexp=t(this.path,this.keys=[],s)}_.prototype.configure=function(e){var t=e||{};this._window=t.window||v&&window,this._decodeURLComponents=!1!==t.decodeURLComponents,this._popstate=!1!==t.popstate&&v,this._click=!1!==t.click&&g,this._hashbang=!!t.hashbang;var n=this._window;this._popstate?n.addEventListener("popstate",this._onpopstate,!1):v&&n.removeEventListener("popstate",this._onpopstate,!1),this._click?n.document.addEventListener(w,this.clickHandler,!1):g&&n.document.removeEventListener(w,this.clickHandler,!1),this._hashbang&&v&&!y?n.addEventListener("hashchange",this._onpopstate,!1):v&&n.removeEventListener("hashchange",this._onpopstate,!1)},_.prototype.base=function(e){if(0===arguments.length)return this._base;this._base=e},_.prototype._getBase=function(){var e=this._base;if(e)return e;var t=v&&this._window&&this._window.location;return v&&this._hashbang&&t&&"file:"===t.protocol&&(e=t.pathname),e},_.prototype.strict=function(e){if(0===arguments.length)return this._strict;this._strict=e},_.prototype.start=function(e){var t=e||{};if(this.configure(t),!1!==t.dispatch){var n;if(this._running=!0,E){var i=this._window.location;n=this._hashbang&&~i.hash.indexOf("#!")?i.hash.substr(2)+i.search:this._hashbang?i.search+i.hash:i.pathname+i.search+i.hash}this.replace(n,null,!0,t.dispatch)}},_.prototype.stop=function(){if(this._running){this.current="",this.len=0,this._running=!1;var e=this._window;this._click&&e.document.removeEventListener(w,this.clickHandler,!1),v&&e.removeEventListener("popstate",this._onpopstate,!1),v&&e.removeEventListener("hashchange",this._onpopstate,!1)}},_.prototype.show=function(e,t,n,i){var r=new T(e,t,this),s=this.prevContext;return this.prevContext=r,this.current=r.path,!1!==n&&this.dispatch(r,s),!1!==r.handled&&!1!==i&&r.pushState(),r},_.prototype.back=function(e,t){var n=this;if(this.len>0){var i=this._window;y&&i.history.back(),this.len--}else e?setTimeout((function(){n.show(e,t)})):setTimeout((function(){n.show(n._getBase(),t)}))},_.prototype.redirect=function(e,t){var n=this;"string"==typeof e&&"string"==typeof t&&x.call(this,e,(function(e){setTimeout((function(){n.replace(t)}),0)})),"string"==typeof e&&void 0===t&&setTimeout((function(){n.replace(e)}),0)},_.prototype.replace=function(e,t,n,i){var r=new T(e,t,this),s=this.prevContext;return this.prevContext=r,this.current=r.path,r.init=n,r.save(),!1!==i&&this.dispatch(r,s),r},_.prototype.dispatch=function(e,t){var n=0,i=0,r=this;function s(){var t=r.callbacks[n++];if(e.path===r.current)return t?void t(e,s):S.call(r,e);e.handled=!1}t?function e(){var n=r.exits[i++];if(!n)return s();n(t,e)}():s()},_.prototype.exit=function(e,t){if("function"==typeof e)return this.exit("*",e);for(var n=new k(e,null,this),i=1;i<arguments.length;++i)this.exits.push(n.middleware(arguments[i]))},_.prototype.clickHandler=function(e){if(1===this._which(e)&&!(e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented)){var t=e.target,n=e.path||(e.composedPath?e.composedPath():null);if(n)for(var i=0;i<n.length;i++)if(n[i].nodeName&&"A"===n[i].nodeName.toUpperCase()&&n[i].href){t=n[i];break}for(;t&&"A"!==t.nodeName.toUpperCase();)t=t.parentNode;if(t&&"A"===t.nodeName.toUpperCase()){var r="object"==typeof t.href&&"SVGAnimatedString"===t.href.constructor.name;if(!t.hasAttribute("download")&&"external"!==t.getAttribute("rel")){var s=t.getAttribute("href");if((this._hashbang||!this._samePath(t)||!t.hash&&"#"!==s)&&!(s&&s.indexOf("mailto:")>-1)&&!(r?t.target.baseVal:t.target)&&(r||this.sameOrigin(t.href))){var o=r?t.href.baseVal:t.pathname+t.search+(t.hash||"");o="/"!==o[0]?"/"+o:o,b&&o.match(/^\/[a-zA-Z]:\//)&&(o=o.replace(/^\/[a-zA-Z]:\//,"/"));var a=o,l=this._getBase();0===o.indexOf(l)&&(o=o.substr(l.length)),this._hashbang&&(o=o.replace("#!","")),(!l||a!==o||E&&"file:"===this._window.location.protocol)&&(e.preventDefault(),this.show(a))}}}}},_.prototype._onpopstate=(m=!1,v?(g&&"complete"===document.readyState?m=!0:window.addEventListener("load",(function(){setTimeout((function(){m=!0}),0)})),function(e){if(m){var t=this;if(e.state){var n=e.state.path;t.replace(n,e.state)}else if(E){var i=t._window.location;t.show(i.pathname+i.search+i.hash,void 0,void 0,!1)}}}):function(){}),_.prototype._which=function(e){return null==(e=e||v&&this._window.event).which?e.button:e.which},_.prototype._toURL=function(e){var t=this._window;if("function"==typeof URL&&E)return new URL(e,t.location.toString());if(g){var n=t.document.createElement("a");return n.href=e,n}},_.prototype.sameOrigin=function(e){if(!e||!E)return!1;var t=this._toURL(e),n=this._window.location;return n.protocol===t.protocol&&n.hostname===t.hostname&&(n.port===t.port||""===n.port&&(80==t.port||443==t.port))},_.prototype._samePath=function(e){if(!E)return!1;var t=this._window.location;return e.pathname===t.pathname&&e.search===t.search},_.prototype._decodeURLEncodedURIComponent=function(e){return"string"!=typeof e?e:this._decodeURLComponents?decodeURIComponent(e.replace(/\+/g," ")):e},T.prototype.pushState=function(){var e=this.page,t=e._window,n=e._hashbang;e.len++,y&&t.history.pushState(this.state,this.title,n&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},T.prototype.save=function(){var e=this.page;y&&e._window.history.replaceState(this.state,this.title,e._hashbang&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},k.prototype.middleware=function(e){var t=this;return function(n,i){if(t.match(n.path,n.params))return n.routePath=t.path,e(n,i);i()}},k.prototype.match=function(e,t){var n=this.keys,i=e.indexOf("?"),r=~i?e.slice(0,i):e,s=this.regexp.exec(decodeURIComponent(r));if(!s)return!1;delete t[0];for(var o=1,a=s.length;o<a;++o){var l=n[o-1],c=this.page._decodeURLEncodedURIComponent(s[o]);void 0===c&&hasOwnProperty.call(t,l.name)||(t[l.name]=c)}return!0};var C=function e(){var t=new _;function n(){return x.apply(t,arguments)}return n.callbacks=t.callbacks,n.exits=t.exits,n.base=t.base.bind(t),n.strict=t.strict.bind(t),n.start=t.start.bind(t),n.stop=t.stop.bind(t),n.show=t.show.bind(t),n.back=t.back.bind(t),n.redirect=t.redirect.bind(t),n.replace=t.replace.bind(t),n.dispatch=t.dispatch.bind(t),n.exit=t.exit.bind(t),n.configure=t.configure.bind(t),n.sameOrigin=t.sameOrigin.bind(t),n.clickHandler=t.clickHandler.bind(t),n.create=e,Object.defineProperty(n,"len",{get:function(){return t.len},set:function(e){t.len=e}}),Object.defineProperty(n,"current",{get:function(){return t.current},set:function(e){t.current=e}}),n.Context=T,n.Route=k,n}(),P=C,I=C;return P.default=I,P}()},37304:(e,t,n)=>{function i(e){this.mode=s.MODE_8BIT_BYTE,this.data=e,this.parsedData=[];for(var t=0,n=this.data.length;t<n;t++){var i=[],r=this.data.charCodeAt(t);r>65536?(i[0]=240|(1835008&r)>>>18,i[1]=128|(258048&r)>>>12,i[2]=128|(4032&r)>>>6,i[3]=128|63&r):r>2048?(i[0]=224|(61440&r)>>>12,i[1]=128|(4032&r)>>>6,i[2]=128|63&r):r>128?(i[0]=192|(1984&r)>>>6,i[1]=128|63&r):i[0]=r,this.parsedData.push(i)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function r(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}i.prototype={getLength:function(e){return this.parsedData.length},write:function(e){for(var t=0,n=this.parsedData.length;t<n;t++)e.put(this.parsedData[t],8)}},r.prototype={addData:function(e){var t=new i(e);this.dataList.push(t),this.dataCache=null},isDark:function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++)this.modules[n][i]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=r.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},setupPositionProbePattern:function(e,t){for(var n=-1;n<=7;n++)if(!(e+n<=-1||this.moduleCount<=e+n))for(var i=-1;i<=7;i++)t+i<=-1||this.moduleCount<=t+i||(this.modules[e+n][t+i]=0<=n&&n<=6&&(0==i||6==i)||0<=i&&i<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=i&&i<=4)},getBestMaskPattern:function(){for(var e=0,t=0,n=0;n<8;n++){this.makeImpl(!0,n);var i=o.getLostPoint(this);(0==n||e>i)&&(e=i,t=n)}return t},createMovieClip:function(e,t,n){var i=e.createEmptyMovieClip(t,n);this.make();for(var r=0;r<this.modules.length;r++)for(var s=1*r,o=0;o<this.modules[r].length;o++){var a=1*o;this.modules[r][o]&&(i.beginFill(0,100),i.moveTo(a,s),i.lineTo(a+1,s),i.lineTo(a+1,s+1),i.lineTo(a,s+1),i.endFill())}return i},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},setupPositionAdjustPattern:function(){for(var e=o.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var n=0;n<e.length;n++){var i=e[t],r=e[n];if(null==this.modules[i][r])for(var s=-2;s<=2;s++)for(var a=-2;a<=2;a++)this.modules[i+s][r+a]=-2==s||2==s||-2==a||2==a||0==s&&0==a}},setupTypeNumber:function(e){for(var t=o.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var i=!e&&1==(t>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=i}for(n=0;n<18;n++)i=!e&&1==(t>>n&1),this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=i},setupTypeInfo:function(e,t){for(var n=this.errorCorrectLevel<<3|t,i=o.getBCHTypeInfo(n),r=0;r<15;r++){var s=!e&&1==(i>>r&1);r<6?this.modules[r][8]=s:r<8?this.modules[r+1][8]=s:this.modules[this.moduleCount-15+r][8]=s}for(r=0;r<15;r++)s=!e&&1==(i>>r&1),r<8?this.modules[8][this.moduleCount-r-1]=s:r<9?this.modules[8][15-r-1+1]=s:this.modules[8][15-r-1]=s;this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){for(var n=-1,i=this.moduleCount-1,r=7,s=0,a=this.moduleCount-1;a>0;a-=2)for(6==a&&a--;;){for(var l=0;l<2;l++)if(null==this.modules[i][a-l]){var c=!1;s<e.length&&(c=1==(e[s]>>>r&1)),o.getMask(t,i,a-l)&&(c=!c),this.modules[i][a-l]=c,-1==--r&&(s++,r=7)}if((i+=n)<0||this.moduleCount<=i){i-=n,n=-n;break}}}},r.PAD0=236,r.PAD1=17,r.createData=function(e,t,n){for(var i=u.getRSBlocks(e,t),s=new h,a=0;a<n.length;a++){var l=n[a];s.put(l.mode,4),s.put(l.getLength(),o.getLengthInBits(l.mode,e)),l.write(s)}var c=0;for(a=0;a<i.length;a++)c+=i[a].dataCount;if(s.getLengthInBits()>8*c)throw new Error("code length overflow. ("+s.getLengthInBits()+">"+8*c+")");for(s.getLengthInBits()+4<=8*c&&s.put(0,4);s.getLengthInBits()%8!=0;)s.putBit(!1);for(;!(s.getLengthInBits()>=8*c||(s.put(r.PAD0,8),s.getLengthInBits()>=8*c));)s.put(r.PAD1,8);return r.createBytes(s,i)},r.createBytes=function(e,t){for(var n=0,i=0,r=0,s=new Array(t.length),a=new Array(t.length),l=0;l<t.length;l++){var u=t[l].dataCount,h=t[l].totalCount-u;i=Math.max(i,u),r=Math.max(r,h),s[l]=new Array(u);for(var d=0;d<s[l].length;d++)s[l][d]=255&e.buffer[d+n];n+=u;var p=o.getErrorCorrectPolynomial(h),f=new c(s[l],p.getLength()-1).mod(p);for(a[l]=new Array(p.getLength()-1),d=0;d<a[l].length;d++){var m=d+f.getLength()-a[l].length;a[l][d]=m>=0?f.get(m):0}}var g=0;for(d=0;d<t.length;d++)g+=t[d].totalCount;var v=new Array(g),y=0;for(d=0;d<i;d++)for(l=0;l<t.length;l++)d<s[l].length&&(v[y++]=s[l][d]);for(d=0;d<r;d++)for(l=0;l<t.length;l++)d<a[l].length&&(v[y++]=a[l][d]);return v};for(var s={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},o={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;o.getBCHDigit(t)-o.getBCHDigit(o.G15)>=0;)t^=o.G15<<o.getBCHDigit(t)-o.getBCHDigit(o.G15);return(e<<10|t)^o.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;o.getBCHDigit(t)-o.getBCHDigit(o.G18)>=0;)t^=o.G18<<o.getBCHDigit(t)-o.getBCHDigit(o.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return o.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,n){switch(e){case 0:return(t+n)%2==0;case 1:return t%2==0;case 2:return n%3==0;case 3:return(t+n)%3==0;case 4:return(Math.floor(t/2)+Math.floor(n/3))%2==0;case 5:return t*n%2+t*n%3==0;case 6:return(t*n%2+t*n%3)%2==0;case 7:return(t*n%3+(t+n)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new c([1],0),n=0;n<e;n++)t=t.multiply(new c([1,a.gexp(n)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case s.MODE_NUMBER:return 10;case s.MODE_ALPHA_NUM:return 9;case s.MODE_8BIT_BYTE:case s.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case s.MODE_NUMBER:return 12;case s.MODE_ALPHA_NUM:return 11;case s.MODE_8BIT_BYTE:return 16;case s.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case s.MODE_NUMBER:return 14;case s.MODE_ALPHA_NUM:return 13;case s.MODE_8BIT_BYTE:return 16;case s.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),n=0,i=0;i<t;i++)for(var r=0;r<t;r++){for(var s=0,o=e.isDark(i,r),a=-1;a<=1;a++)if(!(i+a<0||t<=i+a))for(var l=-1;l<=1;l++)r+l<0||t<=r+l||0==a&&0==l||o==e.isDark(i+a,r+l)&&s++;s>5&&(n+=3+s-5)}for(i=0;i<t-1;i++)for(r=0;r<t-1;r++){var c=0;e.isDark(i,r)&&c++,e.isDark(i+1,r)&&c++,e.isDark(i,r+1)&&c++,e.isDark(i+1,r+1)&&c++,0!=c&&4!=c||(n+=3)}for(i=0;i<t;i++)for(r=0;r<t-6;r++)e.isDark(i,r)&&!e.isDark(i,r+1)&&e.isDark(i,r+2)&&e.isDark(i,r+3)&&e.isDark(i,r+4)&&!e.isDark(i,r+5)&&e.isDark(i,r+6)&&(n+=40);for(r=0;r<t;r++)for(i=0;i<t-6;i++)e.isDark(i,r)&&!e.isDark(i+1,r)&&e.isDark(i+2,r)&&e.isDark(i+3,r)&&e.isDark(i+4,r)&&!e.isDark(i+5,r)&&e.isDark(i+6,r)&&(n+=40);var u=0;for(r=0;r<t;r++)for(i=0;i<t;i++)e.isDark(i,r)&&u++;return n+Math.abs(100*u/t/t-50)/5*10}},a={glog:function(e){if(e<1)throw new Error("glog("+e+")");return a.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return a.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},l=0;l<8;l++)a.EXP_TABLE[l]=1<<l;for(l=8;l<256;l++)a.EXP_TABLE[l]=a.EXP_TABLE[l-4]^a.EXP_TABLE[l-5]^a.EXP_TABLE[l-6]^a.EXP_TABLE[l-8];for(l=0;l<255;l++)a.LOG_TABLE[a.EXP_TABLE[l]]=l;function c(e,t){if(null==e.length)throw new Error(e.length+"/"+t);for(var n=0;n<e.length&&0==e[n];)n++;this.num=new Array(e.length-n+t);for(var i=0;i<e.length-n;i++)this.num[i]=e[i+n]}function u(e,t){this.totalCount=e,this.dataCount=t}function h(){this.buffer=[],this.length=0}c.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),n=0;n<this.getLength();n++)for(var i=0;i<e.getLength();i++)t[n+i]^=a.gexp(a.glog(this.get(n))+a.glog(e.get(i)));return new c(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=a.glog(this.get(0))-a.glog(e.get(0)),n=new Array(this.getLength()),i=0;i<this.getLength();i++)n[i]=this.get(i);for(i=0;i<e.getLength();i++)n[i]^=a.gexp(a.glog(e.get(i))+t);return new c(n,0).mod(e)}},u.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],u.getRSBlocks=function(e,t){var n=u.getRsBlockTable(e,t);if(null==n)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var i=n.length/3,r=[],s=0;s<i;s++)for(var o=n[3*s+0],a=n[3*s+1],l=n[3*s+2],c=0;c<o;c++)r.push(new u(a,l));return r},u.getRsBlockTable=function(e,t){switch(t){case 1:return u.RS_BLOCK_TABLE[4*(e-1)+0];case 0:return u.RS_BLOCK_TABLE[4*(e-1)+1];case 3:return u.RS_BLOCK_TABLE[4*(e-1)+2];case 2:return u.RS_BLOCK_TABLE[4*(e-1)+3];default:return}},h.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var n=0;n<t;n++)this.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var d=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function p(e){if(this.options={padding:4,width:256,height:256,typeNumber:4,color:"#000000",background:"#ffffff",ecl:"M"},"string"==typeof e&&(e={content:e}),e)for(var t in e)this.options[t]=e[t];if("string"!=typeof this.options.content)throw new Error("Expected 'content' as string!");if(0===this.options.content.length)throw new Error("Expected 'content' to be non-empty!");if(!(this.options.padding>=0))throw new Error("Expected 'padding' value to be non-negative!");if(!(this.options.width>0&&this.options.height>0))throw new Error("Expected 'width' or 'height' value to be higher than zero!");var n=this.options.content,i=function(e,t){for(var n=function(e){var t=encodeURI(e).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return t.length+(t.length!=e?3:0)}(e),i=1,r=0,s=0,o=d.length;s<=o;s++){var a=d[s];if(!a)throw new Error("Content too long: expected "+r+" but got "+n);switch(t){case"L":r=a[0];break;case"M":r=a[1];break;case"Q":r=a[2];break;case"H":r=a[3];break;default:throw new Error("Unknwon error correction level: "+t)}if(n<=r)break;i++}if(i>d.length)throw new Error("Content too long");return i}(n,this.options.ecl),s=function(e){switch(e){case"L":return 1;case"M":return 0;case"Q":return 3;case"H":return 2;default:throw new Error("Unknwon error correction level: "+e)}}(this.options.ecl);this.qrcode=new r(i,s),this.qrcode.addData(n),this.qrcode.make()}p.prototype.svg=function(e){var t=this.options||{},n=this.qrcode.modules;void 0===e&&(e={container:t.container||"svg"});for(var i=void 0===t.pretty||!!t.pretty,r=i?"  ":"",s=i?"\r\n":"",o=t.width,a=t.height,l=n.length,c=o/(l+2*t.padding),u=a/(l+2*t.padding),h=void 0!==t.join&&!!t.join,d=void 0!==t.swap&&!!t.swap,p=void 0===t.xmlDeclaration||!!t.xmlDeclaration,f=void 0!==t.predefined&&!!t.predefined,m=f?r+'<defs><path id="qrmodule" d="M0 0 h'+u+" v"+c+' H0 z" style="fill:'+t.color+';shape-rendering:crispEdges;" /></defs>'+s:"",g=r+'<rect x="0" y="0" width="'+o+'" height="'+a+'" style="fill:'+t.background+';shape-rendering:crispEdges;"/>'+s,v="",y="",b=0;b<l;b++)for(var w=0;w<l;w++)if(n[w][b]){var E=w*c+t.padding*c,_=b*u+t.padding*u;if(d){var x=E;E=_,_=x}if(h){var S=c+E,T=u+_;E=Number.isInteger(E)?Number(E):E.toFixed(2),_=Number.isInteger(_)?Number(_):_.toFixed(2),S=Number.isInteger(S)?Number(S):S.toFixed(2),y+="M"+E+","+_+" V"+(T=Number.isInteger(T)?Number(T):T.toFixed(2))+" H"+S+" V"+_+" H"+E+" Z "}else v+=f?r+'<use x="'+E.toString()+'" y="'+_.toString()+'" href="#qrmodule" />'+s:r+'<rect x="'+E.toString()+'" y="'+_.toString()+'" width="'+c+'" height="'+u+'" style="fill:'+t.color+';shape-rendering:crispEdges;"/>'+s}h&&(v=r+'<path x="0" y="0" style="fill:'+t.color+';shape-rendering:crispEdges;" d="'+y+'" />');var k="";switch(e.container){case"svg":p&&(k+='<?xml version="1.0" standalone="yes"?>'+s),k+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+o+'" height="'+a+'">'+s,k+=m+g+v,k+="</svg>";break;case"svg-viewbox":p&&(k+='<?xml version="1.0" standalone="yes"?>'+s),k+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '+o+" "+a+'">'+s,k+=m+g+v,k+="</svg>";break;case"g":k+='<g width="'+o+'" height="'+a+'">'+s,k+=m+g+v,k+="</g>";break;default:k+=(m+g+v).replace(/^\s+/,"")}return k},p.prototype.save=function(e,t){var i=this.svg();"function"!=typeof t&&(t=function(e,t){});try{n(69951).writeFile(e,i,t)}catch(e){t(e)}},e.exports=p},81123:(e,t,n)=>{!function(){var e="undefined"!=typeof window?window:n.g,i={};for(var r in function(e,t,n){var i;function r(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var s="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},o=function(n){n=["object"==typeof globalThis&&globalThis,n,"object"==typeof e&&e,"object"==typeof self&&self,"object"==typeof t&&t];for(var i=0;i<n.length;++i){var r=n[i];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}(this);function a(e,t){if(t)e:{for(var n=o,i=e.split("."),r=0;r<i.length-1;r++){var a=i[r];if(!(a in n))break e;n=n[a]}(a=t(r=n[i=i[i.length-1]]))!=r&&null!=a&&s(n,i,{configurable:!0,writable:!0,value:a})}}function l(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function c(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:r(e)}}function u(e){if(!(e instanceof Array)){e=c(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}a("Symbol",(function(e){function t(e,t){this.g=e,s(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.g};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",i=0;return function e(r){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(r||"")+"_"+i++,r)}})),a("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var i=o[t[n]];"function"==typeof i&&"function"!=typeof i.prototype[e]&&s(i.prototype,e,{configurable:!0,writable:!0,value:function(){return l(r(this))}})}return e}));var h,d="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)h=Object.setPrototypeOf;else{var p;e:{var f={};try{f.__proto__={a:!0},p=f.a;break e}catch(e){}p=!1}h=p?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var m=h;function g(e,t){if(e.prototype=d(t.prototype),e.prototype.constructor=e,m)m(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(t,n);i&&Object.defineProperty(e,n,i)}else e[n]=t[n];e.Og=t.prototype}function v(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.u=this.i=null}function y(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}function b(e,t){e.i={ge:t,ne:!0},e.g=e.m||e.j}function w(e,t,n){return e.g=n,{value:t}}function E(e){e.g=0}function _(e,t,n){e.m=t,null!=n&&(e.j=n)}function x(e){e.m=0,e.j=2}function S(e,t){e.g=t,e.m=0}function T(e){e.m=0;var t=e.i.ge;return e.i=null,t}function k(e){e.u=[e.i],e.m=0,e.j=0}function C(e,t){var n=e.u.splice(0)[0];(n=e.i=e.i||n)?n.ne?e.g=e.m||e.j:null!=n.B&&e.j<n.B?(e.g=n.B,e.i=null):e.g=e.j:e.g=t}function P(e){this.g=new v,this.h=e}function I(e,t,n,i){try{var r=t.call(e.g.l,n);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return e.g.o=!1,r;var s=r.value}catch(t){return e.g.l=null,b(e.g,t),L(e)}return e.g.l=null,i.call(e.g,s),L(e)}function L(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(t){e.g.h=void 0,b(e.g,t)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.ne)throw t.ge;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function A(e){this.next=function(t){return y(e.g),e.g.l?t=I(e,e.g.l.next,t,e.g.s):(e.g.s(t),t=L(e)),t},this.throw=function(t){return y(e.g),e.g.l?t=I(e,e.g.l.throw,t,e.g.s):(b(e.g,t),t=L(e)),t},this.return=function(t){return function(e,t){y(e.g);var n=e.g.l;return n?I(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),L(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function M(e){return function(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise((function(i,r){!function e(s){s.done?i(s.value):Promise.resolve(s.value).then(t,n).then(e,r)}(e.next())}))}(new A(new P(e)))}function O(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}function N(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function D(e,t,n){e instanceof String&&(e=String(e));for(var i=e.length,r=0;r<i;r++){var s=e[r];if(t.call(n,s,r,e))return{le:r,v:s}}return{le:-1,v:void 0}}function R(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}function j(e,t){e instanceof String&&(e+="");var n=0,i=!1,r={next:function(){if(!i&&n<e.length){var r=n++;return{value:t(r,e[r]),done:!1}}return i=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}v.prototype.s=function(e){this.h=e},v.prototype.return=function(e){this.i={return:e},this.g=this.j},v.prototype.B=function(e){this.g=e},a("Promise",(function(e){function t(e){this.h=0,this.i=void 0,this.g=[],this.o=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.g=null}function i(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.h=function(e){if(null==this.g){this.g=[];var t=this;this.i((function(){t.l()}))}this.g.push(e)};var r=o.setTimeout;n.prototype.i=function(e){r(e,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.j(e)}}}this.g=null},n.prototype.j=function(e){this.i((function(){throw e}))},t.prototype.j=function(){function e(e){return function(i){n||(n=!0,e.call(t,i))}}var t=this,n=!1;return{resolve:e(this.F),reject:e(this.l)}},t.prototype.F=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.I(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.D(e):this.m(e)}},t.prototype.D=function(e){var t=void 0;try{t=e.then}catch(e){return void this.l(e)}"function"==typeof t?this.L(t,e):this.m(e)},t.prototype.l=function(e){this.s(2,e)},t.prototype.m=function(e){this.s(1,e)},t.prototype.s=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e,this.i=t,2===this.h&&this.G(),this.u()},t.prototype.G=function(){var e=this;r((function(){if(e.C()){var t=o.console;void 0!==t&&t.error(e.i)}}),1)},t.prototype.C=function(){if(this.o)return!1;var e=o.CustomEvent,t=o.Event,n=o.dispatchEvent;return void 0===n||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=o.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.i,n(e))},t.prototype.u=function(){if(null!=this.g){for(var e=0;e<this.g.length;++e)s.h(this.g[e]);this.g=null}};var s=new n;return t.prototype.I=function(e){var t=this.j();e.xc(t.resolve,t.reject)},t.prototype.L=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function i(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(e){s(e)}}:t}var r,s,o=new t((function(e,t){r=e,s=t}));return this.xc(i(e,r),i(n,s)),o},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.xc=function(e,t){function n(){switch(i.h){case 1:e(i.i);break;case 2:t(i.i);break;default:throw Error("Unexpected state: "+i.h)}}var i=this;null==this.g?s.h(n):this.g.push(n),this.o=!0},t.resolve=i,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var r=c(e),s=r.next();!s.done;s=r.next())i(s.value).xc(t,n)}))},t.all=function(e){var n=c(e),r=n.next();return r.done?i([]):new t((function(e,t){function s(t){return function(n){o[t]=n,0==--a&&e(o)}}var o=[],a=0;do{o.push(void 0),a++,i(r.value).xc(s(o.length-1),t),r=n.next()}while(!r.done)}))},t})),a("WeakMap",(function(e){function t(e){if(this.g=(l+=Math.random()+1).toString(),e){e=c(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(){}function i(e){var t=typeof e;return"object"===t&&null!==e||"function"===t}function r(e){if(!N(e,a)){var t=new n;s(e,a,{value:t})}}function o(e){var t=Object[e];t&&(Object[e]=function(e){return e instanceof n?e:(Object.isExtensible(e)&&r(e),t(e))})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),i=new e([[t,2],[n,3]]);return 2==i.get(t)&&3==i.get(n)&&(i.delete(t),i.set(n,4),!i.has(t)&&4==i.get(n))}catch(e){return!1}}())return e;var a="$jscomp_hidden_"+Math.random();o("freeze"),o("preventExtensions"),o("seal");var l=0;return t.prototype.set=function(e,t){if(!i(e))throw Error("Invalid WeakMap key");if(r(e),!N(e,a))throw Error("WeakMap key fail: "+e);return e[a][this.g]=t,this},t.prototype.get=function(e){return i(e)&&N(e,a)?e[a][this.g]:void 0},t.prototype.has=function(e){return i(e)&&N(e,a)&&N(e[a],this.g)},t.prototype.delete=function(e){return!!(i(e)&&N(e,a)&&N(e[a],this.g))&&delete e[a][this.g]},t})),a("Map",(function(e){function t(){var e={};return e.Ra=e.next=e.head=e}function n(e,t){var n=e.g;return l((function(){if(n){for(;n.head!=e.g;)n=n.Ra;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}}))}function i(e,t){var n=t&&typeof t;"object"==n||"function"==n?s.has(t)?n=s.get(t):(n=""+ ++o,s.set(t,n)):n="p_"+t;var i=e.h[n];if(i&&N(e.h,n))for(var r=0;r<i.length;r++){var a=i[r];if(t!=t&&a.key!=a.key||t===a.key)return{id:n,list:i,index:r,ha:a}}return{id:n,list:i,index:-1,ha:void 0}}function r(e){if(this.h={},this.g=t(),this.size=0,e){e=c(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(c([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var i=n.entries(),r=i.next();return!r.done&&r.value[0]==t&&"s"==r.value[1]&&!((r=i.next()).done||4!=r.value[0].x||"t"!=r.value[1]||!i.next().done)}catch(e){return!1}}())return e;var s=new WeakMap;r.prototype.set=function(e,t){var n=i(this,e=0===e?0:e);return n.list||(n.list=this.h[n.id]=[]),n.ha?n.ha.value=t:(n.ha={next:this.g,Ra:this.g.Ra,head:this.g,key:e,value:t},n.list.push(n.ha),this.g.Ra.next=n.ha,this.g.Ra=n.ha,this.size++),this},r.prototype.delete=function(e){return!(!(e=i(this,e)).ha||!e.list||(e.list.splice(e.index,1),e.list.length||delete this.h[e.id],e.ha.Ra.next=e.ha.next,e.ha.next.Ra=e.ha.Ra,e.ha.head=null,this.size--,0))},r.prototype.clear=function(){this.h={},this.g=this.g.Ra=t(),this.size=0},r.prototype.has=function(e){return!!i(this,e).ha},r.prototype.get=function(e){return(e=i(this,e).ha)&&e.value},r.prototype.entries=function(){return n(this,(function(e){return[e.key,e.value]}))},r.prototype.keys=function(){return n(this,(function(e){return e.key}))},r.prototype.values=function(){return n(this,(function(e){return e.value}))},r.prototype.forEach=function(e,t){for(var n,i=this.entries();!(n=i.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},r.prototype[Symbol.iterator]=r.prototype.entries;var o=0;return r})),a("Set",(function(e){function t(e){if(this.g=new Map,e){e=c(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.g.size}return function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(c([t]));if(!n.has(t)||1!=n.size||n.add(t)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var i=n.entries(),r=i.next();return!r.done&&r.value[0]==t&&r.value[1]==t&&!(r=i.next()).done&&r.value[0]!=t&&4==r.value[0].x&&r.value[1]==r.value[0]&&i.next().done}catch(e){return!1}}()?e:(t.prototype.add=function(e){return e=0===e?0:e,this.g.set(e,e),this.size=this.g.size,this},t.prototype.delete=function(e){return e=this.g.delete(e),this.size=this.g.size,e},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(e){return this.g.has(e)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,t){var n=this;this.g.forEach((function(i){return e.call(t,i,i,n)}))},t)})),a("Array.prototype.findIndex",(function(e){return e||function(e,t){return D(this,e,t).le}})),a("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}})),a("Array.prototype.includes",(function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var i=n.length,r=t||0;for(0>r&&(r=Math.max(r+i,0));r<i;r++){var s=n[r];if(s===e||Object.is(s,e))return!0}return!1}})),a("String.prototype.includes",(function(e){return e||function(e,t){return-1!==R(this,e,"includes").indexOf(e,t||0)}})),a("Array.prototype.find",(function(e){return e||function(e,t){return D(this,e,t).v}})),a("String.prototype.startsWith",(function(e){return e||function(e,t){for(var n=R(this,e,"startsWith"),i=n.length,r=e.length,s=Math.max(0,Math.min(0|t,n.length)),o=0;o<r&&s<i;)if(n[s++]!=e[o++])return!1;return o>=r}})),a("Array.prototype.keys",(function(e){return e||function(){return j(this,(function(e){return e}))}}));var B="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var r in i)N(i,r)&&(e[r]=i[r])}return e};a("Object.assign",(function(e){return e||B})),a("Array.from",(function(e){return e||function(e,t,n){t=null!=t?t:function(e){return e};var i=[],r="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if("function"==typeof r){e=r.call(e);for(var s=0;!(r=e.next()).done;)i.push(t.call(n,r.value,s++))}else for(r=e.length,s=0;s<r;s++)i.push(t.call(n,e[s],s));return i}})),a("Array.prototype.values",(function(e){return e||function(){return j(this,(function(e,t){return t}))}})),a("Promise.prototype.finally",(function(e){return e||function(e){return this.then((function(t){return Promise.resolve(e()).then((function(){return t}))}),(function(t){return Promise.resolve(e()).then((function(){throw t}))}))}})),a("Array.prototype.entries",(function(e){return e||function(){return j(this,(function(e,t){return[e,t]}))}})),a("String.prototype.repeat",(function(e){return e||function(e){var t=R(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var n="";e;)1&e&&(n+=t),(e>>>=1)&&(t+=t);return n}})),a("Number.isNaN",(function(e){return e||function(e){return"number"==typeof e&&isNaN(e)}})),a("Object.values",(function(e){return e||function(e){var t,n=[];for(t in e)N(e,t)&&n.push(e[t]);return n}})),a("Math.log2",(function(e){return e||function(e){return Math.log(e)/Math.LN2}})),a("Object.entries",(function(e){return e||function(e){var t,n=[];for(t in e)N(e,t)&&n.push([t,e[t]]);return n}}));var U=this||self;function $(e,t){var n,i=e.split("."),r=U;i[0]in r||void 0===r.execScript||r.execScript("var "+i[0]);for(;i.length&&(n=i.shift());)i.length||void 0===t?r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}:r[n]=t}function F(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}function H(e){return e.h/(1-Math.pow(e.g,e.i))}function q(){this.h=new F(2),this.j=new F(5),this.g=0,this.i=128e3,this.l=16e3}function V(){}function z(){}function G(){}function K(e){var t=O.apply(1,arguments);X.has(e)||(X.add(e),G.apply(V,u(t)))}function W(){}F.prototype.sample=function(e,t){var n=Math.pow(this.g,e);n=t*(1-n)+n*this.h,isNaN(n)||(this.h=n,this.i+=e)},q.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},q.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e,i=e/1e3;this.g+=t,this.h.sample(i,n),this.j.sample(i,n)}},q.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(H(this.h),H(this.j))};var X=new Set;if(e.console&&e.console.log.bind){var J={},Y=(J[1]=console.error.bind(console),J[2]=console.warn.bind(console),J[3]=console.info.bind(console),J[4]=console.log.bind(console),J[5]=console.debug.bind(console),J[6]=console.debug.bind(console),J);G=Y[2],z=Y[1]}function Q(e,t){return!("number"!=typeof e||"number"!=typeof t||!isNaN(e)||!isNaN(t))||e===t}function Z(e,t){var n=e.indexOf(t);-1<n&&e.splice(n,1)}function ee(e,t,n){if(n||(n=Q),e.length!=t.length)return!1;t=t.slice();for(var i={},r=(e=c(e)).next();!r.done;i={$c:i.$c},r=e.next()){if(i.$c=r.value,-1==(r=t.findIndex(function(e){return function(t){return n(e.$c,t)}}(i))))return!1;t[r]=t[t.length-1],t.pop()}return 0==t.length}function te(e,t,n){if(n||(n=Q),e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1;return!0}function ne(e,t,n){this.startTime=e,this.direction=ce,this.endTime=t,this.payload=n,this.region=new be,this.position=null,this.positionAlign=re,this.size=0,this.textAlign=se,this.writingMode=ue,this.lineInterpretation=he,this.line=null,this.lineHeight="",this.lineAlign=de,this.displayAlign=ae,this.fontSize=this.textStrokeWidth=this.textStrokeColor=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=ge,this.fontStyle=ve,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textDecoration=[],this.wrapLine=!0,this.id="",this.nestedCues=[],this.spacer=this.lineBreak=this.isContainer=!1,this.cellResolution={columns:32,rows:15}}function ie(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var n in e)if("startTime"!=n&&"endTime"!=n&&"payload"!=n)if("nestedCues"==n){if(!te(e.nestedCues,t.nestedCues,ie))return!1}else if("region"==n||"cellResolution"==n){for(var i in e[n])if(e[n][i]!=t[n][i])return!1}else if(Array.isArray(e[n])){if(!te(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1;return!0}ne.prototype.clone=function(){var e,t=new ne(0,0,"");for(e in this)t[e]=this[e],t[e]&&t[e].constructor==Array&&(t[e]=t[e].slice());return t},$("shaka.text.Cue",ne);var re="auto";ne.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:re};var se="center",oe={LEFT:"left",RIGHT:"right",CENTER:se,START:"start",END:"end"};ne.textAlign=oe;var ae="after",le={BEFORE:"before",CENTER:"center",AFTER:ae};ne.displayAlign=le;var ce="ltr";ne.direction={HORIZONTAL_LEFT_TO_RIGHT:ce,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var ue="horizontal-tb";ne.writingMode={HORIZONTAL_TOP_TO_BOTTOM:ue,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var he=0;ne.lineInterpretation={LINE_NUMBER:he,PERCENTAGE:1};var de="start",pe={CENTER:"center",START:de,END:"end"};ne.lineAlign=pe;var fe={white:"#FFF",lime:"#0F0",cyan:"#0FF",red:"#F00",yellow:"#FF0",magenta:"#F0F",blue:"#00F",black:"#000"};ne.defaultTextColor=fe;var me={bg_white:"#FFF",bg_lime:"#0F0",bg_cyan:"#0FF",bg_red:"#F00",bg_yellow:"#FF0",bg_magenta:"#F0F",bg_blue:"#00F",bg_black:"#000"};ne.defaultTextBackgroundColor=me;var ge=400;ne.fontWeight={NORMAL:ge,BOLD:700};var ve="normal",ye={NORMAL:ve,ITALIC:"italic",OBLIQUE:"oblique"};function be(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=we,this.scroll=Ee}ne.fontStyle=ye,ne.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},$("shaka.text.CueRegion",be);var we=1;be.units={PX:0,PERCENTAGE:we,LINES:2};var Ee="";function _e(){}function xe(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(Se(e)==Se(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;for(var n=ke(e),i=ke(t),r=0;r<e.byteLength;r++)if(n[r]!=i[r])return!1;return!0}function Se(e){return e instanceof ArrayBuffer?e:e.buffer}function Te(e){return e instanceof ArrayBuffer?e:0==e.byteOffset&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function ke(e,t,n){return Pe(e,void 0===t?0:t,n=void 0===n?1/0:n,Uint8Array)}function Ce(e,t,n){return Pe(e,void 0===t?0:t,n=void 0===n?1/0:n,DataView)}function Pe(e,t,n,i){var r=(e.byteOffset||0)+e.byteLength;return t=Math.max(0,Math.min((e.byteOffset||0)+t,r)),new i(Se(e),t,Math.min(t+Math.max(n,0),r)-t)}function Ie(e,t){this.g=e,this.h=t}function Le(e,t){var n=new Ie(4,0),i=Oe,r=i.g,s=n.h-r.h;(0<(n.g-r.g||s)?i.i:i.h)(i.g,n,e,t)}function Ae(e,t,n,i){G([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",i].join(" "))}function Me(e,t,n,i){z([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",i].join(""))}be.scrollMode={NONE:Ee,UP:"up"},$("shaka.util.BufferUtils",_e),_e.toDataView=Ce,_e.toUint8=ke,_e.toArrayBuffer=Te,_e.equal=xe,Ie.prototype.toString=function(){return"v"+this.g+"."+this.h};var Oe=null;function Ne(e,t){return e.concat(t)}function De(){}function Re(e){return null!=e}function je(e){var t=Object.create(e.prototype||Object.prototype);try{var n=e.call(t);n||(Le("Factories requiring new","Factories should be plain functions"),n=t)}catch(t){Le("Factories requiring new","Factories should be plain functions"),n=new e}return n}function Be(){}$("shaka.dependencies",Be),Be.has=function(e){return $e.has(e)},Be.add=function(e,t){if(!Ue[e])throw Error(e+" is not supported");$e.set(e,(function(){return t}))};var Ue={muxjs:"muxjs"};Be.Allowed=Ue;var $e=new Map([["muxjs",function(){return e.muxjs}]]);function Fe(e,t,n){var i=O.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=i,this.handled=!1}Fe.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},$("shaka.util.Error",Fe),Fe.Severity={RECOVERABLE:1,CRITICAL:2},Fe.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},Fe.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_MASTER_PLAYLIST_NOT_PROVIDED:4022,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,HLS_COULD_NOT_PARSE_SEGMENT_START_TIME:4030,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,HLS_AES_128_ENCRYPTION_NOT_SUPPORTED:4034,HLS_INTERNAL_SKIP_STREAM:4035,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004};var He=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function qe(e){var t;e instanceof qe?(Ve(this,e.Ea),this.pb=e.pb,this.Fa=e.Fa,ze(this,e.Hb),this.va=e.va,Ge(this,e.g.clone()),this.eb=e.eb):e&&(t=String(e).match(He))?(Ve(this,t[1]||"",!0),this.pb=Ke(t[2]||""),this.Fa=Ke(t[3]||"",!0),ze(this,t[4]),this.va=Ke(t[5]||"",!0),Ge(this,t[6]||"",!0),this.eb=Ke(t[7]||"")):this.g=new tt(null)}function Ve(e,t,n){e.Ea=n?Ke(t,!0):t,e.Ea&&(e.Ea=e.Ea.replace(/:$/,""))}function ze(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.Hb=t}else e.Hb=null}function Ge(e,t,n){t instanceof tt?e.g=t:(n||(t=We(t,Ze)),e.g=new tt(t))}function Ke(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function We(e,t,n){return null!=e?(e=encodeURI(e).replace(t,Xe),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Xe(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}(i=qe.prototype).Ea="",i.pb="",i.Fa="",i.Hb=null,i.va="",i.eb="",i.toString=function(){var e=[],t=this.Ea;if(t&&e.push(We(t,Je,!0),":"),t=this.Fa){e.push("//");var n=this.pb;n&&e.push(We(n,Je,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.Hb)&&e.push(":",String(t))}return(t=this.va)&&(this.Fa&&"/"!=t.charAt(0)&&e.push("/"),e.push(We(t,"/"==t.charAt(0)?Qe:Ye,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.eb)&&e.push("#",We(t,et)),e.join("")},i.resolve=function(e){var t=this.clone();"data"===t.Ea&&(t=new qe);var n=!!e.Ea;n?Ve(t,e.Ea):n=!!e.pb,n?t.pb=e.pb:n=!!e.Fa,n?t.Fa=e.Fa:n=null!=e.Hb;var i=e.va;if(n)ze(t,e.Hb);else if(n=!!e.va){if("/"!=i.charAt(0))if(this.Fa&&!this.va)i="/"+i;else{var r=t.va.lastIndexOf("/");-1!=r&&(i=t.va.substr(0,r+1)+i)}if(".."==i||"."==i)i="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var s=[],o=0;o<i.length;){var a=i[o++];"."==a?r&&o==i.length&&s.push(""):".."==a?((1<s.length||1==s.length&&""!=s[0])&&s.pop(),r&&o==i.length&&s.push("")):(s.push(a),r=!0)}i=s.join("/")}}return n?t.va=i:n=""!==e.g.toString(),n?Ge(t,e.g.clone()):n=!!e.eb,n&&(t.eb=e.eb),t},i.clone=function(){return new qe(this)};var Je=/[#\/\?@]/g,Ye=/[#\?:]/g,Qe=/[#\?]/g,Ze=/[#\?@]/g,et=/#/g;function tt(e){this.g=e||null}function nt(e){if(!e.na&&(e.na={},e.zc=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];s=decodeURIComponent(s.replace(/\+/g," ")),r=r||"",e.add(s,decodeURIComponent(r.replace(/\+/g," ")))}}function it(e,t){if(0==t.length)return e;var n=t.map((function(e){return new qe(e)}));return e.map((function(e){return new qe(e)})).map((function(e){return n.map((function(t){return e.resolve(t)}))})).reduce(Ne,[]).map((function(e){return e.toString()}))}function rt(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:t||[],keyIds:new Set}}function st(e,t){if(1==t.length)return t[0];var n=ot(e,t);if(null!=n)return n;throw new Fe(2,4,4025,t)}function ot(e,t){for(var n=c(ct[e]),i=n.next();!i.done;i=n.next()){i=i.value;for(var r=c(t),s=r.next();!s.done;s=r.next())if(s=s.value,i.test(s.trim()))return s.trim()}return e==at?"":null}(i=tt.prototype).na=null,i.zc=null,i.add=function(e,t){nt(this),this.g=null;var n=this.na.hasOwnProperty(e)&&this.na[e];return n||(this.na[e]=n=[]),n.push(t),this.zc++,this},i.set=function(e,t){return nt(this),this.g=null,this.na.hasOwnProperty(e)?this.na[e]=[t]:this.add(e,t),this},i.toString=function(){if(this.g)return this.g;if(!this.na)return"";var e,t=[];for(e in this.na)for(var n=encodeURIComponent(e),i=this.na[e],r=0;r<i.length;r++){var s=n;""!==i[r]&&(s+="="+encodeURIComponent(i[r])),t.push(s)}return this.g=t.join("&")},i.clone=function(){var e=new tt;if(e.g=this.g,this.na){var t,n={};for(t in this.na)n[t]=this.na[t].concat();e.na=n,e.zc=this.zc}return e};var at="text",lt={Na:"video",bb:"audio",Z:at,Rb:"image",eg:"application"},ct={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av01/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function ut(){var e,t,n=new Promise((function(n,i){e=n,t=i}));return n.resolve=e,n.reject=t,n}function ht(e){this.h=e,this.g=void 0}function dt(e){this.h=e,this.g=null}function pt(e){this.h=e,this.g=null}function ft(){return!(!e.MediaSource||!MediaSource.isTypeSupported)}function mt(e){return""!=St().canPlayType(e)}function gt(){return xt("Xbox One")}function vt(){return xt("Tizen")}function yt(){return xt("Web0S")}function bt(){return xt("CrKey")}function wt(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!vt()&&!xt("PC=EOS")&&!Et()}function Et(){return xt("PlayStation 4")}function _t(){if(!wt())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function xt(e){return(navigator.userAgent||"").includes(e)}function St(){return kt||(Tt||(Tt=new pt((function(){kt=null}))),(kt=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(kt=document.createElement("video")),Tt.S(1),kt)}ut.prototype.resolve=function(){},ut.prototype.reject=function(){},ht.prototype.value=function(){return null==this.g&&(this.g=this.h()),this.g},dt.prototype.S=function(t){var n=this;this.stop();var i=!0,r=null;return this.g=function(){e.clearTimeout(r),i=!1},r=e.setTimeout((function(){i&&n.h()}),1e3*t),this},dt.prototype.stop=function(){this.g&&(this.g(),this.g=null)},pt.prototype.Lb=function(){return this.stop(),this.h(),this},pt.prototype.S=function(e){var t=this;return this.stop(),this.g=new dt((function(){t.h()})).S(e),this},pt.prototype.Ca=function(e){var t=this;return this.stop(),this.g=new dt((function(){t.g.S(e),t.h()})).S(e),this},pt.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},$("shaka.util.Timer",pt),pt.prototype.stop=pt.prototype.stop,pt.prototype.tickEvery=pt.prototype.Ca,pt.prototype.tickAfter=pt.prototype.S,pt.prototype.tickNow=pt.prototype.Lb;var Tt=null,kt=null;function Ct(){}function Pt(t){if(!t)return"";if(239==(t=ke(t))[0]&&187==t[1]&&191==t[2]&&(t=t.subarray(3)),e.TextDecoder&&!Et())return(t=(new TextDecoder).decode(t)).includes("�")&&z('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),t;for(var n="",i=0;i<t.length;++i){var r=65533;if(0==(128&t[i])?r=t[i]:t.length>=i+2&&192==(224&t[i])&&128==(192&t[i+1])?(r=(31&t[i])<<6|63&t[i+1],i+=1):t.length>=i+3&&224==(240&t[i])&&128==(192&t[i+1])&&128==(192&t[i+2])?(r=(15&t[i])<<12|(63&t[i+1])<<6|63&t[i+2],i+=2):t.length>=i+4&&240==(241&t[i])&&128==(192&t[i+1])&&128==(192&t[i+2])&&128==(192&t[i+3])&&(r=(7&t[i])<<18|(63&t[i+1])<<12|(63&t[i+2])<<6|63&t[i+3],i+=3),65535>=r)n+=String.fromCharCode(r);else{var s=1023&(r-=65536);n+=String.fromCharCode(55296+(r>>10)),n+=String.fromCharCode(56320+s)}}return n}function It(e,t,n){if(!e)return"";if(!n&&0!=e.byteLength%2)throw new Fe(2,2,2004);n=Math.floor(e.byteLength/2);var i=new Uint16Array(n);e=Ce(e);for(var r=0;r<n;r++)i[r]=e.getUint16(2*r,t);return Ot.value()(i)}function Lt(e){function t(e){return n.byteLength<=e||32<=n[e]&&126>=n[e]}if(!e)return"";var n=ke(e);if(239==n[0]&&187==n[1]&&191==n[2])return Pt(n);if(254==n[0]&&255==n[1])return It(n.subarray(2),!1);if(255==n[0]&&254==n[1])return It(n.subarray(2),!0);if(0==n[0]&&0==n[2])return It(e,!1);if(0==n[1]&&0==n[3])return It(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return Pt(e);throw new Fe(2,2,2003)}function At(t){if(e.TextEncoder&&!Et()){var n=new TextEncoder;return Te(n.encode(t))}t=encodeURIComponent(t),t=unescape(t),n=new Uint8Array(t.length);for(var i=0;i<t.length;i++)n[i]=t[i].charCodeAt(0);return Te(n)}function Mt(e,t){for(var n=new ArrayBuffer(2*e.length),i=new DataView(n),r=0;r<e.length;++r)i.setUint16(2*r,e.charCodeAt(r),t);return n}$("shaka.util.StringUtils",Ct),Ct.resetFromCharCode=function(){Ot.g=void 0},Ct.toUTF16=Mt,Ct.toUTF8=At,Ct.fromBytesAutoDetect=Lt,Ct.fromUTF16=It,Ct.fromUTF8=Pt;var Ot=new ht((function(){function e(e){try{var t=new Uint8Array(e);return 0<String.fromCharCode.apply(null,t).length}catch(e){return!1}}for(var t={Ua:65536};0<t.Ua;(t={Ua:t.Ua}).Ua/=2)if(e(t.Ua))return function(e){return function(t){for(var n="",i=0;i<t.length;i+=e.Ua)n+=String.fromCharCode.apply(null,t.subarray(i,i+e.Ua));return n}}(t);return null}));function Nt(){}function Dt(e){return e=ke(e),e=Ot.value()(e),btoa(e)}function Rt(e,t){t=null==t||t;var n=Dt(e).replace(/\+/g,"-").replace(/\//g,"_");return t?n:n.replace(/[=]*$/,"")}function jt(t){t=e.atob(t.replace(/-/g,"+").replace(/_/g,"/"));for(var n=new Uint8Array(t.length),i=0;i<t.length;++i)n[i]=t.charCodeAt(i);return n}function Bt(t){for(var n=t.length/2,i=new Uint8Array(n),r=0;r<n;r++)i[r]=e.parseInt(t.substr(2*r,2),16);return i}function Ut(e){var t=ke(e);e="";for(var n=(t=c(t)).next();!n.done;n=t.next())1==(n=(n=n.value).toString(16)).length&&(n="0"+n),e+=n;return e}function $t(){for(var e=O.apply(0,arguments),t=0,n=c(e),i=n.next();!i.done;i=n.next())t+=i.value.byteLength;for(t=new Uint8Array(t),n=0,i=(e=c(e)).next();!i.done;i=e.next())i=i.value,t.set(ke(i),n),n+=i.byteLength;return t}function Ft(){var e=this;this.o=$e.get("muxjs")(),this.g=new this.o.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.h=null,this.m=[],this.j=[],this.i=[],this.l=!1,this.g.on("data",(function(t){e.j=t.captions,e.i=t.metadata,e.m.push($t(t.initSegment,t.data))})),this.g.on("done",(function(){var t={data:$t.apply(Nt,u(e.m)),captions:e.j,metadata:e.i};e.h.resolve(t),e.l=!1}))}function Ht(e,t){if(!$e.get("muxjs")()||!qt(e))return!1;if(t)return MediaSource.isTypeSupported(Vt(t,e));var n=Vt("audio",e),i=Vt("video",e);return MediaSource.isTypeSupported(n)||MediaSource.isTypeSupported(i)}function qt(e){return"mp2t"==e.toLowerCase().split(";")[0].split("/")[1]}function Vt(e,t){var n=t.replace(/mp2t/i,"mp4");"audio"==e&&(n=n.replace("video","audio"));var i=/avc1\.(66|77|100)\.(\d+)/.exec(n);if(i){var r="avc1.",s=i[1],o=Number(i[2]);r=("66"==s?r+"4200":"77"==s?r+"4d00":r+"6400")+(o>>4).toString(16),r+=(15&o).toString(16),n=n.replace(i[0],r)}return n}function zt(e,t){var n=e;return t&&(n+='; codecs="'+t+'"'),n}function Gt(e,t,n){if(qt(e=zt(e,t))){if($e.get("muxjs")())return Vt(n,e)}else if("audio"==n)return e.replace("video","audio");return e}function Kt(e){var t=Xt(e);switch(e=t[0],t=t[1].toLowerCase(),!0){case"mp4a"===e&&"69"===t:case"mp4a"===e&&"6b"===t:return"mp3";case"mp4a"===e&&"66"===t:case"mp4a"===e&&"67"===t:case"mp4a"===e&&"68"===t:case"mp4a"===e&&"40.2"===t:case"mp4a"===e&&"40.02"===t:case"mp4a"===e&&"40.5"===t:case"mp4a"===e&&"40.05"===t:case"mp4a"===e&&"40.29"===t:case"mp4a"===e&&"40.42"===t:return"aac";case"mp4a"===e&&"a5"===t:return"ac-3";case"mp4a"===e&&"a6"===t:return"ec-3";case"mp4a"===e&&"b2"===t:return"dtsx";case"mp4a"===e&&"a9"===t:return"dtsc";case"avc1"===e:case"avc3"===e:return"avc";case"hvc1"===e:case"hev1"===e:return"hevc";case"dvh1"===e:case"dvhe"===e:return"dovi"}return e}function Wt(e){return(e=e.split(/ *; */)).shift(),(e=e.find((function(e){return e.startsWith("codecs=")})))?e.split("=")[1].replace(/^"|"$/g,""):""}function Xt(e){var t=(e=e.split("."))[0];return e.shift(),[t,e.join(".")]}function Jt(e){this.l=null,this.i=e,this.j=this.u=0,this.m=1/0,this.h=this.g=null,this.s="",this.o=new Map}function Yt(e){return!(!tn[e]&&"application/cea-608"!=e&&"application/cea-708"!=e)}function Qt(e,t,n){if(e.s=t,t=e.o.get(t))for(var i=c(t.keys()),r=i.next();!r.done;r=i.next())(r=t.get(r.value).filter((function(e){return e.endTime<=n})))&&e.i.append(r)}function Zt(e,t,n){t.startTime+=n,t.endTime+=n;for(var i=(t=c(t.nestedCues)).next();!i.done;i=t.next())Zt(e,i.value,n)}function en(e,t,n,i,r){for(var s=n+" "+i,o=new Map,a=(t=c(t)).next();!a.done;a=t.next()){var l=a.value;a=l.stream,l=l.cue,o.has(a)||o.set(a,new Map),o.get(a).has(s)||o.get(a).set(s,[]),Zt(e,l,r),l.startTime>=e.j&&l.startTime<e.m&&(o.get(a).get(s).push(l),a==e.s&&e.i.append([l]))}for(s=(r=c(o.keys())).next();!s.done;s=r.next())for(s=s.value,e.o.has(s)||e.o.set(s,new Map),a=(t=c(o.get(s).keys())).next();!a.done;a=t.next())a=a.value,l=o.get(s).get(a),e.o.get(s).set(a,l);e.g=null==e.g?Math.max(n,e.j):Math.min(e.g,Math.max(n,e.j)),e.h=Math.max(e.h,Math.min(i,e.m))}$("shaka.util.Uint8ArrayUtils",Nt),Nt.concat=$t,Nt.toHex=Ut,Nt.fromHex=Bt,Nt.fromBase64=jt,Nt.toBase64=Rt,Nt.toStandardBase64=Dt,Nt.equal=function(e,t){return Le("shaka.util.Uint8ArrayUtils.equal","Please use shaka.util.BufferUtils.equal instead."),xe(e,t)},Ft.prototype.destroy=function(){return this.g.dispose(),this.g=null,Promise.resolve()},(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels"),Jt.prototype.destroy=function(){return this.i=this.l=null,this.o.clear(),Promise.resolve()},Jt.prototype.remove=function(e,t){var n=this;return M((function(i){if(1==i.g)return w(i,Promise.resolve(),2);!n.i||!n.i.remove(e,t)||null==n.g||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),E(i)}))},$("shaka.text.TextEngine",Jt),Jt.prototype.destroy=Jt.prototype.destroy,Jt.findParser=function(e){return tn[e]},Jt.unregisterParser=function(e){delete tn[e]},Jt.registerParser=function(e,t){tn[e]=t};var tn={};function nn(){}function rn(e,t){return e=an(e),t=an(t),e.split("-")[0]==t.split("-")[0]}function sn(e,t){e=an(e),t=an(t);var n=e.split("-"),i=t.split("-");return n[0]==i[0]&&1==n.length&&2==i.length}function on(e,t){e=an(e),t=an(t);var n=e.split("-"),i=t.split("-");return 2==n.length&&2==i.length&&n[0]==i[0]}function an(e){var t=e.split("-");return e=t[0]||"",t=t[1]||"",e=e.toLowerCase(),e=dn.get(e)||e,(t=t.toUpperCase())?e+"-"+t:e}function ln(e,t){return e=an(e),(t=an(t))==e?4:sn(t,e)?3:on(t,e)?2:sn(e,t)?1:0}function cn(e){var t=e.indexOf("-");return e=(e=0<=t?e.substring(0,t):e).toLowerCase(),dn.get(e)||e}function un(e){return e.language?an(e.language):e.audio&&e.audio.language?an(e.audio.language):e.video&&e.video.language?an(e.video.language):"und"}function hn(e,t){for(var n=an(e),i=new Set,r=c(t),s=r.next();!s.done;s=r.next())i.add(an(s.value));for(s=(r=c(i)).next();!s.done;s=r.next())if((s=s.value)==n)return s;for(s=(r=c(i)).next();!s.done;s=r.next())if(sn(s=s.value,n))return s;for(s=(r=c(i)).next();!s.done;s=r.next())if(on(s=s.value,n))return s;for(s=(i=c(i)).next();!s.done;s=i.next())if(sn(n,s=s.value))return s;return null}$("shaka.util.LanguageUtils",nn),nn.findClosestLocale=hn,nn.getLocaleForVariant=un,nn.getLocaleForText=function(e){return an(e.language||"und")},nn.getBase=cn,nn.relatedness=ln,nn.areSiblings=function(e,t){var n=cn(e),i=cn(t);return e!=n&&t!=i&&n==i},nn.normalize=an,nn.isSiblingOf=on,nn.isParentOf=sn,nn.areLanguageCompatible=rn,nn.areLocaleCompatible=function(e,t){return(e=an(e))==an(t)};var dn=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function pn(){this.g={}}function fn(e,t){for(var n in e.g)t(n,e.g[n])}function mn(e,t,n,i,r){var s=e.variants;(t.length||n.length)&&(s=function(e,t,n){for(var i={},r=(t=c(t)).next();!r.done;i={ld:i.ld},r=t.next())if(i.ld=r.value,r=e.filter(function(e){return function(t){return t.video&&t.video.codecs.startsWith(e.ld)}}(i)),r.length){e=r;break}for(i={},t=(n=c(n)).next();!t.done;i={Xc:i.Xc},t=n.next())if(i.Xc=t.value,t=e.filter(function(e){return function(t){return t.audio&&t.audio.codecs.startsWith(e.Xc)}}(i)),t.length){e=t;break}return e}(s,t,n)),t=function(e){for(var t=new pn,n=(e=c(e)).next();!n.done;n=e.next()){var i=vn(n=n.value);t.push(i,n)}return t}(s=Nn(s,i)),t=function(e){var t=0,n=new Map,i=e.size();return fn(e,(function(e,r){for(var s=c(r),o=s.next();!o.done;o=s.next()){var a=(o=o.value).video;if(a&&a.width&&a.height){a=a.width*a.height*(a.frameRate||1),n.has(a)||n.set(a,new pn);var l=n.get(a);l.push(e,o),l.size()===i&&(t=Math.max(t,a))}}})),t?n.get(t):e}(t);var o=function(e,t){for(var n=c(t),i=n.next();!i.done;i=n.next())if((i=i.value)==$n||i==Fn){if(1==(e=gn(e,i)).size())return e.keys()[0]}else if(i==Hn)break;return function(e){var t="",n=1/0;return fn(e,(function(e,i){for(var r=0,s=0,o=c(i),a=o.next();!a.done;a=o.next())r+=a.value.bandwidth||0,++s;(r/=s)<n&&(t=e,n=r)})),t}(e)}(t,r);e.variants=e.variants.filter((function(e){return vn(e)==o}))}function gn(e,t){var n=0,i=new pn;return fn(e,(function(e,r){for(var s=0,o=0,a=c(r),l=a.next();!l.done;l=a.next())(l=l.value).decodingInfos.length&&(s+=l.decodingInfos[0][t]?1:0,o++);(s/=o)>n?(i.g={},i.push(e,r),n=s):s==n&&i.push(e,r)})),i}function vn(e){var t="";e.video&&(t=Kt(e.video.codecs));var n="";return e.audio&&(n=Kt(e.audio.codecs)),t+"-"+n}function yn(e,t,n){function i(e,t,n){return e>=t&&e<=n}var r=e.video;return!(r&&r.width&&r.height&&(!i(r.width,t.minWidth,Math.min(t.maxWidth,n.width))||!i(r.height,t.minHeight,Math.min(t.maxHeight,n.height))||!i(r.width*r.height,t.minPixels,t.maxPixels))||e&&e.video&&e.video.frameRate&&!i(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||!i(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function bn(e,t){return M((function(n){if(1==n.g)return w(n,wn(e.variants,t,!1),2);e.variants=e.variants.filter((function(e){var t=e.video;if(t){var n=xn(t.codecs);if(t.codecs.includes(",")){var i=t.codecs.split(",");if(n=st("video",i),i=st("audio",i),i=Gt(t.mimeType,i,"audio"),!MediaSource.isTypeSupported(i))return!1}if(n=Gt(t.mimeType,n,"video"),!MediaSource.isTypeSupported(n))return!1}return!((n=e.audio)&&(i=_n(n.codecs),n=Gt(n.mimeType,i,"audio"),!MediaSource.isTypeSupported(n)))&&(gt()&&t&&(t.width&&1920<t.width||t.height&&1080<t.height)&&t.codecs.includes("avc1.")?(jn(e),!1):((t=e.decodingInfos.some((function(e){return e.supported})))||jn(e),t))})),E(n)}))}function wn(e,t,n){var i,r,s,o,a,l,u,h,d,p;return M((function(f){if(e.some((function(e){return e.decodingInfos.length})))return f.return();for(i=navigator.mediaCapabilities,r=[],s=function(e,t){var n;return M((function(r){return 1==r.g?(_(r,2),w(r,i.decodingInfo(t),4)):2!=r.g?(n=r.h,e.decodingInfos.push(n),S(r,0)):(T(r),JSON.stringify(t),void E(r))}))},o=c(e),a=o.next();!a.done;a=o.next())for(l=a.value,u=En(l,t,n),h=c(u),d=h.next();!d.done;d=h.next())p=d.value,r.push(s(l,p));return w(f,Promise.all(r),0)}))}function En(e,t,n){var i=e.audio,r=e.video;if(n={type:n?"file":"media-source"},r){var s=r.codecs;if(r.codecs.includes(",")){var o=r.codecs.split(",");s=xn(s=st("video",o)),o=st("audio",o),o=Gt(r.mimeType,o,"audio"),n.audio={contentType:o,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1}}if(s=xn(s),s=Gt(r.mimeType,s,"video"),n.video={contentType:s,width:r.width||64,height:r.height||64,bitrate:r.bandwidth||e.bandwidth||1,framerate:r.frameRate||1},r.hdr)switch(r.hdr){case"SDR":n.video.transferFunction="srgb";break;case"PQ":n.video.transferFunction="pq";break;case"HLG":n.video.transferFunction="hlg"}}if(i&&(s=_n(i.codecs),s=Gt(i.mimeType,s,"audio"),n.audio={contentType:s,channels:i.channelsCount||2,bitrate:i.bandwidth||e.bandwidth||1,samplerate:i.audioSamplingRate||1,spatialRendering:i.spatialAudio}),!(o=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])).length)return[n];e=[],s=new Map;for(var a=(o=c(o)).next();!a.done;a=o.next()){var l=a.value;s.get(l.keySystem)||s.set(l.keySystem,[]),s.get(l.keySystem).push(l)}o=t?"required":"optional",t=t?["persistent-license"]:["temporary"];for(var u=(l=c(s.keys())).next();!u.done;u=l.next()){var h=u.value;u=Object.assign({},n);var d=s.get(h);for(h={keySystem:h,initDataType:"cenc",persistentState:o,distinctiveIdentifier:"optional",sessionTypes:t},a=(d=c(d)).next();!a.done;a=d.next()){if((a=a.value).initData&&a.initData.length){for(var p=new Set,f=c(a.initData),m=f.next();!m.done;m=f.next())p.add(m.value.initDataType);h.initDataType=a.initData[0].initDataType}a.distinctiveIdentifierRequired&&(h.distinctiveIdentifier="required"),a.persistentStateRequired&&(h.persistentState="required"),a.sessionType&&(h.sessionTypes=[a.sessionType]),i&&(h.audio?h.audio.robustness=h.audio.robustness||a.audioRobustness:h.audio={robustness:a.audioRobustness}),r&&(h.video?h.video.robustness=h.video.robustness||a.videoRobustness:h.video={robustness:a.videoRobustness})}u.keySystemConfiguration=h,e.push(u)}return e}function _n(e){return vt()&&"ac-3"==e.toLowerCase()?"ec-3":e}function xn(e){return"vp9"==e?"vp09.00.41.08":e}function Sn(e,t){t.variants=t.variants.filter((function(t){var n=t.audio;return t=t.video,!(n&&e&&e.audio&&!Tn(n,e.audio)||t&&e&&e.video&&!Tn(t,e.video))}))}function Tn(e,t){return e.mimeType==t.mimeType&&e.codecs.split(".")[0]==t.codecs.split(".")[0]}function kn(e){var t=e.audio,n=e.video,i=t?t.codecs:null,r=n?n.codecs:null,s=[];r&&s.push(r),i&&s.push(i);var o=[];n&&o.push(n.mimeType),t&&o.push(t.mimeType),o=o[0]||null;var a=[];t&&a.push(t.kind),n&&a.push(n.kind),a=a[0]||null;var l=new Set;if(t)for(var u=c(t.roles),h=u.next();!h.done;h=u.next())l.add(h.value);if(n)for(h=(u=c(n.roles)).next();!h.done;h=u.next())l.add(h.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:a,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:o,codecs:s.join(", "),audioCodec:i,videoCodec:r,primary:e.primary,roles:Array.from(l),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles),e}function Cn(e){return{id:e.id,active:!1,type:at,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:e.mimeType,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null}}function Pn(e){var t=e.width||null,n=e.height||null,i=null;e.segmentIndex&&(i=e.segmentIndex.get(0));var r=e.tilesLayout;return i&&(r=i.tilesLayout||r),r&&null!=t&&(t/=Number(r.split("x")[0])),r&&null!=n&&(n/=Number(r.split("x")[1])),{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:n,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:e.mimeType,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:r||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId}}function In(e){return e.__shaka_id||(e.__shaka_id=Un++),e.__shaka_id}function Ln(e){var t=Mn(e);return t.active="disabled"!=e.mode,t.type="text",t.originalTextId=e.id,"captions"==e.kind&&(t.mimeType="application/cea-608"),e.kind&&(t.roles=[e.kind]),"forced"==e.kind&&(t.forced=!0),t}function An(e){var t=Mn(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,"main"==e.kind&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label),t}function Mn(e){return{id:In(e),active:!1,type:"",bandwidth:0,language:an(e.language),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null}}function On(e){return e.allowedByApplication&&e.allowedByKeySystem}function Nn(e,t){for(var n=e.filter((function(e){return e.audio&&e.audio.channelsCount})),i=new Map,r=(n=c(n)).next();!r.done;r=n.next()){var s=(r=r.value).audio.channelsCount;i.has(s)||i.set(s,[]),i.get(s).push(r)}return 0==(n=Array.from(i.keys())).length?e:(r=n.filter((function(e){return e<=t}))).length?i.get(Math.max.apply(Math,u(r))):i.get(Math.min.apply(Math,u(n)))}function Dn(e,t,n,i){var r=e,s=e.filter((function(e){return e.primary}));s.length&&(r=s);var o=r.length?r[0].language:"";if(r=r.filter((function(e){return e.language==o})),t){var a=hn(an(t),e.map((function(e){return e.language})));a&&(r=e.filter((function(e){return an(e.language)==a})))}if(r=r.filter((function(e){return e.forced==i})),n){if((e=Rn(r,n)).length)return e}else if(e=r.filter((function(e){return 0==e.roles.length})),e.length)return e;return e=r.map((function(e){return e.roles})).reduce(Ne,[]),e.length?Rn(r,e[0]):r}function Rn(e,t){return e.filter((function(e){return e.roles.includes(t)}))}function jn(e){var t=[];return e.audio&&t.push(Bn(e.audio)),e.video&&t.push(Bn(e.video)),t.join(", ")}function Bn(e){return"audio"==e.type?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:"video"==e.type?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}(i=pn.prototype).push=function(e,t){this.g.hasOwnProperty(e)?this.g[e].push(t):this.g[e]=[t]},i.get=function(e){return(e=this.g[e])?e.slice():null},i.remove=function(e,t){e in this.g&&(this.g[e]=this.g[e].filter((function(e){return e!=t})),0==this.g[e].length&&delete this.g[e])},i.size=function(){return Object.keys(this.g).length},i.keys=function(){return Object.keys(this.g)};var Un=0,$n="smooth",Fn="powerEfficient",Hn="bandwidth";function qn(){var e=this;this.l=null,this.j=!1,this.h=new q,navigator.connection&&navigator.connection.addEventListener("change",(function(){if(e.g.useNetworkInformation&&e.j){e.h=new q,e.g&&e.h.configure(e.g.advanced);var t=e.chooseVariant();t&&e.l(t)}})),this.i=[],this.o=1,this.s=!1,this.g=this.m=null}function Vn(e){var t=e.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&e.g.useNetworkInformation&&(t=1e6*navigator.connection.downlink),t}function zn(e,t){return e&&(t=t.filter((function(t){return yn(t,e,{width:1/0,height:1/0})}))),t.sort((function(e,t){return e.bandwidth-t.bandwidth}))}function Gn(e,t){this.h=e,this.g=new Set([e]);for(var n=c(t=t||[]),i=n.next();!i.done;i=n.next())this.add(i.value)}function Kn(e,t){var n;if(!(n=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(n=e.audio&&t.audio)){n=e.audio;var i=t.audio;n=!((!(!n.channelsCount||!i.channelsCount||2<n.channelsCount||2<i.channelsCount)||n.channelsCount==i.channelsCount)&&Wn(n,i)&&Xn(n.roles,i.roles))}return!n&&(n=e.video&&t.video)&&(n=!(Wn(n=e.video,i=t.video)&&Xn(n.roles,i.roles))),!n}function Wn(e,t){if(e.mimeType!=t.mimeType)return!1;var n=e.codecs.split(",").map((function(e){return Xt(e)[0]})),i=t.codecs.split(",").map((function(e){return Xt(e)[0]}));if(n.length!=i.length)return!1;n.sort(),i.sort();for(var r=0;r<n.length;r++)if(n[r]!=i[r])return!1;return!0}function Xn(e,t){var n=new Set(e),i=new Set(t);if(n.delete("main"),i.delete("main"),n.size!=i.size)return!1;for(var r=(n=c(n)).next();!r.done;r=n.next())if(!i.has(r.value))return!1;return!0}function Jn(e){this.g=e,this.h=new Yn(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"")}function Yn(e,t,n,i){this.i=e,this.j=t,this.g=n,this.h=void 0===i?"":i}function Qn(){this.g=ti,this.h=(new Map).set(ti,2).set(ei,1)}function Zn(e,t,n){e.h.set(ti,n).set(ei,t)}(i=qn.prototype).stop=function(){this.l=null,this.j=!1,this.i=[],this.o=1,this.m=null},i.init=function(e){this.l=e},i.chooseVariant=function(){var e=zn(this.g.restrictions,this.i),t=this.h.getBandwidthEstimate(Vn(this));this.i.length&&!e.length&&(e=[(e=zn(null,this.i))[0]]);for(var n=e[0]||null,i=0;i<e.length;i++){for(var r=e[i],s=isNaN(this.o)?1:Math.abs(this.o),o=s*r.bandwidth/this.g.bandwidthDowngradeTarget,a={bandwidth:1/0},l=i+1;l<e.length;l++)if(r.bandwidth!=e[l].bandwidth){a=e[l];break}s=s*a.bandwidth/this.g.bandwidthUpgradeTarget,t>=o&&t<=s&&n.bandwidth!=r.bandwidth&&(n=r)}return this.m=Date.now(),n},i.enable=function(){this.j=!0},i.disable=function(){this.j=!1},i.segmentDownloaded=function(e,t){if(this.h.sample(e,t),null!=this.m&&this.j)e:{if(this.s){if(Date.now()-this.m<1e3*this.g.switchInterval)break e}else{var n=this.h;if(!(n.g>=n.i))break e;this.s=!0}n=this.chooseVariant(),this.h.getBandwidthEstimate(Vn(this)),n&&this.l(n)}},i.getBandwidthEstimate=function(){return this.h.getBandwidthEstimate(Vn(this))},i.setVariants=function(e){this.i=e},i.playbackRateChanged=function(e){this.o=e},i.configure=function(e){this.g=e,this.h&&this.g&&this.h.configure(this.g.advanced)},$("shaka.abr.SimpleAbrManager",qn),qn.prototype.configure=qn.prototype.configure,qn.prototype.playbackRateChanged=qn.prototype.playbackRateChanged,qn.prototype.setVariants=qn.prototype.setVariants,qn.prototype.getBandwidthEstimate=qn.prototype.getBandwidthEstimate,qn.prototype.segmentDownloaded=qn.prototype.segmentDownloaded,qn.prototype.disable=qn.prototype.disable,qn.prototype.enable=qn.prototype.enable,qn.prototype.chooseVariant=qn.prototype.chooseVariant,qn.prototype.init=qn.prototype.init,qn.prototype.stop=qn.prototype.stop,Gn.prototype.add=function(e){return!!Kn(this.h,e)&&(this.g.add(e),!0)},Gn.prototype.values=function(){return this.g.values()},Jn.prototype.create=function(e){var t=this,n=e.filter((function(e){return Kn(t.g,e)}));return n.length?new Gn(n[0],n):this.h.create(e)},Yn.prototype.create=function(e){var t=[];t=function(e,t){var n=hn(an(t),e.map((function(e){return un(e)})));return n?e.filter((function(e){return n==un(e)})):[]}(e,this.i);var n=e.filter((function(e){return e.primary}));for(e=function(e,t){return e.filter((function(e){return!!e.audio&&(t?e.audio.roles.includes(t):0==e.audio.roles.length)}))}(t=t.length?t:n.length?n:e,this.j),e.length&&(t=e),this.g&&(e=Nn(t,this.g)).length&&(t=e),this.h&&(e=function(e,t){return e.filter((function(e){return!!e.audio&&e.audio.label.toLowerCase()==t.toLowerCase()}))}(t,this.h),e.length&&(t=e)),e=new Gn(t[0]),n=(t=c(t)).next();!n.done;n=t.next())n=n.value,Kn(e.h,n)&&e.add(n);return e};var ei=0,ti=1;function ni(e,t){var n=2,i=1e3,r=2,s=.5;this.l=null==e.maxAttempts?n:e.maxAttempts,this.j=null==e.baseDelay?i:e.baseDelay,this.o=null==e.fuzzFactor?s:e.fuzzFactor,this.m=null==e.backoffFactor?r:e.backoffFactor,this.g=0,this.h=this.j,(this.i=void 0!==t&&t)&&(this.g=1)}function ii(e){var t,n;return M((function(i){if(1==i.g){if(e.g>=e.l){if(!e.i)throw new Fe(2,7,1010);e.g=1,e.h=e.j}return t=e.g,e.g++,0==t?i.return():(n=e.h*(1+(2*Math.random()-1)*e.o),w(i,new Promise((function(e){new pt(e).S(n/1e3)})),2))}e.h*=e.m,E(i)}))}function ri(e,t){this.promise=e,this.i=t,this.g=!1}function si(e){return new ri(Promise.reject(e),(function(){return Promise.resolve()}))}function oi(){var e=Promise.reject(new Fe(2,7,7001));return e.catch((function(){})),new ri(e,(function(){return Promise.resolve()}))}function ai(e){return new ri(Promise.resolve(e),(function(){return Promise.resolve()}))}function li(e){return new ri(e,(function(){return e.catch((function(){}))}))}function ci(e){return new ri(Promise.all(e.map((function(e){return e.promise}))),(function(){return Promise.all(e.map((function(e){return e.abort()})))}))}function ui(t,n){if(n)if(n instanceof Map)for(var i=c(n.keys()),r=i.next();!r.done;r=i.next())r=r.value,Object.defineProperty(this,r,{value:n.get(r),writable:!0,enumerable:!0});else for(i in n)Object.defineProperty(this,i,{value:n[i],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=e.performance&&e.performance.now?e.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function hi(e){var t,n=new ui(e.type);for(t in e)Object.defineProperty(n,t,{value:e[t],writable:!0,enumerable:!0});return n}function di(){this.ea=new pn,this.Cc=this}function pi(e){var t=new Set;return function e(n){switch(typeof n){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return n;default:if(!n||n.buffer&&n.buffer.constructor==ArrayBuffer)return n;if(t.has(n))return null;var i=n.constructor==Array;if(n.constructor!=Object&&!i)return null;t.add(n);var r,s=i?[]:{};for(r in n)s[r]=e(n[r]);return i&&(s.length=n.length),s}}(e)}function fi(e){var t,n={};for(t in e)n[t]=e[t];return n}function mi(){this.g=[]}function gi(e,t){e.g.push(t.finally((function(){Z(e.g,t)})))}function vi(e,t,n){di.call(this),this.i=!1,this.m=new mi,this.g=new Set,this.h=new Set,this.l=e||null,this.j=t||null,this.s=n||null,this.o=!1}function yi(e,t,n,i){n=n||Si;var r=Ti[e];(!r||n>=r.priority)&&(Ti[e]={priority:n,If:t,Jf:void 0!==i&&i})}function bi(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,streamDataCallback:void 0===n?null:n}}function wi(e,t,n,i,r,s,o){e.o&&(n.uris[r]=n.uris[r].replace("http://","https://"));var a=new qe(n.uris[r]),l=a.Ea,c=!1;l||(Ve(a,l=(l=location.protocol).slice(0,-1)),n.uris[r]=a.toString()),l=l.toLowerCase();var u=(l=Ti[l])?l.If:null;if(!u)return si(new Fe(2,1,1e3,a));var h,d=l.Jf,p=null,f=null,m=!1,g=!1;return li(ii(i)).$((function(){if(e.i)return oi();h=Date.now();var i=u(n.uris[r],n,t,(function(n,i,r){p&&p.stop(),f&&f.S(a/1e3),e.l&&t==xi&&(e.l(n,i),c=!0,o.g=r)}),(function(i){e.j&&e.j(i,n,t),g=!0}));if(!d)return i;var s=n.retryParameters.connectionTimeout;s&&(p=new pt((function(){m=!0,i.abort()}))).S(s/1e3);var a=n.retryParameters.stallTimeout;return a&&(f=new pt((function(){m=!0,i.abort()}))),i})).$((function(i){p&&p.stop(),f&&f.stop(),null==i.timeMs&&(i.timeMs=Date.now()-h);var r={response:i,xf:c};return!g&&e.j&&e.j(i.headers,n,t),r}),(function(a){if(p&&p.stop(),f&&f.stop(),e.s){var l=null,c=0;a instanceof Fe&&(l=a,1001==a.code&&(c=a.data[1])),e.s(n,l,c,m)}if(e.i)return oi();if(m&&(a=new Fe(1,1,1003,n.uris[r],t)),a instanceof Fe){if(7001==a.code)throw a;if(1010==a.code)throw s;if(1==a.severity)return l=new ui("retry",l=(new Map).set("error",a)),e.dispatchEvent(l),r=(r+1)%n.uris.length,wi(e,t,n,i,r,a,o)}throw a}))}function Ei(){this.g=0}function _i(e,t,n){ri.call(this,e,t),this.h=n}ri.prototype.abort=function(){return this.g=!0,this.i()},ri.prototype.finally=function(e){return this.promise.then((function(){return e(!0)}),(function(){return e(!1)})),this},ri.prototype.$=function(e,t){function n(n){return function(a){if(r.g&&n)s.reject(o);else{var l=n?e:t;l?i=function(e,t,n){try{var i=e(t);return i&&i.promise&&i.abort?(n.resolve(i.promise),function(){return i.abort()}):(n.resolve(i),function(){return Promise.resolve(i).then((function(){}),(function(){}))})}catch(e){return n.reject(e),function(){return Promise.resolve()}}}(l,a,s):(n?s.resolve:s.reject)(a)}}}function i(){return s.reject(o),r.abort()}var r=this,s=new ut,o=new Fe(2,7,7001);return this.promise.then(n(!0),n(!1)),new ri(s,(function(){return i()}))},$("shaka.util.AbortableOperation",ri),ri.prototype.chain=ri.prototype.$,ri.prototype.finally=ri.prototype.finally,ri.all=ci,ri.prototype.abort=ri.prototype.abort,ri.notAbortable=li,ri.completed=ai,ri.aborted=oi,ri.failed=si,ui.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},ui.prototype.stopImmediatePropagation=function(){this.g=!0},ui.prototype.stopPropagation=function(){},$("shaka.util.FakeEvent",ui),di.prototype.addEventListener=function(e,t){this.ea&&this.ea.push(e,t)},di.prototype.removeEventListener=function(e,t){this.ea&&this.ea.remove(e,t)},di.prototype.dispatchEvent=function(e){if(!this.ea)return!0;var t=this.ea.get(e.type)||[],n=this.ea.get("All");for(n&&(t=t.concat(n)),n=(t=c(t)).next();!n.done;n=t.next()){n=n.value,e.target=this.Cc,e.currentTarget=this.Cc;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(e){}if(e.g)break}return e.defaultPrevented},di.prototype.release=function(){this.ea=null},mi.prototype.destroy=function(){for(var e=[],t=c(this.g),n=t.next();!n.done;n=t.next())(n=n.value).promise.catch((function(){})),e.push(n.abort());return this.g=[],Promise.all(e)},g(vi,di),(i=vi.prototype).Sd=function(e){this.o=e},i.Kf=function(e){this.g.add(e)},i.$f=function(e){this.g.delete(e)},i.Qe=function(){this.g.clear()},i.Lf=function(e){this.h.add(e)},i.ag=function(e){this.h.delete(e)},i.Re=function(){this.h.clear()},i.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),di.prototype.release.call(this),this.m.destroy()},i.request=function(e,t){var n=this,i=new Ei;if(this.i){var r=Promise.reject(new Fe(2,7,7001));return r.catch((function(){})),new _i(r,(function(){return Promise.resolve()}),i)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?pi(t.retryParameters):{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},t.uris=pi(t.uris),r=function(e,t,n){for(var i=ai(void 0),r={},s=(e=c(e.g)).next();!s.done;r={fd:r.fd},s=e.next())r.fd=s.value,i=i.$(function(e){return function(){return n.body&&(n.body=Te(n.body)),e.fd(t,n)}}(r));return i.$(void 0,(function(e){if(e instanceof Fe&&7001==e.code)throw e;throw new Fe(2,1,1006,e)}))}(this,e,t);var s=r.$((function(){return wi(n,e,t,new ni(t.retryParameters,!1),0,null,i)})),o=s.$((function(t){return function(e,t,n){for(var i=ai(void 0),r={},s=(e=c(e.h)).next();!s.done;r={gd:r.gd},s=e.next())r.gd=s.value,i=i.$(function(e){return function(){var i=n.response;return i.data&&(i.data=Te(i.data)),e.gd(t,i)}}(r));return i.$((function(){return n}),(function(e){var t=2;if(e instanceof Fe){if(7001==e.code)throw e;t=e.severity}throw new Fe(t,1,1007,e)}))}(n,e,t)})),a=Date.now(),l=0;r.promise.then((function(){l=Date.now()-a}),(function(){}));var u=0;s.promise.then((function(){u=Date.now()}),(function(){}));var h=o.$((function(t){var i=Date.now()-u,r=t.response;return r.timeMs+=l,r.timeMs+=i,t.xf||!n.l||r.fromCache||e!=xi||n.l(r.timeMs,r.data.byteLength),r}),(function(e){throw e&&(e.severity=2),e}));return r=new _i(h.promise,(function(){return h.abort()}),i),gi(this.m,r),r},$("shaka.net.NetworkingEngine",vi),vi.prototype.request=vi.prototype.request,vi.prototype.destroy=vi.prototype.destroy,vi.makeRequest=bi,vi.defaultRetryParameters=function(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}},vi.prototype.clearAllResponseFilters=vi.prototype.Re,vi.prototype.unregisterResponseFilter=vi.prototype.ag,vi.prototype.registerResponseFilter=vi.prototype.Lf,vi.prototype.clearAllRequestFilters=vi.prototype.Qe,vi.prototype.unregisterRequestFilter=vi.prototype.$f,vi.prototype.registerRequestFilter=vi.prototype.Kf,vi.unregisterScheme=function(e){delete Ti[e]},vi.registerScheme=yi,vi.prototype.setForceHTTPS=vi.prototype.Sd,vi.NumBytesRemainingClass=Ei,g(_i,ri),vi.PendingRequest=_i;var xi=1;vi.RequestType={MANIFEST:0,SEGMENT:xi,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5};var Si=3;vi.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:Si};var Ti={};function ki(e){this.g=!1,this.h=new ut,this.i=e}function Ci(e,t){if(e.g){if(t instanceof Fe&&7003==t.code)throw t;throw new Fe(2,7,7003,t)}}function Pi(){this.g=new pn}function Ii(e,t,n,i){this.target=e,this.type=t,this.listener=n,this.g=function(e,t){if(null==t)return!1;if("boolean"==typeof t)return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter((function(e){return!n.has(e)})),function(e){var t=Li;if(null==t){t=!1;try{var n={},i={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",i),Object.defineProperty(n,"capture",i),i=function(){},e.addEventListener("test",i,n),e.removeEventListener("test",i,n)}catch(e){t=!1}Li=t}return t||!1}(e)?t:t.capture||!1}(e,i),this.target.addEventListener(t,n,this.g)}ki.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then((function(){e.h.resolve()}),(function(){e.h.resolve()})))},(i=Pi.prototype).release=function(){this.Sa(),this.g=null},i.A=function(e,t,n,i){this.g&&(e=new Ii(e,t,n,i),this.g.push(t,e))},i.oa=function(e,t,n,i){var r=this;this.A(e,t,(function i(s){r.pc(e,t,i),n(s)}),i)},i.pc=function(e,t,n){if(this.g)for(var i=this.g.get(t)||[],r=(i=c(i)).next();!r.done;r=i.next())(r=r.value).target!=e||n!=r.listener&&n||(r.pc(),this.g.remove(t,r))},i.Sa=function(){if(this.g){var e,t=this.g,n=[];for(e in t.g)n.push.apply(n,u(t.g[e]));for(n=(t=c(n)).next();!n.done;n=t.next())n.value.pc();this.g.g={}}},$("shaka.util.EventManager",Pi),Pi.prototype.removeAll=Pi.prototype.Sa,Pi.prototype.unlisten=Pi.prototype.pc,Pi.prototype.listenOnce=Pi.prototype.oa,Pi.prototype.listen=Pi.prototype.A,Pi.prototype.release=Pi.prototype.release,Ii.prototype.pc=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};var Li=void 0;function Ai(){}function Mi(e){return new qe(e=Lt(e)).Fa}function Oi(e,t,n){function i(e){Ce(s).setUint32(o,e.byteLength,!0),o+=4,s.set(ke(e),o),o+=e.byteLength}if(!n||!n.byteLength)throw new Fe(2,6,6015);var r;r="string"==typeof t?Mt(t,!0):t,e=Mt(e=Lt(e),!0);var s=new Uint8Array(12+e.byteLength+r.byteLength+n.byteLength),o=0;return i(e),i(r),i(n),s}function Ni(e,t){for(var n=[],i=c(e),r=i.next();!r.done;r=i.next())n.push(t(r.value));return n}function Di(e){for(var t=new Map,n=c(Object.keys(e)),i=n.next();!i.done;i=n.next())i=i.value,t.set(i,e[i]);return t}function Ri(e){var t={};return e.forEach((function(e,n){t[n]=e})),t}function ji(e,t){if(!e&&!t)return!0;if(e&&!t||t&&!e)return!1;if(e.size!=t.size)return!1;for(var n=c(e),i=n.next();!i.done;i=n.next()){var r=c(i.value);if(i=r.next().value,r=r.next().value,!t.has(i))return!1;if((i=t.get(i))!=r||null==i)return!1}return!0}function Bi(e,t){var n=this;t=void 0===t?1:t,this.D=e,this.F=new Set,this.l=this.s=null,this.fa=this.ca=!1,this.G=0,this.g=null,this.o=new Pi,this.i=new Map,this.C=[],this.u=new ut,this.h=null,this.m=function(t){n.u.reject(t),e.onError(t)},this.ja=new Map,this.da=new Map,this.V=new pt((function(){return function(e){var t=e.ja,n=e.da;n.clear(),t.forEach((function(e,t){return n.set(t,e)})),(t=Array.from(n.values())).length&&t.every((function(e){return"expired"==e}))&&e.m(new Fe(2,6,6014)),e.D.Oc(Ri(n))}(n)})),this.L=!1,this.I=[],this.N=!1,this.ea=new pt((function(){!function(e){e.i.forEach((function(t,n){var i=t.Hd,r=n.expiration;isNaN(r)&&(r=1/0),r!=i&&(e.D.onExpirationUpdated(n.sessionId,r),t.Hd=r)}))}(n)})).Ca(t),this.u.catch((function(){})),this.j=new ki((function(){return function(e){return M((function(t){switch(t.g){case 1:return e.o.release(),e.o=null,e.u.reject(),e.ea.stop(),e.ea=null,e.V.stop(),e.V=null,w(t,Yi(e),2);case 2:if(!e.l){t.B(3);break}return _(t,4),w(t,e.l.setMediaKeys(null),6);case 6:S(t,5);break;case 4:T(t);case 5:e.l=null;case 3:e.g=null,e.F.clear(),e.s=null,e.C=[],e.h=null,e.m=function(){},e.D=null,e.W=!1,E(t)}}))}(n)})),this.W=!1}function Ui(e,t,n){return e.C=n,e.L=0<n.length,$i(e,t)}function $i(t,n){var i,r,s,o,a,l,u,h,d,p,f,m;return M((function(g){if(1==g.g){if(i=function(t){if(0==(t=Di(t.h.clearKeys)).size)return null;var n=[],i=[];t.forEach((function(e,t){var r=Bt(t),s=Bt(e);r={kty:"oct",kid:Rt(r,!1),k:Rt(s,!1)},n.push(r),i.push(r.kid)})),t=JSON.stringify({keys:n});var r=JSON.stringify({kids:i});return r=[{initData:ke(At(r)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+e.btoa(t),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:r,keyIds:new Set(i)}}(t))for(r=c(n),s=r.next();!s.done;s=r.next())(o=s.value).video&&(o.video.drmInfos=[i]),o.audio&&(o.audio.drmInfos=[i]);for((a=n.some((function(e){return!!(e.video&&e.video.drmInfos.length||e.audio&&e.audio.drmInfos.length)})))||(l=Di(t.h.servers),function(e,t){var n=[];t.forEach((function(e,t){n.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}));for(var i=c(e),r=i.next();!r.done;r=i.next())(r=r.value).video&&(r.video.drmInfos=n),r.audio&&(r.audio.drmInfos=n)}(n,l)),u=c(n),s=u.next();!s.done;s=u.next())for(h=s.value,d=Zi(h),p=c(d),f=p.next();!f.done;f=p.next())nr(f.value,Di(t.h.servers),Di(t.h.advanced||{}));return w(g,wn(n,t.L,t.W),2)}return a||Object.keys(t.h.servers).length?(m=Gi(t,void 0,n),g.return(a?m:m.catch((function(){})))):(t.ca=!0,g.return(Promise.resolve()))}))}function Fi(e){var t,n;return M((function(i){switch(i.g){case 1:if(!e.s||!e.g)return i.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){i.B(2);break}return t=bi([e.g.serverCertificateUri],e.h.retryParameters),_(i,3),w(i,e.D.mb.request(5,t).promise,5);case 5:n=i.h,e.g.serverCertificate=ke(n.data),S(i,4);break;case 3:throw new Fe(2,6,6017,T(i));case 4:if(e.j.g)return i.return();case 2:return e.g.serverCertificate&&e.g.serverCertificate.length?(_(i,6),w(i,e.s.setServerCertificate(e.g.serverCertificate),8)):i.return();case 8:S(i,0);break;case 6:throw new Fe(2,6,6004,T(i).message)}}))}function Hi(e){for(var t=(e.g?e.g.initData:[])||[],n=c(t),i=n.next();!i.done;i=n.next())qi(e,(i=i.value).initDataType,i.initData);for(i=(n=c(e.C)).next();!i.done;i=n.next())Ki(e,i.value);return t.length||e.C.length||e.u.resolve(),e.u}function qi(e,t,n){for(var i=e.i.values(),r=(i=c(i)).next();!r.done;r=i.next())if(xe(n,r.value.initData)&&!xt("Tizen 2"))return;!function(e,t,n,i){try{var r=e.s.createSession(i)}catch(t){return void e.m(new Fe(2,6,6005,t.message))}e.o.A(r,"message",(function(t){e.l&&e.h.delayLicenseRequestUntilPlayed&&e.l.paused&&!e.N?e.I.push(t):Xi(e,t)})),e.o.A(r,"keystatuseschange",(function(t){return Ji(e,t)})),e.i.set(r,{initData:n,loaded:!1,Hd:1/0,Ja:null,type:i});try{n=e.h.initDataTransform(n,t,e.g)}catch(n){return t=n,n instanceof Fe||(t=new Fe(2,6,6016,n)),void e.m(t)}e.h.logLicenseExchange&&Rt(n),r.generateRequest(t,n).catch((function(t){if(!e.j.g){e.i.delete(r);var n=t.errorCode;if(n&&n.systemCode){var i=n.systemCode;0>i&&(i+=Math.pow(2,32)),i="0x"+i.toString(16)}e.m(new Fe(2,6,6006,t.message,t,i))}}))}(e,t,n,e.g.sessionType)}function Vi(e){return!!e&&!!e.match(/^com\.(microsoft|chromecast)\.playready/)}function zi(e){return e=Ni(e=e.i.keys(),(function(e){return e.sessionId})),Array.from(e)}function Gi(e,t,n){var i,r,s,o,a,l,u,h,d,p,f,m,g;return M((function(v){switch(v.g){case 1:if(i=new Map,n.length){r=function(e,t,n){for(var i=c(t),r=i.next();!r.done;r=i.next()){var s=c(Zi(r.value));for(r=s.next();!r.done;r=s.next())r=r.value,n.has(r.keySystem)||n.set(r.keySystem,[]),n.get(r.keySystem).push(r)}if(1==n.size&&n.has(""))throw new Fe(2,6,6e3);for(i={},r=(e=c(e.h.preferredKeySystems)).next();!r.done;i={dd:i.dd},r=e.next())for(i.dd=r.value,r=(s=c(t)).next();!r.done;r=s.next())if(r=r.value.decodingInfos.find(function(e){return function(t){return t.supported&&null!=t.keySystemAccess&&t.keySystemAccess.keySystem==e.dd}}(i)))return r.keySystemAccess;for(r=(e=c([!0,!1])).next();!r.done;r=e.next())for(i=r.value,r=(s=c(t)).next();!r.done;r=s.next()){var o=c(r.value.decodingInfos);for(r=o.next();!r.done;r=o.next()){var a=r.value;if(a.supported&&a.keySystemAccess){var l=c(r=n.get(a.keySystemAccess.keySystem));for(r=l.next();!r.done;r=l.next())if(!!r.value.licenseServerUri==i)return a.keySystemAccess}}}return null}(e,n,i),v.B(2);break}return w(v,function(e,t){var n,i,r,s,o,a,l,u,h,d,p,f,m,g,v;return M((function(y){switch(y.g){case 1:if(1==t.size&&t.has(""))throw new Fe(2,6,6e3);for(i=c(t.values()),r=i.next();!r.done;r=i.next())0==(s=r.value).audioCapabilities.length&&delete s.audioCapabilities,0==s.videoCapabilities.length&&delete s.videoCapabilities;o=c(e.h.preferredKeySystems),a=o.next();case 2:if(a.done){y.B(4);break}if(l=a.value,!t.has(l)){y.B(3);break}return u=t.get(l),_(y,6),w(y,navigator.requestMediaKeySystemAccess(l,[u]),8);case 8:return n=y.h,y.return(n);case 6:T(y);case 7:Ci(e.j);case 3:a=o.next(),y.B(2);break;case 4:h=c([!0,!1]),d=h.next();case 9:if(d.done){y.B(11);break}p=d.value,f=c(t.keys()),a=f.next();case 12:if(a.done){d=h.next(),y.B(9);break}if(m=a.value,g=t.get(m),v=g.drmInfos.some((function(e){return!!e.licenseServerUri})),v!=p){y.B(13);break}return _(y,15),w(y,navigator.requestMediaKeySystemAccess(m,[g]),17);case 17:return n=y.h,y.return(n);case 15:T(y);case 16:Ci(e.j);case 13:a=f.next(),y.B(12);break;case 11:return y.return(n)}}))}(e,t),3);case 3:r=v.h;case 2:if(!(s=r))throw new Fe(2,6,6001);for(Ci(e.j),_(v,4),e.F.clear(),o=s.getConfiguration(),a=o.audioCapabilities||[],l=o.videoCapabilities||[],u=c(a),h=u.next();!h.done;h=u.next())d=h.value,e.F.add(d.contentType.toLowerCase());for(p=c(l),h=p.next();!h.done;h=p.next())f=h.value,e.F.add(f.contentType.toLowerCase());if(n.length){var y=s.keySystem,b=i.get(s.keySystem),E=[],x=[],k=[],C=[],P=new Set;tr(b,E,k,x,C,P);var I=e.L?"persistent-license":"temporary";for(y={keySystem:y,licenseServerUri:E[0],distinctiveIdentifierRequired:b[0].distinctiveIdentifierRequired,persistentStateRequired:b[0].persistentStateRequired,sessionType:b[0].sessionType||I,audioRobustness:b[0].audioRobustness||"",videoRobustness:b[0].videoRobustness||"",serverCertificate:k[0],serverCertificateUri:x[0],initData:C,keyIds:P},E=(b=c(b)).next();!E.done;E=b.next())(E=E.value).distinctiveIdentifierRequired&&(y.distinctiveIdentifierRequired=E.distinctiveIdentifierRequired),E.persistentStateRequired&&(y.persistentStateRequired=E.persistentStateRequired);b=y}else b=s.keySystem,y=t.get(s.keySystem),E=[],x=[],k=[],C=[],P=new Set,tr(y.drmInfos,E,k,x,C,P),b={keySystem:b,licenseServerUri:E[0],distinctiveIdentifierRequired:"required"==y.distinctiveIdentifier,persistentStateRequired:"required"==y.persistentState,sessionType:y.sessionTypes[0]||"temporary",audioRobustness:(y.audioCapabilities?y.audioCapabilities[0].robustness:"")||"",videoRobustness:(y.videoCapabilities?y.videoCapabilities[0].robustness:"")||"",serverCertificate:k[0],serverCertificateUri:x[0],initData:C,keyIds:P};if(e.g=b,!e.g.licenseServerUri)throw new Fe(2,6,6012,e.g.keySystem);return w(v,s.createMediaKeys(),6);case 6:return m=v.h,Ci(e.j),e.s=m,e.ca=!0,w(v,Fi(e),7);case 7:Ci(e.j),S(v,0);break;case 4:if(g=T(v),Ci(e.j,g),e.g=null,e.F.clear(),g instanceof Fe)throw g;throw new Fe(2,6,6002,g.message)}}))}function Ki(e,t){var n,i,r,s,o;return M((function(a){switch(a.g){case 1:try{n=e.s.createSession("persistent-license")}catch(t){return i=new Fe(2,6,6005,t.message),e.m(i),a.return(Promise.reject(i))}return e.o.A(n,"message",(function(t){e.l&&e.h.delayLicenseRequestUntilPlayed&&e.l.paused&&!e.N?e.I.push(t):Xi(e,t)})),e.o.A(n,"keystatuseschange",(function(t){return Ji(e,t)})),r={initData:null,loaded:!1,Hd:1/0,Ja:null,type:"persistent-license"},e.i.set(n,r),_(a,2),w(a,n.load(t),4);case 4:return s=a.h,Ci(e.j),s?(r.loaded=!0,er(e)&&e.u.resolve(),a.return(n)):(e.i.delete(n),e.m(new Fe(2,6,6013)),a.return(Promise.resolve()));case 2:o=T(a),Ci(e.j,o),e.i.delete(n),e.m(new Fe(2,6,6005,o.message));case 3:return a.return(Promise.resolve())}}))}function Wi(e,t,n){return"skd"==t&&(t=n.serverCertificate,e=Oi(e,n=Mi(e),t)),e}function Xi(e,t){var n,i,r,s,o,a,l,u,h,d,p,f;M((function(m){switch(m.g){case 1:return n=t.target,e.h.logLicenseExchange&&Rt(t.message),i=e.i.get(n),r=e.g.licenseServerUri,s=e.h.advanced[e.g.keySystem],"individualization-request"==t.messageType&&s&&s.individualizationServer&&(r=s.individualizationServer),(o=bi([r],e.h.retryParameters)).body=t.message,o.method="POST",o.licenseRequestType=t.messageType,o.sessionId=n.sessionId,Vi(e.g.keySystem)&&function(e){var t=It(e.body,!0,!0);if(t.includes("PlayReadyKeyMessage")){for(var n=c((t=(new DOMParser).parseFromString(t,"application/xml")).getElementsByTagName("HttpHeader")),i=n.next();!i.done;i=n.next())i=i.value,e.headers[i.getElementsByTagName("name")[0].textContent]=i.getElementsByTagName("value")[0].textContent;e.body=jt(t.getElementsByTagName("Challenge")[0].textContent)}else e.headers["Content-Type"]="text/xml; charset=utf-8"}(o),a=Date.now(),_(m,2),w(m,e.D.mb.request(2,o).promise,4);case 4:l=m.h,S(m,3);break;case 2:return u=T(m),h=new Fe(2,6,6007,u),e.m(h),i&&i.Ja&&i.Ja.reject(h),m.return();case 3:return e.j.g?m.return():(e.G+=(Date.now()-a)/1e3,e.h.logLicenseExchange&&Rt(l.data),_(m,5),w(m,n.update(l.data),7));case 7:S(m,6);break;case 5:return d=T(m),p=new Fe(2,6,6008,d.message),e.m(p),i&&i.Ja&&i.Ja.reject(p),m.return();case 6:if(e.j.g)return m.return();f=new ui("drmsessionupdate"),e.D.onEvent(f),i&&(i.Ja&&i.Ja.resolve(),new pt((function(){i.loaded=!0,er(e)&&e.u.resolve()})).S(rr)),E(m)}}))}function Ji(e,t){var n=t.target,i=e.i.get(n),r=!1;n.keyStatuses.forEach((function(t,n){if("string"==typeof n){var s=n;n=t,t=s}if(Vi(e.g.keySystem)&&16==n.byteLength&&(navigator.userAgent.match(/Edge?\//)||Et())){var o=(s=Ce(n)).getUint32(0,!0),a=s.getUint16(4,!0),l=s.getUint16(6,!0);s.setUint32(0,o,!1),s.setUint16(4,a,!1),s.setUint16(6,l,!1)}"status-pending"!=t&&(i.loaded=!0),"expired"==t&&(r=!0),s=Ut(n),e.ja.set(s,t)}));var s=n.expiration-Date.now();(0>s||r&&1e3>s)&&i&&!i.Ja&&(e.i.delete(n),n.close().catch((function(){}))),er(e)&&(e.u.resolve(),e.V.S(sr))}function Yi(e){var t;return M((function(n){return t=Array.from(e.i.entries()),e.i.clear(),w(n,Promise.all(t.map((function(t){var n=(t=c(t)).next().value,i=t.next().value;return M((function(t){return 1==t.g?(_(t,2),e.fa||e.C.includes(n.sessionId)||"persistent-license"!==i.type?w(t,function(e){var t;return M((function(n){return 1==n.g?(t=new Promise((function(e,t){new pt(t).S(ir)})),_(n,2),w(n,Promise.race([Promise.all([e.close(),e.closed]),t]),4)):2!=n.g?S(n,0):(T(n),void E(n))}))}(n),5):w(t,n.remove(),5)):2!=t.g?S(t,0):(T(t),void E(t))}))}))),0)}))}function Qi(e,t){if(!e.length)return t;if(!t.length)return e;for(var n=[],i=c(e),r=i.next();!r.done;r=i.next()){r=r.value;for(var s={},o=c(t),a=o.next();!a.done;s={Da:s.Da},a=o.next())if(a=a.value,r.keySystem==a.keySystem){s.Da=[],s.Da=s.Da.concat(r.initData||[]),s.Da=s.Da.concat(a.initData||[]),s.Da=s.Da.filter(function(e){return function(t,n){return void 0===t.keyId||n===e.Da.findIndex((function(e){return e.keyId===t.keyId}))}}(s)),o=r.keyIds&&a.keyIds?new Set([].concat(u(r.keyIds),u(a.keyIds))):r.keyIds||a.keyIds,n.push({keySystem:r.keySystem,licenseServerUri:r.licenseServerUri||a.licenseServerUri,distinctiveIdentifierRequired:r.distinctiveIdentifierRequired||a.distinctiveIdentifierRequired,persistentStateRequired:r.persistentStateRequired||a.persistentStateRequired,videoRobustness:r.videoRobustness||a.videoRobustness,audioRobustness:r.audioRobustness||a.audioRobustness,serverCertificate:r.serverCertificate||a.serverCertificate,serverCertificateUri:r.serverCertificateUri||a.serverCertificateUri,initData:s.Da,keyIds:o});break}}return n}function Zi(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function er(e){return function(e,t){for(var n=c(e),i=n.next();!i.done;i=n.next())if(!t(i.value))return!1;return!0}(e=e.i.values(),(function(e){return e.loaded}))}function tr(e,t,n,i,r,s){for(var o={},a=(e=c(e)).next();!a.done;o={ra:o.ra},a=e.next()){if(o.ra=a.value,t.includes(o.ra.licenseServerUri)||t.push(o.ra.licenseServerUri),i.includes(o.ra.serverCertificateUri)||i.push(o.ra.serverCertificateUri),o.ra.serverCertificate&&(n.some(function(e){return function(t){return xe(t,e.ra.serverCertificate)}}(o))||n.push(o.ra.serverCertificate)),o.ra.initData){a={};for(var l=c(o.ra.initData),u=l.next();!u.done;a={sc:a.sc},u=l.next())a.sc=u.value,r.some(function(e){return function(t){var n=e.sc;return!(!t.keyId||t.keyId!=n.keyId)||t.initDataType==n.initDataType&&xe(t.initData,n.initData)}}(a))||r.push(a.sc)}if(o.ra.keyIds)for(l=(a=c(o.ra.keyIds)).next();!l.done;l=a.next())s.add(l.value)}}function nr(t,n,i){!t.keySystem||"org.w3.clearkey"==t.keySystem&&t.licenseServerUri||(n.size&&(n=n.get(t.keySystem)||"",t.licenseServerUri=n),t.keyIds||(t.keyIds=new Set),(i=i.get(t.keySystem))&&(t.distinctiveIdentifierRequired||(t.distinctiveIdentifierRequired=i.distinctiveIdentifierRequired),t.persistentStateRequired||(t.persistentStateRequired=i.persistentStateRequired),t.videoRobustness||(t.videoRobustness=i.videoRobustness),t.audioRobustness||(t.audioRobustness=i.audioRobustness),t.serverCertificate||(t.serverCertificate=i.serverCertificate),i.sessionType&&(t.sessionType=i.sessionType),t.serverCertificateUri||(t.serverCertificateUri=i.serverCertificateUri)),e.cast&&e.cast.__platform__&&"com.microsoft.playready"==t.keySystem&&(t.keySystem="com.chromecast.playready"))}$("shaka.util.FairPlayUtils",Ai),Ai.initDataTransform=Oi,Ai.defaultGetContentId=Mi,(i=Bi.prototype).destroy=function(){return this.j.destroy()},i.configure=function(e){this.h=e},i.Vb=function(e){var t,n=this;return M((function(i){if(1==i.g)return n.s?(n.l=e,n.o.oa(n.l,"play",(function(){for(var e=c(n.I),t=e.next();!t.done;t=e.next())Xi(n,t.value);n.N=!0,n.I=[]})),"webkitCurrentPlaybackTargetIsWireless"in n.l&&n.o.A(n.l,"webkitcurrentplaybacktargetiswirelesschanged",(function(){return Yi(n)})),w(i,n.l.setMediaKeys(n.s).catch((function(e){return Promise.reject(new Fe(2,6,6003,e.message))})),2)):(n.o.oa(e,"encrypted",(function(){n.m(new Fe(2,6,6010))})),i.return());Ci(n.j),Hi(n),n.g.initData.length||n.C.length||(t=function(e){return qi(n,e.initDataType,ke(e.initData))},n.o.A(n.l,"encrypted",t)),E(i)}))},i.ac=function(){for(var e=1/0,t=this.i.keys(),n=(t=c(t)).next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},i.Fc=function(){return Ri(this.da)};var ir=1,rr=5,sr=.5,or=new ht((function(){return Te(new Uint8Array([0]))}));function ar(){}function lr(e,t,n,i){var r,s,o,a;return M((function(l){if(1==l.g)return i&&(r=hr[i.toLowerCase()])?l.return(r):(s=ur(e))&&(o=dr[s])?l.return(o):i?l.B(2):w(l,cr(e,t,n),3);if(2!=l.g&&(i=l.h)&&(a=hr[i]))return l.return(a);throw new Fe(2,4,4e3,e)}))}function cr(e,t,n){var i,r,s;return M((function(o){return 1==o.g?((i=bi([e],n)).method="HEAD",w(o,t.request(0,i).promise,2)):(r=o.h,s=r.headers["content-type"],o.return(s?s.toLowerCase().split(";").shift():""))}))}function ur(e){return 1==(e=new qe(e).va.split("/").pop().split(".")).length?"":e.pop().toLowerCase()}$("shaka.media.ManifestParser",ar),ar.unregisterParserByMime=function(e){delete hr[e]},ar.registerParserByMime=function(e,t){hr[e]=t},ar.registerParserByExtension=function(e,t){dr[e]=t};var hr={},dr={};function pr(e,t){this.O=Ce(e),this.h=t==mr,this.g=0}function fr(){return new Fe(2,3,3e3)}(i=pr.prototype).ma=function(){return this.g<this.O.byteLength},i.X=function(){return this.g},i.cf=function(){return this.O.byteLength},i.Y=function(){try{var e=this.O.getUint8(this.g);return this.g+=1,e}catch(e){throw fr()}},i.Ib=function(){try{var e=this.O.getUint16(this.g,this.h);return this.g+=2,e}catch(e){throw fr()}},i.M=function(){try{var e=this.O.getUint32(this.g,this.h);return this.g+=4,e}catch(e){throw fr()}},i.se=function(){try{var e=this.O.getInt32(this.g,this.h);return this.g+=4,e}catch(e){throw fr()}},i.Jb=function(){try{if(this.h)var e=this.O.getUint32(this.g,!0),t=this.O.getUint32(this.g+4,!0);else t=this.O.getUint32(this.g,!1),e=this.O.getUint32(this.g+4,!1)}catch(e){throw fr()}if(2097151<t)throw new Fe(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},i.Za=function(e){if(this.g+e>this.O.byteLength)throw fr();var t=ke(this.O,this.g,e);return this.g+=e,t},i.skip=function(e){if(this.g+e>this.O.byteLength)throw fr();this.g+=e},i.ue=function(e){if(this.g<e)throw fr();this.g-=e},i.seek=function(e){if(0>e||e>this.O.byteLength)throw fr();this.g=e},i.jc=function(){for(var e=this.g;this.ma()&&0!=this.O.getUint8(this.g);)this.g+=1;return e=ke(this.O,e,this.g-e),this.g+=1,Pt(e)},$("shaka.util.DataViewReader",pr),pr.prototype.readTerminatedString=pr.prototype.jc,pr.prototype.seek=pr.prototype.seek,pr.prototype.rewind=pr.prototype.ue,pr.prototype.skip=pr.prototype.skip,pr.prototype.readBytes=pr.prototype.Za,pr.prototype.readUint64=pr.prototype.Jb,pr.prototype.readInt32=pr.prototype.se,pr.prototype.readUint32=pr.prototype.M,pr.prototype.readUint16=pr.prototype.Ib,pr.prototype.readUint8=pr.prototype.Y,pr.prototype.getLength=pr.prototype.cf,pr.prototype.getPosition=pr.prototype.X,pr.prototype.hasMoreData=pr.prototype.ma;var mr=1;function gr(){this.i=[],this.h=[],this.g=!1}function vr(e){for(var t=_r(e);e.reader.ma()&&!e.parser.g;)e.parser.Qc(e.start+t,e.reader,e.partialOkay)}function yr(e){for(var t=_r(e),n=e.reader.M(),i=0;i<n&&(e.parser.Qc(e.start+t,e.reader,e.partialOkay),!e.parser.g);i++);}function br(e){return function(t){e(t.reader.Za(t.reader.O.byteLength-t.reader.X()))}}function wr(e){for(var t=0,n=(e=c(e)).next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function Er(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function _r(e){return 8+(e.has64BitSize?8:0)+(null!=e.flags?4:0)}pr.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:mr},(i=gr.prototype).box=function(e,t){var n=wr(e);return this.i[n]=xr,this.h[n]=t,this},i.R=function(e,t){var n=wr(e);return this.i[n]=Sr,this.h[n]=t,this},i.stop=function(){this.g=!0},i.parse=function(e,t,n){for(e=new pr(e,0),this.g=!1;e.ma()&&!this.g;)this.Qc(0,e,t,n)},i.Qc=function(e,t,n,i){var r=t.X();if(i&&r+8>t.O.byteLength)this.g=!0;else{var s=t.M(),o=t.M(),a=!1;switch(s){case 0:s=t.O.byteLength-r;break;case 1:if(i&&t.X()+8>t.O.byteLength)return void(this.g=!0);s=t.Jb(),a=!0}var l=this.h[o];if(l){var c=null,u=null;if(this.i[o]==Sr){if(i&&t.X()+4>t.O.byteLength)return void(this.g=!0);c=(u=t.M())>>>24,u&=16777215}o=r+s,n&&o>t.O.byteLength&&(o=t.O.byteLength),i&&o>t.O.byteLength?this.g=!0:(i=o-t.X(),l({parser:this,partialOkay:n||!1,version:c,flags:u,reader:t=new pr(t=0<i?t.Za(i):new Uint8Array(0),0),size:s,start:r+e,has64BitSize:a}))}else t.skip(Math.min(r+s-t.X(),t.O.byteLength-t.X()))}},$("shaka.util.Mp4Parser",gr),gr.headerSize=_r,gr.typeToString=Er,gr.allData=br,gr.sampleDescription=yr,gr.children=vr,gr.prototype.parseNext=gr.prototype.Qc,gr.prototype.parse=gr.prototype.parse,gr.prototype.stop=gr.prototype.stop,gr.prototype.fullBox=gr.prototype.R,gr.prototype.box=gr.prototype.box;var xr=0,Sr=1;function Tr(e,t,n,i,r){var s=Cr.value(),o=e.subarray(n.start,n.start+n.size),a=Ce(o),l=new Uint8Array(n.size+s.byteLength);for(l.set(o,0),(o=Ce(l)).setUint32(4,r),l.set(s,n.size),r=a.getUint32(4),o.setUint32(n.size+16,r),kr(l,0,l.byteLength),r=new Uint8Array(e.byteLength+l.byteLength),n=gt()?n.start:n.start+n.size,s=e.subarray(n),r.set(e.subarray(0,n)),r.set(l,n),r.set(s,n+l.byteLength),i=(e=c(i)).next();!i.done;i=e.next())kr(r,(i=i.value).start,i.size+l.byteLength);return l=Ce(r,t.start),t=_r(t),e=l.getUint32(t),l.setUint32(t,e+1),r}function kr(e,t,n){0!=(t=(e=Ce(e,t)).getUint32(0))&&(1==t?(e.setUint32(8,n>>32),e.setUint32(12,4294967295&n)):e.setUint32(0,n))}var Cr=new ht((function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])}));function Pr(e,t,n,i,r){if(i>=r)return null;for(var s=-1,o=-1,a=0;a<n.length;a++)if(n[a].some((function(e){return null!=e&&""!=e.g.trim()}))){s=a;break}for(a=n.length-1;0<=a;a--)if(n[a].some((function(e){return null!=e&&""!=e.g.trim()}))){o=a;break}if(-1===s||-1===o)return null;for(var l=a=!1,c="white",u="black",h=Ir(i,r,a,l,c,u);s<=o;s++){for(var d=n[s],p=-1,f=-1,m=0;m<d.length;m++)if(null!=d[m]&&""!==d[m].g.trim()){p=m;break}for(m=d.length-1;0<=m;m--)if(null!=d[m]&&""!==d[m].g.trim()){f=m;break}if(-1===p||-1===f)d=Lr(i,r),e.nestedCues.push(d);else{for(;p<=f;p++)if(m=d[p]){var g=m.l,v=m.i,y=m.j,b=m.h;g==a&&v==l&&y==c&&b==u||(h.payload&&e.nestedCues.push(h),h=Ir(i,r,g,v,y,b),a=g,l=v,c=y,u=b),h.payload+=m.g}else h.payload+=" ";h.payload&&e.nestedCues.push(h),s!==o&&(h=Lr(i,r),e.nestedCues.push(h)),h=Ir(i,r,a,l,c,u)}}return e.nestedCues.length?{cue:e,stream:t}:null}function Ir(e,t,n,i,r,s){return e=new ne(e,t,""),n&&e.textDecoration.push("underline"),i&&(e.fontStyle="italic"),e.color=r,e.backgroundColor=s,e}function Lr(e,t){var n=new ne(e,t,"");return n.lineBreak=!0,n}function Ar(e,t,n,i,r){this.g=e,this.l=t,this.i=n,this.h=i,this.j=r}function Mr(e,t){this.i=[],this.g=1,this.h=0,this.u=e,this.s=t,this.j=this.m=!1,this.l="white",this.o="black",Nr(this)}function Or(e,t,n){return Pr(new ne(t,n,""),"CC"+(e.u<<1|e.s+1),e.i,t,n)}function Nr(e){jr(e,0,15),e.g=1}function Dr(e,t,n){if(!(32>n||127<n)){var i="";switch(t){case Br:i=Hr.has(n)?Hr.get(n):String.fromCharCode(n);break;case Ur:i=qr.get(n);break;case $r:e.i[e.g].pop(),i=Vr.get(n);break;case Fr:e.i[e.g].pop(),i=zr.get(n)}i&&e.i[e.g].push(new Ar(i,e.m,e.j,e.o,e.l))}}function Rr(e,t,n,i){if(t>=n)for(--i;0<=i;i--)e.i[t+i]=e.i[n+i].map((function(e){return e}));else for(var r=0;r<i;r++)e.i[t+r]=e.i[n+r].map((function(e){return e}))}function jr(e,t,n){for(var i=0;i<=n;i++)e.i[t+i]=[]}var Br=0,Ur=1,$r=2,Fr=3,Hr=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),qr=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57,"⠀"],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),Vr=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),zr=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]);function Gr(e,t){this.h=Jr,this.o=new Mr(e,t),this.i=new Mr(e,t),this.l=new Mr(e,t),this.g=this.i,this.j=0,this.m=null}function Kr(e,t,n){e.g=e.i;var i=e.g,r=null;return e.h!==Qr&&e.h!==Zr&&(r=Or(i,e.j,n),(n=e.i).g=0<n.h?n.h:0,jr(n,0,15),(n=e.l).g=0<n.h?n.h:0,jr(n,0,15),i.g=15),e.h=Qr,i.h=t,r}function Wr(e){e.h=Yr,e.g=e.l,e.g.h=0}function Xr(e){K("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=Zr}var Jr=0,Yr=1,Qr=3,Zr=4,es="black green blue cyan red yellow magenta black".split(" "),ts="white green blue cyan red yellow magenta white_italics".split(" ");function ns(){this.l=!1,this.C=this.F=0,this.D=us,this.i=[],this.g=this.h=this.j=0,this.u=this.o=!1,this.s="white",this.m="black",is(this)}function is(e){e.i=[];for(var t=0;15>t;t++)e.i.push(rs())}function rs(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function ss(e,t){os(e)&&(e.i[e.h][e.g]=new Ar(t,e.u,e.o,e.m,e.s),e.g++)}function os(e){var t=e.g<e.C&&0<=e.g;return e.h<e.F&&0<=e.h&&t}function as(e,t,n){var i=new ne(e.j,t,"");return i.textAlign=e.D===ls?"left":e.D===cs?"right":se,(n=Pr(i,"svc"+n,e.i,e.j,t))&&(e.j=t),n}ns.prototype.isVisible=function(){return this.l};var ls=0,cs=1,us=2;function hs(){this.i=[],this.h=null,this.g=0}function ds(e,t){3===t.type?(e.g=2*(63&t.value)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),0===e.g&&(e.i.push(new ps(e.h)),e.h=null,e.g=0))}function ps(e){this.g=0,this.h=e}function fs(e){if(!e.ma())throw new Fe(2,2,3e3);return e.h[e.g++]}function ms(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function gs(e,t,n,i){if(128<=n&&135>=n)i=7&n,e.h[i]&&(e.g=e.h[i]);else{if(136===n){n=fs(t).value,t=null;for(var r=(n=c(vs(e,n))).next();!r.done;r=n.next())(r=e.h[r.value]).isVisible()&&(t=as(r,i,e.i)),is(r);return t}if(137===n)for(n=(t=c(vs(e,t=fs(t).value))).next();!n.done;n=t.next())(n=e.h[n.value]).isVisible()||(n.j=i),n.l=!0;else{if(138===n){for(n=fs(t).value,t=null,r=(n=c(vs(e,n))).next();!r.done;r=n.next())(r=e.h[r.value]).isVisible()&&(t=as(r,i,e.i)),r.l=!1;return t}if(139===n){for(n=fs(t).value,t=null,r=(n=c(vs(e,n))).next();!r.done;r=n.next())(r=e.h[r.value]).isVisible()?t=as(r,i,e.i):r.j=i,r.l=!r.l;return t}if(140===n)return ys(e,t=fs(t).value,i);if(143===n)return i=ys(e,255,i),bs(e),i;if(144===n)t.skip(1),i=fs(t).value,e.g&&(e.g.o=0<(128&i),e.g.u=0<(64&i));else if(145===n)i=fs(t).value,n=fs(t).value,t.skip(1),e.g&&(t=ws((48&n)>>4,(12&n)>>2,3&n),e.g.s=ws((48&i)>>4,(12&i)>>2,3&i),e.g.m=t);else if(146===n)i=fs(t).value,t=fs(t).value,e.g&&((e=e.g).h=15&i,e.g=63&t);else if(151===n)t.skip(1),t.skip(1),i=fs(t).value,t.skip(1),e.g&&(e.g.D=3&i);else if(152<=n&&159>=n){if(n=(15&n)-8,!(r=null!==e.h[n])){var s=new ns;s.j=i,e.h[n]=s}i=fs(t).value,fs(t),fs(t),s=fs(t).value;var o=fs(t).value;t=fs(t).value,r&&0==(7&t)||((t=e.h[n]).h=0,t.g=0,t.u=!1,t.o=!1,t.s="white",t.m="black"),(t=e.h[n]).l=0<(32&i),t.F=1+(15&s),t.C=1+(63&o),e.g=e.h[n]}}}return null}function vs(e,t){for(var n=[],i=0;8>i;i++)1==(1&t)&&e.h[i]&&n.push(i),t>>=1;return n}function ys(e,t,n){for(var i=null,r=(t=c(vs(e,t))).next();!r.done;r=t.next()){r=r.value;var s=e.h[r];s.isVisible()&&(i=as(s,n,e.i)),e.h[r]=null}return i}function bs(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function ws(e,t,n){var i={0:0,1:0,2:1,3:1};return _s[(e=i[e])<<2|(t=i[t])<<1|(n=i[n])]}ps.prototype.ma=function(){return this.g<this.h.length},ps.prototype.X=function(){return this.g},ps.prototype.skip=function(e){if(this.g+e>this.h.length)throw new Fe(2,2,3e3);this.g+=e};var Es=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),_s="black blue green cyan red magenta yellow white".split(" ");function xs(){this.h=[],this.g=[],this.i=new hs,this.l=0,this.s=new Map([["CC1",new Gr(0,0)],["CC2",new Gr(0,1)],["CC3",new Gr(1,0)],["CC4",new Gr(1,1)]]),this.o=this.m=0,this.j=new Map,Ss(this)}function Ss(e){e.m=0,e.o=0;for(var t=(e=c(e.s.values())).next();!t.done;t=e.next())(t=t.value).h=2,t.g=t.i,t.m=null,Nr(t.i),Nr(t.l),Nr(t.o)}function Ts(e,t){var n=t.type;if(16==(112&t.za)){var i=t.za>>3&1;0===n?e.m=i:e.o=i}if(n=e.s.get("CC"+(n<<1|(n?e.o:e.m)+1)),255===t.za&&255===t.Oa||!t.za&&!t.Oa||!Cs(t.za)||!Cs(t.Oa))return 45<=++e.l&&Ss(e),null;if(e.l=0,t.za&=127,t.Oa&=127,!t.za&&!t.Oa)return null;if(i=null,16==(112&t.za))e:{var r=t.za;if(i=t.Oa,n.m===(r<<8|i))n.m=null;else if(n.m=r<<8|i,16==(240&r)&&64==(192&i)){r=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&r)<<1|i>>5&1];var s=(30&i)>>1,o="white",a=!1;if(7>s?o=ts[s]:7===s&&(a=!0),i=1==(1&i),n.h!==Zr){if(s=n.g,n.h===Qr&&r!==s.g){var l=1+r-s.h;Rr(s,l,1+s.g-s.h,s.h),jr(s,0,l-1),jr(s,r+1,15-r)}s.g=r,n.g.m=i,n.g.j=a,n.g.l=o,n.g.o="black"}}else if(17==(247&r)&&32==(240&i))n.g.m=!1,n.g.j=!1,n.g.l="white",Dr(n.g,Br,32),o=!1,"white_italics"===(r=ts[(14&i)>>1])&&(r="white",o=!0),n.g.m=1==(1&i),n.g.j=o,n.g.l=r;else if(16==(247&r)&&32==(240&i)||23==(247&r)&&45==(255&i))o="black",0==(7&r)&&(o=es[(14&i)>>1]),n.g.o=o;else if(17==(247&r)&&48==(240&i))Dr(n.g,Ur,i);else if(18==(246&r)&&32==(224&i))Dr(n.g,1&r?Fr:$r,i);else if(20==(246&r)&&32==(240&i)){switch(i=t.pts,r=null,t.Oa){case 32:Wr(n);break;case 33:(n=n.g).i[n.g].pop();break;case 37:r=Kr(n,2,i);break;case 38:r=Kr(n,3,i);break;case 39:r=Kr(n,4,i);break;case 40:Dr(n.g,Br,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.j=i;break;case 42:Nr(n.o),Xr(n);break;case 43:Xr(n);break;case 44:r=n.i,o=null,n.h!==Zr&&(o=Or(r,n.j,i)),jr(r,0,15),r=o;break;case 45:r=n.g,n.h!==Qr?r=null:(o=Or(r,n.j,i),Rr(r,(a=r.g-r.h+1)-1,a,r.h),jr(r,0,a-1),jr(r,r.g,15-r.g),n.j=i,r=o);break;case 46:jr(n.l,0,15);break;case 47:r=null,n.h!==Zr&&(r=Or(n.i,n.j,i)),o=n.l,n.l=n.i,n.i=o,Wr(n),n.j=i}i=r;break e}i=null}else r=t.Oa,Dr(n.g,Br,t.za),Dr(n.g,Br,r);return i}function ks(e,t){var n=[];try{for(;t.ma();){var i=fs(t).value,r=(224&i)>>5,s=31&i;if(7===r&&0!=s&&(r=63&fs(t).value),0!=r){e.j.has(r)||e.j.set(r,new ms(r));for(var o=e.j.get(r),a=t.X();t.X()-a<s;){var l=fs(r=t),c=l.value,u=l.pts;if(16===c&&(c=c<<16|fs(r).value),0<=c&&31>=c){var h=u;if(o.g){var d=o.g;switch(r=null,c){case 8:!os(d)||0>=d.g&&0>=d.h||(0>=d.g?(d.g=d.C-1,d.h--):d.g--,d.i[d.h][d.g]=null);break;case 13:if(d.isVisible()&&(r=as(d,h,o.i)),d.h+1>=d.F){h=d;for(var p=0,f=1;15>f;f++,p++)h.i[p]=h.i[f];for(f=0;1>f;f++,p++)h.i[p]=rs()}else d.h++;d.g=0;break;case 14:d.isVisible()&&(r=as(d,h,o.i)),d.i[d.h]=rs(),d.g=0;break;case 12:d.isVisible()&&(r=as(d,h,o.i)),is(d),(h=d).h=0,h.g=0}var m=r}else m=null}else if(128<=c&&159>=c)m=gs(o,r,c,u);else{if(4096<=c&&4127>=c)8<=(h=255&c)&&15>=h?r.skip(1):16<=h&&23>=h?r.skip(2):24<=h&&31>=h&&r.skip(3);else if(4224<=c&&4255>=c)128<=(h=255&c)&&135>=h?r.skip(4):136<=h&&143>=h&&r.skip(5);else if(32<=c&&127>=c)r=c,o.g&&ss(o.g,127===r?"♪":String.fromCharCode(r));else if(160<=c&&255>=c)o.g&&ss(o.g,String.fromCharCode(c));else if(4128<=c&&4223>=c){if(r=255&c,o.g)if(Es.has(r)){var g=Es.get(r);ss(o.g,g)}else ss(o.g,"_")}else 4256<=c&&4351>=c&&o.g&&ss(o.g,160!=(255&c)?"_":"[CC]");m=null}(r=m)&&n.push(r)}}}}catch(e){if(!(e instanceof Fe&&3e3===e.code))throw e;K("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.")}return n}function Cs(e){for(var t=0;e;)t^=1&e,e>>=1;return 1===t}function Ps(e,t){var n=null,i=null,r=e.M();return 1&t&&e.skip(8),2&t&&e.skip(4),8&t&&(n=e.M()),16&t&&(i=e.M()),{trackId:r,ee:n,Te:i}}function Is(e,t){return{md:1==t?e.Jb():e.M()}}function Ls(e,t){return 1==t?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),{timescale:e.M()}}function As(e,t,n){var i=e.M(),r=[];1&n&&e.skip(4),4&n&&e.skip(4);for(var s=0;s<i;s++){var o={Od:null,sampleSize:null,Sc:null};256&n&&(o.Od=e.M()),512&n&&(o.sampleSize=e.M()),1024&n&&e.skip(4),2048&n&&(o.Sc=0==t?e.M():e.se()),r.push(o)}return{Ng:i,ve:r}}function Ms(){this.i=new Map,this.h=this.g=0}function Os(){this.h=new Ms,this.g=new xs}function Ns(e){return!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function Ds(e,t,n){return n=void 0===n?0:n,!(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0)||t>e.end(e.length-1))&&t+n>=e.start(0)}function Rs(e,t){if(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))return 0;for(var n=0,i=c(js(e)),r=i.next();!r.done;r=i.next()){var s=r.value;r=s.start,(s=s.end)>t&&(n+=s-Math.max(r,t))}return n}function js(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function Bs(e,t,n,i){var r=this;this.j=e,this.l=n,this.h={},this.I={},this.G={},this.g=null,this.L=i||function(){},this.i={},this.o=new Pi,this.s={},this.u=t,this.D=new ut,this.m=function(e,t){var n=new MediaSource;return e.o.oa(n,"sourceopen",(function(){URL.revokeObjectURL(e.F),t.resolve()})),e.F=Qs(n),e.j.src=e.F,n}(this,this.D),this.C=new ki((function(){return function(e){var t,n,i,r,s,o,a;return M((function(l){if(1==l.g){for(n in t=[],e.i)for(i=e.i[n],r=i[0],e.i[n]=i.slice(0,1),r&&t.push(r.p.catch(De)),s=c(i.slice(1)),o=s.next();!o.done;o=s.next())o.value.p.reject(new Fe(2,7,7003,void 0));for(a in e.g&&t.push(e.g.destroy()),e.l&&t.push(e.l.destroy()),e.s)t.push(e.s[a].destroy());return w(l,Promise.all(t),2)}e.o&&(e.o.release(),e.o=null),e.j&&(e.j.removeAttribute("src"),e.j.load(),e.j=null),e.m=null,e.g=null,e.l=null,e.h={},e.s={},e.u=null,e.i={},E(l)}))}(r)})),this.F=""}function Us(e,t){e.g||(e.g=new Jt(e.l)),"application/cea-608"!=t&&"application/cea-708"!=t&&(e.g.l=je(tn[t]))}function $s(e){return!e.m||"ended"==e.m.readyState}function Fs(e,t){if(t==at)var n=e.g.g;else n=!(n=qs(e,t))||1==n.length&&1e-6>n.end(0)-n.start(0)?null:1==n.length&&0>n.start(0)?0:n.length?n.start(0):null;return n}function Hs(e,t){return t==at?e.g.h:Ns(qs(e,t))}function qs(e,t){try{return e.h[t].buffered}catch(e){return null}}function Vs(e,t,n,i,r,s){var o,a,l,h,d,p,f,m;return M((function(g){return 1==g.g?t==(o=lt).Z?w(g,function(e,t,n,i){var r,s,o;return M((function(a){return 1==a.g?w(a,Promise.resolve(),2):e.l&&e.i?null==n||null==i?(e.l.parseInit(ke(t)),a.return()):(r={periodStart:e.u,segmentStart:n,segmentEnd:i},s=e.l.parseMedia(ke(t),r),o=s.filter((function(t){return t.startTime>=e.j&&t.startTime<e.m})),e.i.append(o),null==e.g&&(e.g=Math.max(n,e.j)),e.h=Math.min(i,e.m),void E(a)):a.return()}))}(e.g,n,i,r),0):e.s[t]?w(g,function(e,t){e.l=!0,e.h=new ut,e.m=[],e.j=[],e.i=[];var n=ke(t);return e.g.push(n),e.g.flush(),e.l&&e.h.reject(new Fe(2,3,3018)),e.h}(e.s[t],n),10):s?(e.g||Us(e,"text/vtt"),null==i&&null==r?e.u.init(n):(a=function(e,t){for(var n=e.h.parse(t),i=(n=c(n)).next();!i.done;i=n.next()){var r=i.value,s=ke(r.Hf);if(0<s.length&&(i=e.g,r=r.pts,181===(s=new pr(s,0)).Y()&&49===s.Ib()&&1195456820===s.M()&&3===s.Y())){var o=s.Y();if(0!=(64&o)){o&=31,s.skip(1);for(var a=0;a<o;a++){var l=s.Y(),h=(4&l)>>2,d=s.Y(),p=s.Y();h&&(0==(l&=3)||1===l?i.h.push({pts:r,type:l,za:d,Oa:p,order:i.h.length}):(i.g.push({pts:r,type:l,value:d,order:i.g.length}),i.g.push({pts:r,type:2,value:p,order:i.g.length})))}}}}return function(e){function t(e,t){return e.pts-t.pts||e.order-t.order}var n=[];e.h.sort(t),e.g.sort(t);for(var i=c(e.h),r=i.next();!r.done;r=i.next())(r=Ts(e,r.value))&&n.push(r);for(r=(i=c(e.g)).next();!r.done;r=i.next())ds(e.i,r.value);for(r=(i=c(e.i.i)).next();!r.done;r=i.next())r=ks(e,r.value),n.push.apply(n,u(r));return e.i.i=[],e.h=[],e.g=[],n}(e.g)}(e.u,n)).length&&(l=e.h[o.Na].timestampOffset,en(e.g,a,i,r,l)),n=Ys(e,n,i,t),w(g,Ks(e,t,(function(){e.h[t].appendBuffer(n)})),0)):(n=Ys(e,n,i,t),w(g,Ks(e,t,(function(){e.h[t].appendBuffer(n)})),0)):(h=g.h,e.g||Us(e,"text/vtt"),h.metadata&&(d=e.h[t].timestampOffset,e.L(h.metadata,d,r)),h.captions&&h.captions.length&&(p=e.h[o.Na].timestampOffset,f=function(e){for(var t=[],n=(e=c(e)).next();!n.done;n=e.next())n=n.value,t.push({stream:n.stream,cue:new ne(n.startTime,n.endTime,n.text)});return t}(h.captions),en(e.g,f,i,r,p)),m=h.data,m=Ys(e,m,i,t),w(g,Ks(e,t,(function(){e.h[t].appendBuffer(m)})),0))}))}function zs(e,t){return M((function(n){return t==lt.Z?e.g?w(n,e.g.remove(0,1/0),0):n.return():w(n,Ks(e,t,(function(){var n=e.m.duration;0>=n?Gs(e,t):e.h[t].remove(0,n)})),0)}))}function Gs(e,t){var n=e.i[t][0];n&&(n.p.resolve(),Xs(e,t))}function Ks(e,t,n){return Ci(e.C),n={start:n,p:new ut},e.i[t].push(n),1==e.i[t].length&&Js(e,t),n.p}function Ws(e,t){var n,i,r,s,o;return M((function(a){switch(a.g){case 1:for(r in Ci(e.C),n=[],i={},e.h)i.Pb=new ut,s={start:function(e){return function(){return e.Pb.resolve()}}(i),p:i.Pb},e.i[r].push(s),n.push(i.Pb),1==e.i[r].length&&s.start(),i={Pb:i.Pb};return _(a,2),w(a,Promise.all(n),4);case 4:S(a,3);break;case 2:throw T(a);case 3:try{t()}catch(e){throw new Fe(2,3,3015,e)}finally{for(o in e.h)Xs(e,o)}E(a)}}))}function Xs(e,t){e.i[t].shift(),Js(e,t)}function Js(e,t){var n=e.i[t][0];if(n)try{n.start()}catch(i){"QuotaExceededError"==i.name?n.p.reject(new Fe(2,3,3017,t)):n.p.reject(new Fe(2,3,3015,i)),Xs(e,t)}}function Ys(e,t,n,i){var r=e.G[i];return null==n&&r&&(vt()||gt())&&"mp4"==e.I[i].split(";")[0].split("/")[1]&&(t=function(e){function t(){r=!0}function n(e){s.push(e),vr(e)}e=ke(e);var i,r=!1,s=[],o=[];if((new gr).box("moov",n).box("trak",n).box("mdia",n).box("minf",n).box("stbl",n).R("stsd",(function(e){i=e,s.push(e),yr(e)})).R("encv",t).R("enca",t).R("avc1",(function(e){o.push({box:e,hc:1701733238})})).R("avc3",(function(e){o.push({box:e,hc:1701733238})})).R("ac-3",(function(e){o.push({box:e,hc:1701733217})})).R("ec-3",(function(e){o.push({box:e,hc:1701733217})})).R("mp4a",(function(e){o.push({box:e,hc:1701733217})})).parse(e),r)return e;if(0==o.length||!i)throw Ut(e),new Fe(2,3,3019);o.reverse();for(var a=c(o),l=a.next();!l.done;l=a.next())l=l.value,e=Tr(e,i,l.box,s,l.hc);return e}(t)),t}Ms.prototype.init=function(e){var t=this,n=[],i=[];if((new gr).box("moov",vr).box("mvex",vr).R("trex",(function(e){var n=e.reader;n.skip(4),n.skip(4),e=n.M(),n=n.M(),t.g=e,t.h=n})).box("trak",vr).R("tkhd",(function(e){var t=e.reader;1==e.version?(t.skip(8),t.skip(8)):(t.skip(4),t.skip(4)),e=t.M(),n.push(e)})).box("mdia",vr).R("mdhd",(function(e){e=Ls(e.reader,e.version),i.push(e.timescale)})).parse(e,!0),!n.length||!i.length||n.length!=i.length)throw new Fe(2,2,2010);n.forEach((function(e,n){t.i.set(e,i[n])}))},Ms.prototype.parse=function(e){var t=this,n=[],i=this.g,r=this.h,s=[],o=null,a=9e4;return(new gr).box("moof",vr).box("traf",vr).R("trun",(function(e){s=As(e.reader,e.version,e.flags).ve})).R("tfhd",(function(e){e=Ps(e.reader,e.flags),i=e.ee||t.g,r=e.Te||t.h,e=e.trackId,t.i.has(e)&&(a=t.i.get(e))})).R("tfdt",(function(e){o=Is(e.reader,e.version).md})).box("mdat",(function(e){if(null===o)throw new Fe(2,2,2010);e=e.reader;var t=o,l=a,h=i,d=r,p=s,f=0,m=d;for(p.length&&(m=p[0].sampleSize||d);e.ma();){var g=e.M();if(6==(31&e.Y())){var v=0;p.length>f&&(v=p[f].Sc||0),v=(t+v)/l;for(var y,b=[],w=e.Za(g-1),E=y=0;E<w.length;)2==y&&3==w[E]?(y=0,(w=[].concat(u(w))).splice(E,1),w=new Uint8Array(w)):0==w[E]?y++:y=0,E++;for(y=w,E=0;E<y.length;){for(w=0;255==y[E];)w+=255,E++;w+=y[E++];for(var _=0;255==y[E];)_+=255,E++;_+=y[E++],4==w&&b.push(y.subarray(E,E+_)),E+=_}for(y=(b=c(b)).next();!y.done;y=b.next())n.push({Hf:y.value,pts:v})}else try{e.skip(g-1)}catch(e){break}0==(m-=g+4)&&(t=p.length>f?t+(p[f].Od||h):t+h,f++,m=p.length>f&&p[f].sampleSize||d)}})).parse(e,!1),n},Os.prototype.init=function(e){this.h.init(e)},(i=Bs.prototype).destroy=function(){return this.C.destroy()},i.init=function(e,t){var n,i,r,s,o,a,l,u=this;return M((function(h){if(1==h.g)return n=lt,w(h,u.D,2);for(i={},r=c(e.keys()),s=r.next();!s.done;i={qa:i.qa},s=r.next())i.qa=s.value,o=e.get(i.qa),a=zt(o.mimeType,o.codecs),i.qa==n.Z?Us(u,a):(!t&&MediaSource.isTypeSupported(a)||!Ht(a,i.qa)||(u.s[i.qa]=new Ft,a=Vt(i.qa,a)),l=u.m.addSourceBuffer(a),u.o.A(l,"error",function(e){return function(){u.i[e.qa][0].p.reject(new Fe(2,3,3014,u.j.error?u.j.error.code:0))}}(i)),u.o.A(l,"updateend",function(e){return function(){return Gs(u,e.qa)}}(i)),u.h[i.qa]=l,u.I[i.qa]=a,u.i[i.qa]=[],u.G[i.qa]=!!o.drmInfos.length);E(h)}))},i.Ya=function(){var e={total:js(this.j.buffered),audio:js(qs(this,"audio")),video:js(qs(this,"video")),text:[]};if(this.g){var t=this.g.g,n=this.g.h;null!=t&&null!=n&&e.text.push({start:t,end:n})}return e},i.remove=function(e,t,n){var i=this;return M((function(r){return w(r,e==lt.Z?i.g.remove(t,n):Ks(i,e,(function(){n<=t?Gs(i,e):i.h[e].remove(t,n)})),0)}))},i.flush=function(e){var t=this;return M((function(n){return e==lt.Z?n.return():w(n,Ks(t,e,(function(){t.j.currentTime-=.001,Gs(t,e)})),0)}))},i.endOfStream=function(e){var t=this;return M((function(n){return w(n,Ws(t,(function(){$s(t)||(e?t.m.endOfStream(e):t.m.endOfStream())})),0)}))},i.Ia=function(e){var t=this;return M((function(n){return w(n,Ws(t,(function(){t.m.duration=e})),0)}))},i.getDuration=function(){return this.m.duration};var Qs=e.URL.createObjectURL;function Zs(e,t,n,i){this.sa=e,this.pa=t,this.ga=n,this.zd=void 0===i?null:i}function eo(e,t,n,i,r,s,o,a,l,c,u,h){c=void 0===c?[]:c,this.startTime=e,this.l=this.endTime=t,this.j=n,this.pa=i,this.ga=r,this.g=s,this.timestampOffset=o,this.appendWindowStart=a,this.appendWindowEnd=l,this.h=c,this.tilesLayout=void 0===u?"":u,this.i=void 0===h?null:h}function to(e,t,n){this.l=e,this.Rc=t,this.m=this.i=1/0,this.g=1,this.h=this.j=null,this.o=0,this.s=!0,this.u=0,this.C=void 0===n||n,this.D=0,this.F=!1}function no(e,t){this.j=e,this.m=ro(e),this.g=e.g.currentTime,this.l=Date.now()/1e3,this.h=!1,this.o=t,this.i=function(){}}function io(e){this.g=e}function ro(e){if(e.g.paused||0==e.g.playbackRate||0==e.g.buffered.length)var t=!1;else e:{t=e.g.currentTime;for(var n=(e=c(js(e.g.buffered))).next();!n.done;n=e.next())if(!(t<(n=n.value).start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function so(e,t,n,i,r){var s=this;this.g=e,this.C=t,this.l=n,this.u=r,this.i=new Pi,this.s=!1,this.D=e.readyState,this.j=!1,this.h=i,this.o=!1,this.i.A(e,"waiting",(function(){return oo(s)})),this.m=new pt((function(){oo(s)})).Ca(.25)}function oo(e){if(0!=e.g.readyState){if(e.g.seeking){if(!e.s)return}else e.s=!1;if(!e.g.paused||0==e.g.currentTime&&(e.g.autoplay||0!=e.g.currentTime)){var t;if(e.g.readyState!=e.D&&(e.j=!1,e.D=e.g.readyState),!(t=!e.h)){var n=(t=e.h).j,i=ro(n),r=n.g.currentTime,s=Date.now()/1e3;t.g==r&&t.m==i||(t.l=s,t.g=r,t.m=i,t.h=!1),(i=(r=s-t.l)>=t.o&&i&&!t.h)&&(t.i(t.g,r),t.h=!0,t.g=n.g.currentTime),t=!i}if(t){r=e.l.smallGapLimit;var o=e.g.currentTime;if(n=function(e,t,n){return!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0)?null:0<=(e=js(e).findIndex((function(e,i,r){return e.start>t&&(0==i||r[i-1].end-t<=n)})))?e:null}(t=e.g.buffered,o,e.l.gapDetectionThreshold),!(null==n||0==n&&!e.o||(i=t.start(n),i>=e.C.Pa()))){var a=i-o;r=a<=r,s=!1,.001>a||(r||e.j||(e.j=!0,(o=new ui("largegap",o=(new Map).set("currentTime",o).set("gapSize",a))).cancelable=!0,e.u(o),e.l.jumpLargeGaps&&!o.defaultPrevented&&(s=!0)),!r&&!s)||(0!=n&&t.end(n-1),e.g.currentTime=i)}}}}}function ao(e,t,n,i){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?i():(t=lo.value().get(t),n.oa(e,t,i))}Zs.prototype.dc=function(){return this.pa},Zs.prototype.$b=function(){return this.ga},$("shaka.media.InitSegmentReference",Zs),Zs.prototype.getEndByte=Zs.prototype.$b,Zs.prototype.getStartByte=Zs.prototype.dc,(i=eo.prototype).sa=function(){return this.j()},i.getStartTime=function(){return this.startTime},i.af=function(){return this.endTime},i.dc=function(){return this.pa},i.$b=function(){return this.ga},i.uf=function(){return this.tilesLayout},i.tf=function(){return this.i},$("shaka.media.SegmentReference",eo),eo.prototype.getTileDuration=eo.prototype.tf,eo.prototype.getTilesLayout=eo.prototype.uf,eo.prototype.getEndByte=eo.prototype.$b,eo.prototype.getStartByte=eo.prototype.dc,eo.prototype.getEndTime=eo.prototype.af,eo.prototype.getStartTime=eo.prototype.getStartTime,eo.prototype.getUris=eo.prototype.sa,(i=to.prototype).getDuration=function(){return this.i},i.gf=function(){return this.g},i.Ia=function(e){this.i=e},i.mf=function(){return this.l},i.Ae=function(e){this.o=e},i.oc=function(e){this.s=e},i.Vd=function(e){this.m=e},i.Wf=function(e){this.Rc=e},i.$e=function(){return this.Rc},i.Fb=function(e){if(0!=e.length){var t=e[e.length-1].endTime;this.Fd(e[0].startTime),this.g=e.reduce((function(e,t){return Math.max(e,t.endTime-t.startTime)}),this.g),this.h=Math.max(this.h,t),null!=this.l&&this.C&&!this.F&&(this.l=(Date.now()+this.o)/1e3-this.h-this.g)}},i.xd=function(){this.F=!0},i.Fd=function(e){this.j=null==this.j?e:Math.min(this.j,e)},i.Ed=function(e){this.g=Math.max(this.g,e)},i.offset=function(e){null!=this.j&&(this.j+=e),null!=this.h&&(this.h+=e)},i.T=function(){return 1/0==this.i&&!this.s},i.lb=function(){return 1/0!=this.i&&!this.s},i.Qa=function(){return Math.max(this.u,this.gb()-this.m)},i.Be=function(e){this.u=e},i.gb=function(){return this.T()||this.lb()?Math.min(Math.max(0,(Date.now()+this.o)/1e3-this.g-this.l)+this.D,this.i):this.h?Math.min(this.h,this.i):this.i},i.cc=function(e){var t=Math.max(this.j,this.u);return 1/0==this.m?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.gb()-this.m+e,this.Pa()))},i.Bb=function(){return this.cc(0)},i.Pa=function(){return Math.max(0,this.gb()-(this.T()||this.lb()?this.Rc:0))},i.Ee=function(){return!(null==this.l||null!=this.h&&this.C)},i.ze=function(e){this.D=e},$("shaka.media.PresentationTimeline",to),to.prototype.setAvailabilityTimeOffset=to.prototype.ze,to.prototype.usingPresentationStartTime=to.prototype.Ee,to.prototype.getSeekRangeEnd=to.prototype.Pa,to.prototype.getSeekRangeStart=to.prototype.Bb,to.prototype.getSafeSeekRangeStart=to.prototype.cc,to.prototype.getSegmentAvailabilityEnd=to.prototype.gb,to.prototype.setUserSeekStart=to.prototype.Be,to.prototype.getSegmentAvailabilityStart=to.prototype.Qa,to.prototype.isInProgress=to.prototype.lb,to.prototype.isLive=to.prototype.T,to.prototype.offset=to.prototype.offset,to.prototype.notifyMaxSegmentDuration=to.prototype.Ed,to.prototype.notifyMinSegmentStartTime=to.prototype.Fd,to.prototype.lockStartTime=to.prototype.xd,to.prototype.notifySegments=to.prototype.Fb,to.prototype.getDelay=to.prototype.$e,to.prototype.setDelay=to.prototype.Wf,to.prototype.setSegmentAvailabilityDuration=to.prototype.Vd,to.prototype.setStatic=to.prototype.oc,to.prototype.setClockOffset=to.prototype.Ae,to.prototype.getPresentationStartTime=to.prototype.mf,to.prototype.setDuration=to.prototype.Ia,to.prototype.getMaxSegmentDuration=to.prototype.gf,to.prototype.getDuration=to.prototype.getDuration,no.prototype.release=function(){this.j=null,this.i=function(){}},so.prototype.release=function(){this.i&&(this.i.release(),this.i=null),null!=this.m&&(this.m.stop(),this.m=null),this.h&&(this.h.release(),this.h=null),this.g=this.C=this.u=null},so.prototype.Id=function(){this.o=!0,oo(this)};var lo=new ht((function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])}));function co(e,t,n){var i=this;this.g=e,this.l=t,this.j=n,this.m=!1,this.h=new Pi,this.i=new mo(e),ao(this.g,HTMLMediaElement.HAVE_METADATA,this.h,(function(){po(i,i.j)}))}function uo(e){return e.m?e.g.currentTime:e.j}function ho(e,t){0<e.g.readyState?go(e.i,t):ao(e.g,HTMLMediaElement.HAVE_METADATA,e.h,(function(){po(e,e.j)}))}function po(e,t){.001>Math.abs(e.g.currentTime-t)?fo(e):(e.h.oa(e.g,"seeking",(function(){fo(e)})),go(e.i,0==e.g.currentTime?t:e.g.currentTime))}function fo(e){e.m=!0,e.h.A(e.g,"seeking",(function(){return e.l()}))}function mo(e){var t=this;this.h=e,this.m=10,this.l=this.j=this.i=0,this.g=new pt((function(){0>=t.i||t.h.currentTime!=t.j?t.g.stop():(t.h.currentTime=t.l,t.i--)}))}function go(e,t){e.j=e.h.currentTime,e.l=t,e.i=e.m,e.h.currentTime=t,e.g.Ca(.1)}function vo(e){var t=this;this.g=e,this.j=!1,this.h=null,this.i=new Pi,ao(this.g,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,(function(){null==t.h||0==t.h?t.j=!0:(t.i.oa(t.g,"seeking",(function(){t.j=!0})),t.g.currentTime=Math.max(0,t.g.currentTime+t.h))}))}function yo(e,t,n,i,r,s){var o=this;this.i=e,this.g=t.presentationTimeline,this.F=t.minBufferTime||0,this.l=n,this.C=r,this.u=null,this.j=new so(e,t.presentationTimeline,n,function(e,t){if(!t.stallEnabled)return null;var n=t.stallSkip,i=new no(new io(e),t.stallThreshold);return function(e,t){e.i=t}(i,(function(){n?e.currentTime+=n:(e.pause(),e.play())})),i}(e,n),s),this.h=new co(e,(function(){var e=o.j;e.s=!0,e.o=!1,e.j=!1;var t=uo(o.h);return e=wo(o,t),.001<Math.abs(e-t)&&(t=Date.now()/1e3,!o.u||o.u<t-1)?(o.u=t,ho(o.h,e),e=void 0):(o.C(),e=void 0),e}),function(e,t){return null==t?t=1/0>e.g.getDuration()?e.g.Bb():e.g.Pa():0>t&&(t=e.g.Pa()+t),bo(e,Eo(e,t))}(this,i)),this.s=new pt((function(){if(0!=o.i.readyState&&!o.i.paused){var e=uo(o.h),t=o.g.Bb(),n=o.g.Pa();3>n-t&&(t=n-3),e<t&&(e=wo(o,e),o.i.currentTime=e)}})).Ca(.25)}function bo(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function wo(e,t){var n=Math.max(e.F,e.l.rebufferingGoal),i=e.l.safeSeekOffset,r=e.g.Bb(),s=e.g.Pa(),o=e.g.getDuration();3>s-r&&(r=s-3);var a=e.g.cc(n),l=e.g.cc(i);return n=e.g.cc(n+i),t>=o?bo(e,t):t>s?s:t<r?Ds(e.i.buffered,l)?l:n:t>=a||Ds(e.i.buffered,t)?t:n}function Eo(e,t){var n=e.g.Bb();return t<n||t>(n=e.g.Pa())?n:t}function _o(e){this.K=e,this.g=null,this.h=0,this.i=!1}function xo(e,t,n){return new _o([new eo(e,e+t,(function(){return n}),0,null,null,e,e,e+t)])}function So(e,t,n){this.i=e,this.h=t,this.g=n}function To(){_o.call(this,[]),this.j=[]}function ko(e){var t=this;this.g=e,this.j=!1,this.i=this.g.Ic(),this.h=new pt((function(){t.g.qe(.25*t.i)}))}function Co(e){e.h.stop();var t=e.j?0:e.i;if(0<=t)try{return void(e.g.Ic()!=t&&e.g.Ud(t))}catch(e){}e.h.Ca(.25),0!=e.g.Ic()&&e.g.Ud(0)}function Po(e){var t=this;this.h=e,this.g=new Set,this.i=new pt((function(){Io(t,!1)})).Ca(.25)}function Io(e,t){for(var n=c(e.g),i=n.next();!i.done;i=n.next())i.value.j(e.h.currentTime,t)}function Lo(e){di.call(this),this.g=new Map,this.h=e}function Ao(e){di.call(this);var t=this;this.g=new Set,this.i=e,this.h=new pt((function(){for(var e=t.i(),n=c(t.g),i=n.next();!i.done;i=n.next())(i=i.value).endTime<e.start&&(t.g.delete(i),i=new ui("regionremove",new Map([["region",i]])),t.dispatchEvent(i))})).Ca(2)}function Mo(e){di.call(this);var t=this;this.i=e,this.g=new Map,this.l=[{sb:null,rb:Do,kb:function(e,n){return Oo(t,"enter",e,n)}},{sb:No,rb:Do,kb:function(e,n){return Oo(t,"enter",e,n)}},{sb:Ro,rb:Do,kb:function(e,n){return Oo(t,"enter",e,n)}},{sb:Do,rb:No,kb:function(e,n){return Oo(t,"exit",e,n)}},{sb:Do,rb:Ro,kb:function(e,n){return Oo(t,"exit",e,n)}},{sb:No,rb:Ro,kb:function(e,n){return Oo(t,"skip",e,n)}},{sb:Ro,rb:No,kb:function(e,n){return Oo(t,"skip",e,n)}}],this.h=new Pi,this.h.A(this.i,"regionremove",(function(e){t.g.delete(e.region)}))}function Oo(e,t,n,i){t=new ui(t,new Map([["region",n],["seeking",i]])),e.dispatchEvent(t)}co.prototype.release=function(){this.h&&(this.h.release(),this.h=null),null!=this.i&&(this.i.release(),this.i=null),this.l=function(){},this.g=null},mo.prototype.release=function(){this.g&&(this.g.stop(),this.g=null),this.h=null},vo.prototype.release=function(){this.i&&(this.i.release(),this.i=null),this.g=null},vo.prototype.o=function(e){this.h=this.j?this.h:e},vo.prototype.m=function(){return(this.j?this.g.currentTime:this.h)||0},vo.prototype.D=function(){},yo.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.s&&(this.s.stop(),this.s=null),this.i=this.h=this.g=this.l=null,this.C=function(){}},yo.prototype.o=function(e){ho(this.h,e)},yo.prototype.m=function(){var e=uo(this.h);return 0<this.i.readyState&&!this.i.paused?Eo(this,e):e},yo.prototype.D=function(){this.j.Id()},(i=_o.prototype).destroy=function(){return Le("shaka.media.SegmentIndex","Please use release() instead of destroy()."),this.release(),Promise.resolve()},i.release=function(){this.i||(this.K=[],this.g&&this.g.stop(),this.g=null)},i.Bf=function(){this.i=!0},i.find=function(e){for(var t=this.K.length-1,n=t;0<=n;--n){var i=this.K[n],r=n<t?this.K[n+1].startTime:i.endTime;if(e>=i.startTime&&e<r)return n+this.h}return this.K.length&&e<this.K[0].startTime?this.h:null},i.get=function(e){return 0==this.K.length||0>(e-=this.h)||e>=this.K.length?null:this.K[e]},i.offset=function(e){if(!this.i)for(var t=c(this.K),n=t.next();!n.done;n=t.next())(n=n.value).startTime+=e,n.endTime+=e,n.timestampOffset+=e},i.Db=function(e){!this.i&&e.length&&(this.K=this.K.filter((function(t){return t.startTime<e[0].startTime})),this.K.push.apply(this.K,u(e)))},i.Eb=function(e,t){var n=this;e=e.filter((function(e){return e.endTime>t&&(0==n.K.length||e.endTime>n.K[0].startTime)})),this.Db(e),this.cb(t)},i.cb=function(e){if(!this.i){var t=this.K.length;this.K=this.K.filter((function(t){return t.endTime>e})),this.h+=t-this.K.length}},i.Xa=function(e,t,n){if(n=void 0!==n&&n,!this.i){for(;this.K.length&&this.K[this.K.length-1].startTime>=t;)this.K.pop();for(;this.K.length&&this.K[0].endTime<=e;)this.K.shift(),n||this.h++;0!=this.K.length&&(e=this.K[this.K.length-1],this.K[this.K.length-1]=new eo(e.startTime,t,e.j,e.pa,e.ga,e.g,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.h,e.tilesLayout,e.i))}},i.Tc=function(e,t){var n=this;this.i||(this.g&&this.g.stop(),this.g=new pt((function(){var e=t();e?n.K.push.apply(n.K,u(e)):(n.g.stop(),n.g=null)})),this.g.Ca(e))},_o.prototype[Symbol.iterator]=function(){return this.fb(0)},_o.prototype.fb=function(e){var t=this.find(e);if(null==t)return null;t--;var n=this.get(t+1),i=-1;if(n&&0<n.h.length)for(var r=n.h.length-1;0<=r;--r){var s=n.h[r];if(e>=s.startTime&&e<s.endTime){t++,i=r-1;break}}return new So(this,t,i)},$("shaka.media.SegmentIndex",_o),_o.forSingleSegment=xo,_o.prototype.getIteratorForTime=_o.prototype.fb,_o.prototype.updateEvery=_o.prototype.Tc,_o.prototype.fit=_o.prototype.Xa,_o.prototype.evict=_o.prototype.cb,_o.prototype.mergeAndEvict=_o.prototype.Eb,_o.prototype.merge=_o.prototype.Db,_o.prototype.offset=_o.prototype.offset,_o.prototype.get=_o.prototype.get,_o.prototype.find=_o.prototype.find,_o.prototype.markImmutable=_o.prototype.Bf,_o.prototype.release=_o.prototype.release,_o.prototype.destroy=_o.prototype.destroy,So.prototype.seek=function(e){return Le("shaka.media.SegmentIterator","Please use SegmentIndex.getIteratorForTime instead of seek()."),(e=this.i.fb(e))?(this.h=e.h,this.g=e.g):(this.h=Number.MAX_VALUE,this.g=0),this.next().value},So.prototype.current=function(){var e=this.i.get(this.h);return e&&0<e.h.length&&e.sa().length&&this.g>=e.h.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&0<e.h.length?e.h[this.g]:e},So.prototype.next=function(){var e=this.i.get(this.h);return e&&0<e.h.length?(this.g++,e.sa().length&&this.g==e.h.length&&(this.h++,this.g=0)):(this.h++,this.g=0),{value:e=this.current(),done:!e}},$("shaka.media.SegmentIterator",So),So.prototype.next=So.prototype.next,So.prototype.current=So.prototype.current,So.prototype.seek=So.prototype.seek,g(To,_o),(i=To.prototype).clone=function(){var e=new To;return e.j=this.j.slice(),e},i.release=function(){for(var e=c(this.j),t=e.next();!t.done;t=e.next())t.value.release();this.j=[]},i.find=function(e){for(var t=0,n=c(this.j),i=n.next();!i.done;i=n.next()){var r=(i=i.value).find(e);if(null!=r)return r+t;t+=i.h+i.K.length}return null},i.get=function(e){for(var t=0,n=c(this.j),i=n.next();!i.done;i=n.next()){var r=(i=i.value).get(e-t);if(r)return r;t+=i.h+i.K.length}return null},i.offset=function(){},i.Db=function(){},i.cb=function(){},i.Eb=function(){},i.Xa=function(){},i.Tc=function(){},$("shaka.media.MetaSegmentIndex",To),To.prototype.updateEvery=To.prototype.Tc,To.prototype.fit=To.prototype.Xa,To.prototype.mergeAndEvict=To.prototype.Eb,To.prototype.evict=To.prototype.cb,To.prototype.merge=To.prototype.Db,To.prototype.offset=To.prototype.offset,To.prototype.get=To.prototype.get,To.prototype.find=To.prototype.find,To.prototype.release=To.prototype.release,ko.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null},ko.prototype.set=function(e){this.i=e,Co(this)},ko.prototype.Ec=function(){return this.g.Ec()},Po.prototype.release=function(){this.i.stop();for(var e=c(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()},g(Lo,di),Lo.prototype.release=function(){this.g.clear(),di.prototype.release.call(this)},Lo.prototype.j=function(e){for(var t=c(this.g.values()),n=t.next();!n.done;n=t.next()){e:{for(var i=(n=n.value).ic,r=i.length-1;0<=r;r--){var s=i[r];if(s.position<=e){i=s.zd;break e}}i=null}if((r=i)&&(r=!((r=n.ce)===i||r&&i&&r.bandwidth==i.bandwidth&&r.audioSamplingRate==i.audioSamplingRate&&r.codecs==i.codecs&&r.contentType==i.contentType&&r.frameRate==i.frameRate&&r.height==i.height&&r.mimeType==i.mimeType&&r.channelsCount==i.channelsCount&&r.pixelAspectRatio==i.pixelAspectRatio&&r.width==i.width)),r)e:{if(r=e,s=i.contentType,(s=this.h()[s])&&0<s.length){var o=s[s.length-1].end;if(r>=s[0].start&&r<o){r=!0;break e}}r=!1}r&&(n.ce=i,JSON.stringify(i),n=new ui("qualitychange",new Map([["quality",i],["position",e]])),this.dispatchEvent(n))}},g(Ao,di),Ao.prototype.release=function(){this.g.clear(),this.h.stop(),di.prototype.release.call(this)},g(Mo,di),Mo.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,di.prototype.release.call(this)},Mo.prototype.j=function(e,t){for(var n=c(this.i.g),i=n.next();!i.done;i=n.next()){i=i.value;var r=this.g.get(i),s=e<i.startTime?No:e>i.endTime?Ro:Do;this.g.set(i,s);for(var o=c(this.l),a=o.next();!a.done;a=o.next())(a=a.value).sb==r&&a.rb==s&&a.kb(i,t)}};var No=1,Do=2,Ro=3;function jo(e,t,n,i,r){return e=bi(e,i,r),0==t&&null==n||(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function Bo(e,t){var n=this;this.g=t,this.m=e,this.h=null,this.u=1,this.o=this.l=null,this.i=new Map,this.C=!1,this.D=null,this.s=!1,this.j=new ki((function(){return function(e){var t,n,i,r;return M((function(s){if(1==s.g){for(t=[],n=c(e.i.values()),i=n.next();!i.done;i=n.next())Jo(r=i.value),t.push(Yo(r));return w(s,Promise.all(t),2)}e.i.clear(),e.g=null,e.m=null,e.h=null,E(s)}))}(n)}))}function Uo(e,t){var n=e.i.get("video");if(n){var i=n.stream;if(i)if(t){var r=i.trickModeVideo;r&&!n.ob&&(Ho(e,r,!1,0,!1),n.ob=i)}else(i=n.ob)&&(n.ob=null,Ho(e,i,!0,0,!1))}}function $o(e,t,n,i,r){n=void 0!==n&&n,i=void 0===i?0:i,r=void 0!==r&&r,e.l=t,e.C&&(t.video&&Ho(e,t.video,n,i,r),t.audio&&Ho(e,t.audio,n,i,r))}function Fo(e,t){e.o=t,e.C&&Ho(e,t,!0,0,!1)}function Ho(e,t,n,i,r){var s=e.i.get(t.type);s||t.type!=at?s&&(s.ob&&(t.trickModeVideo?(s.ob=t,t=t.trickModeVideo):s.ob=null),s.stream!=t||r)&&(t.type==at&&Us(e.g.P,zt(t.mimeType,t.codecs)),s.stream.closeSegmentIndex&&s.stream.closeSegmentIndex(),s.stream=t,s.ba=null,n&&(s.Yb?s.Wc=!0:s.Ha?(s.qb=!0,s.yc=i,s.Wc=!0):(Jo(s),Wo(e,s,!0,i).catch((function(t){e.g&&e.g.onError(t)})))),function(e,t){var n,i;return M((function(r){if(1==r.g)return t.ua?(n=t.stream,i=t.ua,n.segmentIndex?r.B(2):w(r,n.createSegmentIndex(),2)):r.return();if(t.ua!=i||t.stream!=n)return r.return();var s=e.g.Hc(),o=Hs(e.g.P,t.type),a=t.stream.segmentIndex.find(t.Aa?t.Aa.endTime:s),l=null==a?null:t.stream.segmentIndex.get(a);a=l&&l.ga?l.ga-l.pa:null,l&&!a&&(a=(l.endTime-l.getStartTime())*(t.stream.bandwidth||0)/8),a?((l=l.g)&&(a+=(l.ga?l.ga-l.pa:null)||0),s=8*a/(l=e.g.getBandwidthEstimate())<(o||0)-s-Math.max(e.m.minBufferTime||0,e.h.rebufferingGoal)||t.ua.h.g>a):s=!1,s&&t.ua.abort(),E(r)}))}(e,s).catch((function(t){e.g&&e.g.onError(t)}))):function(e,t){var n,i,r,s;M((function(o){switch(o.g){case 1:return n=lt,_(o,2),w(o,zs(e.g.P,n.Z),4);case 4:S(o,3);break;case 2:i=T(o),e.g&&e.g.onError(i);case 3:r=zt(t.mimeType,t.codecs),Us(e.g.P,r),(e.g.P.l.isTextVisible()||e.h.alwaysStreamText)&&(s=Vo(t),e.i.set(n.Z,s),Xo(e,s,0)),E(o)}}))}(e,t)}function qo(e,t){t.Yb||t.qb||(t.Ha?(t.qb=!0,t.yc=0):null==Fs(e.g.P,t.type)?null==t.Ka&&Xo(e,t,0):(Jo(t),Wo(e,t,!1,0).catch((function(t){e.g&&e.g.onError(t)}))))}function Vo(e){return{stream:e,type:e.type,ba:null,Aa:null,Lc:null,wd:null,vd:null,ud:null,ob:null,endOfStream:!1,Ha:!1,Ka:null,qb:!1,yc:0,Wc:!1,Yb:!1,Md:!1,ec:!1,ua:null}}function zo(e,t,n,i,r,s){var o;return M((function(a){return 1==a.g?(o=i.closedCaptions&&0<i.closedCaptions.size,(null!=i.emsgSchemeIdUris&&0<i.emsgSchemeIdUris.length||e.h.dispatchAllEmsgBoxes)&&(new gr).R("emsg",(function(t){var n=i.emsgSchemeIdUris;if(0===t.version)var s=t.reader.jc(),o=t.reader.jc(),a=t.reader.M(),l=t.reader.M(),c=t.reader.M(),u=t.reader.M(),h=r.startTime+l/a;else a=t.reader.M(),l=(h=t.reader.Jb()/a+r.timestampOffset)-r.startTime,c=t.reader.M(),u=t.reader.M(),s=t.reader.jc(),o=t.reader.jc();t=t.reader.Za(t.reader.O.byteLength-t.reader.X()),(n&&n.includes(s)||e.h.dispatchAllEmsgBoxes)&&("urn:mpeg:dash:event:2012"==s?e.g.Gf():(n=(new Map).set("detail",{startTime:h,endTime:h+c/a,schemeIdUri:s,value:o,timescale:a,presentationTimeDelta:l,eventDuration:c,id:u,messageData:t}),n=new ui(jl,n),e.g.onEvent(n)))})).parse(s),w(a,function(e,t,n){var i,r,s;return M((function(o){if(1==o.g)return i=Math.max(e.h.bufferBehind,e.m.presentationTimeline.g),null==(r=Fs(e.g.P,t.type))||.01>=(s=n-r-i)?o.return():w(o,e.g.P.remove(t.type,r,r+s),2);Ci(e.j),E(o)}))}(e,t,n),2)):3!=a.g?(Ci(e.j),w(a,Vs(e.g.P,t.type,s,r.startTime,r.endTime,o),3)):(Ci(e.j),void E(a))}))}function Go(e){return e&&e.type==at&&("application/cea-608"==e.stream.mimeType||"application/cea-708"==e.stream.mimeType)}function Ko(e,t,n,i){var r,s,o,a,l;return M((function(c){return 1==c.g?(r=xi,s=jo(n.sa(),n.pa,n.ga,e.h.retryParameters,i),o=t.stream,e.g.modifySegmentRequest(s,{type:o.type,init:n instanceof Zs,duration:n.endTime-n.startTime,mimeType:o.mimeType,codecs:o.codecs,bandwidth:o.bandwidth}),a=e.g.mb.request(r,s),t.ua=a,w(c,a.promise,2)):(l=c.h,t.ua=null,c.return(l.data))}))}function Wo(e,t,n,i){var r,s;return M((function(o){return 1==o.g?(t.qb=!1,t.Wc=!1,t.yc=0,t.Yb=!0,t.Aa=null,t.Lc=null,t.ba=null,i?(r=e.g.Hc(),s=e.g.P.getDuration(),w(o,e.g.P.remove(t.type,r+i,s),3)):w(o,zs(e.g.P,t.type),4)):3!=o.g?(Ci(e.j),n?w(o,e.g.P.flush(t.type),3):o.B(3)):(Ci(e.j),t.Yb=!1,t.endOfStream=!1,Xo(e,t,0),void E(o))}))}function Xo(t,n,i){var r=n.type;(r!=at||t.i.has(r))&&(n.Ka=new dt((function(){var i;return M((function(r){return 1==r.g?(_(r,2),w(r,function(t,n){var i,r,s,o,a;return M((function(l){switch(l.g){case 1:if(Ci(t.j),n.Ha||null==n.Ka||n.Yb)return l.return();if(n.Ka=null,!n.qb){l.B(2);break}return w(l,Wo(t,n,n.Wc,n.yc),3);case 3:return l.return();case 2:if(n.stream.segmentIndex){l.B(4);break}return i=n.stream,w(l,n.stream.createSegmentIndex(),5);case 5:if(i!=n.stream)return i.closeSegmentIndex&&i.closeSegmentIndex(),null==n.Ka&&Xo(t,n,0),l.return();case 4:_(l,6),r=function(t,n){if(Go(n))return function(e,t){var n=Hs(e,"video")||0;Qt(e.g,t,n)}(t.g.P,n.stream.originalId||""),null;n.type==at&&function(e){e.g&&Qt(e.g,"",0)}(t.g.P);var i=t.g.Hc(),r=n.Aa?n.Aa.endTime:i,s=function(e,t,n){return t==at?null==(e=e.g).h||e.h<n?0:e.h-Math.max(n,e.g):Rs(e=qs(e,t),n)}(t.g.P,n.type,i),o=Math.max(t.m.minBufferTime||0,t.h.rebufferingGoal,t.h.bufferingGoal)*t.u;if(1e-6>t.m.presentationTimeline.getDuration()-r)return n.endOfStream=!0,"video"==n.type&&(i=t.i.get(at))&&Go(i)&&(i.endOfStream=!0),null;if(n.endOfStream=!1,s>=o)return t.h.updateIntervalSeconds/2;if(s=function(e,t,n,i){if(t.ba)return t.ba.current();if(t.Aa||i)return t.ba=t.stream.segmentIndex.fb(t.Aa?t.Aa.endTime:i),t.ba&&t.ba.next().value;e=e.h.inaccurateManifestTolerance,i=Math.max(n-e,0);var r=null;return e&&(t.ba=t.stream.segmentIndex.fb(i),r=t.ba&&t.ba.next().value),r||(t.ba=t.stream.segmentIndex.fb(n),r=t.ba&&t.ba.next().value),r}(t,n,i,s=Hs(t.g.P,n.type)),!s)return t.h.updateIntervalSeconds;o=1/0;for(var a=Array.from(t.i.values()),l=(a=c(a)).next();!l.done;l=a.next())Go(l=l.value)||l.ba&&!l.ba.current()||(o=Math.min(o,l.Aa?l.Aa.endTime:i));return r>=o+t.m.presentationTimeline.g?t.h.updateIntervalSeconds:(function(t,n,i,r){var s,o,a,l,c,u,h,d,p,f,m;return M((function(g){switch(g.g){case 1:return s=lt,o=n.stream,a=n.ba,n.Ha=!0,_(g,2),w(g,function(e,t,n){var i,r,s,o,a,l,c;return M((function(u){return i=[],r=Math.max(0,n.appendWindowStart-.1),s=n.appendWindowEnd+.01,(o=n.timestampOffset)==t.wd&&r==t.vd&&s==t.ud||(a=function(){var n;return M((function(i){if(1==i.g)return _(i,2),t.vd=r,t.ud=s,t.wd=o,w(i,function(e,t,n,i,r){return M((function(s){return t==lt.Z?(e.g.u=n,function(e,t,n){e.j=t,e.m=n}(e.g,i,r),s.return()):w(s,Promise.all([Ks(e,t,(function(){var n=e.h[t].appendWindowStart,i=e.h[t].appendWindowEnd;e.h[t].abort(),e.h[t].appendWindowStart=n,e.h[t].appendWindowEnd=i,Gs(e,t)})),Ks(e,t,(function(){var i=n;0>i&&(i+=.001),e.h[t].timestampOffset=i,Gs(e,t)})),Ks(e,t,(function(){e.h[t].appendWindowStart=0,e.h[t].appendWindowEnd=r,e.h[t].appendWindowStart=i,Gs(e,t)}))]),0)}))}(e.g.P,t.type,o,r,s),4);if(2!=i.g)return S(i,0);throw n=T(i),t.vd=null,t.ud=null,t.wd=null,n}))},i.push(a())),!function(e,t){return e&&t?e.dc()==t.dc()&&e.$b()==t.$b()&&te(e.sa(),t.sa()):e==t}(n.g,t.Lc)&&(t.Lc=n.g)&&(l=Ko(e,t,n.g),c=function(){var n,i,r;return M((function(s){switch(s.g){case 1:return _(s,2),w(s,l,4);case 4:return n=s.h,Ci(e.j),i=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,w(s,Vs(e.g.P,t.type,n,null,null,i),5);case 5:S(s,0);break;case 2:throw r=T(s),t.Lc=null,r}}))},e.g.Ff(n.startTime,n.g),i.push(c())),w(u,Promise.all(i),0)}))}(t,n,r),4);case 4:return Ci(t.j),t.s?g.return():(l="video/mp4"==o.mimeType||"audio/mp4"==o.mimeType,c=e.ReadableStream,t.h.lowLatencyMode&&c&&l?(h=new Uint8Array(0),d=function(e){var s,a,l;return M((function(c){return Ci(t.j),t.s?c.return():(h=function(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}(h,e),s=!1,a=0,(new gr).box("mdat",(function(e){a=e.size+e.start,s=!0})).parse(h,!1,!0),s?(l=h.subarray(0,a),h=h.subarray(a),w(c,zo(t,n,i,o,r,l),0)):c.B(0))}))},w(g,Ko(t,n,r,d),6)):w(g,Ko(t,n,r),7));case 7:return u=g.h,Ci(t.j),t.s?g.return():n.qb?(n.Ha=!1,Xo(t,n,0),g.return()):w(g,zo(t,n,i,o,r,u),6);case 6:if(Ci(t.j),t.s)return g.return();n.Aa=r,a.next(),n.Ha=!1,n.Md=!1,p=t.g.P.Ya(),f=p[n.type],JSON.stringify(f),n.qb||t.g.Id(),Xo(t,n,0),S(g,0);break;case 2:if(m=T(g),Ci(t.j,m),t.s)return g.return();if(n.Ha=!1,7001==m.code)n.Ha=!1,n.Ka=null,Xo(t,n,0),g.B(0);else if(n.type==s.Z&&t.h.ignoreTextStreamFailures)t.i.delete(s.Z),g.B(0);else if(3017==m.code)(function(e,t,n){if(!Array.from(e.i.values()).some((function(e){return e!=t&&e.Md}))){var i=Math.round(100*e.u);if(20<i)e.u-=.2;else{if(!(4<i))return t.ec=!0,e.s=!0,void e.g.onError(n);e.u-=.04}t.Md=!0}Xo(e,t,4)})(t,n,m),g.B(0);else{if(1001!=m.code||!m.data||404!=m.data[1])return n.ec=!0,m.severity=2,w(g,Qo(t,m),0);n.Ha=!1,n.Ka=null,Xo(t,n,1),g.B(0)}}}))}(t,n,i,s).catch((function(){})),null)}(t,n),null!=r&&(Xo(t,n,r),n.ec=!1),S(l,7);break;case 6:return s=T(l),w(l,Qo(t,s),8);case 8:return l.return();case 7:if(o=Array.from(t.i.values()),!t.C||!o.every((function(e){return e.endOfStream}))){l.B(0);break}return w(l,t.g.P.endOfStream(),10);case 10:Ci(t.j),0!=(a=t.g.P.getDuration())&&a<t.m.presentationTimeline.getDuration()&&t.m.presentationTimeline.Ia(a),E(l)}}))}(t,n),4)):2!=r.g?S(r,0):(i=T(r),t.g&&t.g.onError(i),void E(r))}))})).S(i))}function Jo(e){null!=e.Ka&&(e.Ka.stop(),e.Ka=null)}function Yo(e){return M((function(t){return e.ua?w(t,e.ua.abort(),0):t.B(0)}))}function Qo(e,t){return M((function(n){if(1==n.g)return w(n,ii(e.D),2);Ci(e.j),e.g.onError(t),t.handled||e.h.failureCallback(t),E(n)}))}function Zo(e,t){var n={J:null,mimeType:null,startTime:null,Wd:NaN,uri:null},i=this;this.j=t,this.i=e,this.l=n,this.o=null,this.m=[],this.h=this.g=null,this.u=Promise.resolve().then((function(){return function(e){return M((function(t){if(e.s.g)t=t.B(0);else{if(0==e.m.length||e.g&&!e.g.jb)var n=!1;else{e.g&&(e.g.Ga.nb(),e.g=null);var i=(n=e.m.shift()).create(e.l);i?(n.Ga.Gb(),e.g={node:i.node,payload:i.payload,jb:i.jb,Ga:n.Ga}):n.Ga.Pc(),n=!0}n?n=Promise.resolve():e.g?n=function(e){var t,n;return M((function(i){switch(i.g){case 1:return e.i=e.j.jf(e.i,e.l,e.g.node,e.g.payload),_(i,2),e.h=e.j.Ve(e.i,e.l,e.g.payload),w(i,e.h.promise,4);case 4:e.h=null,e.i==e.g.node&&(e.g.Ga.Nc(),e.g=null),S(i,0);break;case 2:return 7001==(t=T(i)).code?e.g.Ga.nb():e.g.Ga.onError(t),e.g=null,e.h=null,n=e,w(i,e.j.handleError(e.l,t),5);case 5:n.i=i.h,E(i)}}))}(e):(e.j.Ef(e.i),e.o=new ut,n=e.o),t=w(t,n,1)}return t}))}(i)})),this.s=new ki((function(){return function(e){var t,n;return M((function(i){if(1==i.g)return e.h&&e.h.abort(),ta(e),w(i,e.u,2);for(e.g&&e.g.Ga.nb(),t=c(e.m),n=t.next();!n.done;n=t.next())n.value.Ga.nb();e.g=null,e.m=[],e.j=null,E(i)}))}(i)}))}function ea(e,t){var n={Gb:function(){},Nc:function(){},nb:function(){},onError:function(){},Pc:function(){},Mg:function(){}};return e.m.push({create:t,Ga:n}),e.h&&e.h.abort(),ta(e),n}function ta(e){e.o&&(e.o.resolve(),e.o=null)}function na(e){this.g=null;for(var t=c(Array.from(e.textTracks)),n=t.next();!n.done;n=t.next())(n=n.value).mode="disabled","Shaka Player TextTrack"==n.label&&(this.g=n);this.g||(this.g=e.addTextTrack("subtitles","Shaka Player TextTrack")),this.g.mode="hidden"}function ia(e){if(e.startTime>=e.endTime)return null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign,t.positionAlign=e.positionAlign,e.size&&(t.size=e.size);try{t.align=e.textAlign}catch(e){}return"center"==e.textAlign&&"center"!=t.align&&(t.align="middle"),"vertical-lr"==e.writingMode?t.vertical="lr":"vertical-rl"==e.writingMode&&(t.vertical="rl"),1==e.lineInterpretation&&(t.snapToLines=!1),null!=e.line&&(t.line=e.line),null!=e.position&&(t.position=e.position),t}function ra(e,t){var n=e.mode;e.mode="showing"==n?"showing":"hidden";for(var i=c(Array.from(e.cues)),r=i.next();!r.done;r=i.next())(r=r.value)&&t(r)&&e.removeCue(r);e.mode=n}function sa(){}function oa(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function aa(t,n){var i=this;this.j=!1,this.i=[],this.C=t,this.m=n,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.m.appendChild(this.g),this.u=new pt((function(){ca(i)})).Ca(.25),this.h=new Map,this.s=new Pi,this.s.A(document,"fullscreenchange",(function(){ca(i,!0)})),this.l=null,"ResizeObserver"in e&&(this.l=new ResizeObserver((function(){ca(i,!0)})),this.l.observe(this.g)),this.o=new Map}function la(e,t,n,i,r){for(var s=!1,o=[],a=[],l=(t=c(t)).next();!l.done;l=t.next()){l=l.value,r.push(l);var u=e.h.get(l),h=l.startTime<=i&&l.endTime>i,d=u?u.Fe:null;u&&(o.push(u.nd),u.kc&&o.push(u.kc),h||(s=!0,e.h.delete(l),u=null)),h&&(a.push(l),u||(ua(e,l,r),d=(u=e.h.get(l)).Fe,s=!0)),0<l.nestedCues.length&&d&&la(e,l.nestedCues,d,i,r),r.pop()}if(s){for(r=(i=c(o)).next();!r.done;r=i.next())(r=r.value).parentElement&&r.parentElement.removeChild(r);for(a.sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime-t.endTime})),l=(a=c(a)).next();!l.done;l=a.next())(i=e.h.get(l.value)).kc?(n.appendChild(i.kc),i.kc.appendChild(i.nd)):n.appendChild(i.nd)}}function ca(e,t){if(e.g){var n=e.C.currentTime;if(!e.j||void 0!==t&&t){for(var i=c(e.o.values()),r=i.next();!r.done;r=i.next())oa(r.value);oa(e.g),e.h.clear(),e.o.clear()}if(e.j){i=new Map;for(var s=(r=c(e.h.keys())).next();!s.done;s=r.next())s=s.value,i.set(s,e.h.get(s));la(e,e.i,e.g,n,[])}}}function ua(e,t,n){var i=1<n.length,r=i?"span":"div";(t.lineBreak||t.spacer)&&(t.spacer&&Le("shaka.extern.Cue","Please use lineBreak instead of spacer."),r="br"),i=!i&&0<t.nestedCues.length;var s=document.createElement(r);if("br"!=r&&function(e,t,n,i,r){var s=t.style,o=0==n.nestedCues.length,a=1<i.length;s.whiteSpace="pre-wrap";var l=n.payload.replace(/\s+$/g,(function(e){return" ".repeat(e.length)}));if(s.webkitTextStrokeColor=n.textStrokeColor,s.webkitTextStrokeWidth=n.textStrokeWidth,s.color=n.color,s.direction=n.direction,s.opacity=n.opacity,s.paddingLeft=ha(n.linePadding,n,e.m),s.paddingRight=ha(n.linePadding,n,e.m),n.backgroundImage)s.backgroundImage="url('"+n.backgroundImage+"')",s.backgroundRepeat="no-repeat",s.backgroundSize="contain",s.backgroundPosition="center",s.width="100%",s.height="100%";else{if(n.nestedCues.length)var c=t;else c=document.createElement("span"),t.appendChild(c);n.border&&(c.style.border=n.border),r||((t=function(e,t){for(var n=e.length-1;0<=n;n--){var i=e[n].backgroundColor;if(i||0===i)return i}return null}(i))?c.style.backgroundColor=t:l&&(c.style.backgroundColor="rgba(0, 0, 0, 0.8)")),l&&(c.textContent=l)}a&&!i[i.length-1].isContainer?s.display="inline":(s.display="flex",s.flexDirection="column",s.alignItems="center",s.justifyContent="before"==n.displayAlign?"flex-start":"center"==n.displayAlign?"center":"flex-end"),o||(s.margin="0"),s.fontFamily=n.fontFamily,s.fontWeight=n.fontWeight.toString(),s.fontStyle=n.fontStyle,s.letterSpacing=n.letterSpacing,s.fontSize=ha(n.fontSize,n,e.m),n.line&&1==n.lineInterpretation&&(s.position="absolute",s.left="0",s.top="0",n.writingMode==ue?(s.width="100%",n.lineAlign==de?s.top=n.line+"%":"end"==n.lineAlign&&(s.bottom=n.line+"%")):"vertical-lr"==n.writingMode?(s.height="100%",n.lineAlign==de?s.left=n.line+"%":"end"==n.lineAlign&&(s.right=n.line+"%")):(s.height="100%",n.lineAlign==de?s.right=n.line+"%":"end"==n.lineAlign&&(s.left=n.line+"%"))),s.lineHeight=n.lineHeight,n.position&&(n.writingMode==ue?s.paddingLeft=n.position:s.paddingTop=n.position),"line-left"==n.positionAlign?s.cssFloat="left":"line-right"==n.positionAlign&&(s.cssFloat="right"),s.textAlign=n.textAlign,s.textDecoration=n.textDecoration.join(" "),s.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&s.writingMode==n.writingMode||(s.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==ue?s.width=n.size+"%":s.height=n.size+"%")}(e,s,t,n,i),n=null,t.region&&t.region.id)if(n=t.region,e.o.has(n.id))n=e.o.get(n.id);else{r=document.createElement("span");var o=n.heightUnits==we?"%":"px",a=n.widthUnits==we?"%":"px",l=n.viewportAnchorUnits==we?"%":"px";r.id="shaka-text-region---"+n.id,r.classList.add("shaka-text-region"),r.style.height=n.height+o,r.style.width=n.width+a,r.style.position="absolute",r.style.top=n.viewportAnchorY+l,r.style.left=n.viewportAnchorX+l,r.style.display="flex",r.style.flexDirection="column",r.style.alignItems="center",r.style.justifyContent="before"==t.displayAlign?"flex-start":"center"==t.displayAlign?"center":"flex-end",e.o.set(n.id,r),n=r}r=s,i&&((r=document.createElement("span")).classList.add("shaka-text-wrapper"),r.style.backgroundColor=t.backgroundColor,s.appendChild(r)),e.h.set(t,{nd:s,Fe:r,kc:n})}function ha(e,t,n){var i=(i=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(i[1]),unit:i[2]}:null;if(!i)return e;var r=i.value;switch(i.unit){case"%":return r/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*r/t.cellResolution.rows+"px";default:return e}}function da(e,t){this.h=e,this.g=t,this.j="",this.o=void 0,this.i=!1,this.m=!0,this.l=!1}function pa(e,t,n){try{if(e.g.enabled){var i={d:1e3*n.duration,st:e.h.T()?ka:Ta};i.ot=function(e){var t=e.type;return e.init?_a:"video"==t?e.codecs.includes(",")?Ea:wa:"audio"==t?ba:"text"==t?"application/mp4"===e.mimeType?Sa:xa:void 0}(n);var r=i.ot===wa||i.ot===ba||i.ot===Ea||i.ot===Sa;r&&(i.bl=function(e,t){var n=e.h.Ya()[t];if(!n.length)return NaN;var i=e.h.getCurrentTime();return(n=n.find((function(e){return e.start<=i&&e.end>=i})))?1e3*(n.end-i):NaN}(e,n.type)),n.bandwidth&&(i.br=n.bandwidth/1e3),r&&i.ot!==Sa&&(i.tb=function(e,t){var n=e.h.ib();if(!n.length)return NaN;for(var i=n[0],r=(n=c(n)).next();!r.done;r=n.next())"variant"===(r=r.value).type&&r.bandwidth>i.bandwidth&&(i=r);switch(t){case wa:return i.videoBandwidth||NaN;case ba:return i.audioBandwidth||NaN;default:return i.bandwidth}}(e,i.ot)/1e3),ga(e,t,i)}}catch(e){K("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",e)}}function fa(e,t){try{if(!e.g.enabled)return t;var n=ma(e);return n.ot=xa,n.su=!0,ya(t,va(n))}catch(e){return K("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",e),t}}function ma(t){return t.j||(t.j=t.g.sessionId||e.crypto.randomUUID()),{v:1,sf:t.o,sid:t.j,cid:t.g.contentId,mtp:t.h.getBandwidthEstimate()/1e3}}function ga(e,t,n){n=void 0===n?{}:n;var i=void 0===i?e.g.useHeaders:i;if(e.g.enabled){Object.assign(n,ma(e)),n.pr=e.h.Gc();var r=n.ot===wa||n.ot===Ea;if(e.l&&r&&(n.bs=!0,n.su=!0,e.l=!1),null==n.su&&(n.su=e.m),i)e=function(e){for(var t=Object.keys(e),n={},i=["Object","Request","Session","Status"],r=[{},{},{},{}],s={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},o=(t=c(t)).next();!o.done;o=t.next())r[null!=s[o=o.value]?s[o]:1][o]=e[o];for(e=0;e<r.length;e++)(s=va(r[e]))&&(n["CMCD-"+i[e]]=s);return n}(n),Object.keys(e).length&&Object.assign(t.headers,e);else{var s=va(n);s&&(t.uris=t.uris.map((function(e){return ya(e,s)})))}}}function va(e){function t(e){return 100*n(e/100)}function n(e){return Math.round(e)}for(var i,r=[],s={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(e){return encodeURIComponent(e)},rtp:t,tb:n},o=Object.keys(e||{}).sort(),a=(o=c(o)).next();!a.done;a=o.next()){var l=e[a=a.value];if(i=l,!(Number.isNaN(i)||null==i||""===i||!1===i||"v"===a&&1===l||"pr"==a&&1===l)){var u,h=s[a];h&&(l=h(l)),u="string"==(h=typeof l)&&"ot"!==a&&"sf"!==a&&"st"!==a?a+"="+JSON.stringify(l):"boolean"===h?a:"symbol"===h?a+"="+l.description:a+"="+l,r.push(u)}}return r.join(",")}function ya(e,t){if(!t||e.includes("offline:"))return e;var n=new qe(e);return n.g.set("CMCD",t),n.toString()}Bo.prototype.destroy=function(){return this.j.destroy()},Bo.prototype.configure=function(e){this.h=e,this.D=new ni({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0)},Bo.prototype.start=function(){var e=this;return M((function(t){if(1==t.g)return w(t,function(e){var t,n,i,r,s,o,a,l,u,h;return M((function(d){if(1==d.g){if(t=lt,!e.l)throw new Fe(2,5,5006);return n=new Map,i=new Set,e.l.audio&&(n.set(t.bb,e.l.audio),i.add(e.l.audio)),e.l.video&&(n.set(t.Na,e.l.video),i.add(e.l.video)),e.o&&(n.set(t.Z,e.o),i.add(e.o)),r=e.g.P,s=e.h.forceTransmuxTS,w(d,r.init(n,s),2)}Ci(e.j);var p=e.m.presentationTimeline.getDuration();for(1/0>p?e.g.P.Ia(p):e.g.P.Ia(Math.pow(2,32)),o=c(n.keys()),a=o.next();!a.done;a=o.next())l=a.value,u=n.get(l),e.i.has(l)||(h=Vo(u),e.i.set(l,h),Xo(e,h,0));E(d)}))}(e),2);Ci(e.j),e.C=!0,E(t)}))},Zo.prototype.destroy=function(){return this.s.destroy()},(i=na.prototype).remove=function(e,t){return!!this.g&&(ra(this.g,(function(n){return n.startTime<t&&n.endTime>e})),!0)},i.append=function(e){function t(e){var n=[],i=700<=e.fontWeight,r="italic"==e.fontStyle,s=e.textDecoration.includes("underline");return i&&n.push("b"),r&&n.push("i"),s&&n.push("u"),i=n.reduce((function(e,t){return e+"<"+t+">"}),""),n=n.reduceRight((function(e,t){return e+"</"+t+">"}),""),e.lineBreak||e.spacer?(e.spacer&&Le("shaka.extern.Cue","Please use lineBreak instead of spacer."),"\n"):e.nestedCues.length?e.nestedCues.map(t).join(""):i+e.payload+n}var n=function e(n,i){for(var r=c(n),s=r.next();!s.done;s=r.next())if((s=s.value).isContainer)e(s.nestedCues,i);else{var o=s.clone();o.nestedCues=[],o.payload=t(s),i.push(o)}return i}(e,[]),i=[];e=this.g.cues?Array.from(this.g.cues):[];for(var r={},s=(n=c(n)).next();!s.done;r={ub:r.ub},s=n.next())r.ub=s.value,e.some(function(e){return function(t){return t.startTime==e.ub.startTime&&t.endTime==e.ub.endTime&&t.text==e.ub.payload}}(r))||(s=ia(r.ub))&&i.push(s);for(e=i.slice().sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:"line"in VTTCue.prototype?i.indexOf(t)-i.indexOf(e):i.indexOf(e)-i.indexOf(t)})),r=(e=c(e)).next();!r.done;r=e.next())this.g.addCue(r.value)},i.destroy=function(){return this.g&&(ra(this.g,(function(){return!0})),this.g.mode="disabled"),this.g=null,Promise.resolve()},i.isTextVisible=function(){return"showing"==this.g.mode},i.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"},$("shaka.text.SimpleTextDisplayer",na),na.prototype.setTextVisibility=na.prototype.setTextVisibility,na.prototype.isTextVisible=na.prototype.isTextVisible,na.prototype.destroy=na.prototype.destroy,na.prototype.append=na.prototype.append,na.prototype.remove=na.prototype.remove,$("shaka.util.Dom",sa),sa.removeAllChildren=oa,(i=aa.prototype).append=function(e){for(var t=[].concat(u(this.i)),n={},i=(e=c(e)).next();!i.done;n={qc:n.qc},i=e.next())n.qc=i.value,t.some(function(e){return function(t){return ie(t,e.qc)}}(n))||this.i.push(n.qc);ca(this)},i.destroy=function(){this.m.removeChild(this.g),this.g=null,this.j=!1,this.i=[],this.u&&this.u.stop(),this.h.clear(),this.s&&(this.s.release(),this.s=null),this.l&&(this.l.disconnect(),this.l=null)},i.remove=function(e,t){if(!this.g)return!1;var n=this.i.length;return this.i=this.i.filter((function(n){return n.startTime<e||n.endTime>=t})),ca(this,n>this.i.length),!0},i.isTextVisible=function(){return this.j},i.setTextVisibility=function(e){this.j=e},$("shaka.text.UITextDisplayer",aa),aa.prototype.setTextVisibility=aa.prototype.setTextVisibility,aa.prototype.isTextVisible=aa.prototype.isTextVisible,aa.prototype.remove=aa.prototype.remove,aa.prototype.destroy=aa.prototype.destroy,aa.prototype.append=aa.prototype.append,$("shaka.text.WebVttGenerator",(function(){}));var ba="a",wa="v",Ea="av",_a="i",xa="c",Sa="tt",Ta="v",ka="l";function Ca(){}function Pa(e,t,n,i,r){var s,o=r in i,a=!0;for(s in t){var l=r+"."+s,c=o?i[r]:n[s];o||s in n?void 0===t[s]?void 0===c||o?delete e[s]:e[s]=pi(c):c.constructor==Object&&t[s]&&t[s].constructor==Object?(e[s]||(e[s]=pi(c)),l=Pa(e[s],t[s],c,i,l),a=a&&l):typeof t[s]!=typeof c||null==t[s]||"function"!=typeof t[s]&&t[s].constructor!=c.constructor?(z("Invalid config, wrong type for "+l),a=!1):("function"==typeof n[s]&&n[s].length!=t[s].length&&G("Unexpected number of arguments for "+l),e[s]=t[s]):(z("Invalid config, unrecognized key "+l),a=!1)}return a}function Ia(e,t){for(var n={},i=n,r=0,s=0;!(0>(r=e.indexOf(".",r)));)0!=r&&"\\"==e[r-1]||(i[s=e.substring(s,r).replace(/\\\./g,".")]={},i=i[s],s=r+1),r+=1;return i[e.substring(s).replace(/\\\./g,".")]=t,n}function La(e,t){return e&&t}function Aa(){}function Ma(){var e=1/0;navigator.connection&&navigator.connection.saveData&&(e=360);var t={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,initDataTransform:Wi,logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[]},n={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},manifestPreprocessor:function(e){return La([e],e)}},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,useFullSegmentsForStartTime:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E"}},i={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},failureCallback:function(e){return La([e],void 0)},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.1,smallGapLimit:.5,jumpLargeGaps:!1,durationBackoff:1,forceTransmuxTS:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1};(navigator.userAgent.match(/Edge\//)||vt()||bt())&&(i.gapDetectionThreshold=.5),(yt()||vt()||bt())&&(i.stallSkip=0);var r={trackSelectionCallback:function(e){return M((function(t){return t.return(e)}))},downloadSizeCallback:function(e){var t;return M((function(n){return 1==n.g?navigator.storage&&navigator.storage.estimate?w(n,navigator.storage.estimate(),3):n.return(!0):(t=n.h,n.return(t.usage+e<.95*t.quota))}))},progressCallback:function(e,t){return La([e,t],void 0)},usePersistentLicense:!0},s={drm:t,manifest:n,streaming:i,offline:r,abrFactory:function(){return new qn},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5}},preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",useHeaders:!1}};return r.trackSelectionCallback=function(e){return M((function(t){return t.return(function(e,t){var n=e.filter((function(e){return"variant"==e.type})),i=[],r=hn(t,n.map((function(e){return e.language})));r&&(i=n.filter((function(e){return an(e.language)==r}))),0==i.length&&(i=n.filter((function(e){return e.primary}))),0==i.length&&(n.map((function(e){return e.language})),i=n);var s=i.filter((function(e){return e.height&&480>=e.height}));if(s.length&&(s.sort((function(e,t){return t.height-e.height})),i=s.filter((function(e){return e.height==s[0].height}))),n=[],i.length){var o=Math.floor(i.length/2);i.sort((function(e,t){return e.bandwidth-t.bandwidth})),n.push(i[o])}for(o=(i=c(e)).next();!o.done;o=i.next())(o=o.value).type!=at&&"image"!=o.type||n.push(o);return n}(e,s.preferredAudioLanguage))}))},s}function Oa(e,t,n){var i={".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:""}};return Pa(e,t,n||Ma(),i,"")}function Na(){this.g=null,this.h=[]}function Da(e,t){if(null==e.g)e.g={timestamp:Date.now()/1e3,state:t,duration:0};else{var n=Date.now()/1e3;e.g.duration=n-e.g.timestamp,e.g.state!=t&&(e.h.push(e.g),e.g={timestamp:n,state:t,duration:0})}}function Ra(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration);for(var i=c(e.h),r=i.next();!r.done;r=i.next())n+=(r=r.value).state==t?r.duration:0;return n}function ja(){this.i=this.h=null,this.g=[]}function Ba(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function Ua(){this.u=this.C=this.G=this.D=this.s=this.j=this.F=this.m=this.i=this.I=this.L=this.N=this.l=this.o=NaN,this.g=new Na,this.h=new ja}function $a(t,n){di.call(this);var i=this;this.l=sc,this.Ac=this.g=null,this.ja=!1,this.Dc=new Pi,this.Tb=new Pi,this.o=new Pi,this.rd=this.u=this.Sb=this.i=this.Jc=this.I=this.j=this.wa=this.W=this.Kc=this.L=this.Bc=this.G=this.wb=this.D=this.N=this.m=this.F=null,this.Gd=1e9,this.h=tl(this),this.Dd={width:1/0,height:1/0},this.s=null,this.La=new Yn(this.h.preferredAudioLanguage,this.h.preferredVariantRole,this.h.preferredAudioChannelCount),this.Ma=this.h.preferredTextLanguage,this.Wb=this.h.preferredTextRole,this.Ub=this.h.preferForcedSubs,this.Mb=[],this.Xb=null,n&&n(this),this.F=function(e){return new vi((function(t,n){e.u&&e.u.segmentDownloaded(t,n)}),(function(t,n,i){t=(new Map).set("headers",t).set("request",n).set("requestType",i),e.dispatchEvent(Fa(Dl,t))}),(function(t,n,i,r){t=(new Map).set("request",t).set("error",n).set("httpResponseCode",i).set("aborted",r),e.dispatchEvent(Fa(Nl,t))}))}(this),this.F.Sd(this.h.streaming.forceHTTPS),this.C=null,hc&&(this.C=je(hc)),this.Dc.A(e,"online",(function(){i.Nd()})),this.V={name:"detach"},this.ca={name:"attach"},this.fa={name:"unload"},this.Jd={name:"manifest-parser"},this.yd={name:"manifest"},this.vb={name:"media-source"},this.sd={name:"drm-engine"},this.da={name:"load"},this.Kd={name:"src-equals-drm-engine"},this.xb={name:"src-equals"};var r=new Map;r.set(this.ca,(function(e,t){return li(function(e,t,n){return null==t.J&&(t.J=n.J,e.Tb.A(t.J,"error",(function(){var t=bl(e);t&&vl(e,t)}))),e.g=t.J,Promise.resolve()}(i,e,t))})),r.set(this.V,(function(e){return e.J&&(i.Tb.Sa(),e.J=null),i.C&&i.C.release(),i.g=null,li(e=Promise.resolve())})),r.set(this.fa,(function(e){return li(Ha(i,e))})),r.set(this.vb,(function(e){return e=function(e,t){var n,i,r,s;return M((function(o){if(1==o.g)return n=new Os,i=e.h.textDisplayFactory,r=je(i),e.td=i,s=function(e,t,n,i){return new Bs(e,t,n,i)}(t.J,n,r,(function(t,n,i){for(var r=(t=c(t)).next();!r.done;r=t.next())if((r=r.value).data&&r.cueTime&&r.frames){for(var s=r.cueTime+n,o=i,a=c(r.frames),l=a.next();!l.done;l=a.next())qa(e,s,o,"ID3",l.value);e.C&&e.C.onHlsTimedMetadata(r,s)}})),w(o,s.D,2);e.N=s,E(o)}))}(i,e),li(e)})),r.set(this.Jd,(function(e,t){var n=function(e,t,n){var i,r,s,o;return M((function(a){if(1==a.g)return t.mimeType=n.mimeType,t.uri=n.uri,i=t.uri,r=e.F,e.Sb=i,s=e,w(a,lr(i,r,e.h.manifest.retryParameters,t.mimeType),2);s.Jc=a.h,e.I=je(e.Jc),o=pi(e.h.manifest),n.J&&"AUDIO"===n.J.nodeName&&(o.disableVideo=!0),e.I.configure(o),E(a)}))}(i,e,t);return li(n)})),r.set(this.yd,(function(e){return function(e,t){var n=t.uri,i=e.F;e.Kc=new Ao((function(){return e.lc()})),e.Kc.addEventListener("regionadd",(function(t){t=t.region,yl(e,Yl,t),e.C&&e.C.onDashTimedMetadata(t)})),e.wa=null,e.h.streaming.observeQualityChanges&&(e.wa=new Lo((function(){return e.Ya()})),e.wa.addEventListener("qualitychange",(function(t){var n=t.quality;t=t.position,n=(new Map).set("mediaQuality",{bandwidth:n.bandwidth,audioSamplingRate:n.audioSamplingRate,codecs:n.codecs,contentType:n.contentType,frameRate:n.frameRate,height:n.height,mimeType:n.mimeType,channelsCount:n.channelsCount,pixelAspectRatio:n.pixelAspectRatio,width:n.width}).set("position",t),e.dispatchEvent(Fa(ql,n))})));var r={networkingEngine:i,modifyManifestRequest:function(t,n){var i=e.W;try{i.g.enabled&&(i.o=n.format,ga(i,t,{ot:"m",su:!i.i}))}catch(e){K("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",e)}},modifySegmentRequest:function(t,n){pa(e.W,t,n)},filter:function(t){return nl(e,t)},makeTextStreamsForClosedCaptions:function(t){return function(e,t){for(var n=new Set,i=c(t.textStreams),r=i.next();!r.done;r=i.next())"application/cea-608"!=(r=r.value).mimeType&&"application/cea-708"!=r.mimeType||n.add(r.originalId);for(r=(i=c(t.variants)).next();!r.done;r=i.next())if((r=r.value.video)&&r.closedCaptions)for(var s=c(r.closedCaptions.keys()),o=s.next();!o.done;o=s.next())if(o=o.value,!n.has(o)){var a=o.startsWith("CC")?"application/cea-608":"application/cea-708",l=new To;a={id:e.Gd++,originalId:o,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:l,mimeType:a,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:r.closedCaptions.get(o),label:null,type:at,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:r.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},t.textStreams.push(a),n.add(o)}}(e,t)},onTimelineRegionAdded:function(t){var n=e.Kc;e:{for(var i=c(n.g),r=i.next();!r.done;r=i.next())if((r=r.value).schemeIdUri==t.schemeIdUri&&r.id==t.id&&r.startTime==t.startTime&&r.endTime==t.endTime){i=r;break e}i=null}null==i&&(n.g.add(t),t=new ui("regionadd",new Map([["region",t]])),n.dispatchEvent(t))},onEvent:function(t){return e.dispatchEvent(t)},onError:function(t){return vl(e,t)},isLowLatencyMode:function(){return e.h.streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return e.h.streaming.autoLowLatencyMode},enableLowLatencyMode:function(){e.configure("streaming.lowLatencyMode",!0)}},s=Date.now()/1e3;return new ri(function(){var t,i,o,a;return M((function(l){if(1==l.g)return t=e,w(l,e.I.start(n,r),2);if(t.i=l.h,i=Fa(Hl),e.dispatchEvent(i),0==e.i.variants.length)throw new Fe(2,4,4036);!function(e){function t(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}(e.i),o=Date.now()/1e3,a=o-s,e.s.F=a,E(l)}))}(),(function(){return e.I.stop()}))}(i,e)})),r.set(this.sd,(function(e){return e=function(e,t){var n,i;return M((function(r){return 1==r.g?(n=Date.now()/1e3,i=!0,e.m=za(e,{mb:e.F,onError:function(t){vl(e,t)},Oc:function(t){wl(e,t)},onExpirationUpdated:function(t,n){El(e,t,n)},onEvent:function(t){e.dispatchEvent(t),t.type==Rl&&i&&(i=!1,e.s.j=Date.now()/1e3-n)}}),e.m.configure(e.h.drm),w(r,Ui(e.m,e.i.variants,e.i.offlineSessionIds),2)):3!=r.g?w(r,e.m.Vb(t.J),3):w(r,nl(e,e.i),0)}))}(i,e),li(e)})),r.set(this.da,(function(e,t){return li(function(e,t,n){var i,r,s,o,a,l,u,h,d,p;return M((function(f){switch(f.g){case 1:if(t.startTime=n.startTime,null!=e.Xb&&(t.startTime=e.Xb,e.Xb=null),i=t.J,r=t.uri,e.Sb=r,e.G=new ko({Ic:function(){return i.playbackRate},Ec:function(){return i.defaultPlaybackRate},Ud:function(e){i.playbackRate=e},qe:function(e){i.currentTime+=e}}),s=function(){return ol(e)},o=function(){return sl(e)},e.o.A(i,"playing",s),e.o.A(i,"pause",s),e.o.A(i,"ended",s),e.o.A(i,"ratechange",o),a=e.h.abrFactory,e.u&&e.rd==a||(e.rd=a,e.u=je(a),"function"!=typeof e.u.playbackRateChanged&&(Le("AbrManager","Please use an AbrManager with playbackRateChanged function."),e.u.playbackRateChanged=function(){}),e.u.configure(e.h.abr)),e.La=new Yn(e.h.preferredAudioLanguage,e.h.preferredVariantRole,e.h.preferredAudioChannelCount),e.Ma=e.h.preferredTextLanguage,e.Wb=e.h.preferredTextRole,e.Ub=e.h.preferForcedSubs,_l(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd),e.u.init((function(t,n,i){e.j&&t!=e.j.l&&cl(e,t,!0,void 0!==n&&n,void 0===i?0:i)})),e.D=function(e,t){return new yo(e.g,e.i,e.h.streaming,t,(function(){if(e.wb&&Io(e.wb,!0),e.j)for(var t=e.j,n=t.g.Hc(),i=t.h.smallGapLimit,r=c(t.i.keys()),s=r.next();!s.done;s=r.next()){s=s.value;var o=t.i.get(s);o.ba=null;var a=t.g.P;if(!(a=s==at?null!=(a=a.g).g&&null!=a.h&&n>=a.g&&n<a.h:Ds(a=qs(a,s),n,i))&&((null!=Hs(t.g.P,s)||o.Ha)&&qo(t,o),o.ua&&(o.ua.abort(),o.ua=null),s===at))for((s=t.g.P.u.g).l=0,s.h=[],s.g=[],(o=s.i).i=[],o.h=[],o.g=0,Ss(s),o=(s=c(s.j.values())).next();!o.done;o=s.next())bs(o.value)}e.L&&Ka(e)}),(function(t){return e.dispatchEvent(t)}))}(e,t.startTime),e.wb=function(e){var t=new Mo(e.Kc);t.addEventListener("enter",(function(t){yl(e,Ql,t.region)})),t.addEventListener("exit",(function(t){yl(e,Zl,t.region)})),t.addEventListener("skip",(function(t){var n=t.region;t.seeking||(yl(e,Ql,n),yl(e,Zl,n))}));var n=new Po(e.g);return n.g.add(t),e.wa&&n.g.add(e.wa),n}(e),l=Math.max(e.i.minBufferTime,e.h.streaming.rebufferingGoal),Ga(e,l),mn(e.i,e.h.preferredVideoCodecs,e.h.preferredAudioCodecs,e.h.preferredAudioChannelCount,e.h.preferredDecodingAttributes),e.j=function(e){return new Bo(e.i,{Hc:function(){return e.D.m()},getBandwidthEstimate:function(){return e.u.getBandwidthEstimate()},modifySegmentRequest:function(t,n){pa(e.W,t,n)},P:e.N,mb:e.F,onError:function(t){return vl(e,t)},onEvent:function(t){return e.dispatchEvent(t)},Gf:function(){e.I&&e.I.update&&e.I.update()},Id:function(){e.D&&e.D.D(),Ka(e)},Ff:function(t,n){var i=n.zd;i&&e.wa&&function(e,t,n){var i=function(e,t){var n=e.g.get(t);return n||(n={ic:[],ce:null,contentType:t},e.g.set(t,n)),n}(e,t.contentType);!function(e,t){var n=e.h()[t.contentType];if(n&&0<n.length){var i=n[0].start,r=n[n.length-1].end,s=t.ic;t.ic=s.filter((function(e,t){return!(e.position<=i&&t+1<s.length&&s[t+1].position<=i||e.position>=r)}))}else t.ic=[]}(e,i),e={zd:t,position:n},0<=(t=(i=i.ic).findIndex((function(e){return e.position>=n})))?i.splice(t,i[t].position==n?1:0,e):i.push(e)}(e.wa,i,t)}})}(e),e.j.configure(e.h.streaming),e.l=oc,i.textTracks&&e.o.A(i.textTracks,"addtrack",(function(t){t.track&&"chapters"===(t=t.track).kind&&Va(e,t)})),e.dispatchEvent(Fa(Wl)),u=null,e.ib().find((function(e){return e.active}))){f.B(2);break}if(u=al(e)?e.u.chooseVariant():null,cl(e,u,!0,!1,0),!e.h.streaming.startAtSegmentBoundary){f.B(3);break}return h=e.D.m(),w(f,function(e,t){var n,i,r,s,o;return M((function(a){return 1==a.g?(n=e.audio,i=e.video,r=function(e,t){var n,i,r;return M((function(s){return 1==s.g?e?w(s,e.createSegmentIndex(),2):s.return(null):(i=(n=e.segmentIndex.fb(t))?n.next().value:null)?(r=i.startTime,s.return(r)):s.return(null)}))},w(a,r(n,t),2)):3!=a.g?(s=a.h,w(a,r(i,t),3)):null!=(o=a.h)&&null!=s?a.return(Math.max(o,s)):null!=o?a.return(o):null!=s?a.return(s):a.return(t)}))}(u,h),4);case 4:d=f.h,e.D.o(d);case 3:hl(e,null,kn(u));case 2:return e.hb().find((function(e){return e.active}))||((p=Dn(e.i.textStreams,e.Ma,e.Wb,e.Ub)[0]||null)&&Ba(e.s.h,p,!0),u&&(p?(u.audio&&function(e,t,n){return e=an(e.h.preferredTextLanguage),t=an(t.language),rn(n=an(n.language),e)&&!rn(t,n)}(e,u.audio,p)&&(e.ja=!0),e.ja&&e.N.l.setTextVisibility(!0),ml(e)):e.ja=!1),p&&(e.h.streaming.alwaysStreamText||e.qd())&&Fo(e.j,p)),w(f,e.j.start(),5);case 5:e.h.abr.enabled&&(e.u.enable(),gl(e)),Sn(e.j?e.j.l:null,e.i),Sl(e.i),dl(e),al(e),e.i.variants.some((function(e){return e.primary})),e.o.oa(i,"loadedmetadata",(function(){e.s.m=Date.now()/1e3-n.Wd})),E(f)}}))}(i,e,t))})),r.set(this.Kd,(function(e,t){var n=function(e,t,n){var i,r,s,o,a,l,c;return M((function(u){return 1==u.g?(i=lt,r=Date.now()/1e3,s=!0,e.m=za(e,{mb:e.F,onError:function(t){vl(e,t)},Oc:function(t){wl(e,t)},onExpirationUpdated:function(t,n){El(e,t,n)},onEvent:function(t){e.dispatchEvent(t),t.type==Rl&&s&&(s=!1,e.s.j=Date.now()/1e3-r)}}),e.m.configure(e.h.drm),o=n.uri||"",a=ur(o),"application/x-mpegurl"==(l=dc[a])&&wt()&&(l="application/vnd.apple.mpegurl"),l||(l="video/mp4"),c={id:0,language:"und",primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:n.mimeType?n.mimeType.split(";")[0]:l,codecs:n.mimeType?Wt(n.mimeType):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",label:null,type:i.Na,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},e.m.W=!0,w(u,Ui(e.m,[c],[]),2)):w(u,e.m.Vb(t.J),0)}))}(i,e,t);return li(n)})),r.set(this.xb,(function(e,t){return function(e,t,n){function i(){return ol(e)}t.uri=n.uri,t.startTime=n.startTime,e.Sb=t.uri;var r=t.J;e.D=new vo(r);var s=!1;e.Mb.push((function(){s=!0})),null!=t.startTime&&e.D.o(t.startTime),e.G=new ko({Ic:function(){return r.playbackRate},Ec:function(){return r.defaultPlaybackRate},Ud:function(e){r.playbackRate=e},qe:function(e){r.currentTime+=e}}),Ga(e,e.h.streaming.rebufferingGoal),e.o.A(r,"playing",i),e.o.A(r,"pause",i),e.o.A(r,"ended",i),e.o.A(r,"ratechange",(function(){return sl(e)})),"none"!=r.preload&&e.o.oa(r,"loadedmetadata",(function(){e.s.m=Date.now()/1e3-n.Wd})),r.audioTracks&&(e.o.A(r.audioTracks,"addtrack",(function(){return dl(e)})),e.o.A(r.audioTracks,"removetrack",(function(){return dl(e)})),e.o.A(r.audioTracks,"change",(function(){return dl(e)}))),r.textTracks&&(e.o.A(r.textTracks,"addtrack",(function(t){if(t.track)switch(t=t.track,t.kind){case"metadata":!function(e,t){if("metadata"==t.kind){t.mode="hidden",e.o.A(t,"cuechange",(function(){if(t.activeCues)for(var n=c(t.activeCues),i=n.next();!i.done;i=n.next())i=i.value,qa(e,i.startTime,i.endTime,i.type,i.value),e.C&&e.C.onCueMetadataChange(i.value)}));var n=new pt((function(){for(var t=function(e){return Array.from(e.g.textTracks).filter((function(e){return"metadata"==e.kind}))}(e),n=(t=c(t)).next();!n.done;n=t.next())n.value.mode="hidden"})).Lb().S(.5);e.Mb.push((function(){n.stop()}))}}(e,t);break;case"chapters":Va(e,t);break;default:dl(e)}})),e.o.A(r.textTracks,"removetrack",(function(){return dl(e)})),e.o.A(r.textTracks,"change",(function(){return dl(e)})));var o=ur(t.uri);r.src=function(e,t,n){try{if(!e.g.enabled)return t;var i=ma(e);e:{switch(n){case"video/webm":case"video/mp4":var r=Ea;break e;case"application/x-mpegurl":r="m";break e}r=void 0}return i.ot=r,i.su=!0,ya(t,va(i))}catch(e){return K("CMCD_SRC_ERROR","Could not generate src CMCD data.",e),t}}(e.W,t.uri,dc[o]),(vt()||yt())&&r.load(),e.l=ac,e.dispatchEvent(Fa(Wl));var a=new ut;return ao(r,HTMLMediaElement.HAVE_METADATA,e.o,(function(){a.resolve()})),ao(r,HTMLMediaElement.HAVE_CURRENT_DATA,e.o,(function(){return M((function(t){return 1==t.g?(function(e){var t=e.h.preferredAudioLanguage;if(""!=t){e.Pd(t);var n=e.h.preferredVariantRole;""!=n&&e.Pd(t,n)}}(e),Xa(e).find((function(e){return"disabled"!=e.mode}))?t.B(2):w(t,new Promise((function(t){e.o.oa(r.textTracks,"change",t),new pt(t).S(1)})),2)):s?t.return():(function(e){var t=e.h.preferredTextLanguage,n=e.h.preferForcedSubs;if(""!=t){e.Qd(t,"",n);var i=e.h.preferredTextRole;""!=i&&e.Qd(t,i,n)}}(e),void E(t))}))})),r.error?a.reject(bl(e)):"none"==r.preload&&(G('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),a.resolve()),e.o.oa(r,"error",(function(){a.reject(bl(e))})),new ri(a,(function(){return a.reject(new Fe(2,7,7001)),Promise.resolve()}))}(i,e,t)})),this.xa=new Zo(this.V,{jf:function(e,t,n,r){var s=null;return e==i.V&&(s=n==i.V?i.V:i.ca),e==i.ca&&(s=n==i.V||t.J!=r.J?i.V:n==i.ca?i.ca:n==i.vb||n==i.da?i.vb:n==i.xb?i.Kd:null),e==i.vb&&(s=n==i.da&&t.J==r.J?i.Jd:i.fa),e==i.Jd&&(s=Il(i.da,i.yd,i.fa,n,t,r)),e==i.yd&&(s=Il(i.da,i.sd,i.fa,n,t,r)),e==i.sd&&(s=Il(i.da,i.da,i.fa,n,t,r)),e==i.Kd&&(s=n==i.xb&&t.J==r.J?i.xb:i.fa),e!=i.da&&e!=i.xb||(s=i.fa),e==i.fa&&(s=r.J&&t.J==r.J?i.ca:i.V),s},Ve:function(e,t,n){return i.dispatchEvent(Fa(zl,(new Map).set("state",e.name))),r.get(e)(t,n)},handleError:function(e){return M((function(t){return 1==t.g?w(t,Ha(i,e),2):t.return(e.J?i.ca:i.V)}))},Ef:function(e){i.dispatchEvent(Fa(Gl,(new Map).set("state",e.name)))}}),t&&this.Vb(t,!0)}function Fa(e,t){return new ui(e,t)}function Ha(e,t){var n,i,r,s,o,a,l,u,h;return M((function(d){switch(d.g){case 1:return e.l!=rc&&(e.l=sc),n=e.Mb.map((function(e){return e()})),e.Mb=[],w(d,Promise.all(n),2);case 2:if(e.dispatchEvent(Fa(tc)),t.mimeType=null,t.startTime=null,t.uri=null,t.J&&e.o.Sa(),e.wb&&(e.wb.release(),e.wb=null),e.Bc&&(e.Bc.stop(),e.Bc=null),!e.I){d.B(3);break}return w(d,e.I.stop(),4);case 4:e.I=null,e.Jc=null;case 3:if(!e.u){d.B(5);break}return w(d,e.u.stop(),5);case 5:if(!e.j){d.B(7);break}return w(d,e.j.destroy(),8);case 8:e.j=null;case 7:if(e.G&&(e.G.release(),e.G=null),e.D&&(e.D.release(),e.D=null),!e.N){d.B(9);break}return w(d,e.N.destroy(),10);case 10:e.N=null;case 9:if(e.C&&e.C.onAssetUnload(),!t.J||!t.J.src){d.B(11);break}return w(d,new Promise((function(e){return new pt(e).S(.1)})),12);case 12:for(t.J.removeAttribute("src"),t.J.load();t.J.lastChild;)t.J.removeChild(t.J.firstChild);case 11:if(!e.m){d.B(13);break}return w(d,e.m.destroy(),14);case 14:e.m=null;case 13:if(e.Sb=null,e.L=null,e.i){for(i=c(e.i.variants),r=i.next();!r.done;r=i.next())for(s=r.value,o=c([s.audio,s.video]),a=o.next();!a.done;a=o.next())(l=a.value)&&l.segmentIndex&&l.segmentIndex.release();for(u=c(e.i.textStreams),a=u.next();!a.done;a=u.next())(h=a.value).segmentIndex&&h.segmentIndex.release()}e.i=null,e.s=new Ua,e.td=null,rl(e),E(d)}}))}function qa(e,t,n,i,r){t=(new Map).set("startTime",t).set("endTime",n).set("metadataType",i).set("payload",r),e.dispatchEvent(Fa(Vl,t))}function Va(e,t){if(t&&"chapters"==t.kind){t.mode="hidden";var n=new pt((function(){t.mode="hidden"})).Lb().S(.5);e.Mb.push((function(){n.stop()}))}}function za(e,t){return new Bi(t,e.h.drm.updateExpirationTime)}function Ga(e,t){e.L=new Qn,e.L.g=ei,Zn(e.L,t,Math.min(.5,t/2)),rl(e),e.Bc=new pt((function(){Ka(e)})).Ca(.25)}function Ka(e){switch(e.l){case ac:if(e.g.ended)var t=!0;else{var n=Ns(e.g.buffered);t=null!=n&&n>=e.g.duration-1}break;case oc:e:if(e.g.ended||$s(e.N))t=!0;else{if(e.i.presentationTimeline.T()){n=e.i.presentationTimeline.gb();var i=Ns(e.g.buffered);if(null!=i&&i>=n){t=!0;break e}}t=!1}break;default:t=!1}i=Rs(e.g.buffered,e.g.currentTime);var r=t,s=(n=e.L).h.get(n.g);t=n.g,i=r||i>=s?ti:ei,n.g=i,t!=i&&rl(e)}function Wa(e){if(e.I){var t=pi(e.h.manifest);e.g&&"AUDIO"===e.g.nodeName&&(t.disableVideo=!0),e.I.configure(t)}if(e.m&&e.m.configure(e.h.drm),e.j){e.j.configure(e.h.streaming);try{il(e,e.i)}catch(t){vl(e,t)}e.u&&al(e),!(t=e.j.l)||t.allowedByApplication&&t.allowedByKeySystem||ll(e)}if(e.F&&e.F.Sd(e.h.streaming.forceHTTPS),e.N&&(t=e.h.textDisplayFactory,e.td!=t)){var n=je(t),i=e.N,r=i.l;i.l=n,r&&(n.setTextVisibility(r.isTextVisible()),r.destroy()),i.g&&(i.g.i=n),e.td=t,e.j&&(n=(t=e.j).i.get(at))&&Ho(t,n.stream,!0,0,!0)}e.u&&(e.u.configure(e.h.abr),e.h.abr.enabled?e.u.enable():e.u.disable(),gl(e)),e.L&&(t=e.h.streaming.rebufferingGoal,e.i&&(t=Math.max(t,e.i.minBufferTime)),Zn(e.L,t,Math.min(.5,t/2))),e.i&&_l(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd)}function Xa(e){return Array.from(e.g.textTracks).filter((function(e){return"metadata"!=e.kind&&"chapters"!=e.kind&&"Shaka Player TextTrack"!=e.label}))}function Ja(e){return Array.from(e.g.textTracks).filter((function(e){return"chapters"==e.kind}))}function Ya(e,t){var n,i;return M((function(r){switch(r.g){case 1:return n=ur(t),(i=pc[n])?r.return(i):(_(r,2),w(r,cr(t,e.F,e.h.streaming.retryParameters),4));case 4:i=r.h,S(r,3);break;case 2:T(r);case 3:if(i)return r.return(i);throw new Fe(1,2,2011,n)}}))}function Qa(e,t,n,i,r,s,o){var a,l,c,u;return M((function(h){return 1==h.g?"text/vtt"!=r||o.length?w(h,Za(e,t,e.F,e.h.streaming.retryParameters),3):h.B(2):(2!=h.g&&(a=h.h,l=el(e,a,r,o),c=new Blob([l],{type:"text/vtt"}),t=Qs(c),r="text/vtt"),(u=document.createElement("track")).src=fa(e.W,t),u.label=s,u.kind=i,u.srclang=n,e.g.getAttribute("crossorigin")||e.g.setAttribute("crossorigin","anonymous"),e.g.appendChild(u),h.return(u))}))}function Za(e,t,n,i){var r,s,o;return M((function(a){if(1==a.g){r=xi,(s=bi([t],i)).method="GET";var l=e.W;try{l.g.enabled&&ga(l,s,{ot:xa,su:!0})}catch(e){K("CMCD_TEXT_ERROR","Could not generate text CMCD data.",e)}return w(a,n.request(r,s).promise,2)}return o=a.h,a.return(o.data)}))}function el(e,t,n,i){var r=tn[n];if(r)return n=r(),e={periodStart:0,segmentStart:0,segmentEnd:e.g.duration},t=ke(t),function(e,t){function n(e){for(var n=e,i=c(t),r=i.next();!r.done;r=i.next())(r=r.value).end&&r.start<e&&(n+=r.end-r.start);return(10>(e=Math.floor(n/3600))?"0":"")+e+":"+(10>(i=Math.floor(n/60%60))?"0":"")+i+":"+(10>(r=Math.floor(n%60))?"0":"")+r+"."+(100>(n=Math.floor(1e3*n%1e3))?10>n?"00":"0":"")+n}function i(e){var t=[],n=700<=e.fontWeight,r="italic"==e.fontStyle,s=e.textDecoration.includes("underline");return n&&t.push("b"),r&&t.push("i"),s&&t.push("u"),n=t.reduce((function(e,t){return e+"<"+t+">"}),""),t=t.reduceRight((function(e,t){return e+"</"+t+">"}),""),e.lineBreak||e.spacer?(e.spacer&&Le("shaka.text.Cue","Please use lineBreak instead of spacer."),"\n"):e.nestedCues.length?e.nestedCues.map(i).join(""):n+e.payload+t}for(var r=e.map((function(e){if(e.nestedCues.length){var t=e.clone();return t.nestedCues=[],t.payload=i(e),t}return e})),s="WEBVTT\n\n",o=(r=c(r)).next();!o.done;o=r.next())s+=n((o=o.value).startTime)+" --\x3e "+n(o.endTime)+function(e){var t=[];switch(e.textAlign){case"left":t.push("align:left");break;case"right":t.push("align:right");break;case se:t.push("align:middle");break;case"start":t.push("align:start");break;case"end":t.push("align:end")}switch(e.writingMode){case"vertical-lr":t.push("vertical:lr");break;case"vertical-rl":t.push("vertical:rl")}return t.length?" "+t.join(" "):""}(o)+"\n",s+=o.payload+"\n\n";return s}(t=n.parseMedia(t,e),i);throw new Fe(2,2,2014,n)}function tl(e){var t=Ma();return t.streaming.failureCallback=function(t){e.T()&&[1001,1002,1003].includes(t.code)&&(t.severity=1,e.Nd())},t.textDisplayFactory=function(){return e.Ac?new aa(e.g,e.Ac):new na(e.g)},t}function nl(e,t){return M((function(n){if(1==n.g)return w(n,function(e,t){return M((function(n){if(1==n.g)return w(n,function(e,t){return M((function(n){if(1==n.g)return w(n,bn(t,0<t.offlineSessionIds.length),2);Sn(e,t),function(e){e.textStreams=e.textStreams.filter((function(e){return Yt(zt(e.mimeType,e.codecs))}))}(t),function(e){e.imageStreams=e.imageStreams.filter((function(e){var t=["image/svg+xml","image/png","image/jpeg"];return(yt()||vt()||bt())&&t.push("image/webp"),t.includes(e.mimeType)}))}(t),E(n)}))}(e.j?e.j.l:null,t),2);Sl(t),E(n)}))}(e,t),2);il(e,t),E(n)}))}function il(e,t){if(e.l!=rc){for(var n=e.h.restrictions,i=e.Dd,r=!1,s=c(t.variants),o=s.next();!o.done;o=s.next()){var a=(o=o.value).allowedByApplication;o.allowedByApplication=yn(o,n,i),a!=o.allowedByApplication&&(r=!0)}if(r&&e.j&&dl(e),(n=e.m?e.m.g:null)&&e.m.s)for(r=(i=c(t.variants)).next();!r.done;r=i.next())for(s=(r=c(((r=r.value).video?r.video.drmInfos:[]).concat(r.audio?r.audio.drmInfos:[]))).next();!s.done;s=r.next())if((s=s.value).keySystem==n.keySystem)for(o=(s=c(s.initData||[])).next();!o.done;o=s.next())o=o.value,qi(e.m,o.initDataType,o.initData);xl(e,t)}}function rl(e){var t=e.pd();if(e.s&&e.L&&e.D){var n=e.G;n.j=t,Co(n),e.W&&(n=e.W,t||n.i||(n.i=!0),n.i&&t&&(n.l=!0),n.m=t),ol(e)}t=(new Map).set("buffering",t),e.dispatchEvent(Fa(Ol,t))}function sl(e){var t=e.g.playbackRate;0!=t&&(e.G&&e.G.set(t),t=Fa(Kl),e.dispatchEvent(t))}function ol(e){if(e.s&&e.L){var t=e.s.g;e.L.g==ei?Da(t,"buffering"):e.g.paused?Da(t,"paused"):e.g.ended?Da(t,"ended"):Da(t,"playing")}}function al(e){try{xl(e,e.i)}catch(t){return vl(e,t),!1}var t=e.i.variants.filter((function(e){return On(e)}));return t=e.La.create(t),e.u.setVariants(Array.from(t.values())),!0}function ll(e){var t;(t=al(e)?e.u.chooseVariant():null)&&cl(e,t,!0,!0,0)}function cl(e,t,n,i,r){var s=e.j.l;if(t==s)i&&$o(e.j,t,i,r,!0);else{var o=e.s.h;o.h!=t&&(o.h=t,o.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),$o(e.j,t,i,r),i=null,s&&(i=kn(s)),t=kn(t),n?hl(e,i,t):pl(e,i,t)}}function ul(e,t){var n=Array.from(e.g.audioTracks).find((function(e){return e.enabled}));t.enabled=!0,t.id!==n.id&&(n.enabled=!1),pl(e,n=An(n),An(t))}function hl(e,t,n){t=(new Map).set("oldTrack",t).set("newTrack",n),Tl(e,t=Fa(Ml,t))}function dl(e){Tl(e,Fa(ec))}function pl(e,t,n){t=(new Map).set("oldTrack",t).set("newTrack",n),Tl(e,t=Fa(nc,t))}function fl(e){Tl(e,Fa(Xl))}function ml(e){Tl(e,Fa(Jl))}function gl(e){var t=(new Map).set("newStatus",e.h.abr.enabled);Tl(e,Fa(Al,t))}function vl(e,t){if(e.l!=rc){var n=Fa(Bl,(new Map).set("detail",t));e.dispatchEvent(n),n.defaultPrevented&&(t.handled=!0)}}function yl(e,t,n){n=(new Map).set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement}),e.dispatchEvent(Fa(t,n))}function bl(e){if(!e.g.error)return null;var t=e.g.error.code;if(1==t)return null;var n=e.g.error.msExtendedCode;return n&&(0>n&&(n+=Math.pow(2,32)),n=n.toString(16)),new Fe(2,3,3016,t,n,e.g.error.message)}function wl(e,t){if(e.j){var n=Object.keys(t),i=1==n.length&&"00"==n[0],r=!1;if(n.length)for(var s=(n=c(e.i.variants)).next();!s.done;s=n.next()){var o=[];(s=s.value).audio&&o.push(s.audio),s.video&&o.push(s.video);for(var a=(o=c(o)).next();!a.done;a=o.next()){var l=a.value;if(a=s.allowedByKeySystem,l.keyIds.size){s.allowedByKeySystem=!0;for(var u=(l=c(l.keyIds)).next();!u.done;u=l.next())u=u.value,u=t[i?"00":u],s.allowedByKeySystem=s.allowedByKeySystem&&!!u&&!cc.includes(u)}a!=s.allowedByKeySystem&&(r=!0)}}r&&!al(e)||((i=e.j.l)&&!i.allowedByKeySystem&&ll(e),r&&dl(e))}}function El(e,t,n){e.I&&e.I.onExpirationUpdated&&e.I.onExpirationUpdated(t,n),t=Fa(Ul),e.dispatchEvent(t)}function _l(e,t,n){0<t&&(e.T()||e.Be(t)),n<(t=e.getDuration())&&(e.T()||e.Ia(n))}function xl(e,t){var n=e.m?e.m.Fc():{},i=Object.keys(n);i=i.length&&"00"==i[0];for(var r=!1,s=!1,o=new Set,a=new Set,l=c(t.variants),u=l.next();!u.done;u=l.next()){var h=[];(u=u.value).audio&&h.push(u.audio),u.video&&h.push(u.video);for(var d=(h=c(h)).next();!d.done;d=h.next())if((d=d.value).keyIds.size)for(var p=(d=c(d.keyIds)).next();!p.done;p=d.next()){p=p.value;var f=n[i?"00":p];f?cc.includes(f)&&a.add(f):o.add(p)}u.allowedByApplication?u.allowedByKeySystem&&(r=!0):s=!0}if(!r)throw new Fe(2,4,4012,n={hasAppRestrictions:s,missingKeys:Array.from(o),restrictedKeyStatuses:Array.from(a)})}function Sl(e){if(!e.variants.some(On))throw new Fe(2,4,4032)}function Tl(e,t){M((function(n){if(1==n.g)return w(n,Promise.resolve(),2);e.l!=rc&&e.dispatchEvent(t),E(n)}))}function kl(e){for(var t=new Set,n=(e=c(e)).next();!n.done;n=e.next())(n=n.value).language?t.add(an(n.language)):t.add("und");return t}function Cl(e){for(var t=new Map,n=new Map,i=(e=c(e)).next();!i.done;i=e.next()){var r="und",s=[];(i=i.value).language&&(r=an(i.language)),(s="variant"==i.type?i.audioRoles:i.roles)&&s.length||(s=[""]),t.has(r)||t.set(r,new Set);for(var o=(s=c(s)).next();!o.done;o=s.next())o=o.value,t.get(r).add(o),i.label&&(n.has(r)||n.set(r,new Map),n.get(r).set(o,i.label))}var a=[];return t.forEach((function(e,t){for(var i=c(e),r=i.next();!r.done;r=i.next()){r=r.value;var s=null;n.has(t)&&n.get(t).has(r)&&(s=n.get(t).get(r)),a.push({language:t,role:r,label:s})}})),a}function Pl(){return new Fe(2,7,7e3)}function Il(e,t,n,i,r,s){return i==e&&r.J==s.J&&r.uri==s.uri&&r.mimeType==s.mimeType?t:n}function Ll(e){return new Promise((function(t,n){e.nb=function(){return n(Pl())},e.Nc=function(){return t()},e.onError=function(e){return n(e)},e.Pc=function(){return n(Pl())}}))}$("shaka.util.CmcdManager.StreamingFormat",{ig:"d",pg:"h",zg:"s",vg:"o"}),$("shaka.util.ConfigUtils",Ca),Ca.convertToConfigObject=Ia,Ca.mergeConfigObjects=Pa,$("shaka.util.PlayerConfiguration",Aa),Aa.mergeConfigObjects=Oa,g($a,di),(i=$a.prototype).destroy=function(){var e,t=this;return M((function(n){switch(n.g){case 1:return t.l==rc?n.return():(t.l=rc,e=ea(t.xa,(function(){return{node:t.V,payload:{J:null,mimeType:null,startTime:null,Wd:NaN,uri:null},jb:!1}})),w(n,new Promise((function(t){e.Gb=function(){},e.Nc=function(){t()},e.nb=function(){t()},e.onError=function(){t()},e.Pc=function(){t()}})),2));case 2:return w(n,t.xa.destroy(),3);case 3:if(t.Dc&&(t.Dc.release(),t.Dc=null),t.Tb&&(t.Tb.release(),t.Tb=null),t.o&&(t.o.release(),t.o=null),t.rd=null,t.u=null,t.h=null,t.s=null,t.Ac=null,t.W=null,!t.F){n.B(4);break}return w(n,t.F.destroy(),5);case 5:t.F=null;case 4:di.prototype.release.call(t),E(n)}}))},i.Vb=function(e,t){if(t=void 0===t||t,this.l==rc)return Promise.reject(Pl());var n={J:null,mimeType:null,startTime:null,Wd:NaN,uri:null};n.J=e,ft()||(t=!1);var i=t?this.vb:this.ca,r=ea(this.xa,(function(){return{node:i,payload:n,jb:!1}}));return r.Gb=function(){},Ll(r)},i.detach=function(){var e=this;if(this.l==rc)return Promise.reject(Pl());var t=ea(this.xa,(function(){return{node:e.V,payload:{J:null,mimeType:null,startTime:null,Wd:NaN,uri:null},jb:!1}}));return t.Gb=function(){},Ll(t)},i.Zd=function(e){var t=this;if(e=void 0===e||e,this.l==rc)return Promise.reject(Pl());ft()||(e=!1);var n={J:null,mimeType:null,startTime:null,Wd:NaN,uri:null},i=ea(this.xa,(function(i){var r=i.J&&e?t.vb:i.J?t.ca:t.V;return n.J=i.J,{node:r,payload:n,jb:!1}}));return i.Gb=function(){},Ll(i)},i.dg=function(e){this.Xb=e},i.load=function(e,t,n){var i=this;if(this.Xb=null,this.l==rc)return Promise.reject(Pl());this.dispatchEvent(Fa(Fl));var r={J:null,mimeType:null,startTime:null,Wd:NaN,uri:null};r.uri=e,r.Wd=Date.now()/1e3,n&&(r.mimeType=n),void 0!==t&&(r.startTime=t);var s=function(e,t){if(!ft())return!0;var n=t.mimeType,i=t.uri||"";if(n||(n=ur(i),n=dc[n]),n){if(""==(t.J||St()).canPlayType(n))return!1;if(!ft()||!(n in hr)&&!(ur(i)in dr)||e.h.streaming.preferNativeHls)return!0;if(wt())return e.h.streaming.useNativeHlsOnSafari}return!1}(this,r)?this.xb:this.da,o=ea(this.xa,(function(e){return null==e.J?null:(r.J=e.J,{node:s,payload:r,jb:!0})}));return this.s=new Ua,this.W=function(e){return new da({getBandwidthEstimate:function(){return e.u?e.u.getBandwidthEstimate():NaN},Ya:function(){return e.Ya()},getCurrentTime:function(){return e.g?e.g.currentTime:0},ib:function(){return e.ib()},Gc:function(){return e.Gc()},T:function(){return e.T()}},e.h.cmcd)}(this),o.Gb=function(){},new Promise((function(e,t){o.Pc=function(){return t(new Fe(2,7,7002))},o.Nc=function(){e(),i.dispatchEvent(Fa($l))},o.nb=function(){return t(Pl())},o.onError=function(e){return t(e)}}))},i.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=Ia(e,t)),e.manifest&&e.manifest.dash&&"defaultPresentationDelay"in e.manifest.dash&&(Le("manifest.dash.defaultPresentationDelay configuration","Please Use manifest.defaultPresentationDelay instead."),e.manifest.defaultPresentationDelay=e.manifest.dash.defaultPresentationDelay,delete e.manifest.dash.defaultPresentationDelay),e.streaming&&e.streaming.lowLatencyMode&&(null==e.streaming.inaccurateManifestTolerance&&(e.streaming.inaccurateManifestTolerance=0),null==e.streaming.rebufferingGoal&&(e.streaming.rebufferingGoal=.01));var n=Oa(this.h,e,tl(this));return Wa(this),n},i.getConfiguration=function(){var e=tl(this);return Oa(e,this.h,tl(this)),e},i.Ye=function(){if(this.g){var e=this.g.buffered.length;e=e?this.g.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(e>=(t=Math.min(this.g.currentTime+t,this.lc().end)))return 1;if(!(e<=this.g.currentTime)&&e<t)return(e-this.g.currentTime)/(t-this.g.currentTime)}return 0},i.Qf=function(){for(var e in this.h)delete this.h[e];Oa(this.h,tl(this),tl(this)),Wa(this)},i.df=function(){return this.l},i.hf=function(){return this.g},i.bc=function(){return this.F},i.od=function(){return this.Sb},i.ie=function(){return this.C?this.C:null},i.T=function(){return this.i?this.i.presentationTimeline.T():!(!this.g||!this.g.src)&&1/0==this.g.duration},i.lb=function(){return!!this.i&&this.i.presentationTimeline.lb()},i.yf=function(){if(this.i){var e=this.i.variants;return!!e.length&&!e[0].video}return!(!this.g||!this.g.src)&&(this.g.videoTracks?0==this.g.videoTracks.length:0==this.g.videoHeight)},i.lc=function(){if(this.i){var e=this.i.presentationTimeline;return{start:e.Bb(),end:e.Pa()}}return this.g&&this.g.src&&(e=this.g.seekable).length?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},i.wf=function(){this.T()&&(this.g.currentTime=this.lc().end)},i.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},i.drmInfo=function(){return this.m?this.m.g:null},i.ac=function(){return this.m?this.m.ac():1/0},i.Fc=function(){return this.m?this.m.Fc():{}},i.pd=function(){return!!this.L&&this.L.g==ei},i.Gc=function(){return this.g?this.G?this.G.i:1:0},i.Zf=function(e){0==e?G("A trick play rate of 0 is unsupported!"):(this.g.paused&&this.g.play(),this.G.set(e),this.l==oc&&(this.u.playbackRateChanged(e),Uo(this.j,1<Math.abs(e))))},i.Oe=function(){var e=this.G.Ec();this.l==ac&&this.G.set(e),this.l==oc&&(this.G.set(e),this.u.playbackRateChanged(e),Uo(this.j,!1))},i.ib=function(){if(this.i){for(var e=this.j?this.j.l:null,t=[],n=0,i=c(this.i.variants),r=i.next();!r.done;r=i.next())if(On(r=r.value)){var s=kn(r);s.active=r==e,s.active||1==n||null==e||r.video!=e.video||r.audio!=e.audio||(s.active=!0),s.active&&n++,t.push(s)}return t}return this.g&&this.g.audioTracks?Array.from(this.g.audioTracks).map((function(e){return An(e)})):[]},i.hb=function(){if(this.i){for(var e=this.j?this.j.o:null,t=[],n=c(this.i.textStreams),i=n.next();!i.done;i=n.next()){var r=Cn(i=i.value);r.active=i==e,t.push(r)}return t}return this.g&&this.g.src&&this.g.textTracks?Xa(this).map((function(e){return Ln(e)})):[]},i.bf=function(){return this.i?this.i.imageStreams.map((function(e){return Pn(e)})):[]},i.rf=function(e,t){var n,i,r,s,o,a,l,c,u,h,d,p,f,m,g,v,y,b,E=this;return M((function(_){return 1==_.g?E.i?(n=E.i.imageStreams.find((function(t){return t.id==e})))?n.segmentIndex?_.B(3):w(_,n.createSegmentIndex(),3):_.return(null):_.B(2):2!=_.g?null==(i=n.segmentIndex.find(t))?_.return(null):(r=n.segmentIndex.get(i),s=r.tilesLayout||n.tilesLayout,(o=/(\d+)x(\d+)/.exec(s))?(a=n.width||0,l=n.height||0,c=parseInt(o[1],10),u=parseInt(o[2],10),h=a/c,d=l/u,p=c*u,f=r.l-r.startTime,m=r.i||f/p,g=r.startTime,y=v=0,1<p&&(b=Math.floor((t-r.startTime)/m),g=r.startTime+b*m,v=b%c*h,y=Math.floor(b/c)*d),_.return({imageHeight:l,imageWidth:a,height:d,positionX:v,positionY:y,startTime:g,duration:m,uris:r.sa(),width:h})):_.return(null)):_.return(null)}))},i.xe=function(e){if(this.i&&this.j){var t=this.i.textStreams.find((function(t){return t.id==e.id}));t&&t!=this.j.o&&(Ba(this.s.h,t,!1),Fo(this.j,t),fl(this),this.Ma=t.language)}else if(this.g&&this.g.src&&this.g.textTracks){for(var n=(t=c(t=Xa(this))).next();!n.done;n=t.next())In(n=n.value)==e.id?n.mode=this.ja?"showing":"hidden":n.mode="disabled";fl(this)}},i.ye=function(e,t,n){if(t=void 0!==t&&t,n=void 0===n?0:n,this.i&&this.j){this.h.abr.enabled&&G("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var i=this.i.variants.find((function(t){return t.id==e.id}));i&&On(i)&&(cl(this,i,!1,t,n),this.La=new Jn(i),al(this))}else if(this.g&&this.g.audioTracks)for(n=(t=c(t=Array.from(this.g.audioTracks))).next();!n.done;n=t.next())if(In(n=n.value)==e.id){ul(this,n);break}},i.Xe=function(){return Cl(this.ib())},i.qf=function(){return Cl(this.hb())},i.We=function(){return Array.from(kl(this.ib()))},i.pf=function(){return Array.from(kl(this.hb()))},i.Pd=function(e,t){if(this.i&&this.D){this.La=new Yn(e,t||"",0,"");for(var n=function(e,t){return e.video||t.video?e.video&&t.video?Math.abs((e.video.height||0)-(t.video.height||0))+Math.abs((e.video.width||0)-(t.video.width||0)):1/0:0},i=this.j.l,r=this.La.create(this.i.variants),s=null,o=(r=c(r.values())).next();!o.done;o=r.next())o=o.value,(!s||n(s,i)>n(o,i))&&(s=o);s?(n=kn(s),this.ye(n,!0)):ll(this)}else if(this.g&&this.g.audioTracks){for(r=Array.from(this.g.audioTracks),n=an(e),s=i=null,o=(r=c(r)).next();!o.done;o=r.next()){var a=An(o=o.value);an(a.language)==n&&(i=o,t?a.roles.includes(t)&&(s=o):0==a.roles.length&&(s=o))}s?ul(this,s):i&&ul(this,i)}},i.Qd=function(e,t,n){if(n=void 0!==n&&n,this.i&&this.D)this.Ma=e,this.Wb=t||"",this.Ub=n,(e=Dn(this.i.textStreams,this.Ma,this.Wb,this.Ub)[0]||null)&&e!=this.j.o&&(Ba(this.s.h,e,!1),this.h.streaming.alwaysStreamText||this.qd())&&(Fo(this.j,e),fl(this));else{var i=an(e);(e=this.hb().find((function(e){return an(e.language)==i&&(!t||e.roles.includes(t))&&e.forced==n})))&&this.xe(e)}},i.Rf=function(e){if(this.i&&this.D){for(var t=null,n=c(this.i.variants),i=n.next();!i.done;i=n.next())if((i=i.value).audio.label==e){t=i;break}null!=t&&(this.La=new Yn(t.language,"",0,e),ll(this))}},i.qd=function(){var e=this.ja;return this.N?this.N.l.isTextVisible():this.g&&this.g.src&&this.g.textTracks?Xa(this).some((function(e){return"showing"==e.mode})):e},i.je=function(){return this.g&&this.g.src&&this.g.textTracks?Ja(this).map((function(e){return Ln(e)})):[]},i.Ze=function(e){var t=an(e),n=Ja(this).filter((function(e){return an(e.language)==t}));if(!n||!n.length)return[];e=[];for(var i=(n=c(n)).next();!i.done;i=n.next())if((i=i.value)&&i.cues)for(var r=(i=c(i.cues)).next();!r.done;r=i.next())r=r.value,e.push({title:r.text,startTime:r.startTime,endTime:r.endTime});return e},i.Xf=function(e){if(e=!!e,this.ja!=e){if(this.ja=e,this.l==oc)this.N.l.setTextVisibility(e),this.h.streaming.alwaysStreamText||(e?this.j.o||0<(e=Dn(this.i.textStreams,this.Ma,this.Wb,this.Ub)).length&&(Fo(this.j,e[0]),fl(this)):function(e){var t=e.i.get(at);t&&(Jo(t),Yo(t).catch((function(){})),e.i.delete(at)),e.o=null}(this.j));else if(this.g&&this.g.src&&this.g.textTracks)for(var t=Xa(this),n=(t=c(t)).next();!n.done;n=t.next())"disabled"!=(n=n.value).mode&&(n.mode=e?"showing":"hidden");ml(this)}},i.lf=function(){if(!this.T())return null;var e=this.xa.l,t=0;if(this.D)t=this.D.m();else if(e){if(null==e.startTime)return new Date;t=e.startTime}return this.i?new Date(1e3*(this.i.presentationTimeline.l+t)):this.g&&this.g.getStartDate?(e=this.g.getStartDate(),isNaN(e.getTime())?null:new Date(e.getTime()+1e3*t)):null},i.ke=function(){if(!this.T())return null;if(this.i)return new Date(1e3*this.i.presentationTimeline.l);if(this.g&&this.g.getStartDate){var e=this.g.getStartDate();return isNaN(e.getTime())?null:e}return null},i.Ya=function(){if(this.l==oc)return this.N.Ya();var e={total:[],audio:[],video:[],text:[]};return this.l==ac&&(e.total=js(this.g.buffered)),e},i.getStats=function(){if(this.l!=oc&&this.l!=ac)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,switchHistory:[],stateHistory:[]};ol(this);var e=this.g,t=e.currentTime/e.duration;if(!isNaN(t)){var n=this.s;t=Math.round(100*t),n.i=isNaN(n.i)?t:Math.max(n.i,t)}if(e.getVideoPlaybackQuality){n=e.getVideoPlaybackQuality(),t=this.s;var i=Number(n.totalVideoFrames);t.N=Number(n.droppedVideoFrames),t.L=i,this.s.I=Number(n.corruptedVideoFrames)}n=this.m&&(n=this.m).G?n.G:NaN,this.s.s=n,this.l==oc&&((n=this.j.l)&&(this.s.C=(this.G?this.G.i:1)*n.bandwidth),n&&n.video&&(t=this.s,i=n.video.height||NaN,t.o=n.video.width||NaN,t.l=i),this.T()&&(n=this.ke().valueOf()+1e3*this.lc().end,this.s.D=(Date.now()-n)/1e3),this.i&&this.i.presentationTimeline&&(this.s.G=this.i.presentationTimeline.g),n=this.u.getBandwidthEstimate(),this.s.u=n),this.l==ac&&(n=this.s,t=e.videoHeight||NaN,n.o=e.videoWidth||NaN,n.l=t);var r=this.s;e=r.o,n=r.l,t=r.C,i=r.L;for(var s=r.N,o=r.I,a=r.u,l=r.i,u=r.m,h=r.F,d=r.j,p=Ra(r.g,"playing"),f=Ra(r.g,"paused"),m=Ra(r.g,"buffering"),g=r.s,v=r.D,y=r.G,b=function(e){function t(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}}for(var n=[],i=c(e.h),r=i.next();!r.done;r=i.next())n.push(t(r.value));return e.g&&n.push(t(e.g)),n}(r.g),w=[],E=(r=c(r.h.g)).next();!E.done;E=r.next())E=E.value,w.push({timestamp:E.timestamp,id:E.id,type:E.type,fromAdaptation:E.fromAdaptation,bandwidth:E.bandwidth});return{width:e,height:n,streamBandwidth:t,decodedFrames:i,droppedFrames:s,corruptedFrames:o,estimatedBandwidth:a,completionPercent:l,loadLatency:u,manifestTimeSeconds:h,drmTimeSeconds:d,playTime:p,pauseTime:f,bufferingTime:m,licenseTime:g,liveLatency:v,maxSegmentDuration:y,stateHistory:b,switchHistory:w}},i.addTextTrack=function(e,t,n,i,r,s,o){if(o=void 0!==o&&o,Le("addTextTrack","Please use an addTextTrackAsync."),this.l!=oc&&this.l!=ac)throw new Fe(1,7,7004);if(!i){var a=ur(e);if(!(i=pc[a]))throw new Fe(1,2,2011,a)}if(this.l==ac){if("text/vtt"!=i)throw new Fe(1,2,2013,i);if(o&&(n="forced"),(i=document.createElement("track")).src=fa(this.W,e),i.label=s||"",i.kind=n,i.srclang=t,this.g.getAttribute("crossorigin")||this.g.setAttribute("crossorigin","anonymous"),this.g.appendChild(i),e=this.hb().find((function(e){return e.language==t&&e.label==(s||"")&&e.kind==n})))return dl(this),e;throw new Fe(1,2,2012)}if(1/0==(a=this.i.presentationTimeline.getDuration()))throw new Fe(1,4,4033);if(!Yt(zt((e={id:this.Gd++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:xo(0,a,[e]),mimeType:i||"",codecs:r||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,label:s||null,type:at,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!o,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null}).mimeType,e.codecs)))throw new Fe(2,2,2014,i);return this.i.textStreams.push(e),dl(this),Cn(e)},i.Ke=function(e,t,n,i,r,s,o){o=void 0!==o&&o;var a,l,c,u,h,d,p,f,m,g=this;return M((function(v){switch(v.g){case 1:if(g.l!=oc&&g.l!=ac)throw new Fe(1,7,7004);if(i){v.B(2);break}return w(v,Ya(g,e),3);case 3:i=v.h;case 2:if(a=[],g.C)try{a=g.C.getServerSideCuePoints()}catch(e){}if(g.l!=ac){v.B(4);break}return o&&(n="forced"),w(v,Qa(g,e,t,n,i,s||"",a),5);case 5:if(l=g.hb(),c=l.find((function(e){return e.language==t&&e.label==(s||"")&&e.kind==n})))return dl(g),v.return(c);throw new Fe(1,2,2012);case 4:if(u=lt,1/0==(h=g.i.presentationTimeline.getDuration()))throw new Fe(1,4,4033);if(!a.length){v.B(6);break}return w(v,Za(g,e,g.F,g.h.streaming.retryParameters),7);case 7:d=v.h,p=el(g,d,i,a),f=new Blob([p],{type:"text/vtt"}),e=Qs(f),i="text/vtt";case 6:if(m={id:g.Gd++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:xo(0,h,[e]),mimeType:i||"",codecs:r||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,label:s||null,type:u.Z,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!o,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},!Yt(zt(m.mimeType,m.codecs)))throw new Fe(2,2,2014,i);return g.i.textStreams.push(m),dl(g),v.return(Cn(m))}}))},i.Je=function(e,t,n){var i,r,s,o,a=this;return M((function(l){switch(l.g){case 1:if(a.l!=oc&&a.l!=ac)throw new Fe(1,7,7004);if(n){l.B(2);break}return w(l,Ya(a,e),3);case 3:n=l.h;case 2:if(i=[],a.C)try{i=a.C.getServerSideCuePoints()}catch(e){}return w(l,Qa(a,e,t,"chapters",n,"",i),4);case 4:if(r=l.h,s=a.je(),!(o=s.find((function(e){return e.language==t})))){l.B(5);break}return w(l,new Promise((function(e,t){a.o.oa(r,"load",e),a.o.oa(r,"error",(function(){t(new Fe(1,2,2015))}))})),6);case 6:return l.return(o);case 5:throw new Fe(1,2,2012)}}))},i.Td=function(e,t){this.Dd.width=e,this.Dd.height=t},i.Nd=function(){if(this.l==oc){var e=this.j;if(e.j.g)e=!1;else if(e.s)e=!1;else{for(var t=c(e.i.values()),n=t.next();!n.done;n=t.next())(n=n.value).ec&&(n.ec=!1,Xo(e,n,.1));e=!0}}else e=!1;return e},i.ef=function(){return G("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},i.ff=function(){return this.Jc},i.Ce=function(e){this.Ac=e},$("shaka.Player",$a),$a.prototype.setVideoContainer=$a.prototype.Ce,$a.prototype.getManifestParserFactory=$a.prototype.ff,$a.prototype.getManifest=$a.prototype.ef,$a.prototype.retryStreaming=$a.prototype.Nd,$a.prototype.setMaxHardwareResolution=$a.prototype.Td,$a.prototype.addChaptersTrack=$a.prototype.Je,$a.prototype.addTextTrackAsync=$a.prototype.Ke,$a.prototype.addTextTrack=$a.prototype.addTextTrack,$a.prototype.getStats=$a.prototype.getStats,$a.prototype.getBufferedInfo=$a.prototype.Ya,$a.prototype.getPresentationStartTimeAsDate=$a.prototype.ke,$a.prototype.getPlayheadTimeAsDate=$a.prototype.lf,$a.prototype.setTextTrackVisibility=$a.prototype.Xf,$a.prototype.getChapters=$a.prototype.Ze,$a.prototype.getChaptersTracks=$a.prototype.je,$a.prototype.isTextTrackVisible=$a.prototype.qd,$a.prototype.selectVariantsByLabel=$a.prototype.Rf,$a.prototype.selectTextLanguage=$a.prototype.Qd,$a.prototype.selectAudioLanguage=$a.prototype.Pd,$a.prototype.getTextLanguages=$a.prototype.pf,$a.prototype.getAudioLanguages=$a.prototype.We,$a.prototype.getTextLanguagesAndRoles=$a.prototype.qf,$a.prototype.getAudioLanguagesAndRoles=$a.prototype.Xe,$a.prototype.selectVariantTrack=$a.prototype.ye,$a.prototype.selectTextTrack=$a.prototype.xe,$a.prototype.getThumbnails=$a.prototype.rf,$a.prototype.getImageTracks=$a.prototype.bf,$a.prototype.getTextTracks=$a.prototype.hb,$a.prototype.getVariantTracks=$a.prototype.ib,$a.prototype.cancelTrickPlay=$a.prototype.Oe,$a.prototype.trickPlay=$a.prototype.Zf,$a.prototype.getPlaybackRate=$a.prototype.Gc,$a.prototype.isBuffering=$a.prototype.pd,$a.prototype.getKeyStatuses=$a.prototype.Fc,$a.prototype.getExpiration=$a.prototype.ac,$a.prototype.drmInfo=$a.prototype.drmInfo,$a.prototype.keySystem=$a.prototype.keySystem,$a.prototype.goToLive=$a.prototype.wf,$a.prototype.seekRange=$a.prototype.lc,$a.prototype.isAudioOnly=$a.prototype.yf,$a.prototype.isInProgress=$a.prototype.lb,$a.prototype.isLive=$a.prototype.T,$a.prototype.getAdManager=$a.prototype.ie,$a.prototype.getAssetUri=$a.prototype.od,$a.prototype.getNetworkingEngine=$a.prototype.bc,$a.prototype.getMediaElement=$a.prototype.hf,$a.prototype.getLoadMode=$a.prototype.df,$a.prototype.resetConfiguration=$a.prototype.Qf,$a.prototype.getBufferFullness=$a.prototype.Ye,$a.prototype.getConfiguration=$a.prototype.getConfiguration,$a.prototype.configure=$a.prototype.configure,$a.prototype.load=$a.prototype.load,$a.prototype.updateStartTime=$a.prototype.dg,$a.prototype.unload=$a.prototype.Zd,$a.prototype.detach=$a.prototype.detach,$a.prototype.attach=$a.prototype.Vb,$a.probeSupport=function(e){var t,n,i,r,s;return e=void 0===e||e,M((function(o){if(1==o.g)return t={},e?w(o,function(){var e,t,n,i,r,s;return M((function(o){return 1==o.g?(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.recommendation com.apple.fps.3_0 com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" "),n=[{videoCapabilities:t=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],persistentState:"required",sessionTypes:["persistent-license"]},{initDataTypes:["cenc"],videoCapabilities:t}],i=new Map,r=function(e){var t,r,s;return M((function(o){switch(o.g){case 1:return _(o,2),w(o,navigator.requestMediaKeySystemAccess(e,n),4);case 4:return t=o.h,s=!!(r=t.getConfiguration().sessionTypes)&&r.includes("persistent-license"),xt("Tizen 3")&&(s=!1),i.set(e,{persistentState:s}),w(o,t.createMediaKeys(),5);case 5:S(o,0);break;case 2:T(o),i.set(e,null),E(o)}}))},s=e.map((function(e){return r(e)})),w(o,Promise.all(s),2)):o.return(Ri(i))}))}(),3):o.B(2);2!=o.g&&(t=o.h);var a={};if(ft()){for(var l in hr)a[l]=!0;for(var u in dr)a[u]=!0}l={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"};for(var h=(u=c(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"])).next();!h.done;h=u.next())a[h=h.value]=ft()?!!hr[h]:mt(h);for(var d in l)a[d]=ft()?!!dr[d]:mt(l[d]);for(n=a,a={},l=(d=c('video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(","))).next();!l.done;l=d.next())a[l=l.value]=ft()?!!Yt(l)||MediaSource.isTypeSupported(l)||Ht(l):mt(l),a[u=l.split(";")[0]]=a[u]||a[l];for(s in i={manifest:n,media:a,drm:t},r=uc)i[s]=r[s]();return o.return(i)}))},$a.isBrowserSupported=function(){if(e.Promise||G("A Promise implementation or polyfill is required"),!(e.Promise&&e.Uint8Array&&Array.prototype.forEach)||xt("Trident/"))return!1;var t=_t();return!(t&&12>t||!(e.MediaKeys&&e.navigator&&e.navigator.requestMediaKeySystemAccess&&e.MediaKeySystemAccess&&e.MediaKeySystemAccess.prototype.getConfiguration))&&(!!ft()||mt("application/x-mpegurl"))},$a.setAdManagerFactory=function(e){hc=e},$a.registerSupportPlugin=function(e,t){uc[e]=t},$a.prototype.destroy=$a.prototype.destroy;var Al="abrstatuschanged",Ml="adaptation",Ol="buffering",Nl="downloadfailed",Dl="downloadheadersreceived",Rl="drmsessionupdate",jl="emsg",Bl="error",Ul="expirationupdated",$l="loaded",Fl="loading",Hl="manifestparsed",ql="mediaqualitychanged",Vl="metadata",zl="onstatechange",Gl="onstateidle",Kl="ratechange",Wl="streaming",Xl="textchanged",Jl="texttrackvisibility",Yl="timelineregionadded",Ql="timelineregionenter",Zl="timelineregionexit",ec="trackschanged",tc="unloading",nc="variantchanged",ic={fg:Al,gg:Ml,hg:Ol,jg:Nl,kg:Dl,lg:Rl,ng:jl,Error:Bl,og:Ul,qg:"largegap",rg:$l,sg:Fl,tg:Hl,ug:ql,Metadata:Vl,wg:zl,xg:Gl,yg:Kl,Ag:"sessiondata",Bg:Wl,Cg:Xl,Dg:Jl,Eg:Yl,Fg:Ql,Gg:Zl,Hg:ec,Ig:tc,Jg:nc},rc=0,sc=1,oc=2,ac=3;$a.LoadMode={DESTROYED:rc,NOT_LOADED:sc,MEDIA_SOURCE:oc,SRC_EQUALS:ac},$a.version="v3.3.10";var lc=["3","3"];Oe=new function(e){this.g=e,this.i=Ae,this.h=Me}(new Ie(Number(lc[0]),Number(lc[1])));var cc=["output-restricted","internal-error"],uc={},hc=null,dc={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav"},pc={sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function fc(){this.h=[],this.j=this.i=this.g=0}function mc(e,t){var n=this;this.h=e,this.g=t,this.i=!1,this.l=this.g.getVolume(),this.j=new Pi,this.j.A(this.g,google.ima.AdEvent.Type.PAUSED,(function(){n.i=!0})),this.j.A(this.g,google.ima.AdEvent.Type.RESUMED,(function(){n.i=!1}))}function gc(t,n,i,r){var s=this;this.o=t,this.i=n,this.s=null,this.u=NaN,this.l=r,this.j=null,this.h=new Pi,google.ima.settings.setLocale(i),(t=new google.ima.AdDisplayContainer(this.o,this.i)).initialize(),this.m=new google.ima.AdsLoader(t),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v3.3.10"),this.g=null,this.h.oa(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(function(t){!function(t,n){t.l(new ui("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-t.u))),t.g=n.getAdsManager(t.i),t.l(new ui("ima-ad-manager-loaded",(new Map).set("imaAdManager",t.g)));var i=t.g.getCuePoints();if(i.length){for(var r=[],s=(i=c(i)).next();!s.done;s=i.next())r.push({start:s.value,end:null});t.l(new ui("ad-cue-points-changed",(new Map).set("cuepoints",r)))}!function(e){function t(t,n){var i=(new Map).set("originalEvent",t);e.l(new ui(n,i))}e.h.A(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,(function(t){vc(e,t)})),e.h.A(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,(function(t){yc(e,t)})),e.h.A(e.g,google.ima.AdEvent.Type.STARTED,(function(t){yc(e,t)})),e.h.A(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,(function(e){t(e,"ad-first-quartile")})),e.h.A(e.g,google.ima.AdEvent.Type.MIDPOINT,(function(e){t(e,"ad-midpoint")})),e.h.A(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,(function(e){t(e,"ad-third-quartile")})),e.h.A(e.g,google.ima.AdEvent.Type.COMPLETE,(function(e){t(e,"ad-complete")})),e.h.A(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,(function(t){bc(e,t)})),e.h.A(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(t){bc(e,t)})),e.h.A(e.g,google.ima.AdEvent.Type.SKIPPED,(function(e){t(e,"ad-skipped")})),e.h.A(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,(function(e){t(e,"ad-volume-changed")})),e.h.A(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,(function(e){t(e,"ad-muted")})),e.h.A(e.g,google.ima.AdEvent.Type.PAUSED,(function(n){e.j.i=!0,t(n,"ad-paused")})),e.h.A(e.g,google.ima.AdEvent.Type.RESUMED,(function(n){e.j.i=!1,t(n,"ad-resumed")})),e.h.A(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,(function(e){t(e,"ad-skip-state-changed")})),e.h.A(e.g,google.ima.AdEvent.Type.CLICK,(function(e){t(e,"ad-clicked")})),e.h.A(e.g,google.ima.AdEvent.Type.AD_PROGRESS,(function(e){t(e,"ad-progress")})),e.h.A(e.g,google.ima.AdEvent.Type.AD_BUFFERING,(function(e){t(e,"ad-buffering")})),e.h.A(e.g,google.ima.AdEvent.Type.IMPRESSION,(function(e){t(e,"ad-impression")})),e.h.A(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,(function(e){t(e,"ad-duration-changed")})),e.h.A(e.g,google.ima.AdEvent.Type.USER_CLOSE,(function(e){t(e,"ad-closed")})),e.h.A(e.g,google.ima.AdEvent.Type.LOADED,(function(e){t(e,"ad-loaded")})),e.h.A(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(e){t(e,"all-ads-completed")})),e.h.A(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,(function(e){t(e,"ad-linear-changed")})),e.h.A(e.g,google.ima.AdEvent.Type.AD_METADATA,(function(e){t(e,"ad-metadata")})),e.h.A(e.g,google.ima.AdEvent.Type.LOG,(function(e){t(e,"ad-recoverable-error")})),e.h.A(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,(function(e){t(e,"ad-break-ready")})),e.h.A(e.g,google.ima.AdEvent.Type.INTERACTION,(function(e){t(e,"ad-interaction")}))}(t);try{t.g.init(t.i.offsetWidth,t.i.offsetHeight,document.fullscreenElement?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),t.h.A(t.i,"loadeddata",(function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,document.fullscreenElement?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)})),"ResizeObserver"in e&&(t.s=new ResizeObserver((function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,document.fullscreenElement?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)})),t.s.observe(t.i)),t.g.start()}catch(e){bc(t,null)}}(s,t)})),this.h.A(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,(function(e){vc(s,e)})),this.i.onended=function(){s.m.contentComplete()}}function vc(e,t){t.getError(),bc(e,null),e.l(new ui("ad-cue-points-changed",(new Map).set("cuepoints",[])))}function yc(e,t){var n=t.getAd();e.j=new mc(n,e.g),n=(new Map).set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.l(new ui("ad-started",n)),e.j.isLinear()&&(e.o.setAttribute("ad-active","true"),e.i.pause())}function bc(e,t){e.l(new ui("ad-stopped",(new Map).set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.o.removeAttribute("ad-active"),e.i.play())}function wc(e,t){this.i=e,this.h=null,this.g=t}function Ec(e,t,n,i){var r=this;this.s=e,this.l=t,this.j=null,this.G=NaN,this.i=i,this.F=!1,this.u=this.m=this.o=null,this.C="",this.D=[],this.h=new Pi,(e=new google.ima.dai.api.UiSettings).setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.s,e),this.i(new ui("ima-stream-manager-loaded",(new Map).set("imaStreamManager",this.g))),this.h.A(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,(function(e){!function(e,t){e.i(new ui("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-e.G)));var n=t.getStreamData().url;e.j.resolve(n),e.j=null,e.F||e.h.A(e.l,"seeked",(function(){var t=e.l.currentTime;if(0!=t){e.g.streamTimeForContentTime(t);var n=e.g.previousCuePointForStreamTime(t);n&&!n.played&&(e.o=t,e.l.currentTime=n.start)}}))}(r,e)})),this.h.A(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,(function(){r.C.length?r.j.resolve(r.C):r.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),r.j=null})),this.h.A(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,(function(){})),this.h.A(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,(function(e){e=e.getAd(),r.m=new wc(e,r.l),r.u&&(r.m.h=r.u),r.i(new ui("ad-started",(new Map).set("ad",r.m))),r.s.setAttribute("ad-active","true")})),this.h.A(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,(function(){r.s.removeAttribute("ad-active");var e=r.l.currentTime;r.o&&r.o>e&&(r.l.currentTime=r.o,r.o=null)})),this.h.A(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,(function(e){r.u=e.getStreamData().adProgressData,r.m&&(r.m.h=r.u)})),this.h.A(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,(function(){r.i(new ui("ad-first-quartile"))})),this.h.A(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,(function(){r.i(new ui("ad-midpoint"))})),this.h.A(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,(function(){r.i(new ui("ad-third-quartile"))})),this.h.A(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,(function(){r.i(new ui("ad-complete")),r.i(new ui("ad-stopped")),r.s.removeAttribute("ad-active"),r.m=null})),this.h.A(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,(function(){r.i(new ui("ad-skipped")),r.i(new ui("ad-stopped"))})),this.h.A(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,(function(e){var t=e.getStreamData();e=[];for(var n=(t=c(t.cuepoints)).next();!n.done;n=t.next())n=n.value,e.push({start:n.start,end:n.end});r.D=e,r.i(new ui("ad-cue-points-changed",(new Map).set("cuepoints",e)))}))}function _c(){di.call(this),this.g=this.i=null,this.h=new fc,this.j=navigator.language}function xc(e){return JSON.stringify(e,(function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof ui){var n={};for(r in t){var i=t[r];i&&"object"==typeof i?"detail"==r&&(n[r]=i):r in Event||(n[r]=i)}return n}if(t instanceof Error){var r=new Set(["name","message","stack"]);for(n in t)r.add(n);for(n=(i=c(Object.getOwnPropertyNames(t))).next();!n.done;n=i.next())r.add(n.value);for(i={},n=(r=c(r)).next();!n.done;n=r.next())i[n=n.value]=t[n];r={__type__:"Error",contents:i}}else if(t instanceof TimeRanges)for(r={__type__:"TimeRanges",length:t.length,start:[],end:[]},i=(n=c(js(t))).next();!i.done;i=n.next()){var s=(i=i.value).end;r.start.push(i.start),r.end.push(s)}else r=t instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(t)}:"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:0>t?"-Infinity":"Infinity":t;return r}}))}function Sc(e){return JSON.parse(e,(function(e,t){if("NaN"==t)var n=NaN;else if("-Infinity"==t)n=-1/0;else if("Infinity"==t)n=1/0;else if(t&&"object"==typeof t&&"TimeRanges"==t.__type__)n=function(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}(t);else if(t&&"object"==typeof t&&"Uint8Array"==t.__type__)n=new Uint8Array(t.entries);else if(t&&"object"==typeof t&&"Error"==t.__type__){n=t.contents;var i,r=Error(n.message);for(i in n)r[i]=n[i];n=r}else n=t;return n}))}(i=mc.prototype).getDuration=function(){return this.h.getDuration()},i.getMinSuggestedDuration=function(){return this.h.getMinSuggestedDuration()},i.getRemainingTime=function(){return this.g.getRemainingTime()},i.isPaused=function(){return this.i},i.isSkippable=function(){return 0<=this.h.getSkipTimeOffset()},i.getTimeUntilSkippable=function(){var e=this.h.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},i.canSkipNow=function(){return this.g.getAdSkippableState()},i.skip=function(){return this.g.skip()},i.pause=function(){return this.g.pause()},i.play=function(){return this.g.resume()},i.getVolume=function(){return this.g.getVolume()},i.setVolume=function(e){return this.g.setVolume(e)},i.isMuted=function(){return 0==this.g.getVolume()},i.isLinear=function(){return this.h.isLinear()},i.resize=function(e,t){this.g.resize(e,t,document.fullscreenElement?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},i.setMuted=function(e){e?(this.l=this.getVolume(),this.setVolume(0)):this.setVolume(this.l)},i.getSequenceLength=function(){var e=this.h.getAdPodInfo();return null==e?1:e.getTotalAds()},i.getPositionInSequence=function(){var e=this.h.getAdPodInfo();return null==e?1:e.getAdPosition()},i.release=function(){this.g=this.h=null},$("shaka.ads.ClientSideAd",mc),mc.prototype.release=mc.prototype.release,mc.prototype.getPositionInSequence=mc.prototype.getPositionInSequence,mc.prototype.getSequenceLength=mc.prototype.getSequenceLength,mc.prototype.setMuted=mc.prototype.setMuted,mc.prototype.resize=mc.prototype.resize,mc.prototype.isLinear=mc.prototype.isLinear,mc.prototype.isMuted=mc.prototype.isMuted,mc.prototype.setVolume=mc.prototype.setVolume,mc.prototype.getVolume=mc.prototype.getVolume,mc.prototype.play=mc.prototype.play,mc.prototype.pause=mc.prototype.pause,mc.prototype.skip=mc.prototype.skip,mc.prototype.canSkipNow=mc.prototype.canSkipNow,mc.prototype.getTimeUntilSkippable=mc.prototype.getTimeUntilSkippable,mc.prototype.isSkippable=mc.prototype.isSkippable,mc.prototype.isPaused=mc.prototype.isPaused,mc.prototype.getRemainingTime=mc.prototype.getRemainingTime,mc.prototype.getMinSuggestedDuration=mc.prototype.getMinSuggestedDuration,mc.prototype.getDuration=mc.prototype.getDuration,gc.prototype.stop=function(){this.g&&this.g.stop(),this.o&&oa(this.o)},gc.prototype.release=function(){this.stop(),this.s&&this.s.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy()},(i=wc.prototype).getDuration=function(){return this.h?this.h.duration:-1},i.getMinSuggestedDuration=function(){return this.getDuration()},i.getRemainingTime=function(){return this.h?this.h.duration-this.h.currentTime:-1},i.isPaused=function(){return this.g.paused},i.isSkippable=function(){return this.i.isSkippable()},i.getTimeUntilSkippable=function(){var e=this.i.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},i.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},i.skip=function(){this.g.currentTime+=this.getRemainingTime()},i.pause=function(){return this.g.pause()},i.play=function(){return this.g.play()},i.getVolume=function(){return this.g.volume},i.setVolume=function(e){this.g.volume=e},i.isMuted=function(){return this.g.muted},i.isLinear=function(){return!0},i.resize=function(){},i.setMuted=function(e){this.g.muted=e},i.getSequenceLength=function(){var e=this.i.getAdPodInfo();return null==e?1:e.getTotalAds()},i.getPositionInSequence=function(){var e=this.i.getAdPodInfo();return null==e?1:e.getAdPosition()},i.release=function(){this.g=this.h=this.i=null},$("shaka.ads.ServerSideAd",wc),wc.prototype.release=wc.prototype.release,wc.prototype.getPositionInSequence=wc.prototype.getPositionInSequence,wc.prototype.getSequenceLength=wc.prototype.getSequenceLength,wc.prototype.setMuted=wc.prototype.setMuted,wc.prototype.resize=wc.prototype.resize,wc.prototype.isLinear=wc.prototype.isLinear,wc.prototype.isMuted=wc.prototype.isMuted,wc.prototype.setVolume=wc.prototype.setVolume,wc.prototype.getVolume=wc.prototype.getVolume,wc.prototype.play=wc.prototype.play,wc.prototype.pause=wc.prototype.pause,wc.prototype.skip=wc.prototype.skip,wc.prototype.canSkipNow=wc.prototype.canSkipNow,wc.prototype.getTimeUntilSkippable=wc.prototype.getTimeUntilSkippable,wc.prototype.isSkippable=wc.prototype.isSkippable,wc.prototype.isPaused=wc.prototype.isPaused,wc.prototype.getRemainingTime=wc.prototype.getRemainingTime,wc.prototype.getMinSuggestedDuration=wc.prototype.getMinSuggestedDuration,wc.prototype.getDuration=wc.prototype.getDuration,Ec.prototype.stop=function(){this.C="",this.o=null,this.D=[]},Ec.prototype.release=function(){this.stop(),this.h&&this.h.release()},Ec.prototype.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},g(_c,di),(i=_c.prototype).setLocale=function(e){this.j=e},i.initClientSide=function(t,n){var i=this;if(!e.google||!google.ima||!google.ima.AdsLoader)throw new Fe(2,10,1e4);this.i&&this.i.release(),this.i=new gc(t,n,this.j,(function(e){if(e&&e.type)switch(e.type){case"ads-loaded":i.h.h.push(e.loadTime);break;case"ad-started":i.h.g++;break;case"ad-complete":i.h.i++;break;case"ad-skipped":i.h.j++}i.dispatchEvent(e)}))},i.release=function(){this.i&&(this.i.release(),this.i=null),this.g&&(this.g.release(),this.g=null),di.prototype.release.call(this)},i.onAssetUnload=function(){this.i&&this.i.stop(),this.g&&this.g.stop(),this.dispatchEvent(new ui("ad-stopped")),this.h=new fc},i.requestClientSideAds=function(e){if(!this.i)throw new Fe(1,10,10001);var t=this.i;t.u=Date.now()/1e3,t.m.requestAds(e)},i.initServerSide=function(t,n){var i=this;if(!e.google||!google.ima||!google.ima.dai)throw new Fe(2,10,10002);this.g&&this.g.release(),this.g=new Ec(t,n,this.j,(function(e){if(e&&e.type)switch(e.type){case"ads-loaded":i.h.h.push(e.loadTime);break;case"ad-started":i.h.g++;break;case"ad-complete":i.h.i++;break;case"ad-skipped":i.h.j++}i.dispatchEvent(e)}))},i.requestServerSideStream=function(e,t){if(t=void 0===t?"":t,!this.g)throw new Fe(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;(n.mpt||n.mpv)&&G('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v3.3.10";var i=t;return(n=this.g).j?n=Promise.reject(new Fe(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.F=!0),n.j=new ut,n.g.requestStream(e),n.C=i||"",n.G=Date.now()/1e3,n=n.j),n},i.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new Fe(1,10,10003);(e.mpt||e.mpv)&&G('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv="v3.3.10",this.g.g.replaceAdTagParameters(e)},i.getServerSideCuePoints=function(){if(!this.g)throw new Fe(1,10,10003);return this.g.D},i.getStats=function(){var e=this.h;return{loadTimes:e.h,started:e.g,playedCompletely:e.i,skipped:e.j}},i.onDashTimedMetadata=function(e){if(this.g&&"urn:google:dai:2018"==e.schemeIdUri){var t=e.schemeIdUri,n=e.eventElement?e.eventElement.getAttribute("messageData"):null;this.g.g.processMetadata(t,n,e.startTime)}},i.onHlsTimedMetadata=function(e,t){this.g&&this.g.g.processMetadata("ID3",e.data,t)},i.onCueMetadataChange=function(e){this.g&&this.g.onCueMetadataChange(e)},$("shaka.ads.AdManager",_c),_c.prototype.onCueMetadataChange=_c.prototype.onCueMetadataChange,_c.prototype.onHlsTimedMetadata=_c.prototype.onHlsTimedMetadata,_c.prototype.onDashTimedMetadata=_c.prototype.onDashTimedMetadata,_c.prototype.getStats=_c.prototype.getStats,_c.prototype.getServerSideCuePoints=_c.prototype.getServerSideCuePoints,_c.prototype.replaceServerSideAdTagParameters=_c.prototype.replaceServerSideAdTagParameters,_c.prototype.requestServerSideStream=_c.prototype.requestServerSideStream,_c.prototype.initServerSide=_c.prototype.initServerSide,_c.prototype.requestClientSideAds=_c.prototype.requestClientSideAds,_c.prototype.onAssetUnload=_c.prototype.onAssetUnload,_c.prototype.release=_c.prototype.release,_c.prototype.initClientSide=_c.prototype.initClientSide,_c.prototype.setLocale=_c.prototype.setLocale,_c.ADS_LOADED="ads-loaded",_c.AD_STARTED="ad-started",_c.AD_FIRST_QUARTILE="ad-first-quartile",_c.AD_MIDPOINT="ad-midpoint",_c.AD_THIRD_QUARTILE="ad-third-quartile",_c.AD_COMPLETE="ad-complete",_c.AD_STOPPED="ad-stopped",_c.AD_SKIPPED="ad-skipped",_c.AD_VOLUME_CHANGED="ad-volume-changed",_c.AD_MUTED="ad-muted",_c.AD_PAUSED="ad-paused",_c.AD_RESUMED="ad-resumed",_c.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",_c.CUEPOINTS_CHANGED="ad-cue-points-changed",_c.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",_c.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",_c.AD_CLICKED="ad-clicked",_c.AD_PROGRESS="ad-progress",_c.AD_BUFFERING="ad-buffering",_c.AD_IMPRESSION="ad-impression",_c.AD_DURATION_CHANGED="ad-duration-changed",_c.AD_CLOSED="ad-closed",_c.AD_LOADED="ad-loaded",_c.ALL_ADS_COMPLETED="all-ads-completed",_c.AD_LINEAR_CHANGED="ad-linear-changed",_c.AD_METADATA="ad-metadata",_c.AD_RECOVERABLE_ERROR="ad-recoverable-error",_c.AD_BREAK_READY="ad-break-ready",_c.AD_INTERACTION="ad-interaction",hc=function(){return new _c};var Tc="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),kc="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),Cc=["loop","playbackRate"],Pc=["pause","play"],Ic={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getConfiguration:4,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getTextTracks:2,getStats:5,getVariantTracks:2,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10},Lc={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},Ac=[["getConfiguration","configure"]],Mc=[["isTextTrackVisible","setTextTrackVisibility"]],Oc="addChaptersTrack addTextTrack addTextTrackAsync cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),Nc=["attach","detach","load","unload"];function Dc(e,t,n,i,r,s){var o=this;this.G=e,this.j=new pt(t),this.V=n,this.u=!1,this.s=i,this.F=r,this.L=s,this.h=this.m=!1,this.N="",this.o=null,this.C=function(){return $c(o)},this.D=function(e,t){var n=Sc(t);switch(n.type){case"event":var i=n.targetName;n=hi(n.event),o.s(i,n);break;case"update":for(var r in i=n.update)for(var s in n=o.g[r]||{},i[r])n[s]=i[r][s];o.u&&(o.V(),o.u=!1);break;case"asyncComplete":if(r=n.id,n=n.error,s=o.i[r],delete o.i[r],s)if(n){for(i in r=new Fe(n.severity,n.category,n.code),n)r[i]=n[i];s.reject(r)}else s.resolve()}},this.g={video:{},player:{}},this.I=0,this.i={},this.l=null,Gc.add(this)}function Rc(e,t,n){zc=n,n.addUpdateListener(e.C),n.addMessageListener("urn:x-cast:com.google.shaka.v2",e.D),$c(e),Hc(e,{type:"init",initState:t,appData:e.o}),e.l.resolve()}function jc(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.l.reject(new Fe(2,8,n,t))}function Bc(e,t){var n=e.L();e.l=new ut,e.u=!0,Rc(e,n,t)}function Uc(e){var t=zc;t.removeUpdateListener(e.C),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.D)}function $c(e){var t=!!zc&&"connected"==zc.status;if(e.h&&!t){for(var n in e.F(),e.g)e.g[n]={};Fc(e)}e.h=t,e.N=t?zc.receiver.friendlyName:"",e.j.Lb()}function Fc(e){for(var t in e.i){var n=e.i[t];delete e.i[t],n.reject(new Fe(1,7,7e3))}}function Hc(e,t){var n=xc(t),i=zc;try{i.sendMessage("urn:x-cast:com.google.shaka.v2",n,(function(){}),W)}catch(t){throw n=new Fe(2,8,8005,t),i=new ui("error",(new Map).set("detail",n)),e.s("player",i),e.zb(),n}}(i=Dc.prototype).destroy=function(){return Gc.delete(this),Fc(this),zc&&Uc(this),this.j&&(this.j.stop(),this.j=null),this.F=this.s=null,this.h=this.m=!1,this.D=this.C=this.l=this.i=this.g=this.o=null,Promise.resolve()},i.ta=function(){return this.h},i.Ld=function(){return this.N},i.init=function(){if(this.G.length)if(e.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.j.Lb();var t=new chrome.cast.SessionRequest(this.G);t=new chrome.cast.ApiConfig(t,(function(e){for(var t=c(Gc),n=t.next();!n.done;n=t.next())Bc(n.value,e)}),(function(e){for(var t=c(Gc),n=t.next();!n.done;n=t.next())n=n.value,Vc="available"==e,n.j.Lb()}),"origin_scoped"),chrome.cast.initialize(t,(function(){}),(function(){})),Vc&&this.j.S(qc),(t=zc)&&t.status!=chrome.cast.SessionStatus.STOPPED?Bc(this,t):zc=null}else e.__onGCastApiAvailable||(e.__onGCastApiAvailable=Kc),e.__onGCastApiAvailable!=Kc&&G("A global Cast SDK hook is already installed! Shaka Player will be unable to receive a notification when the Cast SDK is ready.")},i.Rd=function(e){this.o=e,this.h&&Hc(this,{type:"appData",appData:this.o})},i.cast=function(e){var t=this;return M((function(n){if(!t.m)throw new Fe(1,8,8e3);if(!Vc)throw new Fe(1,8,8001);if(t.h)throw new Fe(1,8,8002);return t.l=new ut,chrome.cast.requestSession((function(n){return Rc(t,e,n)}),(function(e){return jc(t,e)})),w(n,t.l,0)}))},i.zb=function(){if(this.h){if(Fc(this),zc){Uc(this);try{zc.stop((function(){}),(function(){}))}catch(e){}zc=null}$c(this)}},i.get=function(e,t){var n=this;if("video"==e){if(Pc.includes(t))return function(){return n.te.apply(n,[e,t].concat(u(O.apply(0,arguments))))}}else if("player"==e){if(Lc[t]&&!this.get("player","isLive")())return function(){};if(Oc.includes(t))return function(){return n.te.apply(n,[e,t].concat(u(O.apply(0,arguments))))};if(Nc.includes(t))return function(){return n.Nf.apply(n,[e,t].concat(u(O.apply(0,arguments))))};if(Ic[t])return function(){return n.g[e][t]}}return this.g[e][t]},i.set=function(e,t,n){this.g[e][t]=n,Hc(this,{type:"set",targetName:e,property:t,value:n})},i.te=function(e,t){Hc(this,{type:"call",targetName:e,methodName:t,args:O.apply(2,arguments)})},i.Nf=function(e,t){var n=O.apply(2,arguments),i=new ut,r=this.I.toString();this.I++,this.i[r]=i;try{Hc(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:r})}catch(e){i.reject(e)}return i};var qc=.02,Vc=!1,zc=null,Gc=new Set;function Kc(e){if(e)for(var t=(e=c(Gc)).next();!t.done;t=e.next())t.value.init()}function Wc(e,t,n){di.call(this);var i=this;this.i=e,this.h=t,this.m=this.o=this.j=this.s=this.l=null,this.C=n,this.u=new Map,this.g=new Dc(n,(function(){return Yc(i)}),(function(){return Qc(i)}),(function(e,t){return tu(i,e,t)}),(function(){return Zc(i)}),(function(){return Jc(i)})),function(e){e.g.init(),e.m=new Pi;for(var t=c(Tc),n=t.next();!n.done;n=t.next())e.m.A(e.i,n.value,(function(t){e.g.ta()||(t=hi(t),e.j.dispatchEvent(t))}));for(var i in ic)e.m.A(e.h,ic[i],(function(t){e.g.ta()||e.o.dispatchEvent(t)}));for(var r in e.l={},t={},e.i)t.Nb=r,Object.defineProperty(e.l,t.Nb,{configurable:!1,enumerable:!0,get:function(t){return function(){return eu(e,t.Nb)}}(t),set:function(t){return function(n){var i=t.Nb;e.g.ta()?e.g.set("video",i,n):e.i[i]=n}}(t)}),t={Nb:t.Nb};e.s={},Xc(e,(function(t){Object.defineProperty(e.s,t,{configurable:!1,enumerable:!0,get:function(){return function(e,t){if(e.u.has(t)&&(t=e.u.get(t)),"addEventListener"==t)return function(t,n,i){return e.o.addEventListener(t,n,i)};if("removeEventListener"==t)return function(t,n,i){return e.o.removeEventListener(t,n,i)};if("getMediaElement"==t)return function(){return e.l};if("getSharedConfiguration"==t)return e.g.get("player","getConfiguration");if("getNetworkingEngine"==t)return function(){return e.h.bc()};if("getDrmEngine"==t)return function(){return e.h.m};if("getAdManager"==t)return function(){return e.h.ie()};if("setVideoContainer"==t)return function(t){return e.h.Ce(t)};if(e.g.ta()){if("getManifest"==t||"drmInfo"==t)return function(){return G(t+"() does not work while casting!"),null};if("attach"==t||"detach"==t)return function(){return G(t+"() does not work while casting!"),Promise.resolve()}}return e.g.ta()&&0==Object.keys(e.g.g.video).length&&Ic[t]||!e.g.ta()?e.h[t].bind(e.h):e.g.get("player",t)}(e,t)}})})),function(e){var t=new Map;Xc(e,(function(n,i){if(t.has(i)){var r=t.get(i);n.length<r.length?e.u.set(n,r):e.u.set(r,n)}else t.set(i,n)}))}(e),e.j=new di,e.j.Cc=e.l,e.o=new di,e.o.Cc=e.s}(this)}function Xc(e,t){function n(e){return"constructor"!=e&&"function"==typeof i[e]&&!r.has(e)}var i=e.h,r=new Set;for(s in i)n(s)&&(r.add(s),t(s,i[s]));for(var s=Object.getPrototypeOf(i),o=Object.getPrototypeOf({});s&&s!=o;){for(var a=c(Object.getOwnPropertyNames(s)),l=a.next();!l.done;l=a.next())n(l=l.value)&&(r.add(l),t(l,i[l]));s=Object.getPrototypeOf(s)}}function Jc(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.od(),startTime:null};e.i.pause();for(var n=c(Cc),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.i[i];for(e.i.ended||(t.startTime=e.i.currentTime),i=(n=c(Ac)).next();!i.done;i=n.next()){var r=i.value;i=r[1],r=e.h[r[0]](),t.player[i]=r}for(i=(n=c(Mc)).next();!i.done;i=n.next())i=(r=i.value)[1],r=e.h[r[0]](),t.playerAfterLoad[i]=r;return t}function Yc(e){var t=new ui("caststatuschanged");e.dispatchEvent(t)}function Qc(e){var t=new ui(e.l.paused?"pause":"play");e.j.dispatchEvent(t)}function Zc(e){for(var t=c(Ac),n=t.next();!n.done;n=t.next()){var i=n.value;n=i[1],i=e.g.get("player",i[0])(),e.h[n](i)}var r=e.g.get("player","getAssetUri")();n=e.g.get("video","ended"),t=Promise.resolve();var s=e.i.autoplay;i=null,n||(i=e.g.get("video","currentTime")),r&&(e.i.autoplay=!1,t=e.h.load(r,i));var o={};for(i=(n=c(Cc)).next();!i.done;i=n.next())i=i.value,o[i]=e.g.get("video",i);t.then((function(){if(e.i){for(var t=c(Cc),n=t.next();!n.done;n=t.next())n=n.value,e.i[n]=o[n];for(n=(t=c(Mc)).next();!n.done;n=t.next()){var i=n.value;n=i[1],i=e.g.get("player",i[0])(),e.h[n](i)}e.i.autoplay=s,r&&e.i.play()}}),(function(t){t=(new Map).set("detail",t),t=new ui(Bl,t),e.h.dispatchEvent(t)}))}function eu(e,t){if("addEventListener"==t)return function(t,n,i){return e.j.addEventListener(t,n,i)};if("removeEventListener"==t)return function(t,n,i){return e.j.removeEventListener(t,n,i)};if(e.g.ta()&&0==Object.keys(e.g.g.video).length){var n=e.i[t];if("function"!=typeof n)return n}return e.g.ta()?e.g.get("video",t):("function"==typeof(n=e.i[t])&&(n=n.bind(e.i)),n)}function tu(e,t,n){e.g.ta()&&("video"==t?e.j.dispatchEvent(n):"player"==t&&e.o.dispatchEvent(n))}function nu(e,t,n,i){di.call(this);var r=this;this.g=e,this.h=t,this.j=new Pi,this.I={video:e,player:t},this.D=n||function(){},this.L=i||function(e){return e},this.i=null,this.F=!1,this.o=!0,this.m=0,this.C=!1,this.u=!0,this.s=this.l=null,this.G=new pt((function(){ou(r)})),function(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return iu(e)},t.onSenderDisconnected=function(){return iu(e)},t.onSystemVolumeChanged=function(){var t=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();t&&uu(e,{type:"update",update:{video:{volume:t.level,muted:t.muted}}},e.l),uu(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.s=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.s.onMessage=function(t){return function(e,t){var n=Sc(t.data);switch(n.type){case"PLAY":e.g.play(),hu(e);break;case"PAUSE":e.g.pause(),hu(e);break;case"SEEK":var i=n.currentTime,r=n.resumeState;null!=i&&(e.g.currentTime=Number(i)),r&&"PLAYBACK_START"==r?(e.g.play(),hu(e)):r&&"PLAYBACK_PAUSE"==r&&(e.g.pause(),hu(e));break;case"STOP":e.h.Zd().then((function(){e.h&&hu(e)}));break;case"GET_STATUS":lu(e,Number(n.requestId));break;case"VOLUME":i=(r=n.volume).level,r=r.muted;var s=e.g.volume,o=e.g.muted;null!=i&&(e.g.volume=Number(i)),null!=r&&(e.g.muted=r),s==e.g.volume&&o==e.g.muted||hu(e);break;case"LOAD":e.m=0,e.C=!1,e.u=!1,i=n.media,r=n.currentTime,s=e.L(i.contentId),o=n.autoplay||!0,e.D(i.customData),o&&(e.g.autoplay=!0),e.h.load(s,r).then((function(){e.h&&lu(e)})).catch((function(t){var i="LOAD_FAILED";7==t.category&&7e3==t.code&&(i="LOAD_CANCELLED"),uu(e,{requestId:Number(n.requestId),type:i},e.s)}));break;default:uu(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.s)}}(e,t)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(t){return function(e,t){var n=Sc(t.data);switch(n.type){case"init":e.m=0,e.C=!1,e.u=!0,function(e,t,n){var i,r,s,o,a,l,c,u,h,d,p;M((function(f){switch(f.g){case 1:for(i in t.player)r=t.player[i],e.h[i](r);return e.D(n),s=e.g.autoplay,t.manifest?(e.g.autoplay=!1,_(f,5),w(f,e.h.load(t.manifest,t.startTime),7)):w(f,Promise.resolve(),3);case 7:S(f,3);break;case 5:return o=T(f),a=Bl,l=(new Map).set("detail",o),c=new ui(a,l),e.h&&e.h.dispatchEvent(c),f.return();case 3:if(!e.h)return f.return();for(u in t.video)h=t.video[u],e.g[u]=h;for(d in t.playerAfterLoad)p=t.playerAfterLoad[d],e.h[d](p);e.g.autoplay=s,t.manifest&&(e.g.play(),hu(e)),E(f)}}))}(e,n.initState,n.appData),ou(e);break;case"appData":e.D(n.appData);break;case"set":var i=n.targetName,r=n.property;if(n=n.value,"video"==i){var s=cast.receiver.CastReceiverManager.getInstance();if("volume"==r){s.setSystemVolumeLevel(n);break}if("muted"==r){s.setSystemVolumeMuted(n);break}}e.I[i][r]=n;break;case"call":(i=e.I[n.targetName])[n.methodName].apply(i,n.args);break;case"asyncCall":i=n.targetName,r=n.methodName,"player"==i&&"load"==r&&(e.m=0,e.C=!1);var o=n.id,a=t.senderId;n=(s=e.I[i])[r].apply(s,n.args),"player"==i&&"load"==r&&(n=n.then((function(){e.u=!0}))),n.then((function(){return cu(e,a,o,null)}),(function(t){return cu(e,a,o,t)}))}}(e,t)},t.start();for(var n=(t=c(Tc)).next();!n.done;n=t.next())e.j.A(e.g,n.value,(function(t){return su(e,"video",t)}));for(var i in ic)e.j.A(e.h,ic[i],(function(t){return su(e,"player",t)}));cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?e.h.Td(3840,2160):e.h.Td(1920,1080),e.j.A(e.g,"loadeddata",(function(){e.C=!0})),e.j.A(e.h,"loading",(function(){e.o=!1,ru(e)})),e.j.A(e.g,"playing",(function(){e.o=!1,ru(e)})),e.j.A(e.g,"pause",(function(){ru(e)})),e.j.A(e.h,"unloading",(function(){e.o=!0,ru(e)})),e.j.A(e.g,"ended",(function(){new pt((function(){e.g&&e.g.ended&&(e.o=!0,ru(e))})).S(pu)}))}(this)}function iu(e){e.m=0,e.u=!0,e.F=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,ru(e)}function ru(e){var t;M((function(n){return 1==n.g?w(n,Promise.resolve(),2):e.h?(t=new ui("caststatuschanged"),e.dispatchEvent(t),au(e)||hu(e),void E(n)):n.return()}))}function su(e,t,n){e.h&&(ou(e),uu(e,{type:"event",targetName:t,event:n},e.l))}function ou(e){e.G.S(du);for(var t={video:{},player:{}},n=c(kc),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.g[i];if(e.h.T())for(var r in Lc)0==e.m%Lc[r]&&(t.player[r]=e.h[r]());for(var s in Ic)0==e.m%Ic[s]&&(t.player[s]=e.h[s]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),e.C&&(e.m+=1),uu(e,{type:"update",update:t},e.l),au(e)}function au(e){return!(!e.u||!e.g.duration&&!e.h.T()||(lu(e),e.u=!1,0))}function lu(e,t){var n={contentId:e.h.od(),streamType:e.h.T()?"LIVE":"BUFFERED",contentType:""};e.h.T()||(n.duration=e.g.duration),e.i&&(n.metadata=e.i),hu(e,void 0===t?0:t,n)}function cu(e,t,n,i){e.h&&uu(e,{type:"asyncComplete",id:n,error:i},e.l,t)}function uu(e,t,n,i){e.F&&(e=xc(t),i?n.getCastChannel(i).send(e):n.broadcast(e))}function hu(e,t,n){n=void 0===n?null:n;var i={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.o?fu:e.h.pd()?gu:e.g.paused?vu:mu,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};n&&(i.media=n),uu(e,{requestId:void 0===t?0:t,type:"MEDIA_STATUS",status:[i]},e.s)}g(Wc,di),(i=Wc.prototype).destroy=function(e){return e&&this.g.zb(),this.m&&(this.m.release(),this.m=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.s=this.l=this.i=null,di.prototype.release.call(this),Promise.all(e)},i.vf=function(){return this.l},i.kf=function(){return this.s},i.Me=function(){return this.g.m&&Vc},i.ta=function(){return this.g.ta()},i.Ld=function(){return this.g.Ld()},i.cast=function(){var e,t=this;return M((function(n){return 1==n.g?(e=Jc(t),w(n,t.g.cast(e),2)):t.h?w(n,t.h.Zd(),0):n.return()}))},i.Rd=function(e){this.g.Rd(e)},i.Yf=function(){!function(e){if(e.h){var t=e.L();chrome.cast.requestSession((function(n){return Rc(e,t,n)}),(function(t){return jc(e,t)}))}}(this.g)},i.zb=function(){this.g.zb()},i.Pe=function(e){var t=this;return M((function(n){if(1==n.g)return e==t.C?n.return():(t.C=e,t.g.zb(),w(n,t.g.destroy(),2));t.g=null,t.g=new Dc(e,(function(){return Yc(t)}),(function(){return Qc(t)}),(function(e,n){return tu(t,e,n)}),(function(){return Zc(t)}),(function(){return Jc(t)})),t.g.init(),E(n)}))},$("shaka.cast.CastProxy",Wc),Wc.prototype.changeReceiverId=Wc.prototype.Pe,Wc.prototype.forceDisconnect=Wc.prototype.zb,Wc.prototype.suggestDisconnect=Wc.prototype.Yf,Wc.prototype.setAppData=Wc.prototype.Rd,Wc.prototype.cast=Wc.prototype.cast,Wc.prototype.receiverName=Wc.prototype.Ld,Wc.prototype.isCasting=Wc.prototype.ta,Wc.prototype.canCast=Wc.prototype.Me,Wc.prototype.getPlayer=Wc.prototype.kf,Wc.prototype.getVideo=Wc.prototype.vf,Wc.prototype.destroy=Wc.prototype.destroy,g(nu,di),(i=nu.prototype).isConnected=function(){return this.F},i.zf=function(){return this.o},i.Uf=function(e){this.i=e},i.Se=function(){this.i=null},i.Vf=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},i.Tf=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},i.Sf=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},i.destroy=function(){var e,t=this;return M((function(n){if(1==n.g)return t.j&&(t.j.release(),t.j=null),e=[],t.h&&(e.push(t.h.destroy()),t.h=null),t.G&&(t.G.stop(),t.G=null),t.g=null,t.I=null,t.D=null,t.F=!1,t.o=!0,t.l=null,t.s=null,di.prototype.release.call(t),w(n,Promise.all(e),2);cast.receiver.CastReceiverManager.getInstance().stop(),E(n)}))},$("shaka.cast.CastReceiver",nu),nu.prototype.destroy=nu.prototype.destroy,nu.prototype.setContentArtist=nu.prototype.Sf,nu.prototype.setContentImage=nu.prototype.Tf,nu.prototype.setContentTitle=nu.prototype.Vf,nu.prototype.clearContentMetadata=nu.prototype.Se,nu.prototype.setContentMetadata=nu.prototype.Uf,nu.prototype.isIdle=nu.prototype.zf,nu.prototype.isConnected=nu.prototype.isConnected;var du=.5,pu=5,fu="IDLE",mu="PLAYING",gu="BUFFERING",vu="PAUSED";function yu(e){var t=this;this.g=[],this.h=[],this.data=[],(new gr).box("moov",vr).R("pssh",(function(e){if(!(1<e.version)){var n=ke(e.reader.O,-12,e.size);if(t.data.push(n),t.g.push(Ut(e.reader.Za(16))),0<e.version){n=e.reader.M();for(var i=0;i<n;i++){var r=Ut(e.reader.Za(16));t.h.push(r)}}}})).parse(e)}function bu(e,t){var n=e.length,i=t.length+16+n,r=new Uint8Array(i),s=Ce(r),o=0;return s.setUint32(o,i),o+=4,s.setUint32(o,1886614376),o+=4,s.setUint32(o,0),o+=4,r.set(t,o),o+=t.length,s.setUint32(o,n),r.set(e,o+4),r}function wu(e,t){var n=_u(e,t);return 1!=n.length?null:n[0]}function Eu(e,t,n){return 1!=(e=xu(e,t,n)).length?null:e[0]}function _u(e,t){for(var n=[],i=c(e.childNodes),r=i.next();!r.done;r=i.next())(r=r.value)instanceof Element&&r.tagName==t&&n.push(r);return n}function xu(e,t,n){for(var i=[],r=(e=c(e.childNodes)).next();!r.done;r=e.next())(r=r.value)instanceof Element&&r.localName==n&&r.namespaceURI==t&&i.push(r);return i}function Su(e,t,n){return e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function Tu(e,t,n){for(var i=(t=c(t)).next();!i.done;i=t.next())if(i=i.value,e.hasAttributeNS(i,n))return e.getAttributeNS(i,n);return null}function ku(e){return Array.from(e.childNodes).every(Cu)?e.textContent.trim():null}function Cu(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE}function Pu(e,t,n,i){i=void 0===i?null:i;var r=null;return null!=(e=e.getAttribute(t))&&(r=n(e)),null==r?i:r}function Iu(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:Math.floor(e/1e3)):null}function Lu(e){return e&&(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e))?(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null):null}function Au(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t?(e=Number(t[1]),isFinite(e)?(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null):null):null}function Mu(e){return 0==(e=Number(e))%1?e:null}function Ou(e){return 0==(e=Number(e))%1&&0<e?e:null}function Nu(e){return 0==(e=Number(e))%1&&0<=e?e:null}function Du(e){return e=Number(e),isNaN(e)?null:e}function Ru(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function ju(e,t){var n=new DOMParser,i=null;try{i=n.parseFromString(e,"text/xml")}catch(e){return null}return!(n=i.documentElement)||n.getElementsByTagName("parsererror").length||i.documentElement.tagName!=t?null:n}function Bu(e,t){try{return ju(Pt(e),t)}catch(e){return null}}function Uu(e,t,n){var i=function(e){for(var t=[],n=(e=c(e)).next();!n.done;n=e.next())(n=Fu(n.value))&&t.push(n);return t}(e),r=null;e=[];var s=[],o=new Set(i.map((function(e){return e.keyId})));if(o.delete(null),1<o.size)throw new Fe(2,4,4010);if(t||(s=i.filter((function(e){return"urn:mpeg:dash:mp4protection:2011"!=e.we||(r=e.init||r,!1)}))).length&&(e=function(e,t,n){for(var i=[],r=(t=c(t)).next();!r.done;r=t.next()){var s,o=n[(r=r.value).we];if(o)s=(s=Eu(r.node,"urn:microsoft:playready","pro"))?[{initData:bu(s=jt(s.textContent),new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149])),initDataType:"cenc",keyId:r.keyId}]:null,s=rt(o,r.init||e||s),(o=qu.get(o))&&(s.licenseServerUri=o(r)),i.push(s)}return i}(r,s,n),0==e.length&&(e=[rt("",r)])),i.length&&(t||!s.length))for(e=[],n=(t=c(Object.values(n))).next();!n.done;n=t.next())"org.w3.clearkey"!=(n=n.value)&&e.push(rt(n,r));if(o=Array.from(o)[0]||null)for(n=(t=c(e)).next();!n.done;n=t.next())for(i=(n=c(n.value.initData)).next();!i.done;i=n.next())i.value.keyId=o;return{de:o,Kg:r,drmInfos:e,he:!0}}function $u(e){return(e=Eu(e.node,"urn:microsoft:playready","pro"))&&(e=function(e){var t=0,n=Ce(e),i=n.getUint32(t,!0);if(i!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){i=n.getUint16(e,!0),e+=2;var r=n.getUint16(e,!0);if(e+=2,0!=(1&r)||r+e>n.byteLength){n=[];break e}var s=ke(n,e,r);t.push({type:i,value:s}),e+=r}n=t}return n}(e=jt(e.textContent)).filter((function(e){return e.type===Hu}))[0])&&(e=ju(e=It(e.value,!0),"WRMHEADER"))?function(e){for(var t=(e=c(e.getElementsByTagName("DATA"))).next();!t.done;t=e.next())for(var n=(t=c(t.value.childNodes)).next();!n.done;n=t.next())if((n=n.value)instanceof Element&&"LA_URL"==n.tagName)return n.textContent;return""}(e):""}function Fu(e){var t=e.getAttribute("schemeIdUri"),n=Su(e,"urn:mpeg:cenc:2013","default_KID"),i=xu(e,"urn:mpeg:cenc:2013","pssh").map(ku);if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase()).includes(" "))throw new Fe(2,4,4009);var r=[];try{r=i.map((function(e){return{initDataType:"cenc",initData:jt(e),keyId:null}}))}catch(e){throw new Fe(2,4,4007)}return{node:e,we:t,keyId:n,init:0<r.length?r:null}}var Hu=1,qu=(new Map).set("com.widevine.alpha",(function(e){return(e=Eu(e.node,"urn:microsoft","laurl"))&&e.getAttribute("licenseUrl")||""})).set("com.microsoft.playready",$u).set("com.microsoft.playready.recommendation",$u).set("com.microsoft.playready.software",$u).set("com.microsoft.playready.hardware",$u);function Vu(t,n,i,r,s){var o={RepresentationID:n,Number:i,Bandwidth:r,Time:s};return t.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,(function(t,n,i,r){if("$$"==t)return"$";var s=o[n];if(null==s)return t;switch("RepresentationID"==n&&i&&(i=void 0),"Time"==n&&(s=Math.round(s)),r){case void 0:case"d":case"i":case"u":t=s.toString();break;case"o":t=s.toString(8);break;case"x":t=s.toString(16);break;case"X":t=s.toString(16).toUpperCase();break;default:t=s.toString()}return i=e.parseInt(i,10)||1,Array(Math.max(0,i-t.length)+1).join("0")+t}))}function zu(e,t){var n=Gu(e,t,"timescale"),i=1;n&&(i=Ou(n)||1);var r=Gu(e,t,"duration");n=Ou(r||""),"image"==e.H.contentType&&(n=Du(r||"")),n&&(n/=i);var s=Gu(e,t,"startNumber");r=Number(Gu(e,t,"presentationTimeOffset"))||0;var o=Nu(s||"");null!=s&&null!=o||(o=1);var a=Ku(e,t,"SegmentTimeline");if(s=null,a){s=i;var l=e.U.duration||1/0;a=_u(a,"S");for(var c=[],u=-r,h=0;h<a.length;++h){var d=a[h],p=a[h+1],f=Pu(d,"t",Nu),m=Pu(d,"d",Nu);if(d=Pu(d,"r",Mu),null!=f&&(f-=r),!m)break;if(f=null!=f?f:u,0>(d=d||0))if(p){if(null==(p=Pu(p,"t",Nu)))break;if(f>=p)break;d=Math.ceil((p-f)/m)-1}else{if(1/0==l)break;if(f/s>=l)break;d=Math.ceil((l*s-f)/m)-1}for(0<c.length&&f!=u&&(c[c.length-1].end=f/s),p=0;p<=d;++p)u=f+m,c.push({start:f/s,end:u/s,bg:f}),f=u}s=c}return{timescale:i,ia:n,Kb:o,Ta:r/i||0,$d:r,timeline:s}}function Gu(e,t,n){return[t(e.H),t(e.ka),t(e.aa)].filter(Re).map((function(e){return e.getAttribute(n)})).reduce((function(e,t){return e||t}))}function Ku(e,t,n){return[t(e.H),t(e.ka),t(e.aa)].filter(Re).map((function(e){return wu(e,n)})).reduce((function(e,t){return e||t}))}function Wu(e,t,n,i,r,s){if(s=void 0===s?0:s,Su(e,"http://www.w3.org/1999/xlink","href")){var o=function(e,t,n,i,r,s){for(var o=Su(e,"http://www.w3.org/1999/xlink","href"),a=Su(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",l=c(Array.from(e.attributes)),u=l.next();!u.done;u=l.next())"http://www.w3.org/1999/xlink"==(u=u.value).namespaceURI&&e.removeAttributeNS(u.namespaceURI,u.localName);if(5<=s)return si(new Fe(2,4,4028));if("onLoad"!=a)return si(new Fe(2,4,4027));var h=it([i],[o]);return r.request(0,bi(h,t)).$((function(i){if(!(i=Bu(i.data,e.tagName)))return si(new Fe(2,4,4001,o));for(;e.childNodes.length;)e.removeChild(e.childNodes[0]);for(;i.childNodes.length;){var a=i.childNodes[0];i.removeChild(a),e.appendChild(a)}for(a=(i=c(Array.from(i.attributes))).next();!a.done;a=i.next())e.setAttributeNode(a.value.cloneNode(!1));return Wu(e,t,n,h[0],r,s+1)}))}(e,t,n,i,r,s);return n&&(o=o.$(void 0,(function(){return Wu(e,t,n,i,r,s)}))),o}o=[];for(var a=c(Array.from(e.childNodes)),l=a.next();!l.done;l=a.next())(l=l.value)instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==Su(l,"http://www.w3.org/1999/xlink","href")?e.removeChild(l):"SegmentTimeline"!=l.tagName&&o.push(Wu(l,t,n,i,r,s)));return ci(o).$((function(){return e}))}function Xu(e){this.h=Ce(e),this.g=new pr(this.h,0)}function Ju(e){var t=Yu(e);if(7<t.length)throw new Fe(2,3,3002);for(var n=0,i=(t=c(t)).next();!i.done;i=t.next())n=256*n+i.value;t=Yu(e);e:{for(var r=(i=c(Qu)).next();!r.done;r=i.next())if(xe(t,new Uint8Array(r.value))){i=!0;break e}i=!1}if(i)t=e.h.byteLength-e.g.X();else{if(8==t.length&&224&t[1])throw new Fe(2,3,3001);for(r=i=0;r<t.length;r++){var s=t[r];i=0==r?s&(1<<8-t.length)-1:256*i+s}t=i}return t=e.g.X()+t<=e.h.byteLength?t:e.h.byteLength-e.g.X(),i=Ce(e.h,e.g.X(),t),e.g.skip(t),new Zu(n,i)}function Yu(e){var t=e.g.X(),n=e.g.Y();if(0==n)throw new Fe(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),ke(e.h,t,n)}Xu.prototype.ma=function(){return this.g.ma()};var Qu=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function Zu(e,t){this.id=e,this.g=t}function eh(e){if(8<e.g.byteLength)throw new Fe(2,3,3002);if(8==e.g.byteLength&&224&e.g.getUint8(0))throw new Fe(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++)t=256*t+e.g.getUint8(n);return t}function th(e){var t=new Xu(e.g);if(179!=(e=Ju(t)).id)throw new Fe(2,3,3013);if(e=eh(e),183!=(t=Ju(t)).id)throw new Fe(2,3,3012);t=new Xu(t.g);for(var n=0;t.ma();){var i=Ju(t);if(241==i.id){n=eh(i);break}}return{cg:e,Mf:n}}function nh(e,t){var n=Ku(e,t,"Initialization");if(!n)return null;var i=e.H.ya,r=n.getAttribute("sourceURL");r&&(i=it(e.H.ya,[r])),r=0;var s=null;return(n=Pu(n,"range",Au))&&(r=n.start,s=n.end),new Zs((function(){return i}),r,s,ah(e))}function ih(e,t,n,i,r,s,o){var a,l,c,u,h,d,p,f,m,g,v,y,b,E,_;return M((function(x){if(1==x.g)return a=e.presentationTimeline,l=!e.Wa||!e.U.oe,c=e.U.start,u=e.U.duration,h=e.H.mimeType.split("/")[1],p=null,f=[(d=t)(i,r,s),"webm"==h?d(n.sa(),n.pa,n.ga):null],d=null,w(x,Promise.all(f),2);if(m=x.h,g=m[0],v=m[1]||null,b=c-o,E=c,_=u?c+u:1/0,"mp4"==h)var S=function(e,t,n,i,r,s,o){var a,l=(new gr).R("sidx",(function(e){a=function(e,t,n,i,r,s,o){var a=[];o.reader.skip(4);var l=o.reader.M();if(0==l)throw new Fe(2,3,3005);if(0==o.version)var c=o.reader.M(),u=o.reader.M();else c=o.reader.Jb(),u=o.reader.Jb();o.reader.skip(2);var h=o.reader.Ib();for(e=e+o.size+u,u=0;u<h;u++){var d=o.reader.M(),p=(2147483648&d)>>>31;d&=2147483647;var f=o.reader.M();if(o.reader.skip(4),1==p)throw new Fe(2,3,3006);a.push(new eo(c/l+n,(c+f)/l+n,(function(){return s}),e,e+d-1,t,n,i,r)),c+=f,e+=d}return o.parser.stop(),a}(t,i,r,s,o,n,e)}));if(e&&l.parse(e),a)return a;throw new Fe(2,3,3004)}(g,r,i,n,b,E,_);else{if(440786851!=Ju(S=new Xu(v)).id)throw new Fe(2,3,3008);var T=Ju(S);if(408125543!=T.id)throw new Fe(2,3,3009);S=T.g.byteOffset,T=new Xu(T.g);for(var k=null;T.ma();){var C=Ju(T);if(357149030==C.id){k=C;break}}if(!k)throw new Fe(2,3,3010);for(k=new Xu(k.g),C=1e6,T=null;k.ma();){var P=Ju(k);if(2807729==P.id)C=eh(P);else if(17545==P.id)if(4==P.g.byteLength)T=P.g.getFloat32(0);else{if(8!=P.g.byteLength)throw new Fe(2,3,3003);T=P.g.getFloat64(0)}}if(null==T)throw new Fe(2,3,3011);if(T*=k=C/1e9,475249515!=(C=Ju(new Xu(g))).id)throw new Fe(2,3,3007);S=function(e,t,n,i,r,s,o,a,l){function c(){return r}var u=[];e=new Xu(e.g);for(var h=null,d=null;e.ma();){var p=Ju(e);if(187==p.id){var f=th(p);f&&(p=n*f.cg,f=t+f.Mf,null!=h&&u.push(new eo(h+o,p+o,c,d,f-1,s,o,a,l)),h=p,d=f)}}return null!=h&&u.push(new eo(h+o,i+o,c,d,null,s,o,a,l)),u}(C,S,k,T,i,n,b,E,_)}return y=S,a.Fb(y),p=new _o(y),l&&p.Xa(E,_,!0),x.return(p)}))}function rh(e){return e.mc}function sh(e){var t=Ku(e,rh,"RepresentationIndex");return e=Au((e=Gu(e,rh,"indexRange"))||""),t&&(e=Pu(t,"range",Au,e)),e}function oh(e,t){var n=e.H.mimeType.split("/")[1];if(e.H.contentType!=at&&"mp4"!=n&&"webm"!=n)throw new Fe(2,4,4006);if("webm"==n&&!t)throw new Fe(2,4,4005)}function ah(e){var t=e.H;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.Mc,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null}}function lh(e){return e.$a}function ch(e){return e.nc}function uh(){this.l=[],this.g=[],this.h=[],this.j=[],this.i=[],this.m=new Set}function hh(e){var t,n,i,r,s,o,a,l,u,h,d,p,f,m,g,v,y,b,E,_,x,S,T,k;return M((function(C){switch(C.g){case 1:if(t=lt,1==e.length)return C.return(e[0]);for(n=e.map((function(e){return e.filter((function(e){return e.type==t.bb}))})),i=e.map((function(e){return e.filter((function(e){return e.type==t.Na}))})),r=e.map((function(e){return e.filter((function(e){return e.type==t.Z}))})),s=e.map((function(e){return e.filter((function(e){return e.type==t.Rb}))})),o=c(r),a=o.next();!a.done;a=o.next())a.value.push(Ph(t.Z));for(l=c(s),u=l.next();!u.done;u=l.next())u.value.push(Ph(t.Rb));return w(C,dh([],n,0,vh,bh),2);case 2:return h=C.h,w(C,dh([],i,0,vh,bh),3);case 3:return d=C.h,w(C,dh([],r,0,vh,bh),4);case 4:return p=C.h,w(C,dh([],s,0,vh,bh),5);case 5:if(f=C.h,m=0,d.length&&h.length)for(b=c(h),E=b.next();!E.done;E=b.next())for(_=E.value,x=c(d),S=x.next();!S.done;S=x.next())T=S.value,k=m++,T.variantIds.push(k),_.variantIds.push(k);else for(g=d.concat(h),v=c(g),y=v.next();!y.done;y=v.next())y.value.variantIds=[m++];return C.return(d.concat(h).concat(p).concat(f))}}))}function dh(e,t,n,i,r){var s,o,a,l,u,h,d,p,f,m,g,v,y,b,E,_,x,S;return M((function(T){switch(T.g){case 1:for(s=lt,o=[],a=0;a<t.length;a++)a>=n?o.push(new Set(t[a])):o.push(new Set);l=c(e),u=l.next();case 2:if(u.done){T.B(4);break}return w(T,function(e,t,n,i,r){return M((function(s){return 1==s.g?(wh(t,e),e.matchedStreams?e.segmentIndex?w(s,ph(e,n),2):s.B(2):s.return(!1)):(mh(e,n,i,r),s.return(!0))}))}(u.value,t,n,r,o),5);case 5:if(!T.h)throw new Fe(2,4,4037);u=l.next(),T.B(2);break;case 4:for(h=c(o),d=h.next();!d.done;d=h.next())for(p=d.value,f=c(p),m=f.next();!m.done;m=f.next())g=m.value,(v=fh(g,t,i,r,o))&&e.push(v);for(y=c(o),d=y.next();!d.done;d=y.next())for(b=d.value,E={},_=c(b),m=_.next();!m.done;E={Va:E.Va},m=_.next())if(E.Va=m.value,x=E.Va.type==s.Z&&!E.Va.language,S=E.Va.type==s.Rb&&!E.Va.tilesLayout,!x&&!S&&e.some(function(e){return function(t){return t.mimeType==e.Va.mimeType&&Kt(t.codecs)==Kt(e.Va.codecs)}}(E)))throw new Fe(2,4,4037);return T.return(e)}}))}function ph(e,t){var n,i,r,s,o,a,l;return M((function(u){if(1==u.g){for(n=[],i=e.matchedStreams,r=c(i),s=r.next();!s.done;s=r.next())o=s.value,n.push(o.createSegmentIndex()),o.trickModeVideo&&!o.trickModeVideo.segmentIndex&&n.push(o.trickModeVideo.createSegmentIndex());return w(u,Promise.all(n),2)}if(e.segmentIndex instanceof To)for(a=0;a<i.length;a++)(l=i[a]).segmentIndex&&a>=t&&e.segmentIndex.j.push(l.segmentIndex);E(u)}))}function fh(e,t,n,i,r){var s=n(e);return wh(t,s),s.createSegmentIndex&&(s.createSegmentIndex=function(){return M((function(e){return s.segmentIndex?e.B(0):(s.segmentIndex=new To,w(e,ph(s,0),0))}))}),s.matchedStreams?(mh(s,0,i,r),s):null}function mh(e,t,n,i){for(var r=e.matchedStreams,s=0;s<r.length;s++)if(s>=t){var o=r[s];n(e,o);var a=!0;"audio"==e.type&&0==ln(e.language,o.language)&&(a=!1),a&&i[s].delete(o)}}function gh(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var e=c(t.matchedStreams),n=e.next();!n.done;n=e.next())(n=n.value).segmentIndex&&(n.segmentIndex.release(),n.segmentIndex=null)},t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set,t.closedCaptions=null,t.trickModeVideo=null,t}function vh(e){return(e=Object.assign({},e)).keyIds=new Set,e.segments=[],e.variantIds=[],e.closedCaptions=null,e}function yh(e,t){var n,i;e.roles=Array.from(new Set(e.roles.concat(t.roles))),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=Array.from(new Set(e.emsgSchemeIdUris.concat(t.emsgSchemeIdUris)))),e.keyIds=(n=e.keyIds,i=t.keyIds,new Set([].concat(u(n),u(i)))),null==e.originalId?e.originalId=t.originalId:e.originalId+=","+(t.originalId||"");var r=Qi(e.drmInfos,t.drmInfos);if(t.drmInfos.length&&e.drmInfos.length&&!r.length)throw new Fe(2,4,4038);if(e.drmInfos=r,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions){e.closedCaptions||(e.closedCaptions=new Map);for(var s=(r=c(t.closedCaptions)).next();!s.done;s=r.next()){var o=c(s.value);s=o.next().value,o=o.next().value,e.closedCaptions.set(s,o)}}t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=gh(t.trickModeVideo),e.trickModeVideo.createSegmentIndex=function(){return e.trickModeVideo.segmentIndex=e.segmentIndex.clone(),Promise.resolve()}),yh(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&yh(e.trickModeVideo,t)}function bh(e,t){e.roles=Array.from(new Set(e.roles.concat(t.roles)));var n=t.keyIds;if(n=new Set([].concat(u(e.keyIds),u(n))),e.keyIds=n,e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,u(t.segments)),t.closedCaptions){e.closedCaptions||(e.closedCaptions=new Map);for(var i=(n=c(t.closedCaptions)).next();!i.done;i=n.next()){var r=c(i.value);i=r.next().value,r=r.next().value,e.closedCaptions.set(i,r)}}}function wh(e,t){for(var n=[],i=c(e),r=i.next();!r.done;r=i.next()){for(var s=t,o={audio:Eh,video:Eh,text:_h,image:xh}[s.type],a={audio:Sh,video:Th,text:kh,image:Ch}[s.type],l=null,u=(r=c(r.value)).next();!u.done;u=r.next())!o(s,u=u.value)||l&&!a(s,l,u)||(l=u);if(!(s=l))return;n.push(s)}t.matchedStreams=n}function Eh(e,t){var n;if(!(n=t.mimeType!=e.mimeType||Kt(t.codecs)!=Kt(e.codecs))&&(n=e.drmInfos)){n=e.drmInfos;var i=t.drmInfos;n=!(!n.length||!i.length||0<Qi(n,i).length)}return!n}function _h(e,t){return!!e.language&&(!t.language||0!=ln(e.language,t.language)&&t.kind==e.kind)}function xh(e){return!!e.tilesLayout}function Sh(e,t,n){if(e.id==n.id)return!0;var i=ln(e.language,t.language),r=ln(e.language,n.language);return r>i||!(r<i)&&(!(t.primary||!n.primary)||!(t.primary&&!n.primary)&&(e.roles.length?(i=t.roles.filter((function(t){return e.roles.includes(t)})),(r=n.roles.filter((function(t){return e.roles.includes(t)}))).length>i.length||!(r.length<i.length)&&n.roles.length<t.roles.length):!(n.roles.length||!t.roles.length)||!(n.roles.length&&!t.roles.length)&&((i=Lh(e.channelsCount,t.channelsCount,n.channelsCount))==Mh||i!=Nh&&((i=Lh(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate))==Mh||i!=Nh&&!(!e.bandwidth||Ah(e.bandwidth,t.bandwidth,n.bandwidth)!=Mh)))))}function Th(e,t,n){if(e.id==n.id)return!0;var i=Lh(e.width*e.height,t.width*t.height,n.width*n.height);if(i==Mh)return!0;if(i==Nh)return!1;if(e.frameRate){if((i=Lh(e.frameRate,t.frameRate,n.frameRate))==Mh)return!0;if(i==Nh)return!1}return!(!e.bandwidth||Ah(e.bandwidth,t.bandwidth,n.bandwidth)!=Mh)}function kh(e,t,n){if(e.id==n.id)return!0;var i=ln(e.language,t.language),r=ln(e.language,n.language);if(r>i)return!0;if(r<i)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(e.roles.length){if(i=t.roles.filter((function(t){return e.roles.includes(t)})),(r=n.roles.filter((function(t){return e.roles.includes(t)}))).length>i.length)return!0;if(r.length<i.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return n.mimeType==e.mimeType&&n.codecs==e.codecs&&(t.mimeType!=e.mimeType||t.codecs!=e.codecs)}function Ch(e,t,n){return e.id==n.id||Lh(e.width*e.height,t.width*t.height,n.width*n.height)==Mh}function Ph(e){return{id:0,originalId:"",primary:!1,type:e,mimeType:"",codecs:"",language:"",label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null}}function Ih(e){return{id:0,originalId:"",createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new _o([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null}}function Lh(e,t,n){if(t==e&&e!=n)return Nh;if(n==e&&e!=t)return Mh;if(t>e){if(n<=e||n-e<t-e)return Mh;if(n-e>t-e)return Nh}else{if(n>e)return Nh;if(e-n<e-t)return Mh;if(e-n>e-t)return Nh}return Oh}function Ah(e,t,n){return t=Math.abs(e-t),(e=Math.abs(e-n))<t?Mh:t<e?Nh:Oh}uh.prototype.release=function(){for(var e=c(this.g.concat(this.h,this.j,this.i)),t=e.next();!t.done;t=e.next())(t=t.value).segmentIndex&&t.segmentIndex.release();this.g=[],this.h=[],this.j=[],this.i=[],this.l=[]};var Mh=1,Oh=0,Nh=-1;function Dh(){var e=this;this.h=this.g=null,this.m=[],this.i=null,this.G=1,this.l={},this.N={},this.j=new uh,this.F=0,this.I=new F(5),this.D=new pt((function(){!function(e){var t,n;M((function(i){switch(i.g){case 1:return t=0,_(i,2),w(i,Rh(e),4);case 4:t=i.h,S(i,3);break;case 2:n=T(i),e.h&&(n.severity=1,e.h.onError(n));case 3:if(!e.h)return i.return();$h(e,t),E(i)}}))}(e)})),this.o=new mi,this.s=null,this.L=[],this.u=1/0,this.C=!1}function Rh(e){var t,n,i,r,s,o,a;return M((function(l){return 1==l.g?(t=bi(e.m,e.g.retryParameters),n=e.h.networkingEngine,e.h.modifyManifestRequest(t,{format:"d"}),i=Date.now(),r=n.request(0,t),gi(e.o,r),w(l,r.promise,2)):3!=l.g?(s=l.h,e.h?(s.uri&&!e.m.includes(s.uri)&&e.m.unshift(s.uri),w(l,function(e,t,n){var i,r,s,o;return M((function(a){if(1==a.g){if(!(i=Bu(t,"MPD")))throw new Fe(2,4,4001,n);return e.g.dash.disableXlinkProcessing?a.return(jh(e,i,n)):(r=e.g.dash.xlinkFailGracefully,s=Wu(i,e.g.retryParameters,r,n,e.h.networkingEngine),gi(e.o,s),w(a,s.promise,2))}return o=a.h,a.return(jh(e,o,n))}))}(e,s.data,s.uri),3)):l.return(0)):(o=Date.now(),a=(o-i)/1e3,e.I.sample(1,a),l.return(a))}))}function jh(e,t,n){var i,r,s,o,a,l,u,h,d,p,f,m,g,v,y,b,x,k,C,P,I,L,A,O,N,D,R,j,B;return M((function(U){switch(U.g){case 1:if((i=e.g.dash.manifestPreprocessor)&&i(t),r=[n],0<(s=_u(t,"Location").map(ku).filter(Re)).length&&(o=it(r,s),r=e.m=o),a=_u(t,"BaseURL"),l=a.map(ku),u=it(r,l),h=0,a&&a.length&&(h=Pu(a[0],"availabilityTimeOffset",Du)||0),d=e.g.dash.ignoreMinBufferTime,p=0,d||(p=Pu(t,"minBufferTime",Lu)||0),e.F=Pu(t,"minimumUpdatePeriod",Lu,-1),f=Pu(t,"availabilityStartTime",Iu),m=Pu(t,"timeShiftBufferDepth",Lu),g=e.g.dash.ignoreSuggestedPresentationDelay,v=null,g||(v=Pu(t,"suggestedPresentationDelay",Lu)),y=e.g.dash.ignoreMaxSegmentDuration,b=null,y||(b=Pu(t,"maxSegmentDuration",Lu)),x=t.getAttribute("type")||"static",e.i)for(k=e.i.presentationTimeline,C=c(Object.values(e.l)),P=C.next();!P.done;P=C.next())(I=P.value).segmentIndex&&I.segmentIndex.cb(k.Qa());else L=e.g.defaultPresentationDelay||1.5*p,k=new to(f,null!=v?v:L,e.g.dash.autoCorrectDrift);return k.oc("static"==x),k.T()&&!isNaN(e.g.availabilityWindowOverride)&&(m=e.g.availabilityWindowOverride),null==m&&(m=1/0),k.Vd(m),A=t.getAttribute("profiles")||"",O={Wa:"static"!=x,presentationTimeline:k,aa:null,U:null,ka:null,H:null,bandwidth:0,me:!1,yb:h,profiles:A.split(",")},N=function(e,t,n,i){var r=Pu(i,"mediaPresentationDuration",Lu),s=[],o=0;i=_u(i,"Period");for(var a=0;a<i.length;a++){var l=i[a],c=i[a+1],u=Pu(l,"start",Lu,o),h=l.id,d=Pu(l,"duration",Lu),p=null;if(c){var f=Pu(c,"start",Lu);null!=f&&(p=f-u)}else null!=r&&(p=r-u);if(null==p&&(p=d),!(null!==e.s&&null!==h&&null!==u&&u<e.s)||e.L.includes(h)||a+1==i.length){if(null!==u&&(null===e.s||u>e.s)&&(e.s=u),o=Bh(e,t,n,{start:u,duration:p,node:l,oe:null==p||!c}),s.push(o),t.aa.id&&p&&(e.N[t.aa.id]=p),null==p){o=null;break}o=u+p}}return e.L=s.map((function(e){return e.id})),null!=r?{periods:s,duration:r,fe:!1}:{periods:s,duration:o,fe:!0}}(e,O,u,t),D=N.duration,R=N.periods,"static"!=x&&N.fe||k.Ia(D||1/0),e.u&&!e.C&&e.h.isAutoLowLatencyMode()&&(e.h.enableLowLatencyMode(),e.C=e.h.isLowLatencyMode()),e.C?k.ze(e.u):e.u&&G("Low-latency DASH live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),k.Ed(b||1),w(U,function(e,t,n){var i,r,s,o,a,l,u,h,d,p,f,m,g,v,y,b,_,x,S,T,k,C,P,I,L,A,O,N;return M((function(M){switch(M.g){case 1:if(i=lt,function(e){for(var t=(e=c(e)).next();!t.done;t=e.next()){for(var n=[],i=c((t=t.value).wc),r=i.next();!r.done;r=i.next()){r=r.value;for(var s=!1,o=c(n),a=o.next();!a.done;a=o.next())a=a.value,r.id!=a.id&&r.channelsCount==a.channelsCount&&r.language==a.language&&r.bandwidth==a.bandwidth&&r.label==a.label&&r.codecs==a.codecs&&r.mimeType==a.mimeType&&ee(r.roles,a.roles)&&r.audioSamplingRate==a.audioSamplingRate&&r.primary==a.primary&&(s=!0);s||n.push(r)}t.wc=n}}(t),function(e){for(var t=(e=c(e)).next();!t.done;t=e.next()){for(var n=[],i=c((t=t.value).Vc),r=i.next();!r.done;r=i.next()){r=r.value;for(var s=!1,o=c(n),a=o.next();!a.done;a=o.next())a=a.value,r.id!=a.id&&r.width==a.width&&r.frameRate==a.frameRate&&r.codecs==a.codecs&&r.mimeType==a.mimeType&&r.label==a.label&&ee(r.roles,a.roles)&&ji(r.closedCaptions,a.closedCaptions)&&r.bandwidth==a.bandwidth&&(s=!0);s||n.push(r)}t.Vc=n}}(t),function(e){for(var t=(e=c(e)).next();!t.done;t=e.next()){for(var n=[],i=c((t=t.value).textStreams),r=i.next();!r.done;r=i.next()){r=r.value;for(var s=!1,o=c(n),a=o.next();!a.done;a=o.next())a=a.value,r.id!=a.id&&r.language==a.language&&r.label==a.label&&r.codecs==a.codecs&&r.mimeType==a.mimeType&&r.bandwidth==a.bandwidth&&ee(r.roles,a.roles)&&(s=!0);s||n.push(r)}t.textStreams=n}}(t),function(e){for(var t=(e=c(e)).next();!t.done;t=e.next()){for(var n=[],i=c((t=t.value).imageStreams),r=i.next();!r.done;r=i.next()){r=r.value;for(var s=!1,o=c(n),a=o.next();!a.done;a=o.next())a=a.value,r.id!=a.id&&r.width==a.width&&r.codecs==a.codecs&&r.mimeType==a.mimeType&&(s=!0);s||n.push(r)}t.imageStreams=n}}(t),!n&&1==t.length){r=t[0],e.g=r.wc,e.h=r.Vc,e.j=r.textStreams,e.i=r.imageStreams,M.B(2);break}for(s=-1,o=0;o<t.length;o++)a=t[o],e.m.has(a.id)||(e.m.add(a.id),-1==s&&(s=o));if(-1==s)return M.return();for(l=t.map((function(e){return e.wc})),u=t.map((function(e){return e.Vc})),h=t.map((function(e){return e.textStreams})),d=t.map((function(e){return e.imageStreams})),p=c(h),f=p.next();!f.done;f=p.next())f.value.push(Ih(i.Z));for(m=c(d),g=m.next();!g.done;g=m.next())g.value.push(Ih(i.Rb));return w(M,dh(e.g,l,s,gh,yh),3);case 3:return w(M,dh(e.h,u,s,gh,yh),4);case 4:return w(M,dh(e.j,h,s,gh,yh),5);case 5:return w(M,dh(e.i,d,s,gh,yh),2);case 2:if(v=0,y=[],e.h.length&&e.g.length)for(k=c(e.g),C=k.next();!C.done;C=k.next())for(P=C.value,I=c(e.h),L=I.next();!L.done;L=I.next())A=L.value,O=Qi(P.drmInfos,A.drmInfos),P.drmInfos.length&&A.drmInfos.length&&!O.length||(N=v++,y.push({id:N,language:P.language,primary:P.primary,audio:P,video:A,bandwidth:(P.bandwidth||0)+(A.bandwidth||0),drmInfos:O,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(b=e.h.concat(e.g),_=c(b),x=_.next();!x.done;x=_.next())S=x.value,T=v++,y.push({id:T,language:S.language,primary:S.primary,audio:S.type==i.bb?S:null,video:S.type==i.Na?S:null,bandwidth:S.bandwidth||0,drmInfos:S.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});e.l=y,E(M)}}))}(e.j,R,O.Wa),2);case 2:if(e.i){e.i.variants=e.j.l,e.i.textStreams=e.j.j.slice(),e.i.imageStreams=e.j.i,e.h.filter(e.i),U.B(3);break}if(e.i={presentationTimeline:k,variants:e.j.l,textStreams:e.j.j.slice(),imageStreams:e.j.i,offlineSessionIds:[],minBufferTime:p||0},!k.Ee()){U.B(4);break}return j=_u(t,"UTCTiming"),w(U,function(e,t,n){var i,r,s,o,a,l,u,h;return M((function(d){switch(d.g){case 1:i=n.map((function(e){return{scheme:e.getAttribute("schemeIdUri"),value:e.getAttribute("value")}})),r=e.g.dash.clockSyncUri,!i.length&&r&&i.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:r}),s=c(i),o=s.next();case 2:if(o.done){d.B(4);break}switch(a=o.value,_(d,5),l=a.scheme,u=a.value,l){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return d.B(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return d.B(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return h=Date.parse(u),d.return(isNaN(h)?0:h-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":G("NTP UTCTiming scheme is not supported");break;default:G("Unrecognized scheme in UTCTiming element",l)}d.B(9);break;case 7:return w(d,Hh(e,t,u,"HEAD"),10);case 10:return d.return(d.h);case 8:return w(d,Hh(e,t,u,"GET"),11);case 11:return d.return(d.h);case 9:S(d,3);break;case 5:T(d);case 3:o=s.next(),d.B(2);break;case 4:return G("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),d.return(0)}}))}(e,u,j),5);case 5:if(B=U.h,!e.h)return U.return();k.Ae(B);case 4:k.xd();case 3:e.h.makeTextStreamsForClosedCaptions(e.i),E(U)}}))}function Bh(e,t,n,i){t.aa=Fh(i.node,null,n),t.U=i,t.aa.yb=t.yb,t.aa.id||(t.aa.id="__shaka_period_"+i.start);var r=_u(i.node,"EventStream");n=t.presentationTimeline.Qa();for(var s=(r=c(r)).next();!s.done;s=r.next())qh(e,i.start,i.duration,s.value,n);if(n=_u(i.node,"AdaptationSet").map((function(n){return function(e,t,n){function i(e){switch(e){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.ka=Fh(n,t.aa,null);var r,s=!1,o=_u(n,"Role"),a=o.map((function(e){return e.getAttribute("value")})).filter(Re),l=void 0,h=t.ka.contentType==at;h&&(l="subtitle");for(var d=(o=c(o)).next();!d.done;d=o.next()){var p=(d=d.value).getAttribute("schemeIdUri");if(null==p||"urn:mpeg:dash:role:2011"==p)switch(d=d.getAttribute("value"),d){case"main":s=!0;break;case"caption":case"subtitle":l=d}}o=null,d=!1;for(var f=(p=c(p=_u(n,"EssentialProperty"))).next();!f.done;f=p.next()){var m=(f=f.value).getAttribute("schemeIdUri");"http://dashif.org/guidelines/trickmode"==m?o=f.getAttribute("value"):"urn:mpeg:mpegB:cicp:TransferCharacteristics"==m?r=i(parseInt(f.getAttribute("value"),10)):d=!0}for(f=(p=c(p=_u(n,"SupplementalProperty"))).next();!f.done;f=p.next())"urn:mpeg:mpegB:cicp:TransferCharacteristics"==(f=f.value).getAttribute("schemeIdUri")&&(r=i(parseInt(f.getAttribute("value"),10)));p=_u(n,"Accessibility");var g=new Map;for(f=(p=c(p)).next();!f.done;f=p.next())if(f=(m=f.value).getAttribute("schemeIdUri"),m=m.getAttribute("value"),"urn:scte:dash:cc:cea-608:2015"==f)if(f=1,null!=m)for(var v=c(m=m.split(";")),y=v.next();!y.done;y=v.next()){var b=y.value,_=y=void 0;b.includes("=")?(y=(b=b.split("="))[0].startsWith("CC")?b[0]:"CC"+b[0],_=b[1]||"und"):(y="CC"+f,2==m.length?f+=2:f++,_=b),g.set(y,an(_))}else g.set("CC1","und");else if("urn:scte:dash:cc:cea-708:2015"==f)if(f=1,null!=m)for(y=(m=c(m.split(";"))).next();!y.done;y=m.next())b=v=void 0,(y=y.value).includes("=")?(v="svc"+(y=y.split("="))[0],b=y[1].split(",")[0].split(":").pop()):(v="svc"+f,f++,b=y),g.set(v,an(b));else g.set("svc1","und");else"urn:mpeg:dash:role:2011"==f&&null!=m&&(a.push(m),"captions"==m&&(l="caption"));if(d)return null;var x=Uu(d=_u(n,"ContentProtection"),e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),S=an(n.getAttribute("lang")||"und"),T=n.getAttribute("label");if((d=_u(n,"Label"))&&d.length&&(d=d[0]).textContent&&(T=d.textContent),n=(d=_u(n,"Representation")).map((function(n){return(n=function(e,t,n,i,r,s,o,a,l,u){if(t.H=Fh(u,t.ka,null),e.u=Math.min(e.u,t.H.yb),!function(e){var t=e.mc?1:0;return t+=e.$a?1:0,0==(t+=e.nc?1:0)?e.contentType==at||"application"==e.contentType:(1!=t&&(e.mc&&(e.$a=null),e.nc=null),!0)}(t.H))return null;var h=t.U.start;t.bandwidth=Pu(u,"bandwidth",Ou)||0;var d=t.H.contentType,p=d==at||"application"==d;d="image"==d;try{var f=function(t,n,i){return function(e,t,n,i){var r,s,o,a,l;return M((function(c){return 1==c.g?(r=xi,s=jo(t,n,i,e.g.retryParameters),o=e.h.networkingEngine,a=o.request(r,s),gi(e.o,a),w(c,a.promise,2)):(l=c.h,c.return(l.data))}))}(e,t,n,i)};if(t.H.mc)var m=function(e,t){var n=Number(Gu(e,rh,"presentationTimeOffset"))||0,i=Gu(e,rh,"timescale"),r=1;i&&(r=Ou(i)||1);var s=n/r||0,o=nh(e,rh);!function(e,t){if(oh(e,t),!sh(e))throw new Fe(2,4,4002)}(e,o);var a=fi(e);return{Ab:function(){var e=Ku(a,rh,"RepresentationIndex"),n=a.H.ya;return e&&(e=e.getAttribute("sourceURL"))&&(n=it(a.H.ya,[e])),e=sh(a),ih(a,t,o,n,e.start,e.end,s)}}}(t,f);else if(t.H.$a)m=function(e,t){var n=nh(e,lh),i=function(e){var t=function(e){return[e.H.$a,e.ka.$a,e.aa.$a].filter(Re).map((function(e){return _u(e,"SegmentURL")})).reduce((function(e,t){return 0<e.length?e:t})).map((function(t){return t.getAttribute("indexRange")&&!e.me&&(e.me=!0),{Df:t.getAttribute("media"),start:(t=Pu(t,"mediaRange",Au,{start:0,end:null})).start,end:t.end}}))}(e),n=(e=zu(e,lh)).Kb;0==n&&(n=1);var i=0;return e.ia?i=e.ia*(n-1):e.timeline&&0<e.timeline.length&&(i=e.timeline[0].start),{ia:e.ia,startTime:i,Kb:n,Ta:e.Ta,timeline:e.timeline,Cb:t}}(e);if(!i.ia&&!i.timeline&&1<i.Cb.length)throw new Fe(2,4,4002);if(!i.ia&&!e.U.duration&&!i.timeline&&1==i.Cb.length)throw new Fe(2,4,4002);if(i.timeline&&0==i.timeline.length)throw new Fe(2,4,4002);var r=null,s=null;e.aa.id&&e.H.id&&(s=t[e.aa.id+","+e.H.id])&&(r=s.segmentIndex);var o=function(e,t,n,i,r){var s=i.Cb.length;i.timeline&&i.timeline.length!=i.Cb.length&&(s=Math.min(i.timeline.length,i.Cb.length));for(var o=e-i.Ta,a=t?e+t:1/0,l=[],c=i.startTime,u={},h=0;h<s;u={bd:u.bd},h++){var d,p=i.Cb[h];u.bd=it(n,[p.Df]),d=null!=i.ia?c+i.ia:i.timeline?i.timeline[h].end:c+t,l.push(new eo(e+c,e+d,function(e){return function(){return e.bd}}(u),p.start,p.end,r,o,e,a)),c=d}return l}(e.U.start,e.U.duration,e.H.ya,i,n);return n=!r,r?r.Eb(o,e.presentationTimeline.Qa()):r=new _o(o),e.presentationTimeline.Fb(o),e.Wa&&e.U.oe||r.Xa(e.U.start,e.U.duration?e.U.start+e.U.duration:1/0,n),s&&(s.segmentIndex=r),{Ab:function(){return r&&0!=r.K.length||r.Db(o),Promise.resolve(r)}}}(t,e.l);else if(t.H.nc)m=function(e,t,n,i,r,s){var o=function(e){var t=Gu(e,ch,"initialization");if(!t)return null;var n=e.H.id,i=e.bandwidth||null,r=e.H.ya;return new Zs((function(){var e=Vu(t,n,null,i,null);return it(r,[e])}),0,null,ah(e))}(e),a=function(e){var t=zu(e,ch),n=Gu(e,ch,"media");return e=Gu(e,ch,"index"),{ia:t.ia,timescale:t.timescale,Kb:t.Kb,Ta:t.Ta,$d:t.$d,timeline:t.timeline,Cd:n,fc:e}}(e);!function(e){var t=e.fc?1:0;if(t+=e.timeline?1:0,0==(t+=e.ia?1:0))throw new Fe(2,4,4002);if(1!=t&&(e.fc&&(e.timeline=null),e.ia=null),!e.fc&&!e.Cd)throw new Fe(2,4,4002)}(a);var l=fi(e);if(a.fc)return oh(e,o),{Ab:function(){var e=Vu(a.fc,l.H.id,null,l.bandwidth||null,null);return e=it(l.H.ya,[e]),ih(l,t,o,e,0,null,a.Ta)}};if(a.ia)return i||(e.presentationTimeline.Ed(a.ia),e.presentationTimeline.Fd(e.U.start)),{Ab:function(){return function(e,t,n,i,r){function s(e){var n=(e-f)*p,r=n+t.Ta,s=n+u;return n=s+p,(s=new eo(s,Math.min(n,a()),(function(){var t=Vu(g,y,e,v,r*m);return it(b,[t])}),0,null,i,w,u,a())).l=n,s}function o(){var e=[Math.max(l.Qa(),u),Math.min(l.gb(),a())].map((function(e){return e-u}));return[Math.ceil(e[0]/p),Math.ceil(e[1]/p)-1].map((function(e){return e+f}))}function a(){var e=null!=h&&r[h]||d;return e?u+e:1/0}var l=e.presentationTimeline,u=e.U.start,h=e.aa.id,d=e.U.duration,p=t.ia,f=t.Kb,m=t.timescale,g=t.Cd,v=e.bandwidth||null,y=e.H.id,b=e.H.ya,w=u-t.Ta,E=o();e=e.Wa?Math.max(E[0],E[1]-n+1):E[0],E=E[1],n=[];for(var _=e;_<=E;++_){var x=s(_);n.push(x)}var S=new _o(n);if(n=l.gb()<a(),_=l.T(),n||_){var T=Math.max(e,E+1);S.Tc(p,(function(){var e=l.Qa();S.cb(e);var t=c(o());t.next(),t=t.next().value;for(var n=[];T<=t;){var i=s(T);n.push(i),T++}return e>a()&&!n.length?null:n}))}return Promise.resolve(S)}(l,a,r,o,s)}};var u=null;i=i=null,e.aa.id&&e.H.id&&(i=n[i=e.aa.id+","+e.H.id])&&(u=i.segmentIndex);var h=function(e,t,n){var i=e.U.start,r=e.U.duration,s=i-t.Ta;r=r?i+r:1/0;for(var o=[],a={},l=0;l<t.timeline.length;a={ad:a.ad,ed:a.ed,hd:a.hd,Yc:a.Yc,kd:a.kd,Zc:a.Zc},l++){var c=t.timeline[l],u=c.start,h=c.bg;c=c.end,a.hd=l+t.Kb,a.kd=h+t.$d,a.ed=e.H.id,a.Yc=e.bandwidth||null,a.ad=t.Cd,a.Zc=e.H.ya,o.push(new eo(i+u,i+c,function(e){return function(){var t=Vu(e.ad,e.ed,e.hd,e.Yc||null,e.kd);return it(e.Zc,[t]).map((function(e){return e.toString()}))}}(a),0,null,n,s,i,r))}return o}(l,a,o);n=e.U.start;var d=e.U.duration?e.U.start+e.U.duration:1/0,p=1/0!=d;return u?(p&&new _o(h).Xa(n,d,!0),u.Eb(h,e.presentationTimeline.Qa())):u=new _o(h),e.presentationTimeline.Fb(h),p&&u.Xa(n,d),i&&e.Wa&&(i.segmentIndex=u),{Ab:function(){return u&&0!=u.K.length||u.Db(h),Promise.resolve(u)}}}(t,f,e.l,!!e.i,e.g.dash.initialSegmentLimit,e.N);else{var g=t.H.ya,v=t.U.duration||0;m={Ab:function(){return Promise.resolve(xo(h,v,g))}}}}catch(e){if((p||d)&&4002==e.code)return null;throw e}f=function(e,t,n,i){var r=Uu(e,n,i);if(t.he)e=1==t.drmInfos.length&&!t.drmInfos[0].keySystem,n=0==r.drmInfos.length,(0==t.drmInfos.length||e&&!n)&&(t.drmInfos=r.drmInfos),t.he=!1;else if(0<r.drmInfos.length&&(t.drmInfos=t.drmInfos.filter((function(e){return r.drmInfos.some((function(t){return t.keySystem==e.keySystem}))})),0==t.drmInfos.length))throw new Fe(2,4,4008);return r.de||t.de}(f=_u(u,"ContentProtection"),n,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),f=new Set(f?[f]:[]);var y=!1;_u(u,"SupplementalProperty").some((function(e){return"tag:dolby.com,2018:dash:EC3_ExtensionType:2018"==e.getAttribute("schemeIdUri")&&"JOC"==e.getAttribute("value")}))&&(y=!0);var b,_,x=!1;if(p&&(x=a.includes("forced_subtitle")||a.includes("forced-subtitle")),d&&((u=_u(u,"EssentialProperty").find((function(e){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(e.getAttribute("schemeIdUri"))})))&&(b=u.getAttribute("value")),!b))return null;u=t.H.codecs,t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(u.includes("hvc1.2.4.L153.B0")||u.includes("hev1.2.4.L153.B0"))&&(_="PQ");var S=t.H.id?t.aa.id+","+t.H.id:"",T={id:e.G++,originalId:t.H.id,createSegmentIndex:function(){var n,i;return M((function(r){if(1==r.g)return(n=S&&t.Wa&&e.l[S]?e.l[S]:T).segmentIndex?r.B(0):(i=n,w(r,m.Ab(),3));i.segmentIndex=r.h,E(r)}))},closeSegmentIndex:function(){T.segmentIndex&&(T.segmentIndex.release(),T.segmentIndex=null)},segmentIndex:null,mimeType:t.H.mimeType,codecs:t.H.codecs,frameRate:t.H.frameRate,pixelAspectRatio:t.H.pixelAspectRatio,bandwidth:t.bandwidth,width:t.H.width,height:t.H.height,kind:i,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:f,language:r,label:s,type:t.ka.contentType,primary:o,trickModeVideo:null,emsgSchemeIdUris:t.H.emsgSchemeIdUris,roles:a,forced:x,channelsCount:t.H.Mc,audioSamplingRate:t.H.audioSamplingRate,spatialAudio:y,closedCaptions:l,hdr:_,tilesLayout:b,matchedStreams:[]};return S&&t.Wa&&!e.l[S]&&(e.l[S]=T),T}(e,t,x,l,S,T,s,a,g,n))&&(n.hdr=n.hdr||r),n})).filter((function(e){return!!e})),0==n.length){if(o="image"==t.ka.contentType,e.g.dash.ignoreEmptyAdaptationSet||h||o)return null;throw new Fe(2,4,4003)}if(!t.ka.contentType||"application"==t.ka.contentType)for(t.ka.contentType=Vh(n[0].mimeType,n[0].codecs),p=(h=c(n)).next();!p.done;p=h.next())p.value.type=t.ka.contentType;for(p=(h=c(n)).next();!p.done;p=h.next())for(p=p.value,m=(f=c(x.drmInfos)).next();!m.done;m=f.next())(m=m.value).keyIds=m.keyIds&&p.keyIds?new Set([].concat(u(m.keyIds),u(p.keyIds))):m.keyIds||p.keyIds;return h=d.map((function(e){return e.getAttribute("id")})).filter(Re),{id:t.ka.id||"__fake__"+e.G++,contentType:t.ka.contentType,language:S,Lg:s,streams:n,drmInfos:x.drmInfos,Yd:o,Pf:h}}(e,t,n)})).filter(Re),t.Wa){for(i=[],s=(r=c(n)).next();!s.done;s=r.next())for(var o=(s=c(s.value.Pf)).next();!o.done;o=s.next())i.push(o.value);if(i.length!=new Set(i).size)throw new Fe(2,4,4018)}for(i=n.filter((function(e){return!e.Yd})),r=(n=c(n=n.filter((function(e){return e.Yd})))).next();!r.done;r=n.next()){s=(r=r.value).Yd.split(" ");for(var a=(o=c(i)).next();!a.done;a=o.next()){var l=a.value;if(s.includes(l.id)){a={};for(var h=(l=c(l.streams)).next();!h.done;a={vc:a.vc},h=l.next())a.vc=h.value,a.vc.trickModeVideo=r.streams.find(function(e){return function(t){return Kt(e.vc.codecs)==Kt(t.codecs)}}(a))}}}if(r=e.g.disableAudio?[]:Uh(i,"audio"),o=e.g.disableVideo?[]:Uh(i,"video"),s=e.g.disableText?[]:Uh(i,at),n=e.g.disableThumbnails?[]:Uh(i,"image"),!o.length&&!r.length)throw new Fe(2,4,4004);for(i=[],a=(r=c(r)).next();!a.done;a=r.next())i.push.apply(i,u(a.value.streams));for(r=[],a=(o=c(o)).next();!a.done;a=o.next())r.push.apply(r,u(a.value.streams));for(o=[],a=(s=c(s)).next();!a.done;a=s.next())o.push.apply(o,u(a.value.streams));for(s=[],a=(n=c(n)).next();!a.done;a=n.next())s.push.apply(s,u(a.value.streams));return{id:t.aa.id,wc:i,Vc:r,textStreams:o,imageStreams:s}}function Uh(e,t){return e.filter((function(e){return e.contentType==t}))}function $h(e,t){0>e.F||e.D.S(Math.max(3,e.F-t,H(e.I)))}function Fh(e,t,n){t=t||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,Mc:null,audioSamplingRate:null,yb:0},n=n||t.ya;for(var i=_u(e,"BaseURL"),r=i.map(ku),s=e.getAttribute("contentType")||t.contentType,o=e.getAttribute("mimeType")||t.mimeType,a=e.getAttribute("codecs")||t.codecs,l=Pu(e,"frameRate",Ru)||t.frameRate,u=e.getAttribute("sar")||t.pixelAspectRatio,h=_u(e,"InbandEventStream"),d=t.emsgSchemeIdUris.slice(),p=(h=c(h)).next();!p.done;p=h.next())p=p.value.getAttribute("schemeIdUri"),d.includes(p)||d.push(p);h=function(e){for(var t=(e=c(e)).next();!t.done;t=e.next()){var n=t.value;if((t=n.getAttribute("schemeIdUri"))&&(n=n.getAttribute("value")))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(!(t=parseInt(n,10)))continue;return t;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(!(t=parseInt(n,16)))continue;for(e=0;t;)1&t&&++e,t>>=1;return e;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(t=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(n=parseInt(n,10))&&0<n&&n<t.length)return t[n]}}return null}(h=_u(e,"AudioChannelConfiguration"))||t.Mc,p=Pu(e,"audioSamplingRate",Nu)||t.audioSamplingRate,s||(s=Vh(o,a));var f=wu(e,"SegmentBase"),m=wu(e,"SegmentTemplate"),g=f&&Pu(f,"availabilityTimeOffset",Du)||0,v=m&&Pu(m,"availabilityTimeOffset",Du)||0;return i=i&&i.length&&Pu(i[0],"availabilityTimeOffset",Du)||0,i=t.yb+i+g+v,{ya:it(n,r),mc:f||t.mc,$a:wu(e,"SegmentList")||t.$a,nc:m||t.nc,width:Pu(e,"width",Nu)||t.width,height:Pu(e,"height",Nu)||t.height,contentType:s,mimeType:o,codecs:a,frameRate:l,pixelAspectRatio:u,emsgSchemeIdUris:d,id:e.getAttribute("id"),Mc:h,audioSamplingRate:p,yb:i}}function Hh(e,t,n,i){var r,s,o,a,l,c;return M((function(u){if(1==u.g)return r=it(t,[n]),(s=bi(r,e.g.retryParameters)).method=i,o=e.h.networkingEngine.request(4,s),gi(e.o,o),w(u,o.promise,2);if(a=u.h,"HEAD"==i){if(!a.headers||!a.headers.date)return u.return(0);l=a.headers.date}else l=Pt(a.data);return c=Date.parse(l),isNaN(c)?u.return(0):u.return(c-Date.now())}))}function qh(e,t,n,i,r){for(var s=i.getAttribute("schemeIdUri")||"",o=i.getAttribute("value")||"",a=Pu(i,"timescale",Nu)||1,l=(i=c(_u(i,"Event"))).next();!l.done;l=i.next()){var u=Pu(l=l.value,"presentationTime",Nu)||0,h=Pu(l,"duration",Nu)||0;h=(u=u/a+t)+h/a,null!=n&&(u=Math.min(u,t+n),h=Math.min(h,t+n)),h<r||(l={schemeIdUri:s,value:o,startTime:u,endTime:h,id:l.getAttribute("id")||"",eventElement:l},e.h.onTimelineRegionAdded(l))}}function Vh(e,t){return Yt(zt(e,t))?at:e.split("/")[0]}function zh(e,t,n,i){this.h=e,this.type=t,this.g=n,this.segments=i||null}function Gh(e,t,n,i){this.id=e,this.name=t,this.g=n,this.value=void 0===i?null:i}function Kh(e,t,n){return(e=e.getAttribute(t))?e.value:n||null}function Wh(e,t){var n=e.getAttribute(t);if(!n)throw new Fe(2,4,4023,t);return n.value}function Xh(e,t,n){n=void 0===n?[]:n,this.g=t,this.h=e,this.i=n}function Jh(e,t){this.name=e,this.value=t}function Yh(e,t){return e.filter((function(e){return e.name==t}))}function Qh(e,t){return e.filter((function(e){return Wh(e,"TYPE")==t}))}function Zh(e,t){var n=Yh(e,t);return n.length?n[0]:null}function ed(e,t,n){return n=void 0===n?0:n,(e=Zh(e,t))?Number(e.value):n}function td(e){this.h=e,this.g=0}function nd(e){id(e,/[ \t]+/gm)}function id(e,t){t.lastIndex=e.g;var n=t.exec(e.h);return n=null==n?null:{position:n.index,length:n[0].length,results:n},e.g==e.h.length||null==n||n.position!=e.g?null:(e.g+=n.length,n.results)}function rd(e){return e.g==e.h.length?null:(e=id(e,/[^ \t\n]*/gm))?e[0]:null}function sd(){this.g=0}function od(e,t,n){var i=(t=(t=Pt(t)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim()).split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(i[0]))throw new Fe(2,4,4015);t=0;for(var r=!0,s=c(i),o=s.next();!o.done;o=s.next())if(o=o.value,/^#(?!EXT)/m.test(o)||r)r=!1;else{if(o=ad(e,o),--e.g,ld.includes(o.name)){t=1;break}"EXT-X-STREAM-INF"==o.name&&(r=!0)}for(s=[],r=!0,o=0;o<i.length;o++){var a=i[o],l=i[o+1];if(/^#(?!EXT)/m.test(a)||r)r=!1;else{if(a=ad(e,a),cd.includes(a.name)){if(1!=t)throw new Fe(2,4,4017);var u=i.splice(o,i.length-o);i=n,r=[],o=[],l=[],a=null;for(var h=(u=c(u)).next();!h.done;h=u.next())h=h.value,/^(#EXT)/.test(h)?(h=ad(e,h),ld.includes(h.name)?s.push(h):"EXT-X-MAP"==h.name?a=h:"EXT-X-PART"==h.name?l.push(h):"EXT-X-PRELOAD-HINT"==h.name?"PART"==Kh(h,"TYPE")?l.push(h):"MAP"==Kh(h,"TYPE")&&(h.name="EXT-X-MAP",a=h):o.push(h)):/^#(?!EXT)/m.test(h)||(h=it([i],[h.trim()])[0],a&&o.push(a),r.push(new Xh(h,o,l)),o=[],l=[]);return l.length&&(a&&o.push(a),r.push(new Xh("",o,l))),new zh(n,t,s,r)}s.push(a),"EXT-X-STREAM-INF"==a.name&&(a.g.push(new Jh("URI",l)),r=!0)}}return new zh(n,t,s)}function ad(e,t){var n=e.g++,i=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!i)throw new Fe(2,4,4016,t);var r,s=i[1],o=i[2];if(i=[],o){var a;(a=id(o=new td(o),/^([^,=]+)(?:,|$)/g))&&(r=a[1]);for(var l=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;a=id(o,l);)i.push(new Jh(a[1],a[2]||a[3])),nd(o)}return new Gh(n,s,i,r)}(i=Dh.prototype).configure=function(e){this.g=e},i.start=function(e,t){var n,i=this;return M((function(r){if(1==r.g)return i.C=t.isLowLatencyMode(),i.m=[e],i.h=t,w(r,Rh(i),2);if(n=r.h,i.h&&$h(i,n),!i.h)throw new Fe(2,7,7001);return r.return(i.i)}))},i.stop=function(){for(var e=c(Object.values(this.l)),t=e.next();!t.done;t=e.next())(t=t.value).segmentIndex&&t.segmentIndex.release();return this.j&&this.j.release(),this.g=this.h=null,this.m=[],this.i=null,this.l={},this.j=null,null!=this.D&&(this.D.stop(),this.D=null),this.o.destroy()},i.update=function(){var e,t=this;return M((function(n){return 1==n.g?(_(n,2),w(n,Rh(t),4)):2!=n.g?S(n,0):(e=T(n),t.h&&e?(t.h.onError(e),void E(n)):n.return())}))},i.onExpirationUpdated=function(){},$("shaka.dash.DashParser",Dh),dr.mpd=function(){return new Dh},hr["application/dash+xml"]=function(){return new Dh},hr["video/vnd.mpeg.dash.mpd"]=function(){return new Dh},Gh.prototype.toString=function(){var e="#"+this.name,t=this.g?this.g.map((function(e){return e.name+"="+(isNaN(Number(e.value))?'"'+e.value+'"':e.value)})):[];return this.value&&t.unshift(this.value),0<t.length&&(e+=":"+t.join(",")),e},Gh.prototype.getAttribute=function(e){var t=this.g.filter((function(t){return t.name==e}));return t.length?t[0]:null};var ld="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP".split(" "),cd="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" ");function ud(){}function hd(e){try{var t=dd(e);return ai({uri:e,re:e,data:t.data,headers:{"content-type":t.contentType}})}catch(e){return si(e)}}function dd(t){var n=t.split(":");if(2>n.length||"data"!=n[0])throw new Fe(2,1,1004,t);if(2>(n=n.slice(1).join(":").split(",")).length)throw new Fe(2,1,1004,t);var i=n[0];t=e.decodeURIComponent(n.slice(1).join(",")),n=i.split(";"),i=n[0];var r=!1;return 1<n.length&&"base64"==n[n.length-1]&&(r=!0,n.pop()),{data:r?jt(t):At(t),contentType:i}}function pd(){var e=this;this.g=this.i=null,this.La=1,this.o=new Map,this.u=new Map,this.xa=new Set,this.h=new Map,this.j=null,this.N="",this.da=new sd,this.wa=0,this.C=new pt((function(){!function(e){var t,n;M((function(i){return 1==i.g?e.i?(_(i,2),w(i,e.update(),4)):i.return():2!=i.g?(t=e.wa,e.C.S(t),S(i,0)):(n=T(i),e.i?(n.severity=1,e.i.onError(n),e.C.S(.1),void E(i)):i.return())}))}(e)})),this.m=Od,this.D=null,this.fa=0,this.G=1/0,this.ca=this.ja=0,this.F=new mi,this.W=[],this.L=new Map,this.Ma=!1,this.s=new Map,this.V=null,this.ea=new Map,this.I=new Map,this.l=!1}function fd(e,t){var n,i,r,s,o,a,l,c,u,h,d,p;return M((function(f){if(1==f.g)return n=Rd,i=t.Ie,r=new qe(i),e.l&&t.Ne&&Ge(r,new tt("_HLS_skip=YES")),w(f,Cd(e,r.toString()),2);if(3!=f.g){if(s=f.h,1!=(o=od(e.da,s.data,s.uri)).type)throw new Fe(2,4,4017);return a=Yh(o.g,"EXT-X-DEFINE"),l=md(e,a),c=t.stream,w(f,xd(e,t.Uc,o,c.type,c.mimeType,t.Bd,l,t.Ue,c.codecs,c.bandwidth),3)}u=f.h,c.segmentIndex.Eb(u,e.j.Qa()),u.length&&(h=ed(o.g,"EXT-X-MEDIA-SEQUENCE",0),d=t.Bd.get(h),c.segmentIndex.cb(d)),p=u[u.length-1],Zh(o.g,"EXT-X-ENDLIST")&&(Pd(e,n.He),e.j.Ia(p.endTime)),E(f)}))}function md(e,t){for(var n=new Map,i=c(t),r=i.next();!r.done;r=i.next()){var s=r.value;r=Kh(s,"NAME");var o=Kh(s,"VALUE");s=Kh(s,"IMPORT"),r&&o&&n.set(r,o),s&&(r=e.o.get(s))&&n.set(s,r)}return n}function gd(e,t){var n=[];e.g.disableVideo||n.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||n.push(e.g.hls.defaultAudioCodec);var i=Kh(t,"CODECS",n.join(",")).split(/\s*,\s*/);n=new Set;for(var r=[],s=(i=c(i)).next();!s.done;s=i.next()){var o=Xt(s=s.value)[0];n.has(o)||(r.push(s),n.add(o))}return r}function vd(e){return an(e=Kh(e,"LANGUAGE")||"und")}function yd(e,t){var n,i,r,s,o,a,l,c,u,h,d,p,f;return M((function(m){if(1==m.g){n=Wh(t,"GROUP-ID"),i="";var g=Wh(t,"TYPE").toLowerCase();return"subtitles"==g&&(g=at),(r=g)!=at&&n&&e.s.has(n)&&(i=e.s.get(n)),s=kd(Wh(t,"URI"),e.o),e.h.has(s)?m.return(e.h.get(s)):(o=vd(t),a=Kh(t,"NAME"),l=Kh(t,"DEFAULT"),c="YES"==l,g="audio"==r&&(g=Kh(t,"CHANNELS"))?parseInt(g.split("/")[0],10):null,u=g,g="audio"==r&&!!(g=Kh(t,"CHANNELS"))&&g.includes("/JOC"),h=g,d=Kh(t,"CHARACTERISTICS"),p=Kh(t,"FORCED"),w(m,bd(e,s,i,r,o,c,a,u,null,d,"YES"==p,h),2))}return f=m.h,e.u.has(n)?e.u.get(n).push(f):e.u.set(n,[f]),null==f?m.return(null):e.h.has(s)?m.return(e.h.get(s)):(e.h.set(s,f),m.return(f))}))}function bd(e,t,n,i,r,s,o,a,l,h,d,p,f){var m,g,v,y,b,E,x,k,C,P,I,L,A,O,N,D,R,j,B,U,$,F,H,q,V,z,K,W,X,J,Y,Q,Z,ee,te,ne,ie,re,se;return M((function(oe){switch(oe.g){case 1:return m=it([e.N],[t])[0],w(oe,Cd(e,m),2);case 2:if(g=oe.h,m=g.uri,1!=(v=od(e.da,g.data,m)).type)throw new Fe(2,4,4017);if(y=[],v.segments)for(b=c(v.segments),E=b.next();!E.done;E=b.next())x=E.value,k=Yh(x.g,"EXT-X-KEY"),y.push.apply(y,u(k));for(C=!1,P=[],I=new Set,L=c(y),A=L.next();!A.done;A=L.next())if(O=A.value,"NONE"!=(N=Wh(O,"METHOD"))){if(C=!0,"AES-128"==N)return e.Ma=!0,oe.return(null);if(D=Wh(O,"KEYFORMAT"),j=(R=Md[D])?R(O):null){if(j.keyIds)for(B=c(j.keyIds),U=B.next();!U.done;U=B.next())$=U.value,I.add($);P.push(j)}}if(C&&!P.length)throw new Fe(2,4,4026);return F=Yh(v.g,"EXT-X-DEFINE"),H=md(e,F),function(e,t){var n=Zh(t.g,"EXT-X-PLAYLIST-TYPE"),i=Zh(t.g,"EXT-X-ENDLIST");if(i=n&&"VOD"==n.value||i,n=n&&"EVENT"==n.value&&!i,n=!i&&!n,i)Pd(e,Od);else{if(Pd(e,n?Dd:Nd),!(i=Zh(t.g,"EXT-X-TARGETDURATION")))throw new Fe(2,4,4024,"EXT-X-TARGETDURATION");i=Number(i.value),n=Zh(t.g,"EXT-X-PART-INF"),e.l&&n?(e.ja=Number(Wh(n,"PART-TARGET")),e.G=Math.min(e.ja,e.G),n=Zh(t.g,"EXT-X-SERVER-CONTROL"),e.ca=n?Number(Wh(n,"PART-HOLD-BACK")):0):e.G=Math.min(i,e.G),e.fa=Math.max(i,e.fa)}}(e,v),w(oe,function(e,t,n,i,r){var s,o,a,l,c,u,h,d,p,f,m;return M((function(g){return 1==g.g?(s=lt,o=xi,a=kd(i.segments[0].h,r),l=new qe(a),c=l.va.split(".").pop(),u=Ad[t],(h=u[c])?g.return(h):t==s.Z?n&&"vtt"!=n&&"wvtt"!=n?g.return("application/mp4"):g.return("text/vtt"):t!=s.Rb||n&&"jpeg"!=n?((d=bi([a],e.g.retryParameters)).method="HEAD",w(g,Id(e,d,o),2)):g.return("image/jpeg")):(p=g.h,(f=p.headers["content-type"])?g.return(f.split(";")[0]):(m=u.mp4,g.return(m)))}))}(e,i,n,v,H),3);case 3:return q=oe.h,Ld.includes(q)&&(n=""),V=new Map,z=new Map,_(oe,4),w(oe,xd(e,t,v,i,q,V,H,z,n,f),6);case 6:K=oe.h,S(oe,5);break;case 4:if(4035==(W=T(oe)).code)return G("Skipping unsupported HLS stream",q,t),oe.return(null);throw W;case 5:if(X=K[0].startTime,J=K[K.length-1].endTime,Y=new _o(K),Q=i==at?"subtitle":void 0,Z=[],h)for(ee=c(h.split(",")),te=ee.next();!te.done;te=ee.next())ne=te.value,Z.push(ne);return re=!!(ie=Zh(v.g,"EXT-X-SERVER-CONTROL"))&&null!=ie.getAttribute("CAN-SKIP-UNTIL"),se={id:e.La++,originalId:o,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Y,mimeType:q,codecs:n,kind:Q,encrypted:C,drmInfos:P,keyIds:I,language:r,label:o,type:i,primary:s,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:Z,forced:d,channelsCount:a,audioSamplingRate:null,spatialAudio:p,closedCaptions:l,hdr:void 0,tilesLayout:void 0},oe.return({stream:se,Uc:t,Ie:m,pe:X,Cf:J,Bd:V,Ue:z,Ne:re})}}))}function wd(e,t,n,i){return(n=Zh(n,"EXT-X-MAP"))?(t=[i=kd(it([t],[Wh(n,"URI")])[0],i),Kh(n,"BYTERANGE","")].join("-"),e.ea.has(t)||(n=function(e,t){var n=0,i=null,r=Kh(t,"BYTERANGE");return r&&(n=r.split("@"),i=Number(n[0]),i=(n=Number(n[1]))+i-1),new Zs((function(){return[e]}),n,i)}(i,n),e.ea.set(t,n)),e.ea.get(t)):null}function Ed(e,t,n,i,r,s,o,a,l){var u=i.g,h=kd(i.h,o),d=Zh(u,"EXTINF"),p=o=0,f=null;if(!d){if(0==i.i.length)throw new Fe(2,4,4024,"EXTINF");if(!e.l)return null}var m=[];if(e.l)for(var g={},v=0;v<i.i.length;g={cd:g.cd},v++){var y=i.i[v],b=0==v?n:m[m.length-1],w=0==v?r:b.endTime,E=Number(Kh(y,"DURATION"))||e.ja;if(E){E=w+E;var _=0,x=null;"EXT-X-PRELOAD-HINT"==y.name?_=(b=Kh(y,"BYTERANGE-START"))?Number(b):0:(_=(b=c(_d(b,_=Kh(y,"BYTERANGE")))).next().value,x=b.next().value),(y=Kh(y,"URI"))&&(g.cd=it([a],[y])[0],m.push(new eo(w,E,function(e){return function(){return[e.cd]}}(g),_,x,t,s,0,1/0)))}}return o=d?r+Number(d.value.split(",")[0]):m[m.length-1].endTime,(e=Zh(u,"EXT-X-BYTERANGE"))?(p=(f=c(_d(n,e.value))).next().value,f=f.next().value):m.length&&(p=m[0].pa,f=m[m.length-1].ga),n="",e=null,"image"==l&&(n="1x1",l=Zh(u,"EXT-X-TILES"))&&(n=Wh(l,"LAYOUT"),(l=Kh(l,"DURATION"))&&(e=Number(l))),new eo(r,o,(function(){return h.length?[h]:[]}),p,f,t,s,0,1/0,m,n,e)}function _d(e,t){var n=0,i=null;return t&&(n=t.split("@"),i=Number(n[0]),i=(n=n[1]?Number(n[1]):e.ga+1)+i-1),[n,i]}function xd(e,t,n,i,r,s,o,a,l,c){var u,h,d,p,f,m,g,v,y,b,E,_,x,S,T,k,C,P;return M((function(I){switch(I.g){case 1:if(u=n.segments,d=ed(n.g,"EXT-X-MEDIA-SEQUENCE",0),f=(p=Zh(n.g,"EXT-X-SKIP"))?Number(Kh(p,"SKIPPED-SEGMENTS")):0,m=d+f,e.m!=Od&&s.has(m)){g=s.get(m),I.B(2);break}if(null!=e.V){I.B(3);break}return h=wd(e,n.h,u[0].g,o),v=e,w(I,Td(e,t,h,r,m,!1,u[0],o,i,l,c),4);case 4:v.V=I.h;case 3:g=e.V;case 2:if(u[0].h.split("/").pop(),y=ed(n.g,"EXT-X-DISCONTINUITY-SEQUENCE"),e.l&&(a.has(y)||a.set(y,m),f))for(b=a;b.has(y+1)&&b.get(y+1)<m;)y++;E=e.I.get(y)||0,_=[],x=0;case 5:if(!(x<u.length)){I.B(7);break}if(S=u[x],T=_[_.length-1],k=0==x?g:T.endTime,m=d+f+x,s.set(m,k),h=wd(e,n.h,S.g,o),!Zh(S.g,"EXT-X-DISCONTINUITY")){I.B(8);break}return y++,a.set(y,m),w(I,function(e,t,n,i,r,s,o,a,l,c,u,h){var d,p;return M((function(f){return 1==f.g?(d=0,e.I.has(t)?(d=e.I.get(t),f.B(2)):w(f,Td(e,n,i,r,s,!0,o,a,c,u,h),3)):(2!=f.g&&(p=f.h,d=l-p,e.I.set(t,d)),f.return(d))}))}(e,y,t,h,r,m,S,o,k,i,l,c),9);case 9:E=I.h;case 8:!e.l&&e.i.isAutoLowLatencyMode()&&(e.i.enableLowLatencyMode(),e.l=e.i.isLowLatencyMode()),C=Zh(S.g,"EXTINF"),e.l||C?(P=Ed(e,h,T,S,k,E,o,n.h,i))&&_.push(P):e.l||G("Low-latency HLS live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),x++,I.B(5);break;case 7:return I.return(_)}}))}function Sd(e,t,n,i,r,s){var o,a,l,c,u,h;return M((function(d){switch(d.g){case 1:return o=xi,a=jo(t.sa(),t.pa,t.ga,e.g.retryParameters),e.i.modifySegmentRequest(a,{type:n,init:t instanceof Zs,duration:t.endTime-t.startTime,mimeType:i,codecs:r,bandwidth:s}),e.g.hls.useFullSegmentsForStartTime?d.return(Id(e,a,o)):(l=jo(t.sa(),t.pa,t.pa+2048-1,e.g.retryParameters),e.i.modifySegmentRequest(l,{type:n,init:t instanceof Zs,duration:t.endTime-t.startTime,mimeType:i,codecs:r,bandwidth:s}),_(d,2),w(d,Id(e,l,o),4));case 4:return c=d.h,d.return(c);case 2:if(7001==(u=T(d)).code)throw u;return G("Unable to fetch the starting part of HLS segment! Falling back to a full segment request, which is expensive!  Your server should support Range requests and CORS preflights.",l.uris[0]),w(d,Id(e,a,o),5);case 5:return h=d.h,d.return(h)}}))}function Td(e,t,n,i,r,s,o,a,l,c,u){var h,d,p,f,m,g,v,y;return M((function(b){switch(b.g){case 1:if(h=Ed(e,n,null,o,0,0,a,"",l),e.D&&!s&&(d=e.h.get(t),null!=(p=d.Bd.get(r))))return b.return(p);if(i=i.toLowerCase(),Ld.includes(i))throw G("Raw formats are not yet supported.  Skipping "+i),new Fe(1,4,4035);if("video/webm"==i)throw G("WebM in HLS is not yet supported.  Skipping."),new Fe(1,4,4035);if("video/mp4"!=i&&"audio/mp4"!=i){b.B(2);break}return f=[Sd(e,h,l,i,c,u)],n&&f.push(Sd(e,n,l,i,c,u)),w(b,Promise.all(f),3);case 3:return m=b.h,g=m[0],v=m[1]||m[0],b.return(function(e,t,n,i){var r=0;if((new gr).box("moov",vr).box("trak",vr).box("mdia",vr).R("mdhd",(function(e){r=Ls(e.reader,e.version).timescale,e.parser.stop()})).parse(i,!0),!r)throw new Fe(2,4,4030,e,t);var s=0,o=!1;if((new gr).box("moof",vr).box("traf",vr).R("tfdt",(function(e){s=Is(e.reader,e.version).md/r,o=!0,e.parser.stop()})).parse(n,!0),!o)throw new Fe(2,4,4030,e,t);return s}(t,g.uri,g.data,v.data));case 2:if("video/mp2t"!=i){b.B(4);break}return w(b,Sd(e,h,l,i,c,u),5);case 5:return y=b.h,b.return(function(e,t,n){function i(){s.seek(o+188),71!=(a=s.Y())&&(s.seek(o+192),a=s.Y()),71!=a&&(s.seek(o+204),a=s.Y()),71!=a&&r(),s.ue(1)}function r(){throw new Fe(2,4,4030,e,t)}var s=new pr(n,0),o=0,a=0;for(n=Math.min(s.O.byteLength-188,940);;){if(o=s.X(),71!=(a=s.Y())){if(0<n){--n;continue}r()}n=0;var l=s.Ib();if(8191==(8191&l))i();else if(16384&l){if(0!=(l=(48&s.Y())>>4)&&2!=l||r(),3==l&&(l=s.Y(),s.skip(l)),1==s.M()>>8)return s.skip(3),0!=(n=s.Y()>>6)&&1!=n||r(),0==s.Y()&&r(),(1073741824*((14&(n=s.Y()))>>1)+((65534&(l=s.Ib()))<<14|(65534&s.Ib())>>1))/9e4;i()}else i()}}(t,y.uri,y.data));case 4:throw new Fe(2,4,4030,t)}}))}function kd(e,t){var n=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}"),i=n.match(/{\$\w*}/g);if(i)for(var r=(i=c(i)).next();!r.done;r=i.next()){var s=(r=r.value).slice(2,r.length-1),o=t.get(s);if(!o)throw new Fe(2,4,4039,s);n=n.replace(r,o)}return n}function Cd(e,t){var n=bi([t],e.g.retryParameters);return e.i.modifyManifestRequest(n,{format:"h"}),Id(e,n,0)}function Pd(e,t){e.m=t,e.j&&e.j.oc(e.m==Od),e.m!=Od||e.C.stop()}function Id(e,t,n){if(!e.F)throw new Fe(2,7,7001);return t=e.i.networkingEngine.request(n,t),gi(e.F,t),t.promise}$("shaka.net.DataUriPlugin",ud),ud.parse=hd,yi("data",hd),(i=pd.prototype).configure=function(e){this.g=e},i.start=function(e,t){var n,i,r=this;return M((function(s){return 1==s.g?(r.i=t,r.l=t.isLowLatencyMode(),w(s,Cd(r,e),2)):3!=s.g?(n=s.h,r.N=n.uri,w(s,function(e,t){var n,i,r,s,o,a,l,u,h,d,p,f,m,g,v,y,b,x,S,k,C,P,I,L,A,O,N,D,R,j,B,U,$,F,H,q;return M((function(V){switch(V.g){case 1:if(0!=(n=od(e.da,t,e.N)).type)throw new Fe(2,4,4022);for(i=Yh(n.g,"EXT-X-DEFINE"),function(e,t){for(var n=c(t),i=n.next();!i.done;i=n.next()){var r=i.value;i=Kh(r,"NAME"),r=Kh(r,"VALUE"),i&&r&&(e.o.has(i)||e.o.set(i,r))}}(e,i),r=Yh(n.g,"EXT-X-MEDIA"),s=Yh(n.g,"EXT-X-STREAM-INF"),o=Yh(n.g,"EXT-X-IMAGE-STREAM-INF"),function(e,t){for(var n=c(t),i=n.next();!i.done;i=n.next()){var r=i.value,s=Kh(r,"AUDIO");i=Kh(r,"VIDEO");var o=Kh(r,"SUBTITLES");if(r=gd(e,r),o){var a=ot(at,r);e.s.set(o,a),Z(r,a)}s&&(o=st("audio",r),e.s.set(s,o)),i&&(s=st("video",r),e.s.set(i,s))}}(e,s),a=Yh(n.g,"EXT-X-SESSION-DATA"),l=c(a),u=l.next();!u.done;u=l.next())h=u.value,d=Kh(h,"DATA-ID"),p=Kh(h,"URI"),f=Kh(h,"LANGUAGE"),m=Kh(h,"VALUE"),g=(new Map).set("id",d),p&&g.set("uri",it([e.N],[p])[0]),f&&g.set("language",f),m&&g.set("value",m),v=new ui("sessiondata",g),e.i&&e.i.onEvent(v);return w(V,function(e,t){var n;return M((function(i){return 1==i.g?(t=t.filter((function(e){var t=Kh(e,"URI")||"";return"SUBTITLES"!=Kh(e,"TYPE")&&""!=t})),t.length?w(i,yd(e,t[0]),2):i.B(2)):(n=t.slice(1).map((function(t){return yd(e,t)})),w(i,Promise.all(n),0))}))}(e,r),2);case 2:return function(e,t){for(var n=Qh(t,"CLOSED-CAPTIONS"),i=(n=c(n)).next();!i.done;i=n.next()){var r=i.value;i=vd(r);var s=Wh(r,"GROUP-ID");r=Wh(r,"INSTREAM-ID"),e.L.get(s)||e.L.set(s,new Map),e.L.get(s).set(r,i)}}(e,r),w(V,function(e,t){var n,i,r;return M((function(s){return 1==s.g?(n=t.map((function(t){var n,i,r,s,o,a,l,u;return M((function(h){if(1==h.g)return n=Kh(t,"FRAME-RATE"),i=Number(Kh(t,"AVERAGE-BANDWIDTH"))||Number(Wh(t,"BANDWIDTH")),r=Kh(t,"RESOLUTION"),s=c(r?r.split("x"):[null,null]),o=s.next().value,a=s.next().value,l=Kh(t,"VIDEO-RANGE"),w(h,function(e,t,n){var i,r,s,o,a,l,u,h,d,p,f,m,g,v;return M((function(y){if(1==y.g)return i=lt,r=gd(e,t),s=Kh(t,"AUDIO"),o=Kh(t,"VIDEO"),l=(a=s||o)&&e.u.has(a)?e.u.get(a):[],u={audio:s?l:[],video:o?l:[]},d=!1,p=Wh(t,"URI"),f=u.audio.find((function(e){return e&&e.Uc==p})),m=ot(i.Na,r),(g=ot(i.bb,r))&&!m?h=i.bb:!l.length&&g&&m?(h=i.Na,r=[[m,g].join()]):u.audio.length&&f?(h=i.bb,d=!0):h=u.video.length?i.bb:i.Na,d?y.B(2):w(y,function(e,t,n,i,r){var s,o,a,l;return M((function(c){if(1==c.g){if(s=kd(Wh(t,"URI"),e.o),e.h.has(s))return c.return(e.h.get(s));var u=Kh(t,"CLOSED-CAPTIONS");return o="video"==i&&u&&"NONE"!=u?e.L.get(u):null,a=st(i,n),w(c,bd(e,s,a,i,"und",!1,null,null,o,null,!1,!1,r),2)}return null==(l=c.h)?c.return(null):e.h.has(s)?c.return(e.h.get(s)):(e.h.set(s,l),c.return(l))}))}(e,t,r,h,n),3);if(2!=y.g&&(v=y.h),v)u[v.stream.type]=[v];else if(null===v)return y.return(null);return function(e){for(var t=(e=c(e.audio.concat(e.video))).next();!t.done;t=e.next())if(t=t.value){var n=t.stream.codecs.split(",");n=n.filter((function(e){return"mp4a.40.34"!=e})),t.stream.codecs=n.join(",")}}(u),y.return(u)}))}(e,t,i),2);if(u=h.h){for(var d=h.return,p=u.audio,f=u.video,m=c(f),g=m.next();!g.done;g=m.next())(g=g.value.stream)&&(g.width=Number(o)||void 0,g.height=Number(a)||void 0,g.frameRate=Number(n)||void 0,g.hdr=l||void 0);for(m=e.g.disableAudio,p.length&&!m||(p=[null]),m=e.g.disableVideo,f.length&&!m||(f=[null]),m=[],g=(p=c(p)).next();!g.done;g=p.next()){g=g.value;for(var v=c(f),y=v.next();!y.done;y=v.next()){var b=y.value;y=g?g.stream:null;var E=b?b.stream:null,_=g?g.stream.drmInfos:null,x=b?b.stream.drmInfos:null;b=(b?b.Uc:"")+" - "+(g?g.Uc:""),y&&E&&_.length&&x.length&&!(0<Qi(_,x).length)||e.xa.has(b)||(y={id:e.La++,language:y?y.language:"und",primary:!!y&&y.primary||!!E&&E.primary,audio:y,video:E,bandwidth:i,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},m.push(y),e.xa.add(b))}}h=d.call(h,m)}else h=h.return([]);return h}))})),w(s,Promise.all(n),2)):(i=s.h,r=(r=i.reduce(Ne,[])).filter((function(e){return null!=e})),s.return(r))}))}(e,s),3);case 3:return y=V.h,w(V,function(e,t){var n,i,r,s,o,a,l,u,h,d,p;return M((function(f){if(1==f.g)return n=Qh(t,"SUBTITLES"),i=n.map((function(t){var n,i;return M((function(r){if(1==r.g)return e.g.disableText?r.return(null):(_(r,2),w(r,yd(e,t),4));if(2!=r.g)return n=r.h,r.return(n.stream);if(i=T(r),e.g.hls.ignoreTextStreamFailures)return r.return(null);throw i}))})),w(f,Promise.all(i),2);for(r=f.h,s=c(n),o=s.next();!o.done;o=s.next())if(a=o.value,l=Wh(a,"GROUP-ID"),(u=e.s.get(l))&&(h=e.u.get(l)))for(d=c(h),p=d.next();!p.done;p=d.next())p.value.stream.codecs=u;return f.return(r.filter((function(e){return e})))}))}(e,r),4);case 4:return b=V.h,w(V,function(e,t){var n,i;return M((function(r){return 1==r.g?(n=t.map((function(t){var n,i;return M((function(r){if(1==r.g)return e.g.disableThumbnails?r.return(null):(_(r,2),w(r,function(e,t){var n,i,r,s,o,a,l,c,u,h;return M((function(d){return 1==d.g?(n=kd(Wh(t,"URI"),e.o),i=Kh(t,"CODECS","jpeg")||"",e.h.has(n)?d.return(e.h.get(n)):(r=vd(t),s=Kh(t,"NAME"),o=Kh(t,"CHARACTERISTICS"),w(d,bd(e,n,i,"image",r,!1,s,null,null,o,!1,!1),2))):null==(a=d.h)?d.return(null):e.h.has(n)?d.return(e.h.get(n)):((l=Kh(t,"RESOLUTION"))&&(c=a.stream.segmentIndex.get(0),(u=c.tilesLayout)&&(a.stream.width=Number(l.split("x")[0])*Number(u.split("x")[0]),a.stream.height=Number(l.split("x")[1])*Number(u.split("x")[1]))),(h=Kh(t,"BANDWIDTH"))&&(a.stream.bandwidth=Number(h)),e.h.set(n,a),d.return(a))}))}(e,t),4));if(2!=r.g)return n=r.h,r.return(n.stream);if(i=T(r),e.g.hls.ignoreImageStreamFailures)return r.return(null);throw i}))})),w(r,Promise.all(n),2)):(i=r.h,r.return(i.filter((function(e){return e}))))}))}(e,o),5);case 5:if(x=V.h,!e.i)throw new Fe(2,7,7001);if(e.Ma&&0==y.length)throw new Fe(2,4,4034);for(k=S=1/0,C=c(e.h.values()),P=C.next();!P.done;P=C.next())I=P.value,S=Math.min(S,I.pe),"text"!=I.stream.type&&(k=Math.min(k,I.Cf-I.pe));if(e.m!=Od?(e.j=new to(0,e.g.defaultPresentationDelay?e.g.defaultPresentationDelay:e.ca?e.ca:3*e.fa),e.j.oc(!1)):(e.j=new to(null,0),e.j.oc(!0)),e.m!=Od)e.wa=e.G,L=Rd,e.m==L.Ge&&(A=e.j.Rc,isNaN(e.g.availabilityWindowOverride)||(A=e.g.availabilityWindowOverride),e.j.Vd(A));else for(e.j.Ia(k),e.j.offset(-S),O=c(e.h.values()),P=O.next();!P.done;P=O.next())(N=P.value).stream.segmentIndex.offset(-S),N.stream.segmentIndex.Xa(0,k);for(e.W=[],D=[],R=c(y),j=R.next();!j.done;j=R.next())for(B=j.value,U=c([B.video,B.audio]),$=U.next();!$.done;$=U.next())(F=$.value)&&D.push(F);return w(V,Promise.all(D.map((function(e){return M((function(t){return w(t,e.createSegmentIndex(),0)}))}))),6);case 6:for(H=c(D),$=H.next();!$.done;$=H.next())q=$.value,e.W.push(q.segmentIndex.K);!function(e){if(e.j){for(var t=c(e.W),n=t.next();!n.done;n=t.next())e.j.Fb(n.value);e.W=[]}}(e),e.j.xd(),e.D={presentationTimeline:e.j,variants:y,textStreams:b,imageStreams:x,offlineSessionIds:[],minBufferTime:0},e.i.makeTextStreamsForClosedCaptions(e.D),E(V)}}))}(r,n.data),3)):(0<(i=r.wa)&&r.C.S(i),s.return(r.D))}))},i.stop=function(){this.C&&(this.C.stop(),this.C=null);var e=[];return this.F&&(e.push(this.F.destroy()),this.F=null),this.g=this.i=null,this.xa.clear(),this.D=null,this.h.clear(),this.u.clear(),this.s.clear(),this.o.clear(),Promise.all(e)},i.update=function(){var e,t,n,i=this;return M((function(r){if(1==r.g)return i.m==Od?r.return():(e=[],i.V=null,(t=Array.from(i.h.values())).length?w(r,fd(i,t[0]),2):r.B(2));for(n=1;n<t.length;n++)e.push(fd(i,t[n]));return w(r,Promise.all(e),0)}))},i.onExpirationUpdated=function(){},$("shaka.hls.HlsParser",pd);var Ld=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"],Ad={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},Md={"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=Wh(e,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)?(t=rt("com.widevine.alpha",[{initDataType:"cenc",initData:t=ke((t=dd(t=Wh(e,"URI"))).data)}]),(e=Kh(e,"KEYID"))&&(t.keyIds=new Set([e.toLowerCase().substr(2)])),t):null},"com.microsoft.playready":function(e){var t=Wh(e,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)?rt("com.microsoft.playready",[{initDataType:"cenc",initData:e=bu(e=ke((e=dd(e=Wh(e,"URI"))).data),t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]))}]):null}},Od="VOD",Nd="EVENT",Dd="LIVE",Rd={He:Od,mg:Nd,Ge:Dd};function jd(e,t,n,i,r,s){if(200<=n&&299>=n&&202!=n)return{uri:r||i,re:i,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"]};r=null;try{r=Lt(t)}catch(e){}throw new Fe(401==n||403==n?2:1,1,1001,i,n,r,e,s)}function Bd(){}function Ud(e,t,n,i,r){var s=new zd;Di(t.headers).forEach((function(e,t){s.append(t,e)}));var o=new qd,a={ae:!1,De:!1};if(e=function(e,t,n,i,r,s,o){var a,l,c,u,h,d,p,f,m,g,v,y;return M((function(b){switch(b.g){case 1:return a=Hd,l=Vd,d=h=0,p=Date.now(),_(b,2),w(b,a(e,n),4);case 4:return c=b.h,s($d(c.headers)),f=c.clone().body.getReader(),g=(m=c.headers.get("Content-Length"))?parseInt(m,10):0,new l({start:function(e){!function t(){var n,i;return M((function(s){switch(s.g){case 1:return _(s,2),w(s,f.read(),4);case 4:n=s.h,S(s,3);break;case 2:return T(s),s.return();case 3:if(n.done){s.B(5);break}if(h+=n.value.byteLength,!o){s.B(5);break}return w(s,o(n.value),5);case 5:(100<(i=Date.now())-p||n.done)&&(r(i-p,h-d,g-h),d=h,p=i),n.done?e.close():(e.enqueue(n.value),t()),E(s)}}))}()}}),w(b,c.arrayBuffer(),5);case 5:u=b.h,S(b,3);break;case 2:if(v=T(b),i.ae)throw new Fe(1,1,7001,e,t);if(i.De)throw new Fe(1,1,1003,e,t);throw new Fe(1,1,1002,e,v,t);case 3:return y=$d(c.headers),b.return(jd(y,u,c.status,e,c.url,t))}}))}(e,n,{body:t.body||void 0,headers:s,method:t.method,signal:o.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},a,i,r,t.streamDataCallback),e=new ri(e,(function(){return a.ae=!0,o.abort(),Promise.resolve()})),t=t.retryParameters.timeout){var l=new pt((function(){a.De=!0,o.abort()}));l.S(t/1e3),e.finally((function(){l.stop()}))}return e}function $d(e){var t={};return e.forEach((function(e,n){t[n.trim()]=e})),t}function Fd(){if(!e.ReadableStream)return!1;try{new ReadableStream({})}catch(e){return!1}return!(!e.fetch||!e.AbortController)}dr.m3u8=function(){return new pd},hr["application/x-mpegurl"]=function(){return new pd},hr["application/vnd.apple.mpegurl"]=function(){return new pd},$("shaka.net.HttpFetchPlugin",Bd),Bd.isSupported=Fd,Bd.parse=Ud;var Hd=e.fetch,qd=e.AbortController,Vd=e.ReadableStream,zd=e.Headers;function Gd(){}function Kd(e,t,n,i,r){var s=new Xd,o=Date.now(),a=0;return new ri(new Promise((function(l,c){s.open(t.method,e,!0),s.responseType="arraybuffer",s.timeout=t.retryParameters.timeout,s.withCredentials=t.allowCrossSiteCredentials,s.onabort=function(){c(new Fe(1,1,7001,e,n))};var u=!1;for(var h in s.onreadystatechange=function(){if(2==s.readyState&&!u){var e=Wd(s);r(e),u=!0}},s.onload=function(){var t=Wd(s),i=s.response;try{var r=jd(t,i,s.status,e,s.responseURL,n);l(r)}catch(e){c(e)}},s.onerror=function(t){c(new Fe(1,1,1002,e,t,n))},s.ontimeout=function(){c(new Fe(1,1,1003,e,n))},s.onprogress=function(e){var t=Date.now();(100<t-o||e.lengthComputable&&e.loaded==e.total)&&(i(t-o,e.loaded-a,e.total-e.loaded),a=e.loaded,o=t)},t.headers)s.setRequestHeader(h.toLowerCase(),t.headers[h]);s.send(t.body)})),(function(){return s.abort(),Promise.resolve()}))}function Wd(e){var t=e.getAllResponseHeaders().trim().split("\r\n");e={};for(var n=(t=c(t)).next();!n.done;n=t.next())e[(n=n.value.split(": "))[0].toLowerCase()]=n.slice(1).join(": ");return e}Fd()&&(yi("http",Ud,2,!0),yi("https",Ud,2,!0),yi("blob",Ud,2,!0)),$("shaka.net.HttpXHRPlugin",Gd),Gd.parse=Kd;var Xd=e.XMLHttpRequest;function Jd(e,t,n,i){this.g=e,this.i=t,this.groupId=n,this.h=i}function Yd(e){return e.sa().map((function(e){return"{"+encodeURI(e)+"}"})).join("")+":"+e.pa+":"+e.ga}function Qd(e,t){return jo(e.g.sa(),e.g.pa,e.g.ga,t.streaming.retryParameters)}function Zd(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function ep(e,t){e.i+=t;var n=e.l;return e.l++,e.g.set(n,t),n}function tp(e){var t=this;this.o=e,this.j=new Map,this.i=new ki((function(){return np(t).catch((function(){}))})),this.h=[],this.m=function(){},this.l=function(){},this.g=new Zd}function np(e){var t=e.h.map((function(e){return e()}));return e.h=[],Promise.all(t)}function ip(e,t,n,i,r,s){Ci(e.i);var o=(e.j.get(t)||Promise.resolve()).then((function(){var t,o,a,l,c,u,h;return M((function(d){if(1==d.g)return w(d,function(e,t){var n,i,r,s;return M((function(o){return 1==o.g?(n=xi,i=e.o.request(n,t),r=function(){return i.abort()},e.h.push(r),w(o,i.promise,2)):(s=o.h,Z(e.h,r),o.return(s.data))}))}(e,n),2);if(t=d.h,e.i.g)throw new Fe(2,9,7001);if(r)for(l in o=ke(t),(a=new yu(o)).data)c=Number(l),u=a.data[c],h=a.g[c],e.l(u,h);e.g.close(i,t.byteLength);var p=e.g;return e.m(0==p.i?0:p.j/p.i,e.g.h),d.return(s(t))}))}));e.j.set(t,o)}function rp(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new ut,e.onabort=function(e){e.preventDefault(),n.g.reject()},e.onerror=function(e){e.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}function sp(e,t){return new Promise((function(n,i){var r=e.h.openCursor();r.onerror=i,r.onsuccess=function(){var e;return M((function(i){if(1==i.g)return null==r.result?(n(),i.return()):(e=r.result,w(i,t(e.key,e.value,e),2));e.continue(),E(i)}))}}))}function op(e){this.h=e,this.g=[]}function ap(e,t){return lp(e,t,"readwrite")}function lp(e,t,n){var i=new rp(n=e.h.transaction([t],n),t);return e.g.push(i),i.promise().then((function(){Z(e.g,i)}),(function(){Z(e.g,i)})),i}function cp(e,t,n){this.h=new op(e),this.i=t,this.g=n}function up(e){return Promise.reject(new Fe(2,9,9011,"Cannot add new value to "+e))}function hp(e,t,n,i){t=(e=ap(e.h,t)).store();for(var r={},s=(n=c(n)).next();!s.done;r={tc:r.tc},s=n.next())r.tc=s.value,t.delete(r.tc).onsuccess=function(e){return function(){return i(e.tc)}}(r);return e.promise()}function dp(e,t,n){var i,r,s,o,a,l,u;return M((function(h){if(1==h.g){for(i=lp(e.h,t,"readonly"),r=i.store(),s={},o=[],a={},l=c(n),u=l.next();!u.done;a={Qb:a.Qb,Ob:a.Ob},u=l.next())a.Ob=u.value,a.Qb=r.get(a.Ob),a.Qb.onsuccess=function(e){return function(){null==e.Qb.result&&o.push(e.Ob),s[e.Ob]=e.Qb.result}}(a);return w(h,i.promise(),2)}if(o.length)throw new Fe(2,9,9012,"Could not find values for "+o);return h.return(n.map((function(e){return s[e]})))}))}function pp(e){this.g=new op(e)}function fp(){this.g=new Map}function mp(e){var t=null;if(e.g.forEach((function(e,n){e.getCells().forEach((function(e,i){e.hasFixedKeySpace()||t||(t={path:{Ba:n,la:i},la:e})}))})),t)return t;throw new Fe(2,9,9013,"Could not find a cell that supports add-operations")}function gp(e,t,n){if(!(e=e.g.get(t)))throw new Fe(2,9,9013,"Could not find mechanism with name "+t);if(!(t=e.getCells().get(n)))throw new Fe(2,9,9013,"Could not find cell with name "+n);return t}function vp(e,t){yp.set(e,t)}yi("http",Kd,1,!0),yi("https",Kd,1,!0),yi("blob",Kd,1,!0),Zd.prototype.close=function(e,t){if(this.g.has(e)){var n=this.g.get(e);this.g.delete(e),this.j+=n,this.h+=t}},tp.prototype.destroy=function(){return this.i.destroy()},rp.prototype.abort=function(){var e=this;return M((function(t){if(1==t.g){try{e.i.abort()}catch(e){}return _(t,2),w(t,e.g,4)}if(2!=t.g)return S(t,0);T(t),E(t)}))},rp.prototype.store=function(){return this.h},rp.prototype.promise=function(){return this.g},op.prototype.destroy=function(){return Promise.all(this.g.map((function(e){return e.abort()})))},(i=cp.prototype).destroy=function(){return this.h.destroy()},i.hasFixedKeySpace=function(){return!0},i.addSegments=function(){return up(this.i)},i.removeSegments=function(e,t){return hp(this,this.i,e,t)},i.getSegments=function(e){var t,n=this;return M((function(i){return 1==i.g?w(i,dp(n,n.i,e),2):(t=i.h,i.return(t.map((function(e){return n.be(e)}))))}))},i.addManifests=function(){return up(this.g)},i.updateManifest=function(){return Promise.reject(new Fe(2,9,9016,"Cannot modify values in "+this.g))},i.updateManifestExpiration=function(e,t){var n=ap(this.h,this.g),i=n.store();return i.get(e).onsuccess=function(n){(n=n.target.result)&&(n.expiration=t,i.put(n,e))},n.promise()},i.removeManifests=function(e,t){return hp(this,this.g,e,t)},i.getManifests=function(e){var t,n=this;return M((function(i){return 1==i.g?w(i,dp(n,n.g,e),2):(t=i.h,i.return(Promise.all(t.map((function(e){return n.Zb(e)})))))}))},i.getAllManifests=function(){var e,t,n=this;return M((function(i){return 1==i.g?(e=lp(n.h,n.g,"readonly"),t=new Map,w(i,sp(e,(function(e,i){var r;return M((function(s){if(1==s.g)return w(s,n.Zb(i),2);r=s.h,t.set(e,r),E(s)}))})),2)):3!=i.g?w(i,e.promise(),3):i.return(t)}))},i.be=function(e){return e},i.Zb=function(e){return Promise.resolve(e)},i.add=function(e,t){var n,i,r,s,o,a,l,u=this;return M((function(h){if(1==h.g){for(n=ap(u.h,e),i=n.store(),r=[],s={},o=c(t),a=o.next();!a.done;s={uc:s.uc},a=o.next())l=a.value,s.uc=i.add(l),s.uc.onsuccess=function(e){return function(){r.push(e.uc.result)}}(s);return w(h,n.promise(),2)}return h.return(r)}))},pp.prototype.destroy=function(){return this.g.destroy()},pp.prototype.getAll=function(){var e,t,n=this;return M((function(i){return 1==i.g?(e=lp(n.g,"session-ids","readonly"),t=[],w(i,sp(e,(function(e,n){t.push(n)})),2)):3!=i.g?w(i,e.promise(),3):i.return(t)}))},pp.prototype.add=function(e){for(var t=ap(this.g,"session-ids"),n=t.store(),i=(e=c(e)).next();!i.done;i=e.next())n.add(i.value);return t.promise()},pp.prototype.remove=function(e){var t,n=this;return M((function(i){return 1==i.g?w(i,sp(t=ap(n.g,"session-ids"),(function(t,n,i){e.includes(n.sessionId)&&i.delete()})),2):w(i,t.promise(),0)}))},fp.prototype.destroy=function(){for(var e=[],t=c(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},fp.prototype.init=function(){var e=this;yp.forEach((function(t,n){var i=t();i&&e.g.set(n,i)}));for(var t=[],n=c(this.g.values()),i=n.next();!i.done;i=n.next())t.push(i.value.init());return Promise.all(t)},$("shaka.offline.StorageMuxer",fp),fp.unregister=function(e){yp.delete(e)},fp.register=vp,fp.prototype.destroy=fp.prototype.destroy;var yp=new Map;function bp(){cp.apply(this,arguments)}function wp(e,t){!function(e){var t=e.streams.filter((function(e){return"audio"==e.contentType}));if(e=e.streams.filter((function(e){return"video"==e.contentType})),!t.every((function(e){return e.variantIds}))||!e.every((function(e){return e.variantIds}))){for(var n=c(t),i=n.next();!i.done;i=n.next())i.value.variantIds=[];for(i=(n=c(e)).next();!i.done;i=n.next())i.value.variantIds=[];if(n=0,e.length&&!t.length){var r=n++,s=c(e);for(i=s.next();!i.done;i=s.next())i.value.variantIds.push(r)}if(!e.length&&t.length)for(r=n++,i=(s=c(t)).next();!i.done;i=s.next())i.value.variantIds.push(r);if(e.length&&t.length)for(i=(t=c(t)).next();!i.done;i=t.next())for(i=i.value,s=(r=c(e)).next();!s.done;s=r.next()){s=s.value;var o=n++;i.variantIds.push(o),s.variantIds.push(o)}}}(e);for(var n=c(e.streams),i=n.next();!i.done;i=n.next());return e.streams.map((function(n){return function(e,t,n){var i=e.initSegmentUri?Ep(e.initSegmentUri):null,r=t+e.presentationTimeOffset,s=t+n;return{id:e.id,originalId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,initSegmentKey:i,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map((function(e){var n=Ep(e.uri);return{startTime:t+e.startTime,endTime:t+e.endTime,dataKey:n,initSegmentKey:i,appendWindowStart:t,appendWindowEnd:s,timestampOffset:r,tilesLayout:""}})),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0}}(n,e.startTime,t)}))}function Ep(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new Fe(2,9,9004,"Could not parse uri "+e)}function _p(){cp.apply(this,arguments)}function xp(e,t,n){return{id:e.id,originalId:e.originalId,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map((function(i){return{startTime:t+i.startTime,endTime:t+i.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:i.dataKey,tilesLayout:""}})),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0}}function Sp(){cp.apply(this,arguments)}function Tp(){this.m=this.j=this.i=this.h=this.g=this.l=null}function kp(e,t,n,i){this.g=e,this.i=t,this.h=n,this.l=i,this.j=["offline:",e,"/",t,"/",n,"/",i].join("")}function Cp(e){if(null==(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e)))return null;var t=e[1];if("manifest"!=t&&"segment"!=t)return null;var n=e[2];if(!n)return null;var i=e[3];return i&&null!=t?new kp(t,n,i,Number(e[4])):null}function Pp(e,t){this.h=e,this.g=t}function Ip(e,t){var n=new to(null,0);n.Ia(t.duration);var i=t.streams.filter((function(e){return"audio"==e.type})),r=t.streams.filter((function(e){return"video"==e.type}));i=function(e,t,n,i){for(var r=new Set,s=c(t),o=s.next();!o.done;o=s.next()){var a=c(o.value.variantIds);for(o=a.next();!o.done;o=a.next())r.add(o.value)}for(o=(s=c(n)).next();!o.done;o=s.next())for(o=(a=c(o.value.variantIds)).next();!o.done;o=a.next())r.add(o.value);for(s=new Map,o=(r=c(r)).next();!o.done;o=r.next())o=o.value,s.set(o,{id:o,language:"",primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(r=(t=c(t)).next();!r.done;r=t.next())for(o=Lp(e,r=r.value,i),r=(a=c(r.variantIds)).next();!r.done;r=a.next())(r=s.get(r.value)).language=o.language,r.primary=r.primary||o.primary,r.audio=o;for(t=(n=c(n)).next();!t.done;t=n.next())for(t=Lp(e,r=t.value,i),r=(o=c(r.variantIds)).next();!r.done;r=o.next())(r=s.get(r.value)).primary=r.primary||t.primary,r.video=t;return s}(e,i,r,n),r=t.streams.filter((function(e){return e.type==at})).map((function(t){return Lp(e,t,n)}));var s=t.streams.filter((function(e){return"image"==e.type})).map((function(t){return Lp(e,t,n)})),o=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var a=c(i.values()),l=a.next();!l.done;l=a.next())(l=l.value).audio&&l.audio.encrypted&&(l.audio.drmInfos=o),l.video&&l.video.encrypted&&(l.video.drmInfos=o);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(i.values()),textStreams:r,imageStreams:s}}function Lp(e,t,n){var i=t.segments.map((function(t){return function(e,t){var n=new kp("segment",e.h,e.g,t.dataKey);return new eo(t.startTime,t.endTime,(function(){return[n.toString()]}),0,null,null!=t.initSegmentKey?function(e,t){var n=new kp("segment",e.h,e.g,t);return new Zs((function(){return[n.toString()]}),0,null)}(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||"")}(e,t)}));return n.Fb(i),{id:t.id,originalId:t.originalId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new _o(i),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout}}function Ap(){this.g=null}function Mp(){}function Op(e){var t=Cp(e);return e=t&&"manifest"==t.g?ai(e={uri:e,re:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}}):t&&"segment"==t.g?function(e,t){var n=new fp;return ai(void 0).$((function(){return n.init()})).$((function(){return gp(n,t.Ba(),t.la())})).$((function(e){return e.getSegments([t.key()])})).$((function(e){return{uri:t,data:e[0].data,headers:{}}})).finally((function(){return n.destroy()}))}(t.key(),t):si(new Fe(2,1,9004,e))}function Np(e,t,n){var i,r,s,o,a,l;return M((function(u){switch(u.g){case 1:i=[];for(var h=[],d=c(n),p=d.next();!p.done;p=d.next()){p=p.value;for(var f=!1,m=c(h),g=m.next();!g.done;g=m.next())if(Dp((g=g.value).info,p)){g.sessionIds.push(p.sessionId),f=!0;break}f||h.push({info:p,sessionIds:[p.sessionId]})}r=c(h),s=r.next();case 2:if(s.done){u.B(4);break}return o=s.value,a=function(e,t,n){var i,r;return M((function(s){switch(s.g){case 1:return i=new Bi({mb:t,onError:function(){},Oc:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),_(s,2),i.configure(e),w(s,function(e,t,n,i,r,s){var o=new Map;return(r={audioCapabilities:r,videoCapabilities:s,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t}).drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:i,serverCertificateUri:"",initData:null,keyIds:null}],o.set(t,r),Gi(e,o,[])}(i,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:S(s,3);break;case 2:return T(s),w(s,i.destroy(),5);case 5:case 9:return s.return([]);case 3:return _(s,6),w(s,Fi(i),8);case 8:S(s,7);break;case 6:return T(s),w(s,i.destroy(),9);case 7:return r=[],w(s,Promise.all(n.sessionIds.map((function(e){return M((function(t){return 1==t.g?(_(t,2),w(t,function(e,t){var n,i,r;return M((function(s){return 1==s.g?w(s,Ki(e,t),2):3!=s.g?(n=s.h)?(i=[],(r=e.i.get(n))&&(r.Ja=new ut,i.push(r.Ja)),i.push(n.remove()),w(s,Promise.all(i),3)):s.return():(e.i.delete(n),void E(s))}))}(i,e),4)):2!=t.g?(r.push(e),S(t,0)):(T(t),void E(t))}))}))),10);case 10:return w(s,i.destroy(),11);case 11:return s.return(r)}}))}(e,t,o),w(u,a,5);case 5:l=u.h,i=i.concat(l),s=r.next(),u.B(2);break;case 4:return u.return(i)}}))}function Dp(e,t){function n(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&ee(e.audioCapabilities,t.audioCapabilities,n)&&ee(e.videoCapabilities,t.videoCapabilities,n)}function Rp(e,t){var n=Ip(new Pp(e.Ba(),e.la()),t),i=t.appMetadata||{};return n=jp(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:i,isIncomplete:t.isIncomplete||!1}}function jp(e){for(var t=[],n=function(e){return e.filter((function(e){return On(e)}))}(e.variants),i=(n=c(n)).next();!i.done;i=n.next())t.push(kn(i.value));for(n=(e=c(e.textStreams)).next();!n.done;n=e.next())t.push(Cn(n.value));return t}function Bp(){this.g={}}function Up(e,t){var n=t.audio,i=t.video;if(n&&!i&&(e.g[n.id]=n.bandwidth||t.bandwidth),!n&&i&&(e.g[i.id]=i.bandwidth||t.bandwidth),n&&i){var r=n.bandwidth||393216,s=i.bandwidth||t.bandwidth-r;0>=s&&(s=t.bandwidth),e.g[n.id]=r,e.g[i.id]=s}}function $p(e,t){e.g[t.id]=t.bandwidth||2048}function Fp(e,t){var n=e.g[t];return null==n&&(n=0),n}function Hp(e){var t=this;if(e&&e.constructor!=$a)throw new Fe(2,9,9008);this.g=this.h=null,e?(this.h=e.h,this.g=e.bc()):(this.h=Ma(),this.g=new vi),this.i=[],this.j=[];var n=!e;this.l=new ki((function(){var e,i,r,s,o;return M((function(a){switch(a.g){case 1:return w(a,Promise.all(t.j.map((function(e){return np(e)}))),2);case 2:for(e=function(){},i=[],r=c(t.i),s=r.next();!s.done;s=r.next())o=s.value,i.push(o.then(e,e));return w(a,Promise.all(i),3);case 3:if(!n){a.B(4);break}return w(a,t.g.destroy(),4);case 4:t.h=null,t.g=null,E(a)}}))}))}function qp(){if(ft())e:{for(var e=c(yp.values()),t=e.next();!t.done;t=e.next())if(t=(t=t.value)()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}function Vp(e){var t,n,i;return M((function(r){switch(r.g){case 1:return w(r,(t=new fp).init(),2);case 2:return w(r,mp(t),3);case 3:return n=r.h,i=new kp("manifest",n.path.Ba,n.path.la,e),w(r,t.destroy(),4);case 4:return w(r,(new Hp).remove(i.toString()),0)}}))}function zp(e,t,n,i,r,s){var o,a,l,u,h,d,p,f,m,g,v;return M((function(y){switch(y.g){case 1:for(o=!1,_(y,2),a=!0,l=c(n.streams),u=l.next();!u.done;u=l.next())for(h=u.value,d=c(h.segments),p=d.next();!p.done;p=d.next())f=p.value,null!=(m=f.pendingSegmentRefId?i[f.pendingSegmentRefId]:null)&&(f.dataKey=m,f.pendingSegmentRefId=void 0),null!=(m=f.pendingInitSegmentRefId?i[f.pendingInitSegmentRefId]:null)&&(f.initSegmentKey=m,f.pendingInitSegmentRefId=void 0),f.pendingSegmentRefId&&(a=!1),f.pendingInitSegmentRefId&&(a=!1);return n.size+=r,a&&(n.isIncomplete=!1),w(y,e.updateManifest(t,n),4);case 4:o=!0,s(),S(y,0);break;case 2:return g=T(y),w(y,Vp(t),5);case 5:if(o){y.B(6);break}return v=Object.values(i),w(y,e.removeSegments(v,(function(){})),6);case 6:throw g}}))}function Gp(e){return e.variants.some((function(e){var t=e.audio&&e.audio.encrypted;return e.video&&e.video.encrypted||t}))}function Kp(e){return e.variants.some((function(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]).some((function(e){return e.initData&&e.initData.length}))}))}function Wp(e,t){for(var n=[],i=c(e.streams),r=i.next();!r.done;r=i.next())r=r.value,t&&"video"==r.type?n.push({contentType:zt(r.mimeType,r.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=r.type||n.push({contentType:zt(r.mimeType,r.codecs),robustness:e.drmInfo.audioRobustness});return n}function Xp(e,t,n){return M((function(i){return w(i,function(e,t,n,i){var r,s,o;return M((function(a){return 1==a.g?i.drmInfo?(r=function(e){var t=Array.from(e.g.keys());if(!t.length)throw new Fe(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}(n),s=i.sessionIds.map((function(e){return{sessionId:e,keySystem:i.drmInfo.keySystem,licenseUri:i.drmInfo.licenseServerUri,serverCertificate:i.drmInfo.serverCertificate,audioCapabilities:Wp(i,!1),videoCapabilities:Wp(i,!0)}})),w(a,Np(t,e,s),2)):a.return():3!=a.g?(o=a.h,w(a,r.remove(o),3)):w(a,r.add(s.filter((function(e){return!o.includes(e.sessionId)}))),0)}))}(e.g,e.h.drm,n,t),0)}))}function Jp(e,t,n){function i(){}var r=function(e){for(var t=new Set,n=(e=c(e.streams)).next();!n.done;n=e.next())for(var i=(n=c(n.value.segments)).next();!i.done;i=n.next())null!=(i=i.value).initSegmentKey&&t.add(i.initSegmentKey),t.add(i.dataKey);return Array.from(t)}(n);return Rp(t,n),Promise.all([e.removeSegments(r,i),e.removeManifests([t.key()],i)])}function Yp(e,t,n,i,r){var s={id:i.id,originalId:i.originalId,primary:i.primary,type:i.type,mimeType:i.mimeType,codecs:i.codecs,frameRate:i.frameRate,pixelAspectRatio:i.pixelAspectRatio,hdr:i.hdr,kind:i.kind,language:i.language,label:i.label,width:i.width||null,height:i.height||null,encrypted:i.encrypted,keyIds:i.keyIds,segments:[],variantIds:[],roles:i.roles,forced:i.forced,channelsCount:i.channelsCount,audioSamplingRate:i.audioSamplingRate,spatialAudio:i.spatialAudio,closedCaptions:i.closedCaptions,tilesLayout:i.tilesLayout};return function(e,t,n){if(null!=(t=e.segmentIndex.find(t)))for(var i=e.segmentIndex.get(t);i;)n(i),i=e.segmentIndex.get(++t)}(i,n.presentationTimeline.Qa(),(function(n){var o=Yd(n),a=void 0;if(!r.has(o)){var l=n.endTime-n.startTime;l=Fp(t,i.id)*l,l=ep(e.g,l),r.set(o,new Jd(n,l,i.id,!1))}n.g&&(a=Yd(n.g),r.has(a)||(l=.5*Fp(t,i.id),l=ep(e.g,l),r.set(a,new Jd(n.g,l,i.id,!0)))),s.segments.push({pendingInitSegmentRefId:a,initSegmentKey:a?0:null,startTime:n.startTime,endTime:n.endTime,appendWindowStart:n.appendWindowStart,appendWindowEnd:n.appendWindowEnd,timestampOffset:n.timestampOffset,tilesLayout:n.tilesLayout,pendingSegmentRefId:o,dataKey:0})})),s}function Qp(e){if(e.l.g)throw new Fe(2,9,7001)}function Zp(){if(!qp())throw new Fe(2,9,9e3)}function ef(e,t){return M((function(n){return 1==n.g?(e.i.push(t),x(n),w(n,t,4)):2!=n.g?n.return(n.h):(k(n),Z(e.i,t),C(n,0))}))}function tf(e){for(var t=new Set,n=c(e.textStreams),i=n.next();!i.done;i=n.next())t.add(i.value);for(i=(n=c(e.imageStreams)).next();!i.done;i=n.next())t.add(i.value);for(n=(e=c(e.variants)).next();!n.done;n=e.next())(n=n.value).audio&&t.add(n.audio),n.video&&t.add(n.video);return t}g(bp,cp),bp.prototype.updateManifestExpiration=function(e,t){var n,i,r,s=this;return M((function(o){return n=ap(s.h,s.g),i=n.store(),r=new ut,i.get(e).onsuccess=function(n){(n=n.target.result)?(n.expiration=t,i.put(n),r.resolve()):r.reject(new Fe(2,9,9012,"Could not find values for "+e))},w(o,Promise.all([n.promise(),r]),0)}))},bp.prototype.Zb=function(e){var t,n,i,r,s,o;return M((function(a){if(1==a.g){for(t=[],n=0;n<e.periods.length;++n)i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,r=i-e.periods[n].startTime,s=wp(e.periods[n],r),t.push(s);return w(a,hh(t),2)}return o=a.h,a.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?1/0:e.expiration,streams:o,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata})}))},bp.prototype.be=function(e){return{data:e.data}},g(_p,cp),_p.prototype.Zb=function(e){var t,n,i,r,s,o;return M((function(a){if(1==a.g){for(t=[],n=0;n<e.periods.length;++n){i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,r=i-e.periods[n].startTime;for(var l=e.periods[n],u=[],h=c(l.streams),d=h.next();!d.done;d=h.next())0!=(d=d.value).variantIds.length&&u.push(xp(d,l.startTime,l.startTime+r));s=u,t.push(s)}return w(a,hh(t),2)}return o=a.h,a.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:null==e.expiration?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:o})}))},g(Sp,cp),(i=Sp.prototype).hasFixedKeySpace=function(){return!1},i.addSegments=function(e){return this.add(this.i,e)},i.addManifests=function(e){return this.add(this.g,e)},i.updateManifest=function(e,t){return function(e,t,n){var i=(e=ap(e.h,e.g)).store();return i.get(t).onsuccess=function(){i.put(n,t)},e.promise()}(this,e,t)},i.Zb=function(e){return null==e.expiration&&(e.expiration=1/0),Promise.resolve(e)},(i=Tp.prototype).init=function(){var t=this,n=new ut,i=e.indexedDB.open("shaka_offline_db",5);return i.onsuccess=function(){var e=i.result;t.l=e;var r=e.objectStoreNames;r=r.contains("manifest")&&r.contains("segment")?new bp(e,"segment","manifest"):null,t.g=r,r=(r=e.objectStoreNames).contains("manifest-v2")&&r.contains("segment-v2")?new _p(e,"segment-v2","manifest-v2"):null,t.h=r,r=(r=e.objectStoreNames).contains("manifest-v3")&&r.contains("segment-v3")?new _p(e,"segment-v3","manifest-v3"):null,t.i=r,r=(r=e.objectStoreNames).contains("manifest-v5")&&r.contains("segment-v5")?new Sp(e,"segment-v5","manifest-v5"):null,t.j=r,e=e.objectStoreNames.contains("session-ids")?new pp(e):null,t.m=e,n.resolve()},i.onupgradeneeded=function(){for(var e=i.result,t=c(["segment-v5","manifest-v5","session-ids"]),n=t.next();!n.done;n=t.next())n=n.value,e.objectStoreNames.contains(n)||e.createObjectStore(n,{autoIncrement:!0})},i.onerror=function(e){n.reject(new Fe(2,9,9001,i.error)),e.preventDefault()},n},i.destroy=function(){var e=this;return M((function(t){switch(t.g){case 1:if(!e.g){t.B(2);break}return w(t,e.g.destroy(),2);case 2:if(!e.h){t.B(4);break}return w(t,e.h.destroy(),4);case 4:if(!e.i){t.B(6);break}return w(t,e.i.destroy(),6);case 6:if(!e.j){t.B(8);break}return w(t,e.j.destroy(),8);case 8:if(!e.m){t.B(10);break}return w(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),E(t)}}))},i.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},i.getEmeSessionCell=function(){return this.m},i.erase=function(){var t=this;return M((function(n){switch(n.g){case 1:if(!t.g){n.B(2);break}return w(n,t.g.destroy(),2);case 2:if(!t.h){n.B(4);break}return w(n,t.h.destroy(),4);case 4:if(!t.i){n.B(6);break}return w(n,t.i.destroy(),6);case 6:if(!t.j){n.B(8);break}return w(n,t.j.destroy(),8);case 8:return t.l&&t.l.close(),w(n,function(){var t=new ut,n=e.indexedDB.deleteDatabase("shaka_offline_db");return n.onblocked=function(){},n.onsuccess=function(){t.resolve()},n.onerror=function(e){t.reject(new Fe(2,9,9001,n.error)),e.preventDefault()},t}(),10);case 10:return t.l=null,t.g=null,t.h=null,t.i=null,t.j=null,w(n,t.init(),0)}}))},vp("idb",(function(){return bt()||gt()||!e.indexedDB?null:new Tp})),kp.prototype.Ba=function(){return this.i},kp.prototype.la=function(){return this.h},kp.prototype.key=function(){return this.l},kp.prototype.toString=function(){return this.j},(i=Ap.prototype).configure=function(){},i.start=function(e,t){var n,i,r,s,o,a,l=this;return M((function(c){switch(c.g){case 1:if(n=Cp(e),l.g=n,null==n||"manifest"!=n.g)throw new Fe(2,1,9004,e);return i=new fp,x(c),w(c,i.init(),4);case 4:return w(c,gp(i,n.Ba(),n.la()),5);case 5:return w(c,c.h.getManifests([n.key()]),6);case 6:return r=c.h,s=r[0],o=new Pp(n.Ba(),n.la()),a=Ip(o,s),t.makeTextStreamsForClosedCaptions(a),c.return(a);case 2:return k(c),w(c,i.destroy(),7);case 7:C(c,0)}}))},i.stop=function(){return Promise.resolve()},i.update=function(){},i.onExpirationUpdated=function(e,t){var n,i,r,s,o,a,l,c=this;return M((function(u){switch(u.g){case 1:return n=c.g,i=new fp,_(u,2,3),w(u,i.init(),5);case 5:return w(u,gp(i,n.Ba(),n.la()),6);case 6:return w(u,(r=u.h).getManifests([n.key()]),7);case 7:if(s=u.h,o=s[0],a=o.sessionIds.includes(e),l=null==o.expiration||o.expiration>t,!a||!l){u.B(3);break}return w(u,r.updateManifestExpiration(n.key(),t),3);case 3:return k(u),w(u,i.destroy(),10);case 10:C(u,0);break;case 2:T(u),u.B(3)}}))},hr["application/x-offline-manifest"]=function(){return new Ap},$("shaka.offline.OfflineScheme",Mp),Mp.plugin=Op,yi("offline",Op),(i=Hp.prototype).destroy=function(){return this.l.destroy()},i.configure=function(e,t){return 2==arguments.length&&"string"==typeof e&&(e=Ia(e,t)),e.manifest&&e.manifest.dash&&"defaultPresentationDelay"in e.manifest.dash&&(Le("manifest.dash.defaultPresentationDelay configuration","Please Use manifest.defaultPresentationDelay instead."),e.manifest.defaultPresentationDelay=e.manifest.dash.defaultPresentationDelay,delete e.manifest.dash.defaultPresentationDelay),Oa(this.h,e)},i.getConfiguration=function(){var e=Ma();return Oa(e,this.h,Ma()),e},i.bc=function(){return this.g},i.store=function(e,t,n){var i=this,r=this.getConfiguration(),s=new tp(this.g);this.j.push(s),t=function(e,t,n,i,r,s){var o,a,l,u,h,d,p,f,m,g,v,y,b;return M((function(x){switch(x.g){case 1:return Zp(),a=o=null,l=new fp,d=h=u=null,_(x,2,3),w(x,i(),5);case 5:return o=x.h,w(x,function(e,t,n,i){var r,s,o,a,l;return M((function(c){if(1==c.g)return r=null,s=e.g,o={networkingEngine:s,modifyManifestRequest:function(){},modifySegmentRequest:function(){},filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){r=e},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){}},n.configure(i.manifest),Qp(e),w(c,n.start(t,o),2);if(3!=c.g)return a=c.h,Qp(e),l=tf(a),w(c,Promise.all(Ni(l,(function(e){return e.createSegmentIndex()}))),3);if(Qp(e),r)throw r;return c.return(a)}))}(e,t,o,r),6);case 6:if(p=x.h,Qp(e),p.presentationTimeline.T()||p.presentationTimeline.lb())throw new Fe(2,9,9005,t);return w(x,function(e,t,n,i){var r;return M((function(s){switch(s.g){case 1:return(r=new Bi({mb:e.g,onError:n,Oc:function(){},onExpirationUpdated:function(){},onEvent:function(){}})).configure(i.drm),w(s,function(e,t,n){return e.fa=!0,e.C=[],e.L=n,$i(e,t)}(r,t.variants,i.offline.usePersistentLicense),2);case 2:return w(s,Fi(r),3);case 3:return w(s,Hi(r),4);case 4:return s.return(r)}}))}(e,p,(function(e){d=d||e}),r),7);case 7:if(a=x.h,Qp(e),d)throw d;return w(x,function(e,t){var n,i,r,s,o,a,l,u,h,d,p,f,m,g,v,y,b,x,k,C,P,I,L,A,O,N,D,R;return M((function(M){switch(M.g){case 1:return n={width:1/0,height:1/0},function(e,t,n){e.variants=e.variants.filter((function(e){return yn(e,t,n)}))}(e,t.restrictions,n),w(M,bn(e,t.offline.usePersistentLicense),2);case 2:for(i=[],r=t.preferredAudioChannelCount,s=t.preferredDecodingAttributes,o=t.preferredVideoCodecs,a=t.preferredAudioCodecs,mn(e,o,a,r,s),l=c(e.variants),u=l.next();!u.done;u=l.next())h=u.value,i.push(kn(h));for(d=c(e.textStreams),p=d.next();!p.done;p=d.next())f=p.value,i.push(Cn(f));for(m=c(e.imageStreams),g=m.next();!g.done;g=m.next())v=g.value,i.push(Pn(v));return w(M,t.offline.trackSelectionCallback(i),3);case 3:for(y=M.h,b=e.presentationTimeline.getDuration(),x=0,k=c(y),C=k.next();!C.done;C=k.next())P=C.value,I=P.bandwidth*b/8,x+=I;return _(M,4),w(M,t.offline.downloadSizeCallback(x),6);case 6:if(!M.h)throw new Fe(2,9,9014);S(M,5);break;case 4:if((L=T(M))instanceof Fe)throw L;throw new Fe(2,9,9015);case 5:for(A=new Set,O=new Set,N=new Set,D=c(y),C=D.next();!C.done;C=D.next())"variant"==(R=C.value).type&&A.add(R.id),"text"==R.type&&O.add(R.id),"image"==R.type&&N.add(R.id);e.variants=e.variants.filter((function(e){return A.has(e.id)})),e.textStreams=e.textStreams.filter((function(e){return O.has(e.id)})),e.imageStreams=e.imageStreams.filter((function(e){return N.has(e.id)})),function(e){e.variants.map((function(e){return e.video}));var t=new Set(e.variants.map((function(e){return e.audio})));e=e.textStreams;for(var n=c(t),i=n.next();!i.done;i=n.next())for(var r=(i=c(t)).next();!r.done;r=i.next());for(n=(t=c(e)).next();!n.done;n=t.next())for(i=(n=c(e)).next();!i.done;i=n.next());}(e),E(M)}}))}(p,r),8);case 8:return w(x,l.init(),9);case 9:return Qp(e),w(x,mp(l),10);case 10:return u=x.h,Qp(e),f=function(e,t,n,i,r,s){var o=function(e,t,n){return{offlineUri:null,originalManifestUri:e,duration:t.presentationTimeline.getDuration(),size:0,expiration:1/0,tracks:t=jp(t),appMetadata:n,isIncomplete:!1}}(n,t,i),a=r.offline.progressCallback;!function(e,t,n){e.m=function(e,t){o.size=t,a(o,e)},e.l=n}(s,0,(function(t,n){l&&r.offline.usePersistentLicense&&u==n&&qi(e,"cenc",t)}));var l=Gp(t)&&!Kp(t),u=null;l&&(u=nf.get(e.g.keySystem));for(var h=new Bp,d=c(t.textStreams),p=d.next();!p.done;p=d.next())h.g[p.value.id]=52;for(p=(d=c(t.imageStreams)).next();!p.done;p=d.next())$p(h,p.value);for(d=(p=c(t.variants)).next();!d.done;d=p.next())Up(h,d.value);return h=function(e,t,n){for(var i=new Map,r=tf(n),s=new Map,o=(r=c(r)).next();!o.done;o=r.next()){var a=Yp(e,t,n,o=o.value,i);s.set(o.id,a)}for(t=(e=c(n.variants)).next();!t.done;t=e.next())(t=t.value).audio&&s.get(t.audio.id).variantIds.push(t.id),t.video&&s.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(s.values()),Xd:Array.from(i.values())}}(s,h,t),s=h.streams,h=h.Xd,p=e.g,d=r.offline.usePersistentLicense,p&&d&&(p.initData=[]),{Af:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.ac(),streams:s,sessionIds:d?zi(e):[],drmInfo:p,appMetadata:i,isIncomplete:!0},Xd:h}}(a,p,t,n,r,s),m=f.Af,g=f.Xd,w(x,u.la.addManifests([m]),11);case 11:if(v=x.h,Qp(e),h=v[0],Qp(e),d)throw d;return w(x,function(e,t,n,i,r,s,o,a,l){var u,h,d,p,f,m,g,v,y,b;return M((function(x){switch(x.g){case 1:if(u={},h=0,d=function(t,d){var p,f,m,g,v,y,b;return M((function(_){if(1==_.g){for(p={},f=c(t),m=f.next();!m.done;p={ab:p.ab},m=f.next())p.ab=m.value,g=Qd(p.ab,s),v=p.ab.i,y=p.ab.h,b=function(t){return function(n){var i,r,s;return M((function(a){if(1==a.g)return w(a,o.addSegments([{data:n}]),2);i=a.h,Qp(e),r=t.ab.g,s=Yd(r),u[s]=i[0],h+=n.byteLength,E(a)}))}}(p),ip(r,p.ab.groupId,g,v,y,b);return w(_,function(e){return M((function(t){return 1==t.g?w(t,Promise.all(e.j.values()),2):t.return(e.g.h)}))}(r),2)}return d?(Qp(e),function(e,t,n,i){if(t.expiration=n.ac(),n=zi(n),t.sessionIds=i.offline.usePersistentLicense?n:[],Gp(e)&&i.offline.usePersistentLicense&&!n.length)throw new Fe(2,9,9007)}(a,i,l,s),w(_,o.updateManifest(n,i),0)):_.B(0)}))},p=!1,_(x,2),!Gp(a)||!p||Kp(a)){x.B(4);break}return w(x,d(t.filter((function(e){return e.h})),!0),5);case 5:return Qp(e),t=t.filter((function(e){return!e.h})),f=u,m=h,u={},h=0,w(x,zp(o,n,i,f,m,(function(){return Qp(e)})),6);case 6:Qp(e);case 4:if(p){x.B(7);break}return w(x,d(t,!1),8);case 8:return Qp(e),g=u,v=h,u={},h=0,w(x,zp(o,n,i,g,v,(function(){return Qp(e)})),9);case 9:Qp(e);case 7:S(x,0);break;case 2:return y=T(x),b=Object.values(u),w(x,o.removeSegments(b,(function(){})),10);case 10:throw y}}))}(e,g,h,m,s,r,u.la,p,a),12);case 12:return Qp(e),y=new kp("manifest",u.path.Ba,u.path.la,h),x.return(Rp(y,m));case 3:return k(x),w(x,l.destroy(),13);case 13:if(!o){x.B(14);break}return w(x,o.stop(),14);case 14:if(!a){x.B(16);break}return w(x,a.destroy(),16);case 16:C(x,0);break;case 2:if(b=T(x),null==h){x.B(18);break}return w(x,Vp(h),18);case 18:throw d||b}}))}(this,e,t||{},(function(){var t;return M((function(s){return 1==s.g?w(s,lr(e,i.g,r.manifest.retryParameters,n||null),2):(t=s.h,s.return(je(t)))}))}),r,s);var o=new ri(t,(function(){return np(s)}));return o.finally((function(){Z(i.j,s)})),o.then=function(e){return Le("shaka.offline.Storage.store.then","Storage operations now return a shaka.util.AbortableOperation, rather than a promise.  Please update to conform to this new API; you can use the |chain| method instead."),o.promise.then(e)},function(e,t){var n=t.promise;return e.i.push(n),t.finally((function(){Z(e.i,n)}))}(this,o)},i.nf=function(){return Le("shaka.offline.Storage.getStoreInProgress","Multiple concurrent downloads are now supported."),!1},i.remove=function(e){return ef(this,function(e,t){var n,i,r,s,o,a;return M((function(l){switch(l.g){case 1:if(Zp(),null==(n=Cp(t))||"manifest"!=n.g)throw new Fe(2,9,9004,t);return i=n,r=new fp,x(l),w(l,r.init(),4);case 4:return w(l,gp(r,i.Ba(),i.la()),5);case 5:return w(l,(s=l.h).getManifests([i.key()]),6);case 6:return o=l.h,a=o[0],w(l,Promise.all([Xp(e,a,r),Jp(s,i,a)]),2);case 2:return k(l),w(l,r.destroy(),8);case 8:C(l,0)}}))}(this,e))},i.Of=function(){return ef(this,function(e){var t,n,i,r,s,o,a,l,u,h;return M((function(d){switch(d.g){case 1:return Zp(),t=e.g,n=e.h.drm,i=new fp,r=!1,x(d),w(d,i.init(),4);case 4:s=[],function(e,t){e.g.forEach((function(e){var t;t=e.getEmeSessionCell(),s.push(t)}))}(i),o=c(s),a=o.next();case 5:if(a.done){d.B(2);break}return w(d,(l=a.value).getAll(),8);case 8:return u=d.h,w(d,Np(n,t,u),9);case 9:return h=d.h,w(d,l.remove(h),10);case 10:h.length!=u.length&&(r=!0),a=o.next(),d.B(5);break;case 2:return k(d),w(d,i.destroy(),11);case 11:C(d,3);break;case 3:return d.return(!r)}}))}(this))},i.list=function(){return ef(this,M((function(i){switch(i.g){case 1:return Zp(),e=[],t=new fp,x(i),w(i,t.init(),4);case 4:return n=Promise.resolve(),function(e,t){e.g.forEach((function(e,n){e.getCells().forEach((function(e,i){t({Ba:n,la:i},e)}))}))}(t,(function(t,i){n=n.then((function(){return M((function(n){if(1==n.g)return w(n,i.getAllManifests(),2);n.h.forEach((function(n,i){var r=Rp(new kp("manifest",t.Ba,t.la,i),n);e.push(r)})),E(n)}))}))})),w(i,n,2);case 2:return k(i),w(i,t.destroy(),6);case 6:C(i,3);break;case 3:return i.return(e)}})));var e,t,n},$("shaka.offline.Storage",Hp),Hp.deleteAll=function(){var e;return M((function(t){return 1==t.g?(e=new fp,x(t),w(t,function(e){var t,n;return M((function(i){return 1==i.g?(t=Array.from(e.g.values()),(n=0<t.length)||yp.forEach((function(e){(e=e())&&t.push(e)})),w(i,Promise.all(t.map((function(e){return e.erase()}))),2)):n?i.B(0):w(i,Promise.all(t.map((function(e){return e.destroy()}))),0)}))}(e),2)):5!=t.g?(k(t),w(t,e.destroy(),5)):C(t,0)}))},Hp.prototype.list=Hp.prototype.list,Hp.prototype.removeEmeSessions=Hp.prototype.Of,Hp.prototype.remove=Hp.prototype.remove,Hp.prototype.getStoreInProgress=Hp.prototype.nf,Hp.prototype.store=Hp.prototype.store,Hp.prototype.getNetworkingEngine=Hp.prototype.bc,Hp.prototype.getConfiguration=Hp.prototype.getConfiguration,Hp.prototype.configure=Hp.prototype.configure,Hp.prototype.destroy=Hp.prototype.destroy,Hp.support=qp;var nf=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");function rf(){}function sf(e,t){for(var n={priority:t||0,Le:e},i=0;i<of.length;i++)if(of[i].priority<n.priority)return void of.splice(i,0,n);of.push(n)}uc.offline=qp,$("shaka.polyfill",rf),rf.register=sf,rf.installAll=function(){for(var e=c(of),t=e.next();!t.done;t=e.next()){t=t.value;try{t.Le()}catch(e){G("Error installing polyfill!",e)}}};var of=[];function af(){}function lf(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=c(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())cf(t.value)}function cf(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(e){null==e||null==e?this.removeAttribute(t):this.setAttribute(t,e)}})}function uf(){}function hf(){nv()}function df(){}function pf(){if(e.Document){var t=Element.prototype;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen,(t=Document.prototype).exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",ff),document.addEventListener("webkitfullscreenerror",ff),document.addEventListener("mozfullscreenchange",ff),document.addEventListener("mozfullscreenerror",ff),document.addEventListener("MSFullscreenChange",ff),document.addEventListener("MSFullscreenError",ff)}}function ff(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}function mf(){}function gf(){}function vf(){}function yf(){(bt()||wt()||Et()||xt("PlayStation 5")||yt()||vt()||!navigator.mediaCapabilities)&&(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),wf=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=bf)}function bf(e){var t,n,i,r,s,o,a,l,c,u;return M((function(h){switch(h.g){case 1:if(t={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:e},!e)return h.return(t);if("media-source"==e.type){if(!ft()||e.video&&(n=e.video.contentType,!MediaSource.isTypeSupported(n))||e.audio&&(i=e.audio.contentType,!MediaSource.isTypeSupported(i)))return h.return(t)}else{if("file"!=e.type)return h.return(t);if(e.video&&!mt(e.video.contentType)||e.audio&&!mt(e.audio.contentType))return h.return(t)}return e.keySystemConfiguration?(r=e.keySystemConfiguration,s=[],o=[],r.audio&&(a={robustness:r.audio.robustness||"",contentType:e.audio.contentType},s.push(a)),r.video&&(l={robustness:r.video.robustness||"",contentType:e.video.contentType},o.push(l)),c={initDataTypes:[r.initDataType],distinctiveIdentifier:r.distinctiveIdentifier,persistentState:r.persistentState,sessionTypes:r.sessionTypes},s.length&&(c.audioCapabilities=s),o.length&&(c.videoCapabilities=o),_(h,3),w(h,navigator.requestMediaKeySystemAccess(r.keySystem,[c]),5)):(t.supported=!0,h.return(Promise.resolve(t)));case 5:u=h.h,S(h,4);break;case 3:T(h);case 4:u&&(t.supported=!0,t.keySystemAccess=u);case 2:return h.return(t)}}))}rf.Aria=af,af.install=lf,sf(lf),rf.EncryptionScheme=uf,uf.install=hf,sf(hf,-2),rf.Fullscreen=df,df.install=pf,sf(pf),rf.MathRound=mf,mf.install=gf,sf(gf),rf.MediaCapabilities=vf,vf.install=yf;var wf=null;function Ef(){}function _f(){var t=_t();e.MediaSource&&(e.cast&&cast.__platform__&&cast.__platform__.canDisplayType?function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */);return n.shift(),n.some((function(e){return e.startsWith("codecs=")}))?cast.__platform__.canDisplayType(t):e(t)}}():t?(function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"mp2t"!=t.split(/ *; */)[0].split("/")[1].toLowerCase()&&e(t)}}(),12>=t?(xf(),function(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}()):xf()):(xt("Tizen 2")||xt("Tizen 3")||xt("Tizen 4"))&&function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"opus"!=Xt(t)[0]&&e(t)}}()),e.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&function(){var e=MediaSource.isTypeSupported;yt()||(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),i=n.findIndex((function(e){return e.startsWith("codecs=")}));if(0>i)return e(t);var r=n[i].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),s=r.findIndex((function(e){return e.startsWith("vp09")}));return 0<=s&&(r[s]="vp9",n[i]='codecs="'+r.join(",")+'"',t=n.join("; ")),e(t)})}()}function xf(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,O.apply(0,arguments));return t.abort=function(){},t}}function Sf(){}function Tf(){screen.orientation||null!=e.orientation&&function(){function t(){switch(e.orientation){case-90:n.type="landscape-secondary",n.angle=270;break;case 0:n.type="portrait-primary",n.angle=0;break;case 90:n.type="landscape-primary",n.angle=90;break;case 180:n.type="portrait-secondary",n.angle=180}}var n=new kf;screen.orientation=n,t(),e.addEventListener("orientationchange",(function(){t();var e=new ui("change");n.dispatchEvent(e)}))}()}function kf(){di.call(this),this.type="",this.angle=0}function Cf(){}function Pf(){e.HTMLVideoElement&&e.WebKitMediaKeys&&(delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Lf,e.MediaKeys=Of,e.MediaKeySystemAccess=Mf,navigator.requestMediaKeySystemAccess=If)}function If(e,t){try{var n=new Mf(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function Lf(e){var t=this.mediaKeys;return t&&t!=e&&Nf(t,null),delete this.mediaKeys,(this.mediaKeys=e)?Nf(e,this):Promise.resolve()}function Af(e){if(Ce(e=ke(e.initData)).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=At(e=It(e.subarray(4),!0));var t=new Event("encrypted");t.initDataType="skd",t.initData=Te(e),this.dispatchEvent(t)}function Mf(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(var n=c(t),i=n.next();!i.done;i=n.next()){var r=i.value;if("required"==r.persistentState)i=null;else{i={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:r.initDataTypes,sessionTypes:["temporary"],label:r.label};var s=!1,o=!1;if(r.audioCapabilities)for(var a=c(r.audioCapabilities),l=a.next();!l.done;l=a.next())(l=l.value).contentType&&(s=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,l.contentType.split(";")[0])&&(i.audioCapabilities.push(l),o=!0));if(r.videoCapabilities)for(l=(r=c(r.videoCapabilities)).next();!l.done;l=r.next())(a=l.value).contentType&&(s=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,a.contentType.split(";")[0])&&(i.videoCapabilities.push(a),o=!0));s||(o=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),i=o?i:null}if(i)return void(this.g=i)}throw(n=Error("Unsupported keySystem")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function Of(e){this.h=new WebKitMediaKeys(e),this.g=new Pi}function Nf(e,t){if(e.g.Sa(),!t)return Promise.resolve();e.g.A(t,"webkitneedkey",Af);try{return ao(t,HTMLMediaElement.HAVE_METADATA,e.g,(function(){t.webkitSetMediaKeys(e.h)})),Promise.resolve()}catch(e){return Promise.reject(e)}}function Df(e){di.call(this),this.i=null,this.l=e,this.h=this.g=null,this.j=new Pi,this.sessionId="",this.expiration=NaN,this.closed=new ut,this.keyStatuses=new jf}function Rf(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.g=t,n=new ui("keystatuseschange"),e.dispatchEvent(n)}function jf(){this.size=0,this.g=void 0}function Bf(){}function Uf(){!e.HTMLVideoElement||!e.MSMediaKeys||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,e.MediaKeys=Vf,e.MediaKeySystemAccess=Hf,navigator.requestMediaKeySystemAccess=$f,HTMLMediaElement.prototype.setMediaKeys=qf)}function $f(e,t){try{var n=new Hf(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function Ff(e){if(e.initData){var t=new CustomEvent("encrypted");t.initDataType="cenc",t.initData=Te(function(e){if(!e)return e;var t=new yu(e);if(1>=t.data.length)return e;e=[];for(var n={},i=(t=c(t.data)).next();!i.done;n={rc:n.rc},i=t.next())n.rc=i.value,e.some(function(e){return function(t){return xe(t,e.rc)}}(n))||e.push(n.rc);return $t.apply(Nt,u(e))}(e.initData)),this.dispatchEvent(t)}}function Hf(e,t){this.keySystem=e;for(var n=!1,i=c(t),r=i.next();!r.done;r=i.next()){var s={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:(r=r.value).initDataTypes,sessionTypes:["temporary"],label:r.label},o=!1;if(r.audioCapabilities)for(var a=c(r.audioCapabilities),l=a.next();!l.done;l=a.next())(l=l.value).contentType&&(o=!0,MSMediaKeys.isTypeSupported(this.keySystem,l.contentType.split(";")[0])&&(s.audioCapabilities.push(l),n=!0));if(r.videoCapabilities)for(l=(a=c(r.videoCapabilities)).next();!l.done;l=a.next())(l=l.value).contentType&&(o=!0,MSMediaKeys.isTypeSupported(this.keySystem,l.contentType.split(";")[0])&&(s.videoCapabilities.push(l),n=!0));if(o||(n=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),"required"==r.persistentState&&(n=!1),n)return void(this.g=s)}throw(n=Error("Unsupported keySystem")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function qf(e){var t=this.mediaKeys;return t&&t!=e&&zf(t,null),delete this.mediaKeys,(this.mediaKeys=e)?zf(e,this):Promise.resolve()}function Vf(e){this.h=new MSMediaKeys(e),this.g=new Pi}function zf(e,t){if(e.g.Sa(),!t)return Promise.resolve();e.g.A(t,"msneedkey",Ff);try{return ao(t,HTMLMediaElement.HAVE_METADATA,e.g,(function(){t.msSetMediaKeys(e.h)})),Promise.resolve()}catch(e){return Promise.reject(e)}}function Gf(e){di.call(this),this.i=null,this.l=e,this.h=this.g=null,this.j=new Pi,this.sessionId="",this.expiration=NaN,this.closed=new ut,this.keyStatuses=new Wf}function Kf(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.g=t,n=new ui("keystatuseschange"),e.dispatchEvent(n)}function Wf(){this.size=0,this.g=void 0}function Xf(){}function Jf(){!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=Yf,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Qf,e.MediaKeys=Zf,e.MediaKeySystemAccess=em)}function Yf(){return Promise.reject(Error("The key system specified is not supported."))}function Qf(e){return null==e?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function Zf(){throw new TypeError("Illegal constructor.")}function em(){throw this.keySystem="",new TypeError("Illegal constructor.")}function tm(){}function nm(){if(!(!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)mm="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=rm,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=sm,e.MediaKeys=am,e.MediaKeySystemAccess=om}}function im(e){return mm?mm+e.charAt(0).toUpperCase()+e.slice(1):e}function rm(e,t){try{var n=new om(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function sm(e){var t=this.mediaKeys;return t&&t!=e&&lm(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&lm(e,this),Promise.resolve()}function om(e,t){this.g=this.keySystem=e;var n=!1;"org.w3.clearkey"==e&&(this.g="webkit-org.w3.clearkey",n=!1);var i=!1,r=document.getElementsByTagName("video");r=r.length?r[0]:document.createElement("video");for(var s=c(t),o=s.next();!o.done;o=s.next()){var a={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:(o=o.value).initDataTypes,sessionTypes:["temporary"],label:o.label},l=!1;if(o.audioCapabilities)for(var u=c(o.audioCapabilities),h=u.next();!h.done;h=u.next())(h=h.value).contentType&&(l=!0,r.canPlayType(h.contentType.split(";")[0],this.g)&&(a.audioCapabilities.push(h),i=!0));if(o.videoCapabilities)for(h=(u=c(o.videoCapabilities)).next();!h.done;h=u.next())(h=h.value).contentType&&(l=!0,r.canPlayType(h.contentType,this.g)&&(a.videoCapabilities.push(h),i=!0));if(l||(i=r.canPlayType("video/mp4",this.g)||r.canPlayType("video/webm",this.g)),"required"==o.persistentState&&(n?(a.persistentState="required",a.sessionTypes=["persistent-license"]):i=!1),i)return void(this.h=a)}throw n="Unsupported keySystem","org.w3.clearkey"!=e&&"com.widevine.alpha"!=e||(n="None of the requested configurations were supported."),(n=Error(n)).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function am(e){this.l=e,this.h=null,this.g=new Pi,this.i=[],this.j=new Map}function lm(e,t){e.h=t,e.g.Sa();var n=mm;t&&(e.g.A(t,n+"needkey",(function(t){var n=new CustomEvent("encrypted");n.initDataType="cenc",n.initData=Te(t.initData),e.h.dispatchEvent(n)})),e.g.A(t,n+"keymessage",(function(t){var n=cm(e,t.sessionId);n&&(t=new ui("message",t=(new Map).set("messageType",null==n.keyStatuses.g?"licenserequest":"licenserenewal").set("message",t.message)),n.h&&(n.h.resolve(),n.h=null),n.dispatchEvent(t))})),e.g.A(t,n+"keyadded",(function(t){(t=cm(e,t.sessionId))&&(pm(t,"usable"),t.g&&t.g.resolve(),t.g=null)})),e.g.A(t,n+"keyerror",(function(t){var n=cm(e,t.sessionId);n&&n.handleError(t)})))}function cm(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function um(e,t,n){di.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new ut,this.keyStatuses=new fm}function hm(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if("persistent-license"==e.l)if(n)var i=ke(At("LOAD_SESSION|"+n));else{var r=At("PERSISTENT|");i=$t(r,t)}else i=ke(t)}catch(e){return Promise.reject(e)}e.h=new ut;var s=im("generateKeyRequest");try{e.j[s](e.i,i)}catch(t){if("InvalidStateError"!=t.name)return e.h=null,Promise.reject(t);new pt((function(){try{e.j[s](e.i,i)}catch(t){e.h.reject(t),e.h=null}})).S(.01)}return e.h}function dm(e,t,n){if(e.g)e.g.then((function(){return dm(e,t,n)})).catch((function(){return dm(e,t,n)}));else{if(e.g=t,"webkit-org.w3.clearkey"==e.i){var i=Pt(n),r=JSON.parse(i);"oct"!=r.keys[0].kty&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),i=jt(r.keys[0].k),r=jt(r.keys[0].kid)}else i=ke(n),r=null;var s=im("addKey");try{e.j[s](e.i,i,r,e.sessionId)}catch(t){e.g.reject(t),e.g=null}}}function pm(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.g=t,n=new ui("keystatuseschange"),e.dispatchEvent(n)}function fm(){this.size=0,this.g=void 0}vf.originalMcap=wf,sf(yf,-1),rf.MediaSource=Ef,Ef.install=_f,sf(_f),rf.Orientation=Sf,Sf.install=Tf,g(kf,di),kf.prototype.lock=function(e){function t(e){return screen.lockOrientation?screen.lockOrientation(e):screen.mozLockOrientation?screen.mozLockOrientation(e):!!screen.msLockOrientation&&screen.msLockOrientation(e)}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():((e=Error("screen.orientation.lock() is not available on this device")).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},kf.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},sf(Tf),rf.PatchedMediaKeysApple=Cf,Cf.install=Pf,Mf.prototype.createMediaKeys=function(){var e=new Of(this.keySystem);return Promise.resolve(e)},Mf.prototype.getConfiguration=function(){return this.g},Of.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new Df(this.h,e)},Of.prototype.setServerCertificate=function(){return Promise.resolve(!1)},g(Df,di),(i=Df.prototype).generateRequest=function(e,t){var n=this;this.g=new ut;try{var i=this.l.createSession("video/mp4",ke(t));this.i=i,this.sessionId=i.sessionId||"",this.j.A(this.i,"webkitkeymessage",(function(e){n.g&&(n.g.resolve(),n.g=null),e=new ui("message",e=(new Map).set("messageType",null==n.keyStatuses.g?"license-request":"license-renewal").set("message",Te(e.message))),n.dispatchEvent(e)})),this.j.A(i,"webkitkeyadded",(function(){n.h&&(Rf(n,"usable"),n.h.resolve(),n.h=null)})),this.j.A(i,"webkitkeyerror",(function(){var e=Error("EME PatchedMediaKeysApple key error");if(e.errorCode=n.i.error,null!=n.g)n.g.reject(e),n.g=null;else if(null!=n.h)n.h.reject(e),n.h=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:Rf(n,"output-not-allowed");break;default:Rf(n,"internal-error")}})),Rf(this,"status-pending")}catch(e){this.g.reject(e)}return this.g},i.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},i.update=function(e){this.h=new ut;try{this.i.update(ke(e))}catch(e){this.h.reject(e)}return this.h},i.close=function(){try{this.i.close(),this.closed.resolve(),this.j.Sa()}catch(e){this.closed.reject(e)}return this.closed},i.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},(i=jf.prototype).forEach=function(e){this.g&&e(this.g,or.value())},i.get=function(e){if(this.has(e))return this.g},i.has=function(e){var t=or.value();return!(!this.g||!xe(e,t))},i.entries=function(){},i.keys=function(){},i.values=function(){},sf(Pf),rf.PatchedMediaKeysMs=Bf,Bf.install=Uf,Hf.prototype.createMediaKeys=function(){var e=new Vf(this.keySystem);return Promise.resolve(e)},Hf.prototype.getConfiguration=function(){return this.g},Vf.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new Gf(this.h,e)},Vf.prototype.setServerCertificate=function(){return Promise.resolve(!1)},g(Gf,di),(i=Gf.prototype).generateRequest=function(e,t){var n=this;this.g=new ut;try{this.i=this.l.createSession("video/mp4",ke(t),null),this.j.A(this.i,"mskeymessage",(function(e){n.g&&(n.g.resolve(),n.g=null),e=new ui("message",e=(new Map).set("messageType",null==n.keyStatuses.g?"license-request":"license-renewal").set("message",Te(e.message))),n.dispatchEvent(e)})),this.j.A(this.i,"mskeyadded",(function(){n.g?(Kf(n,"usable"),n.g.resolve(),n.g=null):n.h&&(Kf(n,"usable"),n.h.resolve(),n.h=null)})),this.j.A(this.i,"mskeyerror",(function(){var e=Error("EME PatchedMediaKeysMs key error");if(e.errorCode=n.i.error,null!=n.g)n.g.reject(e),n.g=null;else if(null!=n.h)n.h.reject(e),n.h=null;else switch(n.i.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:Kf(n,"output-not-allowed");break;default:Kf(n,"internal-error")}})),Kf(this,"status-pending")}catch(e){this.g.reject(e)}return this.g},i.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},i.update=function(e){this.h=new ut;try{this.i.update(ke(e))}catch(e){this.h.reject(e)}return this.h},i.close=function(){try{this.i.close(),this.closed.resolve(),this.j.Sa()}catch(e){this.closed.reject(e)}return this.closed},i.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},(i=Wf.prototype).forEach=function(e){this.g&&e(this.g,or.value())},i.get=function(e){if(this.has(e))return this.g},i.has=function(e){var t=or.value();return!(!this.g||!xe(e,t))},i.entries=function(){},i.keys=function(){},i.values=function(){},sf(Uf),rf.PatchedMediaKeysNop=Xf,Xf.install=Jf,Zf.prototype.createSession=function(){},Zf.prototype.setServerCertificate=function(){},em.prototype.getConfiguration=function(){},em.prototype.createMediaKeys=function(){},sf(Jf,-10),rf.PatchedMediaKeysWebkit=tm,tm.install=nm,om.prototype.createMediaKeys=function(){var e=new am(this.g);return Promise.resolve(e)},om.prototype.getConfiguration=function(){return this.h},am.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary")&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new um(t,this.l,e),this.i.push(e),e},am.prototype.setServerCertificate=function(){return Promise.resolve(!1)},g(um,di),(i=um.prototype).handleError=function(e){var t=Error("EME v0.1b key error"),n=e.errorCode;n.systemCode=e.systemCode,t.errorCode=n,!e.sessionId&&this.h?(45==e.systemCode&&(t.message="Unsupported session type."),this.h.reject(t),this.h=null):e.sessionId&&this.g?(this.g.reject(t),this.g=null):(t=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?pm(this,"output-restricted"):pm(this,1==t?"expired":"internal-error"))},i.generateRequest=function(e,t){return hm(this,t,null)},i.load=function(e){return"persistent-license"==this.l?hm(this,null,e):Promise.reject(Error("Not a persistent session."))},i.update=function(e){var t=new ut;return dm(this,t,e),t},i.close=function(){if("persistent-license"!=this.l){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=im("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch(e){}}return this.closed.resolve(),this.closed},i.remove=function(){return"persistent-license"!=this.l?Promise.reject(Error("Not a persistent session.")):this.close()},(i=fm.prototype).forEach=function(e){this.g&&e(this.g,or.value())},i.get=function(e){if(this.has(e))return this.g},i.has=function(e){var t=or.value();return!(!this.g||!xe(e,t))},i.entries=function(){},i.keys=function(){},i.values=function(){};var mm="";function gm(){}function vm(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;t.requestPictureInPicture&&document.exitPictureInPicture||!t.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,t.requestPictureInPicture=bm,Object.defineProperty(t,"disablePictureInPicture",{get:Em,set:_m,enumerable:!0,configurable:!0}),document.exitPictureInPicture=wm,document.addEventListener("webkitpresentationmodechanged",ym,!0))}}function ym(e){if("picture-in-picture"==(e=e.target).webkitPresentationMode){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function bm(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function wm(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function Em(){return!!this.hasAttribute("disablePictureInPicture")||!this.webkitSupportsPresentationMode("picture-in-picture")}function _m(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}function xm(){}function Sm(){e.crypto&&("randomUUID"in e.crypto||(e.crypto.randomUUID=Tm))}function Tm(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}function km(){}function Cm(){navigator.storage&&navigator.storage.estimate||!navigator.webkitTemporaryStorage||!navigator.webkitTemporaryStorage.queryUsageAndQuota||("storage"in navigator||(navigator.storage={}),navigator.storage.estimate=Pm)}function Pm(){return new Promise((function(e,t){navigator.webkitTemporaryStorage.queryUsageAndQuota((function(t,n){e({usage:t,quota:n})}),t)}))}function Im(){}function Lm(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:Am})}function Am(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}function Mm(){}function Om(){if(e.HTMLMediaElement){var t=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var e=t.apply(this);return e&&e.catch((function(){})),e}}}function Nm(){}function Dm(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;!t.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in t||xt("Web0S")&&xt("Chrome/38.0.2125.122 Safari/537.36"))&&(t.getVideoPlaybackQuality=Rm)}}function Rm(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function jm(){}function Bm(){if(!e.VTTCue&&e.TextTrackCue){var t=null,n=TextTrackCue.length;if(3==n)t=Um;else if(6==n)t=$m;else{try{var i=!!Um(1,2,"")}catch(e){i=!1}i&&(t=Um)}t&&(e.VTTCue=function(e,n,i){return t(e,n,i)})}}function Um(t,n,i){return new e.TextTrackCue(t,n,i)}function $m(t,n,i){return new e.TextTrackCue(t+"-"+n+"-"+i,t,n,i)}function Fm(){}sf(nm),rf.PiPWebkit=gm,gm.install=vm,sf(vm),rf.RandomUUID=xm,xm.install=Sm,sf(Sm),rf.StorageEstimate=km,km.install=Cm,sf(Cm),rf.Symbol=Im,Im.install=Lm,sf(Lm),rf.VideoPlayPromise=Mm,Mm.install=Om,sf(Om),rf.VideoPlaybackQuality=Nm,Nm.install=Dm,sf(Dm),rf.VTTCue=jm,jm.install=Bm,sf(Bm),Fm.prototype.parseInit=function(){},Fm.prototype.parseMedia=function(e,t){for(var n=null,i=[],r=Pt(e).split(/\r?\n/),s=(r=c(r)).next();!s.done;s=r.next())if((s=s.value)&&!/^\s+$/.test(s)&&(s=Hm.exec(s))){var o=qm.exec(s[1]);s=new ne(o=60*parseInt(o[1],10)+parseFloat(o[2].replace(",",".")),t.segmentEnd?t.segmentEnd:o+2,s[2]),n&&(n.endTime=o,i.push(n)),n=s}return n&&i.push(n),i},$("shaka.text.LrcTextParser",Fm),Fm.prototype.parseMedia=Fm.prototype.parseMedia,Fm.prototype.parseInit=Fm.prototype.parseInit;var Hm=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,qm=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;function Vm(){}function zm(e,t,n,i,r,s,o,a,l,u,h){var d=e.parentNode;if(e.nodeType==Node.COMMENT_NODE)return null;if(e.nodeType==Node.TEXT_NODE){if(!h)return null;var p=document.createElement("span");p.textContent=e.textContent}else p=e;for(var f=null,m=c(vg),g=m.next();!g.done&&!(f=Ym(p,"backgroundImage",i,"#",g.value)[0]);g=m.next());if(m=h,("p"==e.nodeName||f)&&(h=!0),a="default"==(p.getAttribute("xml:space")||(a?"default":"preserve")),e=[],!(g=Array.from(p.childNodes).every((function(e){return e.nodeType==Node.TEXT_NODE}))))for(var v=c(p.childNodes),y=v.next();!y.done;y=v.next())(y=zm(y.value,t,n,i,r,s,o,a,l,p,h))&&e.push(y);i=null!=u,v=/\S/.test(p.textContent);var b=p.hasAttribute("begin")||p.hasAttribute("end")||p.hasAttribute("dur");if(!(b||v||"br"==p.tagName||0!=e.length||i&&!a))return null;for(v=(y=Zm(p,n)).start,y=y.end;d&&d.nodeType==Node.ELEMENT_NODE&&"tt"!=d.tagName;)v=(y=Qm(d,n,v,y)).start,y=y.end,d=d.parentNode;if(null==v&&(v=0),v+=t,y=null==y?1/0:y+t,!b&&0<e.length)for(v=1/0,y=0,n=(t=c(e)).next();!n.done;n=t.next())n=n.value,v=Math.min(v,n.startTime),y=Math.max(y,n.endTime);if("br"==p.tagName)return(r=new ne(v,y,"")).lineBreak=!0,r;if(t="",g&&(t=p.textContent,a&&(t=(t=t.trim()).replace(/\s+/g," "))),(t=new ne(v,y,t)).nestedCues=e,h||(t.isContainer=!0),l&&(t.cellResolution=l),l=Ym(p,"region",s,"")[0],p.hasAttribute("region")&&l&&l.getAttribute("xml:id")){var w=l.getAttribute("xml:id");t.region=o.filter((function(e){return e.id==w}))[0]}return o=l,u&&i&&!p.getAttribute("region")&&!p.getAttribute("style")&&(o=Ym(u,"region",s,"")[0]),function(e,t,n,i,r,s,o){if("rtl"==Km(t,n,r,"direction",s=s||o)&&(e.direction="rtl"),"tb"==(o=Km(t,n,r,"writingMode",s))||"tblr"==o?e.writingMode="vertical-lr":"tbrl"==o?e.writingMode="vertical-rl":"rltb"==o||"rl"==o?e.direction="rtl":o&&(e.direction=ce),(o=Km(t,n,r,"textAlign",!0))?(e.positionAlign=fg[o],e.lineAlign=pg[o],e.textAlign=oe[o.toUpperCase()]):e.textAlign=se,(o=Km(t,n,r,"displayAlign",!0))&&(e.displayAlign=le[o.toUpperCase()]),(o=Km(t,n,r,"color",s))&&(e.color=o),(o=Km(t,n,r,"backgroundColor",s))&&(e.backgroundColor=o),(o=Km(t,n,r,"border",s))&&(e.border=o),(o=Km(t,n,r,"fontFamily",s))&&(e.fontFamily=o),(o=Km(t,n,r,"fontWeight",s))&&"bold"==o&&(e.fontWeight=700),o=Km(t,n,r,"wrapOption",s),e.wrapLine=!o||"noWrap"!=o,(o=Km(t,n,r,"lineHeight",s))&&o.match(sg)&&(e.lineHeight=o),(o=Km(t,n,r,"fontSize",s))&&(o.match(sg)||o.match(rg))&&(e.fontSize=o),(o=Km(t,n,r,"fontStyle",s))&&(e.fontStyle=ye[o.toUpperCase()]),i){o=i.getAttribute("imageType")||i.getAttribute("imagetype");var a=i.getAttribute("encoding");i=i.textContent.trim(),"PNG"==o&&"Base64"==a&&i&&(e.backgroundImage="data:image/png;base64,"+i)}(i=Km(t,n,r,"textOutline",s))&&((i=i.split(" "))[0].match(sg)?e.textStrokeColor=e.color:(e.textStrokeColor=i[0],i.shift()),i[0]&&i[0].match(sg)?e.textStrokeWidth=i[0]:e.textStrokeColor=""),(i=Km(t,n,r,"letterSpacing",s))&&i.match(sg)&&(e.letterSpacing=i),(i=Km(t,n,r,"linePadding",s))&&i.match(sg)&&(e.linePadding=i),(s=Km(t,n,r,"opacity",s))&&(e.opacity=parseFloat(s)),(n=Wm(n,r,"textDecoration"))&&Gm(e,n),(t=Xm(t,r,"textDecoration"))&&Gm(e,t)}(t,p,o,f,r,m,0==e.length),t}function Gm(e,t){for(var n=c(t.split(" ")),i=n.next();!i.done;i=n.next())switch(i.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&Z(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&Z(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&Z(e.textDecoration,"overline")}}function Km(e,t,n,i,r){return r=void 0===r||r,(e=Xm(e,n,i))?e:r?Wm(t,n,i):null}function Wm(e,t,n){return e?Tu(e,gg,n)||Jm(e,t,n):null}function Xm(e,t,n){return Tu(e,gg,n)||Jm(e,t,n)}function Jm(e,t,n){e=Ym(e,"style",t,"");for(var i=null,r=0;r<e.length;r++){var s=Su(e[r],"urn:ebu:tt:style",n);s||(s=Tu(e[r],gg,n)),s||(s=Xm(e[r],t,n)),s&&(i=s)}return i}function Ym(e,t,n,i,r){var s=[];if(!e||1>n.length)return s;var o=e;for(e=null;o&&!(e=r?Su(o,r,t):o.getAttribute(t))&&(o=o.parentNode)instanceof Element;);if(t=e)for(r=(t=c(t.split(" "))).next();!r.done;r=t.next())for(r=r.value,o=(e=c(n)).next();!o.done;o=e.next())if(i+(o=o.value).getAttribute("xml:id")==r){s.push(o);break}return s}function Qm(e,t,n,i){return e=Zm(e,t),null==n?n=e.start:null!=e.start&&(n+=e.start),null==i?i=e.end:null!=e.start&&(i+=e.start),{start:n,end:i}}function Zm(e,t){var n=eg(e.getAttribute("begin"),t),i=eg(e.getAttribute("end"),t),r=eg(e.getAttribute("dur"),t);return null==i&&null!=r&&(i=n+r),{start:n,end:i}}function eg(e,t){var n=null;if(ag.test(e)){n=ag.exec(e);var i=Number(n[1]),r=Number(n[2]),s=Number(n[3]),o=Number(n[4]);n=(s+=(o+=(Number(n[5])||0)/t.h)/t.frameRate)+60*r+3600*i}else if(lg.test(e))n=tg(lg,e);else if(cg.test(e))n=tg(cg,e);else if(ug.test(e))n=ug.exec(e),n=Number(n[1])/t.frameRate;else if(hg.test(e))n=hg.exec(e),n=Number(n[1])/t.g;else if(dg.test(e))n=tg(dg,e);else if(e)throw new Fe(2,2,2001,"Could not parse cue time range in TTML");return n}function tg(e,t){var n=e.exec(t);return null==n||""==n[0]?null:(Number(n[4])||0)/1e3+(Number(n[3])||0)+60*(Number(n[2])||0)+3600*(Number(n[1])||0)}function ng(e,t,n,i){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(i),0==this.g&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}tn["application/x-subtitle-lrc"]=function(){return new Fm},Vm.prototype.parseInit=function(){},Vm.prototype.parseMedia=function(e,t){var n=Pt(e),i=[],r=new DOMParser,s=null;if(""==n)return i;try{s=r.parseFromString(n,"text/xml")}catch(e){throw new Fe(2,2,2005,"Failed to parse TTML.")}if(s){if(n=s.getElementsByTagName("parsererror")[0])throw new Fe(2,2,2005,n.textContent);var o=s.getElementsByTagName("tt")[0];if(!o)throw new Fe(2,2,2005,"TTML does not contain <tt> tag.");if(!(s=o.getElementsByTagName("body")[0]))return[];var a=Tu(o,mg,"frameRate"),l=Tu(o,mg,"subFrameRate"),u=Tu(o,mg,"frameRateMultiplier"),h=Tu(o,mg,"tickRate"),d=Tu(o,mg,"cellResolution");if(n=o.getAttribute("xml:space")||"default",r=Tu(o,gg,"extent"),"default"!=n&&"preserve"!=n)throw new Fe(2,2,2005,"Invalid xml:space value: "+n);n="default"==n,a=new ng(a,l,u,h),d=d&&(d=/^(\d+) (\d+)$/.exec(d))?{columns:parseInt(d[1],10),rows:parseInt(d[2],10)}:null,l=(l=o.getElementsByTagName("metadata")[0])?function(e){return Array.from(e.childNodes).filter((function(e){return e instanceof Element}))}(l):[],u=Array.from(o.getElementsByTagName("style")),h=[];for(var p=c(o=Array.from(o.getElementsByTagName("region"))),f=p.next();!f.done;f=p.next()){var m=f.value;f=new be;var g=m.getAttribute("xml:id");if(g){f.id=g;var v,y,b=null;r&&(b=ig.exec(r)||og.exec(r)),g=b?Number(b[1]):null,b=b?Number(b[2]):null,(v=Wm(m,u,"extent"))&&null!=(v=(y=ig.exec(v))||og.exec(v))&&(f.width=Number(v[1]),f.height=Number(v[2]),y||(null!=g&&(f.width=100*f.width/g),null!=b&&(f.height=100*f.height/b)),f.widthUnits=y||null!=g?we:0,f.heightUnits=y||null!=b?we:0),(m=Wm(m,u,"origin"))&&null!=(v=(y=ig.exec(m))||og.exec(m))&&(f.viewportAnchorX=Number(v[1]),f.viewportAnchorY=Number(v[2]),y||(null!=b&&(f.viewportAnchorY=100*f.viewportAnchorY/b),null!=g&&(f.viewportAnchorX=100*f.viewportAnchorX/g)),f.viewportAnchorUnits=y||null!=g?we:0)}else f=null;f&&h.push(f)}if(_u(s,"p").length)throw new Fe(2,2,2001,"<p> can only be inside <div> in TTML");for(p=(r=c(_u(s,"div"))).next();!p.done;p=r.next())if(_u(p.value,"span").length)throw new Fe(2,2,2001,"<span> can only be inside <p> in TTML");(s=zm(s,t.periodStart,a,l,u,o,h,n,d,null,!1))&&i.push(s)}return i},$("shaka.text.TtmlTextParser",Vm),Vm.prototype.parseMedia=Vm.prototype.parseMedia,Vm.prototype.parseInit=Vm.prototype.parseInit;var ig=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,rg=/^(\d{1,2}(?:\.\d+)?|100)%$/,sg=/^(\d+px|\d+em|\d*\.?\d+c)$/,og=/^(\d+)px (\d+)px$/,ag=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,lg=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,cg=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,ug=/^(\d*(?:\.\d*)?)f$/,hg=/^(\d*(?:\.\d*)?)t$/,dg=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),pg={left:de,center:"center",right:"end",start:de,end:"end"},fg={left:"line-left",center:"center",right:"line-right"},mg=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],gg=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],vg=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];function yg(){this.g=new Vm}function bg(){}function wg(e){for(var t=c(Object.entries(fe)),n=t.next();!n.done;n=t.next()){var i=c(n.value);n=i.next().value,i=i.next().value;var r=new ne(0,0,"");r.color=i,e.set(n,r)}for(n=(t=c(Object.entries(me))).next();!n.done;n=t.next())n=(i=c(n.value)).next().value,i=i.next().value,(r=new ne(0,0,"")).backgroundColor=i,e.set(n,r)}function Eg(e,t,n){0===n.size&&wg(n),e=function(e){for(var t=[],n=-1,i="",r=0;r<e.length;r++)if("/"===e[r]){var s=e.indexOf(">",r);if(s<=r)return e;s=e.substring(r+1,s);var o=t.pop();if(!s||!o)return e;if(o===s)i+="/"+s+">";else{if(!o.startsWith("c.")||"c"!==s)return e;i+="/"+o+">"}r+=s.length+1}else"<"===e[r]?n=r+1:">"===e[r]&&0<n&&(t.push(e.substr(n,r-n)),n=-1),i+=e[r];return i}(e);var i=ju("<span>"+e+"</span>","span");if(i){var r=[];if(1==(i=i.childNodes).length){var s=i[0];if(s.nodeType==Node.TEXT_NODE||s.nodeType==Node.CDATA_SECTION_NODE)return void(t.payload=e)}for(i=(e=c(i)).next();!i.done;i=e.next())xg(i.value,t,r,n);t.nestedCues=r}else t.payload=e}function _g(e,t){return e&&0<e.length?e:t}function xg(e,t,n,i){var r=t.clone();if(e.nodeType===Node.ELEMENT_NODE&&e.nodeName)for(var s=c(e.nodeName.split(/[ .]+/)),o=s.next();!o.done;o=s.next()){if(o=o.value,i.has(o)){var a=i.get(o);a&&(r.backgroundColor=_g(a.backgroundColor,r.backgroundColor),r.color=_g(a.color,r.color),r.fontFamily=_g(a.fontFamily,r.fontFamily),r.fontSize=_g(a.fontSize,r.fontSize),r.fontWeight=a.fontWeight,r.fontStyle=a.fontStyle,r.opacity=a.opacity,r.wrapLine=a.wrapLine)}switch(o){case"b":r.fontWeight=700;break;case"i":r.fontStyle="italic";break;case"u":r.textDecoration.push("underline")}}if(Cu(e))for(s=!0,i=c(e.textContent.split("\n")),e=i.next();!e.done;e=i.next())e=e.value,s||((s=t.clone()).lineBreak=!0,n.push(s)),0<e.length&&((s=r.clone()).payload=e,n.push(s)),s=!1;else for(e=(t=c(e.childNodes)).next();!e.done;e=t.next())xg(e.value,r,n,i)}function Sg(e,t,n){var i;(i=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=i[1],e.textAlign="middle"==t?se:oe[t.toUpperCase()]):(i=/^vertical:(lr|rl)$/.exec(t))?e.writingMode="lr"==i[1]?"vertical-lr":"vertical-rl":(i=/^size:([\d.]+)%$/.exec(t))?e.size=Number(i[1]):(i=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(t))?(e.position=Number(i[1]),i[2]&&(t=i[2],e.positionAlign="line-left"==t||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center")):(i=/^region:(.*)$/.exec(t))?(t=function(e,t){var n=e.filter((function(e){return e.id==t}));return n.length?n[0]:null}(n,i[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=pe[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=he,e.line=Number(n[1]),n[2]&&(e.lineAlign=pe[n[2].toUpperCase()]))}function Tg(e){if(null==(e=id(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function kg(){this.g=null}function Cg(e,t,n){var i,r,s;return(new gr).box("payl",br((function(e){i=Pt(e)}))).box("iden",br((function(e){r=Pt(e)}))).box("sttg",br((function(e){s=Pt(e)}))).parse(e),i?function(e,t,n,i,r){if(Eg(e,i=new ne(i,r,""),new Map),t&&(i.id=t),n)for(t=rd(e=new td(n));t;)Sg(i,t,[]),nd(e),t=rd(e);return i}(i,r,s,t,n):null}function Pg(){}function Ig(e){if(null==(e=id(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function Lg(){this.g=new bg}function Ag(e){var t="WEBVTT\n\n";if(""==e)return t;for(var n=(e=c((e=(e=e.replace(/\r+/g,"")).trim()).split("\n\n"))).next();!n.done;n=e.next())(n=n.value.split(/\n/))[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join("\n")+"\n\n";return t}function Mg(){}function Og(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=Ng(n))&&(e.color=n),(n=t.BackColour)&&(n=Ng(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=700),t.Italic&&(e.fontStyle="italic"),t.Underline&&e.textDecoration.push("underline"),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=ae,e.textAlign="start";break;case 2:e.displayAlign=ae,e.textAlign=se;break;case 3:e.displayAlign=ae,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=se;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=se;break;case 11:e.displayAlign="center",e.textAlign="end"}(n=t.AlphaLevel)&&(e.opacity=parseFloat(n))}function Ng(e){return 0<=(e=parseInt(e.replace("&H",""),16))?"rgba("+(255&e)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function Dg(e){return 3600*((e=Fg.exec(e))[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}tn["application/ttml+xml"]=function(){return new Vm},yg.prototype.parseInit=function(e){var t=!1;if((new gr).box("moov",vr).box("trak",vr).box("mdia",vr).box("minf",vr).box("stbl",vr).R("stsd",yr).box("stpp",(function(e){t=!0,e.parser.stop()})).parse(e),!t)throw new Fe(2,2,2007)},yg.prototype.parseMedia=function(e,t){var n=this,i=!1,r=[];if((new gr).box("mdat",br((function(e){i=!0,r=r.concat(n.g.parseMedia(e,t))}))).parse(e,!1),!i)throw new Fe(2,2,2007);return r},$("shaka.text.Mp4TtmlParser",yg),yg.prototype.parseMedia=yg.prototype.parseMedia,yg.prototype.parseInit=yg.prototype.parseInit,tn['application/mp4; codecs="stpp"']=function(){return new yg},tn['application/mp4; codecs="stpp.ttml"']=function(){return new yg},tn['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new yg},tn['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new yg},bg.prototype.parseInit=function(){},bg.prototype.parseMedia=function(e,t){var n=Pt(e),i=(n=n.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(i[0]))throw new Fe(2,2,2e3);if(n=t.periodStart,i[0].includes("X-TIMESTAMP-MAP")){var r=i[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),s=i[0].match(/MPEGTS:(\d+)/m);if(r&&s){if(null==(n=Tg(new td(r[1]))))throw new Fe(2,2,2e3);for(s=Number(s[1]),r=t.segmentStart;95443.7176888889<=r;)r-=95443.7176888889,s+=8589934592;n=t.periodStart+s/9e4-n}}s=[];for(var o=(r=c(i[0].split("\n"))).next();!o.done;o=r.next())if(o=o.value,/^Region:/.test(o)){o=new td(o);var a=new be;rd(o),nd(o);for(var l=rd(o);l;){var u=a,h=l;(l=/^id=(.*)$/.exec(h))?u.id=l[1]:(l=/^width=(\d{1,2}|100)%$/.exec(h))?u.width=Number(l[1]):(l=/^lines=(\d+)$/.exec(h))?(u.height=Number(l[1]),u.heightUnits=2):(l=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(h))?(u.regionAnchorX=Number(l[1]),u.regionAnchorY=Number(l[2])):(l=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(h))?(u.viewportAnchorX=Number(l[1]),u.viewportAnchorY=Number(l[2])):/^scroll=up$/.exec(h)&&(u.scroll="up"),nd(o),l=rd(o)}s.push(a)}for(wg(r=new Map),o=[],a=(i=c(i.slice(1))).next();!a.done;a=i.next()){if((1!=(a=a.value.split("\n")).length||a[0])&&!/^NOTE($|[ \t])/.test(a[0])&&"STYLE"==a[0]&&a[1].includes("::cue")){u="global",(l=a[1].match(/\((.*)\)/))&&(u=l.pop()),l=a.slice(2,-1),a[1].includes("}")&&(h=/\{(.*?)\}/.exec(a[1]))&&(l=h[1].split(";")),h=new ne(0,0,"");for(var d=!1,p=0;p<l.length;p++){var f=/^\s*([^:]+):\s*(.*)/.exec(l[p]);if(f){var m=f[2].trim().replace(";","");switch(f[1].trim()){case"background-color":d=!0,h.backgroundColor=m;break;case"color":d=!0,h.color=m;break;case"font-family":d=!0,h.fontFamily=m;break;case"font-size":d=!0,h.fontSize=m;break;case"font-weight":700<=parseInt(m,10)&&(d=!0,h.fontWeight=700);break;case"font-style":switch(m){case"normal":d=!0,h.fontStyle=ve;break;case"italic":d=!0,h.fontStyle="italic";break;case"oblique":d=!0,h.fontStyle="oblique"}break;case"opacity":d=!0,h.opacity=parseFloat(m);break;case"white-space":d=!0,h.wrapLine="noWrap"!=m}}}d&&r.set(u,h)}if(p=n,1==a.length&&!a[0]||/^NOTE($|[ \t])/.test(a[0])||"STYLE"==a[0])a=null;else{if(u=null,a[0].includes("--\x3e")||(u=a[0],a.splice(0,1)),h=Tg(l=new td(a[0])),f=id(l,/[ \t]+--\x3e[ \t]+/g),d=Tg(l),null==h||null==f||null==d)throw new Fe(2,2,2001,"Could not parse cue time range in WebVTT");for(h+=p,d+=p,p=a.slice(1).join("\n").trim(),r.has("global")?((a=r.get("global").clone()).startTime=h,a.endTime=d,a.payload=""):a=new ne(h,d,""),Eg(p,a,r),nd(l),h=rd(l);h;)Sg(a,h,s),nd(l),h=rd(l);null!=u&&(a.id=u)}a&&o.push(a)}return o},$("shaka.text.VttTextParser",bg),bg.prototype.parseMedia=bg.prototype.parseMedia,bg.prototype.parseInit=bg.prototype.parseInit,tn["text/vtt"]=function(){return new bg},tn['text/vtt; codecs="vtt"']=function(){return new bg},tn['text/vtt; codecs="wvtt"']=function(){return new bg},kg.prototype.parseInit=function(e){var t=this,n=!1;if((new gr).box("moov",vr).box("trak",vr).box("mdia",vr).R("mdhd",(function(e){e=Ls(e.reader,e.version),t.g=e.timescale})).box("minf",vr).box("stbl",vr).R("stsd",yr).box("wvtt",(function(){n=!0})).parse(e),!this.g)throw new Fe(2,2,2008);if(!n)throw new Fe(2,2,2008)},kg.prototype.parseMedia=function(e,t){if(!this.g)throw new Fe(2,2,2008);var n,i=0,r=[],s=[],o=!1,a=!1,l=!1,u=null;if((new gr).box("moof",vr).box("traf",vr).R("tfdt",(function(e){o=!0,i=Is(e.reader,e.version).md})).R("tfhd",(function(e){u=Ps(e.reader,e.flags).ee})).R("trun",(function(e){a=!0,r=As(e.reader,e.version,e.flags).ve})).box("mdat",br((function(e){l=!0,n=e}))).parse(e,!1),!l&&!o&&!a)throw new Fe(2,2,2008);for(var h=i,d=new pr(n,0),p=c(r),f=p.next();!f.done;f=p.next()){var m=(f=f.value).Od||u,g=f.Sc?i+f.Sc:h;h=g+(m||0);var v=0;do{var y=d.M();v+=y;var b=null;"vttc"==Er(d.M())?8<y&&(b=d.Za(y-8)):d.skip(y-8),m&&b&&(y=Cg(b,t.periodStart+g/this.g,t.periodStart+h/this.g),s.push(y))}while(f.sampleSize&&v<f.sampleSize)}return s.filter(Re)},$("shaka.text.Mp4VttParser",kg),kg.prototype.parseMedia=kg.prototype.parseMedia,kg.prototype.parseInit=kg.prototype.parseInit,tn['application/mp4; codecs="wvtt"']=function(){return new kg},Pg.prototype.parseInit=function(){},Pg.prototype.parseMedia=function(e){var t=Pt(e).replace(/\r+/g,"");if(e=[],""==(t=t.trim()))return e;for(var n=(t=c(t.split("\n\n"))).next();!n.done;n=t.next()){var i=new td((n=n.value.split("\n"))[0]),r=Ig(i),s=id(i,/,/g);if(i=Ig(i),null==r||null==s||null==i)throw new Fe(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new ne(r,i,n.slice(1).join("\n").trim()))}return e},$("shaka.text.SbvTextParser",Pg),Pg.prototype.parseMedia=Pg.prototype.parseMedia,Pg.prototype.parseInit=Pg.prototype.parseInit,tn["text/x-subviewer"]=function(){return new Pg},Lg.prototype.parseInit=function(){},Lg.prototype.parseMedia=function(e,t){var n=Pt(e);return n=ke(At(n=Ag(n))),this.g.parseMedia(n,t)},$("shaka.text.SrtTextParser",Lg),Lg.srt2webvtt=Ag,Lg.prototype.parseMedia=Lg.prototype.parseMedia,Lg.prototype.parseInit=Lg.prototype.parseInit,tn["text/srt"]=function(){return new Lg},Mg.prototype.parseInit=function(){},Mg.prototype.parseMedia=function(e){for(var t="",n="",i=(e=c(e=Pt(e).split(/\r?\n\s*\r?\n/))).next();!i.done;i=e.next()){var r=Bg.exec(i.value);r&&(i=r[1],r=r[2],"V4 Styles"==i||"V4+ Styles"==i?t=r:"Events"==i&&(n=r))}e=[],i=null;for(var s=(t=c(t.split(/\r?\n/))).next();!s.done;s=t.next())if(r=s.value,!/^\s*;/.test(r)&&(s=Ug.exec(r)))if(r=s[1].trim(),s=s[2].trim(),"Format"==r)i=s.split($g);else if("Style"==r){r=s.split($g),s={};for(var o=0;o<i.length&&o<r.length;o++)s[i[o]]=r[o];e.push(s)}for(i=[],t=null,r={},s=(n=c(n.split(/\r?\n/))).next();!s.done;r={jd:r.jd},s=n.next())if(s=s.value,!/^\s*;/.test(s)&&(o=Ug.exec(s)))if(s=o[1].trim(),o=o[2].trim(),"Format"==s)t=o.split($g);else if("Dialogue"==s){o=o.split($g),s={};for(var a=0;a<t.length&&a<o.length;a++)s[t[a]]=o[a];o=new ne(a=Dg(s.Start),Dg(s.End),o.slice(t.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,"")),r.jd=s.Style,(s=e.find(function(e){return function(t){return t.Name==e.jd}}(r)))&&Og(o,s),i.push(o)}return i},$("shaka.text.SsaTextParser",Mg),Mg.prototype.parseMedia=Mg.prototype.parseMedia,Mg.prototype.parseInit=Mg.prototype.parseInit;var Rg,jg,Bg=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,Ug=/^\s*([^:]+):\s*(.*)/,$g=/\s*,\s*/,Fg=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;function Hg(){}function qg(){Rg?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(Rg=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=Vg):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function Vg(e,t){var n,i=this;return M((function(r){return 1==r.g?(console.assert(i==navigator,'bad "this" for requestMediaKeySystemAccess'),w(r,Rg.call(i,e,t),2)):ev(n=r.h)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=Rg,r.return(n)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=zg,r.return(zg.call(i,e,t)))}))}function zg(e,t){var n,i,r,s,o,a,l,u,h,d,p=this;return M((function(f){if(1==f.g){for(console.assert(p==navigator,'bad "this" for requestMediaKeySystemAccess'),n=Zg(e),i=[],r=c(t),s=r.next();!s.done;s=r.next())o=s.value,a=Gg(o.videoCapabilities,n),l=Gg(o.audioCapabilities,n),o.videoCapabilities&&o.videoCapabilities.length&&!a.length||o.audioCapabilities&&o.audioCapabilities.length&&!l.length||((u=Object.assign({},o)).videoCapabilities=a,u.audioCapabilities=l,i.push(u));if(!i.length)throw(h=Error("Unsupported keySystem or supportedConfigurations.")).name="NotSupportedError",h.code=DOMException.NOT_SUPPORTED_ERR,h;return w(f,Rg.call(p,e,i),2)}return d=f.h,f.return(new Qg(d,n))}))}function Gg(e,t){return e?e.filter((function(e){return!e.encryptionScheme||e.encryptionScheme==t})):e}function Kg(){}function Wg(){jg?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(jg=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=Xg):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function Xg(e){var t,n,i,r=this;return M((function(s){switch(s.g){case 1:return console.assert(r==navigator.mediaCapabilities,'bad "this" for decodingInfo'),w(s,jg.call(r,e),2);case 2:if(t=s.h,!e.keySystemConfiguration)return s.return(t);if((n=t.keySystemAccess)&&ev(n))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=jg,s.return(t);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=Jg,n){s.B(3);break}return i=t,w(s,Yg(e),4);case 4:return i.keySystemAccess=s.h,s.return(t);case 3:return s.return(Jg.call(r,e))}}))}function Jg(e){var t,n,i,r,s,o,a,l,c=this;return M((function(u){switch(u.g){case 1:return console.assert(c==navigator.mediaCapabilities,'bad "this" for decodingInfo'),t=null,e.keySystemConfiguration&&(n=e.keySystemConfiguration,i=n.keySystem,r=n.audio&&n.audio.encryptionScheme,s=n.video&&n.video.encryptionScheme,t=Zg(i),o={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},r&&r!=t||s&&s!=t)?u.return(o):w(u,jg.call(c,e),2);case 2:if((a=u.h).keySystemAccess){a.keySystemAccess=new Qg(a.keySystemAccess,t),u.B(3);break}if(!e.keySystemConfiguration){u.B(3);break}return l=a,w(u,Yg(e),5);case 5:l.keySystemAccess=u.h;case 3:return u.return(a)}}))}function Yg(e){var t,n;return M((function(i){if(1==i.g){var r=e.keySystemConfiguration,s=[],o=[];return r.audio&&s.push({robustness:r.audio.robustness||"",contentType:e.audio.contentType}),r.video&&o.push({robustness:r.video.robustness||"",contentType:e.video.contentType}),r={initDataTypes:r.initDataType?[r.initDataType]:[],distinctiveIdentifier:r.distinctiveIdentifier,persistentState:r.persistentState,sessionTypes:r.sessionTypes},s.length&&(r.audioCapabilities=s),o.length&&(r.videoCapabilities=o),t=r,w(i,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=i.h,i.return(n)}))}function Qg(e,t){this.h=e,this.g=t,this.keySystem=e.keySystem}function Zg(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function ev(e){var t=(e=e.getConfiguration()).audioCapabilities&&e.audioCapabilities[0];return!(!(e=e.videoCapabilities&&e.videoCapabilities[0]||t)||void 0===e.encryptionScheme)}function tv(){}function nv(){qg(),Wg()}tn["text/x-ssa"]=function(){return new Mg},$("EmeEncryptionSchemePolyfill",Hg),Hg.install=qg,$("McEncryptionSchemePolyfill",Kg),Kg.install=Wg,Qg.prototype.getConfiguration=function(){var e=this.h.getConfiguration();if(e.videoCapabilities)for(var t=c(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;if(e.audioCapabilities)for(n=(t=c(e.audioCapabilities)).next();!n.done;n=t.next())n.value.encryptionScheme=this.g;return e},Qg.prototype.createMediaKeys=function(){return this.h.createMediaKeys()},$("EncryptionSchemePolyfills",tv),tv.install=nv,void 0!==n&&n.exports&&(n.exports=tv)}.call(i,e,e,void 0),i.shaka)t[r]=i.shaka[r]}()},28797:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=new class{constructor(){this.jwt=localStorage.getItem("jwt")}isLoggedIn(){return!!this.jwt}headers(e){const t={Accept:"application/json"};return this.jwt&&(t.Authorization=`Bearer ${this.jwt}`),e&&(t["Content-Type"]=e),t}getJson(e){const t={method:"GET",headers:this.headers()};return fetch(e,t).then((e=>{if(!e.ok)throw new Error(`${e.status}`);return e.json()}))}postJson(e,t){const n={method:"POST",headers:this.headers("application/json"),body:JSON.stringify(t)};return fetch(e,n).then((e=>{if(!e.ok)throw new Error(`${e.status}`);return 204!==e.status?e.json():null}))}putJson(e,t){const n={method:"PUT",headers:this.headers("application/json"),body:JSON.stringify(t)};return fetch(e,n).then((e=>{if(!e.ok)throw new Error(`${e.status}`);return e.json()}))}putJsonWithEmptyResponse(e,t){const n={method:"PUT",headers:{Authorization:`Bearer ${this.jwt}`,"Content-Type":"application/json"},body:JSON.stringify(t)};return fetch(e,n).then((e=>{if(!e.ok)throw new Error(`${e.status}`)}))}patchJson(e,t){const n={method:"PATCH",headers:this.headers("application/json"),body:JSON.stringify(t)};return fetch(e,n).then((e=>{if(!e.ok)throw new Error(`${e.status}`);return e.json()}))}delete(e){const t={method:"DELETE",headers:this.headers()};return fetch(e,t).then((e=>{if(!e.ok)throw new Error(`${e.status}`)}))}loadImage(e){const t={headers:{Authorization:`Bearer ${this.jwt}`},cache:"reload"};return fetch(e,t).then((e=>{if(!e.ok)throw new Error(`${e.status}`);return e.blob()}))}userCount(){return this.getJson("/users/count").then((e=>e.count)).catch((()=>{throw new Error("Failed to get user count.")}))}assertJWT(){if(!this.jwt)throw new Error("No JWT go login..")}verifyJWT(){return fetch("/things",{headers:this.headers()}).then((e=>e.ok))}createUser(e,t,n){return this.postJson("/users",{name:e,email:t,password:n}).then((e=>{const t=e.jwt;localStorage.setItem("jwt",t),this.jwt=t})).catch((()=>{throw new Error("Repeating signup not permitted")}))}getUser(e){return this.getJson(`/users/${encodeURIComponent(e)}`)}async addUser(e,t,n){return await this.postJson("/users",{name:e,email:t,password:n})}editUser(e,t,n,i,r){return this.putJson(`/users/${encodeURIComponent(e)}`,{id:e,name:t,email:n,password:i,newPassword:r})}async userEnableMfa(e,t){const n={enable:!0};return t&&(n.mfa={totp:t}),await this.postJson(`/users/${encodeURIComponent(e)}/mfa`,n)}async userDisableMfa(e){return await this.postJson(`/users/${encodeURIComponent(e)}/mfa`,{enable:!1}),null}userRegenerateMfaBackupCodes(e){return this.putJson(`/users/${encodeURIComponent(e)}/mfa/codes`,{generate:!0})}deleteUser(e){return this.delete(`/users/${encodeURIComponent(e)}`)}getAllUserInfo(){return this.getJson("/users/info")}login(e,t,n){const i={email:e,password:t};n&&(i.mfa={totp:n});const r={method:"POST",headers:this.headers("application/json"),body:JSON.stringify(i)};return fetch("/login",r).then((e=>{if(!e.ok){if(401===e.status)return e.text().then((e=>{throw new Error(e)}));throw new Error(`${e.status}`)}return e.json().then((e=>{const t=e.jwt;localStorage.setItem("jwt",t),this.jwt=t}))}))}async logout(){this.assertJWT(),localStorage.removeItem("jwt");try{await this.postJson("/log-out",{})}catch(e){console.error("Logout failed:",e)}}getInstalledAddons(){return this.getJson("/addons")}getAddonConfig(e){return this.getJson(`/addons/${encodeURIComponent(e)}/config`)}setAddonConfig(e,t){return this.putJson(`/addons/${encodeURIComponent(e)}/config`,{config:t})}setAddonSetting(e,t){return this.putJson(`/addons/${encodeURIComponent(e)}`,{enabled:t})}async installAddon(e,t,n){return await this.postJson("/addons",{id:e,url:t,checksum:n})}uninstallAddon(e){return this.delete(`/addons/${encodeURIComponent(e)}`)}updateAddon(e,t,n){return this.patchJson(`/addons/${encodeURIComponent(e)}`,{url:t,checksum:n})}getAddonsInfo(){return this.getJson("/settings/addonsInfo")}getExperimentSetting(e){return this.getJson(`/settings/experiments/${encodeURIComponent(e)}`).then((e=>e.enabled)).catch((t=>{if("404"===t.message)return!1;throw new Error(`Error getting ${e}`)}))}setExperimentSetting(e,t){return this.putJson(`/settings/experiments/${encodeURIComponent(e)}`,{enabled:t})}getUpdateStatus(){return this.getJson("/updates/status")}getUpdateLatest(){return this.getJson("/updates/latest")}getSelfUpdateStatus(){return this.getJson("/updates/self-update")}setSelfUpdateStatus(e){return this.putJson("/updates/self-update",{enabled:e})}async startUpdate(){return await this.postJson("/updates/update",{})}getExtensions(){return this.getJson("/extensions")}getThings(){return this.getJson("/things")}getThing(e){return this.getJson(`/things/${encodeURIComponent(e)}`)}setThingLayoutIndex(e,t){return this.patchJson(`/things/${encodeURIComponent(e)}`,{layoutIndex:t})}setThingGroup(e,t){return t=t||"",this.patchJson(`/things/${encodeURIComponent(e)}`,{group:t})}setThingGroupAndLayoutIndex(e,t,n){return t=t||"",this.patchJson(`/things/${encodeURIComponent(e)}`,{group:t,layoutIndex:n})}setThingFloorplanPosition(e,t,n){return this.patchJson(`/things/${encodeURIComponent(e)}`,{floorplanX:t,floorplanY:n})}setThingCredentials(e,t){const n={thingId:e};return t.hasOwnProperty("pin")?n.pin=t.pin:(n.username=t.username,n.password=t.password),this.patchJson("/things",n)}async addThing(e){return await this.postJson("/things",e)}async addWebThing(e){return await this.postJson("/new_things",{url:e})}removeThing(e){return this.delete(`/things/${encodeURIComponent(e)}`)}updateThing(e,t){return this.putJson(`/things/${encodeURIComponent(e)}`,t)}getGroups(){return this.getJson("/groups")}getGroup(e){return this.getJson(`/groups/${encodeURIComponent(e)}`)}setGroupLayoutIndex(e,t){return this.patchJson(`/groups/${encodeURIComponent(e)}`,{layoutIndex:t})}async addGroup(e){return await this.postJson("/groups",e)}removeGroup(e){return this.delete(`/groups/${encodeURIComponent(e)}`)}updateGroup(e,t){return this.putJson(`/groups/${encodeURIComponent(e)}`,t)}getPushKey(){return this.getJson("/push/vapid-public-key")}async pushSubscribe(e){return await this.postJson("/push/register",e)}getNotifiers(){return this.getJson("/notifiers")}async startPairing(e){return await this.postJson("/actions",{pair:{input:{timeout:e}}})}cancelPairing(e){return this.delete(e)}getRules(){return this.getJson("/rules")}getRule(e){return this.getJson(`/rules/${encodeURIComponent(e)}`)}async addRule(e){return await this.postJson("/rules",e)}updateRule(e,t){return this.putJson(`/rules/${encodeURIComponent(e)}`,t)}deleteRule(e){return this.delete(`/rules/${encodeURIComponent(e)}`)}getLogs(){return this.getJson("/logs/.schema")}async addLog(e){const t={method:"POST",headers:this.headers("application/json"),body:JSON.stringify(e)};try{const e=await fetch("/logs",t);return e.ok?[!0,await e.json()]:[!1,await e.text()]}catch(e){return[!1,null]}}deleteLog(e,t){return this.delete(`/logs/things/${encodeURIComponent(e)}/properties/${encodeURIComponent(t)}`)}uploadFloorplan(e){const t=new FormData;t.append("file",e);const n={method:"POST",headers:{Authorization:`Bearer ${this.jwt}`},body:t};return fetch("/uploads",n).then((e=>{if(!e.ok)throw new Error(`${e.status}`)}))}setupTunnel(e,t,n,i){const r={method:"POST",headers:this.headers("application/json"),body:JSON.stringify({email:e,subdomain:t,reclamationToken:n,optout:i})};return fetch("/settings/subscribe",r).then((e=>e.ok?e.json().then((e=>[!0,e])):[!1,e.statusText]))}skipTunnel(){const e={method:"POST",headers:this.headers("application/json"),body:JSON.stringify({})};return fetch("/settings/skiptunnel",e).then((e=>e.ok?e.json().then((e=>[!0,e])):[!1,e.statusText]))}async reclaimDomain(e){return await this.postJson("/settings/reclaim",{subdomain:e})}getLanSettings(){return this.getJson("/settings/network/lan")}getWlanSettings(){return this.getJson("/settings/network/wireless")}getDhcpSettings(){return this.getJson("/settings/network/dhcp")}getWirelessNetworks(){return this.getJson("/settings/network/wireless/networks")}getNetworkAddresses(){return this.getJson("/settings/network/addresses")}setLanSettings(e){return this.putJson("/settings/network/lan",e)}setWlanSettings(e){return this.putJson("/settings/network/wireless",e)}setDhcpSettings(e){return this.putJson("/settings/network/dhcp",e)}getNtpStatus(){return this.getJson("/settings/system/ntp")}async restartNtpSync(){return await this.postJson("/settings/system/ntp",{})}getSshStatus(){return this.getJson("/settings/system/ssh")}setSshStatus(e){return this.putJson("/settings/system/ssh",{enabled:e})}getPlatform(){return this.getJson("/settings/system/platform")}getTunnelInfo(){return this.getJson("/settings/tunnelinfo")}getDomainSettings(){return this.getJson("/settings/domain")}setDomainSettings(e){return this.putJson("/settings/domain",e)}getAdapters(){return this.getJson("/adapters")}getAuthorizations(){return this.getJson("/authorizations")}revokeAuthorization(e){return this.delete(`/authorizations/${encodeURIComponent(e)}`)}ping(){const e={method:"GET",headers:this.headers()};return fetch("/ping",e).then((e=>{if(!e.ok)throw new Error(`${e.status}`)}))}getCountry(){return this.getJson("/settings/localization/country")}setCountry(e){return this.putJson("/settings/localization/country",{country:e})}getTimezone(){return this.getJson("/settings/localization/timezone")}setTimezone(e){return this.putJson("/settings/localization/timezone",{zone:e})}getLanguage(){return this.getJson("/settings/localization/language")}setLanguage(e){return this.putJson("/settings/localization/language",{language:e})}getUnits(){return this.getJson("/settings/localization/units")}setUnits(e){return this.putJson("/settings/localization/units",e)}};window.API=n,t.default=n},25290:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getLanguage=t.getMessage=t.getEnglishMessageStrict=t.getMessageStrict=t.init=t.l10n=t.load=void 0,n(43033);const r=i(n(28797)),s=n(66170),o=n(78309),a={bn:["/fluent/bn/main.ftl"],cs:["/fluent/cs/main.ftl"],cy:["/fluent/cy/main.ftl"],da:["/fluent/da/main.ftl"],de:["/fluent/de/main.ftl"],el:["/fluent/el/main.ftl"],"en-CA":["/fluent/en-CA/main.ftl"],"en-GB":["/fluent/en-GB/main.ftl"],"en-US":["/fluent/en-US/main.ftl"],en:["/fluent/en-US/main.ftl"],"es-AR":["/fluent/es-AR/main.ftl"],"es-ES":["/fluent/es-ES/main.ftl"],fi:["/fluent/fi/main.ftl"],fr:["/fluent/fr/main.ftl"],"fy-NL":["/fluent/fy-NL/main.ftl"],gl:["/fluent/gl/main.ftl"],hu:["/fluent/hu/main.ftl"],ia:["/fluent/ia/main.ftl"],id:["/fluent/id/main.ftl"],it:["/fluent/it/main.ftl"],ja:["/fluent/ja/main.ftl"],kab:["/fluent/kab/main.ftl"],nl:["/fluent/nl/main.ftl"],"nn-NO":["/fluent/nn-NO/main.ftl"],pl:["/fluent/pl/main.ftl"],"pt-BR":["/fluent/pt-BR/main.ftl"],"pt-PT":["/fluent/pt-PT/main.ftl"],ro:["/fluent/ro/main.ftl"],ru:["/fluent/ru/main.ftl"],sk:["/fluent/sk/main.ftl"],sr:["/fluent/sr/main.ftl"],"sv-SE":["/fluent/sv-SE/main.ftl"],ta:["/fluent/ta/main.ftl"],uk:["/fluent/uk/main.ftl"],"zh-CN":["/fluent/zh-CN/main.ftl"],"zh-TW":["/fluent/zh-TW/main.ftl"]};let l,c,u;async function h(){let e={};try{e=await r.default.getLanguage()}catch(e){}if(l=e.current||navigator.language||"en-US",!a.hasOwnProperty(l)){const e=l.split("-")[0];l=a.hasOwnProperty(e)?e:"en-US"}l!==e.current&&r.default.setLanguage(l).catch((()=>{}));const t=a[l];u=new o.FluentBundle(l);for(const e of t)try{const t=await fetch(e),n=await t.text();u.addResource(new o.FluentResource(n))}catch(e){console.warn("Unable to download language pack:",e)}if("en-US"===l)c=u;else{const e=a["en-US"];c=new o.FluentBundle("en-US");for(const t of e)try{const e=await fetch(t),n=await e.text();c.addResource(new o.FluentResource(n))}catch(e){console.warn("Unable to download English language pack:",e)}}}function d(e,t={}){if(!u)return console.warn("Bundle not yet loaded"),null;const n=u.getMessage(e);return n&&n.value?u.formatPattern(n.value,t):(console.warn("Missing id",e),null)}function p(e,t={}){if(!c)return console.warn("Bundle not yet loaded"),null;const n=c.getMessage(e);return n&&n.value?c.formatPattern(n.value,t):(console.warn("Missing id",e),null)}t.load=h,t.l10n=new s.DOMLocalization([],(async function*(e){u||await h(),yield*[u,c]})),t.init=function(){t.l10n.connectRoot(document.documentElement),t.l10n.translateRoots()},t.getMessageStrict=d,t.getEnglishMessageStrict=p,t.getMessage=function(e,t={}){let n=d(e,t);return n||(n=p(e,t),n||`<${e}>`)},t.getLanguage=function(){return l}},33756:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(2026)),l=o(n(6851)),c=o(n(38889)),u=s(n(29705));t.default=class{constructor(e,t,n,i,r,s=null,o=!1,l=!1,c=!1){this.schema=a.retrieveSchema(e,r,t),this.formData=Array.isArray(t)?t:[],this.idSchema=n,this.name=i,this.definitions=r,this.onChange=s,this.disabled=l,this.readOnly=c}require(e){return Array.isArray(this.schema.required)&&this.schema.required.includes(e)}onChangeForIndex(e){return t=>{const n=this.formData.map(((n,i)=>e===i?void 0===t?null:t:n));this.formData=n,this.onChange&&this.onChange(this.formData)}}onSelectChange(e,t){return n=>{n.target.checked?(this.formData.push(e),this.formData.sort(((e,n)=>t.indexOf(e)-t.indexOf(n)))):this.formData=this.formData.filter((t=>t!==e)),this.onChange&&this.onChange(this.formData)}}allowAdditionalItems(){const e=this.schema;return!0===e.additionalItems&&console.warn("additionalItems=true is currently not supported"),a.isObject(e.additionalItems)}isAddable(e){const t=this.schema;let n=!0;return void 0!==t.maxItems&&(n=e.length<t.maxItems),n}isItemRequired(e){return Array.isArray(e.type)?!e.type.includes("null"):"null"!==e.type}itemFieldId(e){return`array_${u.escapeHtmlForIdClass(this.idSchema.$id)}_${e}`}onDropIndexClick(e,t){return n=>{const i=this.schema,r=e.querySelector("div.array-items");let s=i.items;a.isFixedItems(i)&&this.allowAdditionalItems()&&(s=i.additionalItems);const o=r.cloneNode(!1);n.preventDefault();for(let n=0;n<t;n++){const t=this.itemFieldId(n),i=e.querySelector(`#${t}`);o.appendChild(i)}for(let n=t+1;n<this.formData.length;n++){const t=this.renderArrayFieldItem(e,this.formData[n],n-1,s,!0);o.appendChild(t)}this.formData=this.formData.filter(((e,n)=>n!==t)),e.replaceChild(o,r),this.onChange&&this.onChange(this.formData)}}renderRemoveButton(e,t){const n=document.createElement("button");return n.className="btn-remove btn-form-tools",n.disabled=this.disabled||this.readOnly,n.onclick=this.onDropIndexClick(e,t),n}onAddClick(e){return t=>{const n=this.schema,i=this.definitions,r=this.formData.length,s=e.querySelector("div.array-items");t.preventDefault();let o=n.items;a.isFixedItems(n)&&this.allowAdditionalItems()&&(o=n.additionalItems);const l=a.getDefaultFormState(o,void 0,i);this.formData.push(l);const c=this.renderArrayFieldItem(e,l,r,o,!0);s.appendChild(c),this.onChange&&this.onChange(this.formData)}}renderAddButton(e){const t=document.createElement("button");return t.className="btn-add btn-form-tools",t.disabled=this.disabled||this.readOnly,t.onclick=this.onAddClick(e),t}renderArrayFieldItem(e,t,n,i,r){const s=document.createElement("div"),o=this.itemFieldId(n);if(s.className="array-item-row",s.id=o,r){s.innerHTML='\n      <div class="array-item array-item-col-field">\n      </div>\n      <div class="array-item-toolbox array-item-col-tool">\n      </div>\n      ';const t=s.querySelector("div.array-item-toolbox"),i=this.renderRemoveButton(e,n);t.appendChild(i)}else s.innerHTML='\n      <div class="array-item array-item-col">\n      </div>';const c=`${this.idSchema.$id}_${n}`,u=a.toIdSchema(i,c,this.definitions,t),h=s.querySelector("div.array-item"),d=new l.default(i,t,u,null,this.definitions,this.onChangeForIndex(n),this.isItemRequired(i),i.disabled,i.readOnly).render();return h.appendChild(d),s}renderArrayFieldset(){const e=u.escapeHtmlForIdClass(this.idSchema.$id),t=this.schema.description;let n=this.schema.title?this.schema.title:this.name;n=u.escapeHtml(n);const i=document.createElement("fieldset");return i.innerHTML=(n?`<legend id="${e}__title">${n}</legend>`:"")+(t?`<p id="${e}__description" class="field-description">\n        ${u.escapeHtml(t)}</p>`:"")+'<div class="array-items"></div>',i}renderNormalArray(){const e=this.schema,t=this.definitions,n=this.formData,i=a.retrieveSchema(e.items,t,n),r=this.renderArrayFieldset(),s=r.querySelector("div.array-items");if(n.forEach(((e,t)=>{const n=this.renderArrayFieldItem(r,e,t,i,!0);s.appendChild(n)})),this.isAddable(n)){const e=this.renderAddButton(r);r.appendChild(e)}return r}renderFixedArray(){const e=this.schema,t=this.definitions,n=this.renderArrayFieldset(),i=n.querySelector("div.array-items");let r=this.formData;const s=e.items.map(((e,n)=>a.retrieveSchema(e,t,r[n])));if((!r||r.length<s.length)&&(r=r||[],r=r.concat(new Array(s.length-r.length))),r.forEach(((r,o)=>{const l=o>=s.length,c=l,u=l?a.retrieveSchema(e.additionalItems,t):s[o],h=this.renderArrayFieldItem(n,r,o,u,c);i.appendChild(h)})),this.allowAdditionalItems()&&this.isAddable(r)){const e=this.renderAddButton(n);n.appendChild(e)}return n}renderMultiSelect(){const e=u.escapeHtmlForIdClass(this.idSchema.$id),t=this.formData,n=this.schema,i=this.definitions,r=a.retrieveSchema(n.items,i,t),s=a.optionsList(r),o=s.map((({value:e})=>e)),l=document.createElement("fieldset");return l.className="checkboxes",s.forEach(((n,i)=>{const r=t.includes(n.value),s=this.disabled||this.readOnly?"disabled":"",a=document.createElement("div");a.className=`checkbox ${s}`,a.innerHTML=`\n      <input\n        type="checkbox"\n        id="${e}_${i}"\n        ${r?"checked":""}\n        ${this.disabled||this.readOnly?"disabled":""}\n      />\n      <span class="checkbox-title">${u.escapeHtml(n.label)}</span>\n      `,a.querySelector("input").onchange=this.onSelectChange(n.value,o),l.appendChild(a)})),l}render(){const e=this.schema;return e.hasOwnProperty("items")?a.isFixedItems(e)?this.renderFixedArray():a.isMultiSelect(e,this.definitions)?this.renderMultiSelect():this.renderNormalArray():new c.default(e).render()}}},44351:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const o=s(n(29705));t.default=class{constructor(e,t,n,i,r,s=null,o=!1,a=!1,l=!1){this.formData=t,this.idSchema=n,this.onChange=s,this.required=o,this.disabled=a,this.readOnly=l}onBooleanChange(e){this.formData=e.target.checked,this.onChange&&this.onChange(this.formData)}render(){const e=o.escapeHtmlForIdClass(this.idSchema.$id),t=this.formData,n=document.createElement("div");return n.className="checkbox",n.innerHTML=`\n      <input\n      type="checkbox"\n      id="${e}"\n      ${t?"checked":""}\n      ${this.required?"required":""}\n      ${this.disabled||this.readOnly?"disabled":""}\n      />\n      <label for="${e}"></span>\n      `,n.querySelector(`#${e}`).onchange=this.onBooleanChange.bind(this),n}}},7261:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){const e=document.createElement("div");e.className="errors-field hidden",e.innerHTML='\n      <div>\n        <h3 class="errors-title" data-l10n-id="errors"></h3>\n      </div>\n      <ul class="errors-list">\n      </ul>',this.field=e,this.errorList=e.querySelector("ul")}render(e){if(e.length>0){const t=e.map((e=>`\n            <li class="error-item">\n              ${`${e.dataPath} ${e.message}`.trim()}\n            </li>`));this.errorList.innerHTML=t.join(" "),this.field.classList.remove("hidden")}else this.field.classList.add("hidden");return this.field}}},69809:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const o=s(n(2026)),a=s(n(29705));t.default=class{constructor(e,t,n,i,r,s=null,a=!1,l=!1,c=!1){this.schema=o.retrieveSchema(e,r,t),this.formData=t,this.idSchema=n,this.onChange=s,this.required=a,this.disabled=l,this.readOnly=c}toFormData(e,t){const n=Number(e);if(""===e){if(t){if(!this.required&&t.valid)return;if(this.required&&t.valueMissing&&!t.badInput)return;return"."}return console.log("returning ."),"."}return isNaN(n)?".":n}onNumberChange(e){const t=e.target.value;this.rangeValue&&(this.rangeValue.textContent=t),this.formData=this.toFormData(t,e.target.validity),this.onChange&&this.onChange(this.formData)}render(){const e=a.escapeHtmlForIdClass(this.idSchema.$id);let t=Number(this.formData);isNaN(t)&&(t=0);const n=document.createElement("div");if(this.schema.hasOwnProperty("minimum")&&this.schema.hasOwnProperty("maximum"))n.className="field-range-wrapper",n.innerHTML=`\n        <input\n        type="range"\n        id="${e}"\n        class="form-control"\n        ${this.required?"required":""}\n        ${this.disabled||this.readOnly?"disabled":""}\n        value=${null==t?"":t}\n        ${this.schema.multipleOf?`step=${Number(this.schema.multipleOf)}`:""}\n        min=${Number(this.schema.minimum)}\n        max=${Number(this.schema.maximum)}\n        />\n        <span class="range-view">${t}</span>`,this.rangeValue=n.querySelector("span");else if(o.isSelect(this.schema)){const i=o.getOptionsList(this.schema),r=t;let s=!1;this.required||i.unshift({value:"",label:""});const l=i.map((({value:e,label:t},n)=>{const i=r===this.toFormData(e);return s=s||i,`\n          <option\n          key="${n}"\n          value="${a.escapeHtml(`${e}`)}"\n          ${i?"selected":""}>\n            ${a.escapeHtml(t)}\n          </option>`}));n.innerHTML=`\n        <select\n        id="${e}"\n        class="form-control"\n        ${this.required?"required":""}\n        ${this.disabled||this.readOnly?"disabled":""}\n        >\n        ${l.join(" ")}\n        </select>`,s||(n.querySelector(`#${e}`).selectedIndex=-1)}else{let i="",r="",s="any";this.schema.hasOwnProperty("minimum")&&(i=`min="${this.schema.minimum}"`),this.schema.hasOwnProperty("maximum")&&(r=`max="${this.schema.maximum}"`),this.schema.hasOwnProperty("multipleOf")?s=`${this.schema.multipleOf}`:"integer"===this.schema.type&&(s="1"),n.innerHTML=`\n        <input\n        id="${e}"\n        type="number"\n        class="form-control"\n        ${this.required?"required":""}\n        ${this.disabled||this.readOnly?"disabled":""}\n        ${i} ${r} step="${s}"\n        value="${null==t?"":a.escapeHtml(`${t}`)}"\n        />`}const i=n.querySelector(`#${e}`);return i.onchange=this.onNumberChange.bind(this),i.oninput=this.onNumberChange.bind(this),n}}},39213:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(2026)),l=o(n(6851)),c=s(n(29705));t.default=class{constructor(e,t,n,i,r,s=null,o=!1,l=!1,c=!1){this.retrievedSchema=a.retrieveSchema(e,r,t),this.schema=e,this.formData=t,this.idSchema=n,this.name=i,this.definitions=r,this.onChange=s,this.required=o}isRequired(e){return Array.isArray(this.retrievedSchema.required)&&this.retrievedSchema.required.includes(e)}sortObject(e){const t=Object.keys(e).sort(),n={};return t.forEach((t=>{let i=e[t];"object"==typeof i&&(i=this.sortObject(i)),n[t]=i})),n}isSameSchema(e,t){return JSON.stringify(this.sortObject(e))===JSON.stringify(this.sortObject(t))}onPropertyChange(e,t){return n=>{const i=this.schema,r={};if(r[e]=n,this.formData=Object.assign(this.formData,r),i.hasOwnProperty("dependencies")){const e=a.retrieveSchema(i,this.definitions,this.formData);this.isSameSchema(this.retrievedSchema,e)||(this.retrievedSchema=e,this.formData=a.getDefaultFormState(e,this.formData,this.definitions),this.renderField(t))}this.onChange&&this.onChange(this.formData)}}renderField(e){const t=c.escapeHtmlForIdClass(this.idSchema.$id),n=this.retrievedSchema.description;let i=this.retrievedSchema.title?this.retrievedSchema.title:this.name;null!=i&&(i=c.escapeHtml(i),i=this.required?i+a.REQUIRED_FIELD_SYMBOL:i),e.innerHTML=(i?`<legend id="${t}__title">${i}</legend>`:"")+(n?`<p id="${t}__description" class="field-description">\n        ${c.escapeHtml(n)}</p>`:""),Object.keys(this.retrievedSchema.properties).forEach((t=>{const n=this.retrievedSchema.properties[t],i=`${this.idSchema.$id}_${t}`,r=this.formData[t],s=a.toIdSchema(n,i,this.definitions,r),o=new l.default(n,r,s,t,this.definitions,this.onPropertyChange(t,e),this.isRequired(t),n.disabled,n.readOnly).render();e.appendChild(o)}))}render(){const e=document.createElement("fieldset");return this.renderField(e),e}}},6851:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=o(n(33756)),l=o(n(44351)),c=o(n(69809)),u=o(n(39213)),h=s(n(2026)),d=o(n(2783)),p=o(n(38889)),f=s(n(29705));t.default=class{constructor(e,t,n,i,r,s=null,o=!1,a=!1,l=!1){this.retrievedSchema=h.retrieveSchema(e,r,t),this.schema=e,this.formData=t,this.idSchema=n,this.name=i,this.definitions=r,this.onChange=s,this.required=o,this.disabled=a,this.readOnly=l}getFieldType(){const e={array:a.default,boolean:l.default,integer:c.default,number:c.default,object:u.default,string:d.default}[this.retrievedSchema.type];return null!=e?e:p.default}render(){const e=this.getFieldType(),t=this.retrievedSchema.type,n=f.escapeHtmlForIdClass(this.idSchema.$id),i=this.retrievedSchema.description,r=["form-group","field",`field-${t}`].join(" ").trim();let s=this.retrievedSchema.title||this.name;null!=s&&(s=f.escapeHtml(s),s=this.required?s+h.REQUIRED_FIELD_SYMBOL:s);let o=!0,a=!0;"array"===t&&(o=a=h.isMultiSelect(this.schema,this.definitions)),"object"===t&&(o=a=!1);const l=document.createElement("div");l.className=r,l.innerHTML=(o&&s?`<div id="${n}__label" class="control-label">${s}</div>`:"")+(a&&i?`<p id="${n}__description" class="field-description">${f.escapeHtml(i)}</p>`:"");const c=new e(this.schema,this.formData,this.idSchema,this.name||"",this.definitions,this.onChange,this.required,this.disabled,this.readOnly).render();return l.appendChild(c),l}}},62531:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(2026)),l=o(n(13024)),c=o(n(6851)),u=o(n(7261)),h=s(n(29705)),d=s(n(25290));class p{constructor(e,t,n,i,r=null,s={}){this.definitions=e.definitions,this.schema=e,this.id=t,this.name=n,this.onSubmit=r,this.idSchema=a.toIdSchema(e,null,this.definitions,i),this.formData=a.getDefaultFormState(e,i,this.definitions),this.submitText=s.hasOwnProperty("submitText")?s.submitText:"",this.noValidate=!!s.hasOwnProperty("validate")&&!s.validate,this.liveValidate=!s.hasOwnProperty("liveValidate")||s.liveValidate}onChange(e){let t=null;if(this.formData=e,this.submitButton.disabled=!1,!this.noValidate&&this.liveValidate){const{errors:n}=this.validate(e);t=n}!this.noValidate&&t?this.errorField.render(t):this.noValidate||this.errorField.render([])}validate(e){return l.default.validateFormData(e,this.schema)}handleSubmit(e){const{errors:t}=this.validate(this.formData);e.target.disabled=!0,this.onSubmit&&this.onSubmit(this.formData,t)}renderSubmitButton(){const e=document.createElement("button");return e.id=`submit-${h.escapeHtml(this.id)}`,e.type="button",e.className="button-submit",this.submitText?e.innerText=this.submitText:e.innerText=d.getMessage("submit"),e.addEventListener("click",this.handleSubmit.bind(this)),e.disabled=!0,this.submitButton=e,e}render(){const e=document.createElement("form");e.className="json-schema-form",e.id=this.id,e.innerHTML="<p></p>";const t=e.querySelector("p"),n=this.renderSubmitButton();t.appendChild(n);const i=this.onChange.bind(this),r=new c.default(this.schema,this.formData,this.idSchema,this.name,this.definitions,i).render();return this.errorField=new u.default,t.insertBefore(r,t.firstChild),t.insertBefore(this.errorField.render([]),t.firstChild),e}}t.default=p,window.SchemaForm=p},2026:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getOptionsList=t.getDefaultFormState=t.computeDefaults=t.optionsList=t.mergeObjects=t.toIdSchema=t.toConstant=t.isMultiSelect=t.isSelect=t.isObject=t.isFixedItems=t.isConstant=t.mergeSchemas=t.withExactlyOneSubschema=t.withDependentSchema=t.withDependentProperties=t.resolveDependencies=t.retrieveSchema=t.findSchemaDefinition=t.REQUIRED_FIELD_SYMBOL=void 0;const r=i(n(13024));function s(e,t={}){const n=/^#\/definitions\/(.*)$/.exec(e);if(n&&n[1]){const i=n[1].split("/");let r=t;for(let t of i){if(t=t.replace(/~1/g,"/").replace(/~0/g,"~"),!r.hasOwnProperty(t))throw new Error(`Could not find a definition for ${e}.`);r=r[t]}return r}throw new Error(`Could not find a definition for ${e}.`)}function o(e,t={},n={}){if(e.hasOwnProperty("$ref")){const i=s(e.$ref,t),{$ref:r,...a}=e;return o({...i,...a},t,n)}return e.hasOwnProperty("dependencies")?o(a(e,t,n),t,n):e}function a(e,t,n){const{dependencies:i={},...r}=e;let s=r;for(const e in i){if(void 0===n[e])continue;const r=i[e];Array.isArray(r)?s=l(s,r):f(r)&&(s=c(s,t,n,e,r))}return s}function l(e,t){if(!t)return e;const n=Array.isArray(e.required)?Array.from(new Set([...e.required,...t])):t;return{...e,required:n}}function c(e,t,n,i,r){const{oneOf:s,...a}=o(r,t,n);return e=h(e,a),void 0===s?e:u(e,t,n,i,s)}function u(e,t,n,i,s){if(!Array.isArray(s))throw new Error(`invalid oneOf: it is some ${typeof s} instead of an array`);const a=s.filter((e=>{if(!e.properties)return!1;const{[i]:t}=e.properties;if(t){const e={type:"object",properties:{[i]:t}},{errors:s}=r.default.validateFormData(n,e);return 0===s.length}return!1}));if(1!==a.length)return console.warn("ignoring oneOf in dependencies because there isn't exactly one subschema that is valid"),e;const l=a[0],{[i]:c,...u}=l.properties;return h(e,o({...l,properties:u},t,n))}function h(e,t){return y(e,t,!0)}function d(e){return Array.isArray(e.enum)&&1===e.enum.length||e.hasOwnProperty("const")}function p(e){return Array.isArray(e.items)&&e.items.length>0&&e.items.every((e=>f(e)))}function f(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function m(e,t={}){const n=o(e,t),i=n.oneOf||n.anyOf;return!!Array.isArray(n.enum)||!!Array.isArray(i)&&i.every((e=>d(e)))}function g(e,t={}){return!(!e.uniqueItems||!e.items)&&m(e.items,t)}function v(e){if(Array.isArray(e.enum)&&1===e.enum.length)return e.enum[0];if(e.hasOwnProperty("const"))return e.const;throw new Error("schema cannot be inferred as a constant")}function y(e,t,n=!1){const i=Object.assign({},e);return Object.keys(t).reduce(((i,r)=>{const s=e[r],o=t[r];return e.hasOwnProperty(r)&&f(o)?i[r]=y(s,o,n):n&&Array.isArray(s)&&Array.isArray(o)?i[r]=s.concat(o):i[r]=o,i}),i)}function b(e,t,n={}){let i=t;if(f(i)&&f(e.default))i=y(i,e.default);else if("default"in e)i=e.default;else{if("$ref"in e)return b(s(e.$ref,n),i,n);p(e)&&(i=e.items.map((e=>b(e,void 0,n))))}switch(void 0===i&&(i=e.default),e.type){case"object":return Object.keys(e.properties||{}).reduce(((t,r)=>(t[r]=b(e.properties[r],(i||{})[r],n),t)),{});case"array":if(e.minItems){if(g(e,n))return[];{const t=i?i.length:0,r=e.minItems;if(r>t){const s=i||[],o=new Array(r-t).fill(b(e.items,e.items.defaults,n));return s.concat(o)}}}break;case"number":case"integer":void 0===i&&(i=e.hasOwnProperty("minimum")&&e.hasOwnProperty("maximum")?e.minimum:0);break;case"boolean":void 0===i&&(i=!1)}return i}t.REQUIRED_FIELD_SYMBOL="*",t.findSchemaDefinition=s,t.retrieveSchema=o,t.resolveDependencies=a,t.withDependentProperties=l,t.withDependentSchema=c,t.withExactlyOneSubschema=u,t.mergeSchemas=h,t.isConstant=d,t.isFixedItems=p,t.isObject=f,t.isSelect=m,t.isMultiSelect=g,t.toConstant=v,t.toIdSchema=function e(t,n,i,r={}){const s={$id:n||"root"};if("$ref"in t)return e(o(t,i,r),n,i,r);if("items"in t&&!t.items.$ref)return e(t.items,n,i,r);if("object"!==t.type)return s;for(const n in t.properties||{}){const o=t.properties[n],a=`${s.$id}_${n}`;s[n]=e(o,a,i,r[n])}return s},t.mergeObjects=y,t.optionsList=function(e){return e.enum?e.enum.map(((t,n)=>({label:e.enumNames&&e.enumNames[n]||String(t),value:t}))):(e.oneOf||e.anyOf).map((e=>{const t=v(e);return{label:e.title||String(t),value:t}}))},t.computeDefaults=b,t.getDefaultFormState=function(e,t,n={}){if(!f(e))throw new Error(`Invalid schema: ${e}`);const i=b(o(e,n,t),e.default,n);return void 0===t?i:f(t)?y(i,t):t||i},t.getOptionsList=function(e){return e.enum?e.enum.map(((t,n)=>({label:e.enumNames&&e.enumNames[n]||String(t),value:t}))):(e.oneOf||e.anyOf).map((e=>{const t=v(e);return{label:e.title||String(t),value:t}}))}},2783:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const o=s(n(2026)),a=s(n(29705));t.default=class{constructor(e,t,n,i,r,s=null,a=!1,l=!1,c=!1){this.schema=o.retrieveSchema(e,r,t),this.formData=t,this.idSchema=n,this.onChange=s,this.required=a,this.disabled=l,this.readOnly=c}toFormData(e){return""===e?void 0:e}onStringChange(e){const t=e.target.value;this.formData=this.toFormData(t),this.onChange&&this.onChange(this.formData)}render(){const e=a.escapeHtmlForIdClass(this.idSchema.$id),t=this.formData,n=document.createElement("div");if(o.isSelect(this.schema)){const i=o.getOptionsList(this.schema),r=t;let s=!1;this.required||i.unshift({value:"",label:""});const l=i.map((({value:e,label:t},n)=>{const i=r===this.toFormData(e);return s=s||i,`\n          <option\n          key="${n}"\n          value="${a.escapeHtml(e)}"\n          ${i?"selected":""}>\n            ${a.escapeHtml(t)}\n          </option>`}));n.innerHTML=`\n        <select\n        id="${e}"\n        class="form-control"\n        ${this.required?"required":""}\n        ${this.disabled||this.readOnly?"disabled":""}\n        >\n        ${l.join(" ")}\n        </select>`,s||(n.querySelector(`#${e}`).selectedIndex=-1)}else n.innerHTML=`\n        <input\n        id="${e}"\n        type="text"\n        class="form-control"\n        ${this.required?"required":""}\n        ${this.disabled||this.readOnly?"disabled":""}\n        value="${null==t?"":a.escapeHtml(t)}"\n        />`;const i=n.querySelector(`#${e}`);return i.onchange=this.onStringChange.bind(this),i.oninput=this.onStringChange.bind(this),n}}},38889:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const o=s(n(29705)),a=s(n(25290));t.default=class{constructor(e){this.schema=e}render(){const e=o.escapeHtml(JSON.stringify(this.schema,null,2)),t=document.createElement("div");t.className="unsupported-field";const n=document.createElement("span");n.innerText=a.getMessage("unsupported-field");const i=document.createElement("span");return i.innerHTML=e,t.appendChild(n),t.appendChild(i),t}}},13024:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(1581));t.default=new class{constructor(){this._ajv=new r.default({allErrors:!0}),this._reEscapeChar=/\\(\\)?/g,this._rePropName=RegExp("[^.[\\]]+|\\[(?:([^\"'].*)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))","g")}_toPath(e){const t=[];return e.replace(this._rePropName,((e,n,i,r)=>{let s=e;return i?s=r.replace(this._reEscapeChar,"$1"):n&&(s=n.trim()),t.push(s),e})),t}_toErrorSchema(e){return null!==e&&e.length?e.reduce(((e,t)=>{const{dataPath:n,message:i}=t,r=this._toPath(n);let s=e;for(const e of r.slice(0))e in s||(s[e]={}),s=s[e];return Array.isArray(s.__errors)?s.__errors=s.__errors.concat(i):s.__errors=[i],e}),{}):{}}validateFormData(e,t){this._ajv.validate(t,e);let n=this._ajv.errors;return n=null!=n?n:[],{errors:n,errorSchema:this._toErrorSchema(n)}}}},29705:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.selectFormHref=t.adjustInputValue=t.sortCapabilities=t.colorTemperatureToRGB=t.throttle=t.debounce=t.fuzzyTime=t.escapeHtmlForIdClass=t.unescapeHtml=t.escapeHtml=t.capitalize=void 0;const o=s(n(25290));function a(e,t,n=!1){let i=null,r=0;const s=!n;return function(...o){const a=Number(new Date)-r,l=()=>{r=Number(new Date),t(o)};i&&(clearTimeout(i),i=null),!0===s&&a>e?l():i=setTimeout(l,n?e:e-a)}}t.capitalize=function(e){return e[0].toUpperCase()+e.substr(1)},t.escapeHtml=function(e){return"string"!=typeof e&&(e=`${e}`),e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/°/g,"&deg;").replace(/⋅/g,"&sdot;")},t.unescapeHtml=function(e){return"string"!=typeof e&&(e=`${e}`),e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'").replace(/&deg;/g,"°").replace(/&sdot;/g,"⋅")},t.escapeHtmlForIdClass=function(e){return"string"!=typeof e&&(e=`${e}`),e=e.replace(/[^_a-zA-Z0-9-]/g,"_"),/^[0-9-]/.test(e)&&(e=`_${e}`),e},t.fuzzyTime=function(e){const t=(new Date).getTime(),n=Math.round((t-e)/1e3),i=86400,r=7*i,s=30*i,a=365*i;let l;return l=n<5?o.getMessage("utils-now"):n<60?o.getMessage("utils-seconds-ago",{value:n}):n<3600?o.getMessage("utils-minutes-ago",{value:Math.floor(n/60)}):n<i?o.getMessage("utils-hours-ago",{value:Math.floor(n/3600)}):n<r?o.getMessage("utils-days-ago",{value:Math.floor(n/i)}):n<s?o.getMessage("utils-weeks-ago",{value:Math.floor(n/r)}):n<a?o.getMessage("utils-months-ago",{value:Math.floor(n/s)}):o.getMessage("utils-years-ago",{value:Math.floor(n/a)}),l},t.debounce=function(e,t){return a(e,t,!0)},t.throttle=a,t.colorTemperatureToRGB=function(e){let t,n,i;return(e/=100)<=66?t=255:(t=e-60,t=329.698727446*t**-.1332047592,t=Math.max(t,0),t=Math.min(t,255)),e<=66?(n=e,n=99.4708025861*Math.log(n)-161.1195681661):(n=e-60,n=288.1221695283*n**-.0755148492),n=Math.max(n,0),n=Math.min(n,255),e>=66?i=255:e<=19?i=0:(i=e-10,i=138.5177312231*Math.log(i)-305.0447927307,i=Math.max(i,0),i=Math.min(i,255)),t=Math.round(t).toString(16),n=Math.round(n).toString(16),i=Math.round(i).toString(16),`#${t}${n}${i}`},t.sortCapabilities=function(e){const t=e.slice(),n=["Lock","Thermostat","VideoCamera","Camera","SmartPlug","Light","MultiLevelSwitch","OnOffSwitch","ColorControl","ColorSensor","EnergyMonitor","DoorSensor","MotionSensor","LeakSensor","SmokeSensor","PushButton","TemperatureSensor","HumiditySensor","MultiLevelSensor","Alarm","BinarySensor","BarometricPressureSensor","AirQualitySensor"];return t.sort(((e,t)=>n.includes(e)||n.includes(t)?n.includes(e)?n.includes(t)?n.indexOf(e)-n.indexOf(t):-1:1:0)),t},t.adjustInputValue=function(e,t){if("number"!=typeof e)return e;let n=t.multipleOf;if("number"!=typeof n&&"integer"===t.type&&(n=1),"number"==typeof n&&(e=Math.round(e/n)*n,`${n}`.includes("."))){const t=`${n}`.split(".")[1].length;e=Number(e.toFixed(t))}return t.hasOwnProperty("minimum")&&(e=Math.max(e,t.minimum)),t.hasOwnProperty("maximum")&&(e=Math.min(e,t.maximum)),t.hasOwnProperty("enum")&&(e=t.enum.sort(((t,n)=>Math.abs(t-e)-Math.abs(n-e)))[0]),e},t.selectFormHref=function(e,t,n){var i;return null===(i=[...e].reverse().find((e=>{var i,r;try{const{protocol:r}=new URL(e.href,n);return("http:"===r||"https:"===r)&&(!e.op||e.op===t||(null===(i=e.op)||void 0===i?void 0:i.includes(t)))}catch(n){if(n instanceof TypeError)return!e.op||e.op===t||(null===(r=e.op)||void 0===r?void 0:r.includes(t));throw n}})))||void 0===i?void 0:i.href}},60540:function(e,t){!function(e){"use strict";function t(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length>1){t[0]=t[0].slice(0,-1);for(var i=t.length-1,r=1;r<i;++r)t[r]=t[r].slice(1,-1);return t[i]=t[i].slice(1),t.join("")}return t[0]}function n(e){return"(?:"+e+")"}function i(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function r(e){return e.toUpperCase()}function s(e){var i="[A-Za-z]",r="[0-9]",s=t(r,"[A-Fa-f]"),o=n(n("%[EFef]"+s+"%"+s+s+"%"+s+s)+"|"+n("%[89A-Fa-f]"+s+"%"+s+s)+"|"+n("%"+s+s)),a="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",l=t("[\\:\\/\\?\\#\\[\\]\\@]",a),c=e?"[\\uE000-\\uF8FF]":"[]",u=t(i,r,"[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),h=n(i+t(i,r,"[\\+\\-\\.]")+"*"),d=n(n(o+"|"+t(u,a,"[\\:]"))+"*"),p=(n(n("25[0-5]")+"|"+n("2[0-4][0-9]")+"|"+n("1[0-9][0-9]")+"|"+n("[1-9][0-9]")+"|"+r),n(n("25[0-5]")+"|"+n("2[0-4][0-9]")+"|"+n("1[0-9][0-9]")+"|"+n("0?[1-9][0-9]")+"|0?0?"+r)),f=n(p+"\\."+p+"\\."+p+"\\."+p),m=n(s+"{1,4}"),g=n(n(m+"\\:"+m)+"|"+f),v=n(n(m+"\\:")+"{6}"+g),y=n("\\:\\:"+n(m+"\\:")+"{5}"+g),b=n(n(m)+"?\\:\\:"+n(m+"\\:")+"{4}"+g),w=n(n(n(m+"\\:")+"{0,1}"+m)+"?\\:\\:"+n(m+"\\:")+"{3}"+g),E=n(n(n(m+"\\:")+"{0,2}"+m)+"?\\:\\:"+n(m+"\\:")+"{2}"+g),_=n(n(n(m+"\\:")+"{0,3}"+m)+"?\\:\\:"+m+"\\:"+g),x=n(n(n(m+"\\:")+"{0,4}"+m)+"?\\:\\:"+g),S=n(n(n(m+"\\:")+"{0,5}"+m)+"?\\:\\:"+m),T=n(n(n(m+"\\:")+"{0,6}"+m)+"?\\:\\:"),k=n([v,y,b,w,E,_,x,S,T].join("|")),C=n(n(u+"|"+o)+"+"),P=(n(k+"\\%25"+C),n(k+n("\\%25|\\%(?!"+s+"{2})")+C)),I=n("[vV]"+s+"+\\."+t(u,a,"[\\:]")+"+"),L=n("\\["+n(P+"|"+k+"|"+I)+"\\]"),A=n(n(o+"|"+t(u,a))+"*"),M=n(L+"|"+f+"(?!"+A+")|"+A),O=n("[0-9]*"),N=n(n(d+"@")+"?"+M+n("\\:"+O)+"?"),D=n(o+"|"+t(u,a,"[\\:\\@]")),R=n(D+"*"),j=n(D+"+"),B=n(n(o+"|"+t(u,a,"[\\@]"))+"+"),U=n(n("\\/"+R)+"*"),$=n("\\/"+n(j+U)+"?"),F=n(B+U),H=n(j+U),q="(?!"+D+")",V=(n(U+"|"+$+"|"+F+"|"+H+"|"+q),n(n(D+"|"+t("[\\/\\?]",c))+"*")),z=n(n(D+"|[\\/\\?]")+"*"),G=n(n("\\/\\/"+N+U)+"|"+$+"|"+H+"|"+q),K=n(h+"\\:"+G+n("\\?"+V)+"?"+n("\\#"+z)+"?"),W=n(n("\\/\\/"+N+U)+"|"+$+"|"+F+"|"+q),X=n(W+n("\\?"+V)+"?"+n("\\#"+z)+"?");return n(K+"|"+X),n(h+"\\:"+G+n("\\?"+V)+"?"),n(n("\\/\\/("+n("("+d+")@")+"?("+M+")"+n("\\:("+O+")")+"?)")+"?("+U+"|"+$+"|"+H+"|"+q+")"),n("\\?("+V+")"),n("\\#("+z+")"),n(n("\\/\\/("+n("("+d+")@")+"?("+M+")"+n("\\:("+O+")")+"?)")+"?("+U+"|"+$+"|"+F+"|"+q+")"),n("\\?("+V+")"),n("\\#("+z+")"),n(n("\\/\\/("+n("("+d+")@")+"?("+M+")"+n("\\:("+O+")")+"?)")+"?("+U+"|"+$+"|"+H+"|"+q+")"),n("\\?("+V+")"),n("\\#("+z+")"),n("("+d+")@"),n("\\:("+O+")"),{NOT_SCHEME:new RegExp(t("[^]",i,r,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",u,a),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",u,a),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",u,a),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",u,a),"g"),NOT_QUERY:new RegExp(t("[^\\%]",u,a,"[\\:\\@\\/\\?]",c),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",u,a,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",u,a),"g"),UNRESERVED:new RegExp(u,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",u,l),"g"),PCT_ENCODED:new RegExp(o,"g"),IPV4ADDRESS:new RegExp("^("+f+")$"),IPV6ADDRESS:new RegExp("^\\[?("+k+")"+n(n("\\%25|\\%(?!"+s+"{2})")+"("+C+")")+"?\\]?$")}}var o=s(!1),a=s(!0),l=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,r=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(i=(o=a.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,s=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw s}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},c=2147483647,u=36,h=/^xn--/,d=/[^\0-\x7E]/,p=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},m=Math.floor,g=String.fromCharCode;function v(e){throw new RangeError(f[e])}function y(e,t){var n=e.split("@"),i="";return n.length>1&&(i=n[0]+"@",e=n[1]),i+function(e,t){for(var n=[],i=e.length;i--;)n[i]=t(e[i]);return n}((e=e.replace(p,".")).split("."),t).join(".")}function b(e){for(var t=[],n=0,i=e.length;n<i;){var r=e.charCodeAt(n++);if(r>=55296&&r<=56319&&n<i){var s=e.charCodeAt(n++);56320==(64512&s)?t.push(((1023&r)<<10)+(1023&s)+65536):(t.push(r),n--)}else t.push(r)}return t}var w=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},E=function(e,t,n){var i=0;for(e=n?m(e/700):e>>1,e+=m(e/t);e>455;i+=u)e=m(e/35);return m(i+36*e/(e+38))},_=function(e){var t,n=[],i=e.length,r=0,s=128,o=72,a=e.lastIndexOf("-");a<0&&(a=0);for(var l=0;l<a;++l)e.charCodeAt(l)>=128&&v("not-basic"),n.push(e.charCodeAt(l));for(var h=a>0?a+1:0;h<i;){for(var d=r,p=1,f=u;;f+=u){h>=i&&v("invalid-input");var g=(t=e.charCodeAt(h++))-48<10?t-22:t-65<26?t-65:t-97<26?t-97:u;(g>=u||g>m((c-r)/p))&&v("overflow"),r+=g*p;var y=f<=o?1:f>=o+26?26:f-o;if(g<y)break;var b=u-y;p>m(c/b)&&v("overflow"),p*=b}var w=n.length+1;o=E(r-d,w,0==d),m(r/w)>c-s&&v("overflow"),s+=m(r/w),r%=w,n.splice(r++,0,s)}return String.fromCodePoint.apply(String,n)},x=function(e){var t=[],n=(e=b(e)).length,i=128,r=0,s=72,o=!0,a=!1,l=void 0;try{for(var h,d=e[Symbol.iterator]();!(o=(h=d.next()).done);o=!0){var p=h.value;p<128&&t.push(g(p))}}catch(e){a=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(a)throw l}}var f=t.length,y=f;for(f&&t.push("-");y<n;){var _=c,x=!0,S=!1,T=void 0;try{for(var k,C=e[Symbol.iterator]();!(x=(k=C.next()).done);x=!0){var P=k.value;P>=i&&P<_&&(_=P)}}catch(e){S=!0,T=e}finally{try{!x&&C.return&&C.return()}finally{if(S)throw T}}var I=y+1;_-i>m((c-r)/I)&&v("overflow"),r+=(_-i)*I,i=_;var L=!0,A=!1,M=void 0;try{for(var O,N=e[Symbol.iterator]();!(L=(O=N.next()).done);L=!0){var D=O.value;if(D<i&&++r>c&&v("overflow"),D==i){for(var R=r,j=u;;j+=u){var B=j<=s?1:j>=s+26?26:j-s;if(R<B)break;var U=R-B,$=u-B;t.push(g(w(B+U%$,0))),R=m(U/$)}t.push(g(w(R,0))),s=E(r,I,y==f),r=0,++y}}}catch(e){A=!0,M=e}finally{try{!L&&N.return&&N.return()}finally{if(A)throw M}}++r,++i}return t.join("")},S=function(e){return y(e,(function(e){return d.test(e)?"xn--"+x(e):e}))},T=function(e){return y(e,(function(e){return h.test(e)?_(e.slice(4).toLowerCase()):e}))},k={};function C(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function P(e){for(var t="",n=0,i=e.length;n<i;){var r=parseInt(e.substr(n+1,2),16);if(r<128)t+=String.fromCharCode(r),n+=3;else if(r>=194&&r<224){if(i-n>=6){var s=parseInt(e.substr(n+4,2),16);t+=String.fromCharCode((31&r)<<6|63&s)}else t+=e.substr(n,6);n+=6}else if(r>=224){if(i-n>=9){var o=parseInt(e.substr(n+4,2),16),a=parseInt(e.substr(n+7,2),16);t+=String.fromCharCode((15&r)<<12|(63&o)<<6|63&a)}else t+=e.substr(n,9);n+=9}else t+=e.substr(n,3),n+=3}return t}function I(e,t){function n(e){var n=P(e);return n.match(t.UNRESERVED)?n:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,n).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,n).replace(t.NOT_USERINFO,C).replace(t.PCT_ENCODED,r)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,n).toLowerCase().replace(t.NOT_HOST,C).replace(t.PCT_ENCODED,r)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,n).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,C).replace(t.PCT_ENCODED,r)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,n).replace(t.NOT_QUERY,C).replace(t.PCT_ENCODED,r)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,n).replace(t.NOT_FRAGMENT,C).replace(t.PCT_ENCODED,r)),e}function L(e){return e.replace(/^0*(.*)/,"$1")||"0"}function A(e,t){var n=e.match(t.IPV4ADDRESS)||[],i=l(n,2)[1];return i?i.split(".").map(L).join("."):e}function M(e,t){var n=e.match(t.IPV6ADDRESS)||[],i=l(n,3),r=i[1],s=i[2];if(r){for(var o=r.toLowerCase().split("::").reverse(),a=l(o,2),c=a[0],u=a[1],h=u?u.split(":").map(L):[],d=c.split(":").map(L),p=t.IPV4ADDRESS.test(d[d.length-1]),f=p?7:8,m=d.length-f,g=Array(f),v=0;v<f;++v)g[v]=h[v]||d[m+v]||"";p&&(g[f-1]=A(g[f-1],t));var y=g.reduce((function(e,t,n){if(!t||"0"===t){var i=e[e.length-1];i&&i.index+i.length===n?i.length++:e.push({index:n,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],b=void 0;if(y&&y.length>1){var w=g.slice(0,y.index),E=g.slice(y.index+y.length);b=w.join(":")+"::"+E.join(":")}else b=g.join(":");return s&&(b+="%"+s),b}return e}var O=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,N=void 0==="".match(/(){0}/)[1];function D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},i=!1!==t.iri?a:o;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var r=e.match(O);if(r){N?(n.scheme=r[1],n.userinfo=r[3],n.host=r[4],n.port=parseInt(r[5],10),n.path=r[6]||"",n.query=r[7],n.fragment=r[8],isNaN(n.port)&&(n.port=r[5])):(n.scheme=r[1]||void 0,n.userinfo=-1!==e.indexOf("@")?r[3]:void 0,n.host=-1!==e.indexOf("//")?r[4]:void 0,n.port=parseInt(r[5],10),n.path=r[6]||"",n.query=-1!==e.indexOf("?")?r[7]:void 0,n.fragment=-1!==e.indexOf("#")?r[8]:void 0,isNaN(n.port)&&(n.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?r[4]:void 0)),n.host&&(n.host=M(A(n.host,i),i)),void 0!==n.scheme||void 0!==n.userinfo||void 0!==n.host||void 0!==n.port||n.path||void 0!==n.query?void 0===n.scheme?n.reference="relative":void 0===n.fragment?n.reference="absolute":n.reference="uri":n.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==n.reference&&(n.error=n.error||"URI is not a "+t.reference+" reference.");var s=k[(t.scheme||n.scheme||"").toLowerCase()];if(t.unicodeSupport||s&&s.unicodeSupport)I(n,i);else{if(n.host&&(t.domainHost||s&&s.domainHost))try{n.host=S(n.host.replace(i.PCT_ENCODED,P).toLowerCase())}catch(e){n.error=n.error||"Host's domain name can not be converted to ASCII via punycode: "+e}I(n,o)}s&&s.parse&&s.parse(n,t)}else n.error=n.error||"URI can not be parsed.";return n}function R(e,t){var n=!1!==t.iri?a:o,i=[];return void 0!==e.userinfo&&(i.push(e.userinfo),i.push("@")),void 0!==e.host&&i.push(M(A(String(e.host),n),n).replace(n.IPV6ADDRESS,(function(e,t,n){return"["+t+(n?"%25"+n:"")+"]"}))),"number"!=typeof e.port&&"string"!=typeof e.port||(i.push(":"),i.push(String(e.port))),i.length?i.join(""):void 0}var j=/^\.\.?\//,B=/^\/\.(\/|$)/,U=/^\/\.\.(\/|$)/,$=/^\/?(?:.|\n)*?(?=\/|$)/;function F(e){for(var t=[];e.length;)if(e.match(j))e=e.replace(j,"");else if(e.match(B))e=e.replace(B,"/");else if(e.match(U))e=e.replace(U,"/"),t.pop();else if("."===e||".."===e)e="";else{var n=e.match($);if(!n)throw new Error("Unexpected dot segment condition");var i=n[0];e=e.slice(i.length),t.push(i)}return t.join("")}function H(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.iri?a:o,i=[],r=k[(t.scheme||e.scheme||"").toLowerCase()];if(r&&r.serialize&&r.serialize(e,t),e.host)if(n.IPV6ADDRESS.test(e.host));else if(t.domainHost||r&&r.domainHost)try{e.host=t.iri?T(e.host):S(e.host.replace(n.PCT_ENCODED,P).toLowerCase())}catch(n){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+n}I(e,n),"suffix"!==t.reference&&e.scheme&&(i.push(e.scheme),i.push(":"));var s=R(e,t);if(void 0!==s&&("suffix"!==t.reference&&i.push("//"),i.push(s),e.path&&"/"!==e.path.charAt(0)&&i.push("/")),void 0!==e.path){var l=e.path;t.absolutePath||r&&r.absolutePath||(l=F(l)),void 0===s&&(l=l.replace(/^\/\//,"/%2F")),i.push(l)}return void 0!==e.query&&(i.push("?"),i.push(e.query)),void 0!==e.fragment&&(i.push("#"),i.push(e.fragment)),i.join("")}function q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={};return arguments[3]||(e=D(H(e,n),n),t=D(H(t,n),n)),!(n=n||{}).tolerant&&t.scheme?(i.scheme=t.scheme,i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=F(t.path||""),i.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=F(t.path||""),i.query=t.query):(t.path?("/"===t.path.charAt(0)?i.path=F(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?i.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:i.path=t.path:i.path="/"+t.path,i.path=F(i.path)),i.query=t.query):(i.path=e.path,void 0!==t.query?i.query=t.query:i.query=e.query),i.userinfo=e.userinfo,i.host=e.host,i.port=e.port),i.scheme=e.scheme),i.fragment=t.fragment,i}function V(e,t){return e&&e.toString().replace(t&&t.iri?a.PCT_ENCODED:o.PCT_ENCODED,P)}var z={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){var n="https"===String(e.scheme).toLowerCase();return e.port!==(n?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},G={scheme:"https",domainHost:z.domainHost,parse:z.parse,serialize:z.serialize};function K(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}var W={scheme:"ws",domainHost:!0,parse:function(e,t){var n=e;return n.secure=K(n),n.resourceName=(n.path||"/")+(n.query?"?"+n.query:""),n.path=void 0,n.query=void 0,n},serialize:function(e,t){if(e.port!==(K(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var n=e.resourceName.split("?"),i=l(n,2),r=i[0],s=i[1];e.path=r&&"/"!==r?r:void 0,e.query=s,e.resourceName=void 0}return e.fragment=void 0,e}},X={scheme:"wss",domainHost:W.domainHost,parse:W.parse,serialize:W.serialize},J={},Y="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Q="[0-9A-Fa-f]",Z=n(n("%[EFef][0-9A-Fa-f]%"+Q+Q+"%"+Q+Q)+"|"+n("%[89A-Fa-f][0-9A-Fa-f]%"+Q+Q)+"|"+n("%"+Q+Q)),ee=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),te=new RegExp(Y,"g"),ne=new RegExp(Z,"g"),ie=new RegExp(t("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',ee),"g"),re=new RegExp(t("[^]",Y,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),se=re;function oe(e){var t=P(e);return t.match(te)?t:e}var ae={scheme:"mailto",parse:function(e,t){var n=e,i=n.to=n.path?n.path.split(","):[];if(n.path=void 0,n.query){for(var r=!1,s={},o=n.query.split("&"),a=0,l=o.length;a<l;++a){var c=o[a].split("=");switch(c[0]){case"to":for(var u=c[1].split(","),h=0,d=u.length;h<d;++h)i.push(u[h]);break;case"subject":n.subject=V(c[1],t);break;case"body":n.body=V(c[1],t);break;default:r=!0,s[V(c[0],t)]=V(c[1],t)}}r&&(n.headers=s)}n.query=void 0;for(var p=0,f=i.length;p<f;++p){var m=i[p].split("@");if(m[0]=V(m[0]),t.unicodeSupport)m[1]=V(m[1],t).toLowerCase();else try{m[1]=S(V(m[1],t).toLowerCase())}catch(e){n.error=n.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}i[p]=m.join("@")}return n},serialize:function(e,t){var n,i=e,s=null!=(n=e.to)?n instanceof Array?n:"number"!=typeof n.length||n.split||n.setInterval||n.call?[n]:Array.prototype.slice.call(n):[];if(s){for(var o=0,a=s.length;o<a;++o){var l=String(s[o]),c=l.lastIndexOf("@"),u=l.slice(0,c).replace(ne,oe).replace(ne,r).replace(ie,C),h=l.slice(c+1);try{h=t.iri?T(h):S(V(h,t).toLowerCase())}catch(e){i.error=i.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}s[o]=u+"@"+h}i.path=s.join(",")}var d=e.headers=e.headers||{};e.subject&&(d.subject=e.subject),e.body&&(d.body=e.body);var p=[];for(var f in d)d[f]!==J[f]&&p.push(f.replace(ne,oe).replace(ne,r).replace(re,C)+"="+d[f].replace(ne,oe).replace(ne,r).replace(se,C));return p.length&&(i.query=p.join("&")),i}},le=/^([^\:]+)\:(.*)/,ce={scheme:"urn",parse:function(e,t){var n=e.path&&e.path.match(le),i=e;if(n){var r=t.scheme||i.scheme||"urn",s=n[1].toLowerCase(),o=n[2],a=r+":"+(t.nid||s),l=k[a];i.nid=s,i.nss=o,i.path=void 0,l&&(i=l.parse(i,t))}else i.error=i.error||"URN can not be parsed.";return i},serialize:function(e,t){var n=t.scheme||e.scheme||"urn",i=e.nid,r=n+":"+(t.nid||i),s=k[r];s&&(e=s.serialize(e,t));var o=e,a=e.nss;return o.path=(i||t.nid)+":"+a,o}},ue=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,he={scheme:"urn:uuid",parse:function(e,t){var n=e;return n.uuid=n.nss,n.nss=void 0,t.tolerant||n.uuid&&n.uuid.match(ue)||(n.error=n.error||"UUID is not valid."),n},serialize:function(e,t){var n=e;return n.nss=(e.uuid||"").toLowerCase(),n}};k[z.scheme]=z,k[G.scheme]=G,k[W.scheme]=W,k[X.scheme]=X,k[ae.scheme]=ae,k[ce.scheme]=ce,k[he.scheme]=he,e.SCHEMES=k,e.pctEncChar=C,e.pctDecChars=P,e.parse=D,e.removeDotSegments=F,e.serialize=H,e.resolveComponents=q,e.resolve=function(e,t,n){var i=function(e,t){var n=e;if(t)for(var i in t)n[i]=t[i];return n}({scheme:"null"},n);return H(q(D(e,i),D(t,i),i,!0),i)},e.normalize=function(e,t){return"string"==typeof e?e=H(D(e,t),t):"object"===i(e)&&(e=D(H(e,t),t)),e},e.equal=function(e,t,n){return"string"==typeof e?e=H(D(e,n),n):"object"===i(e)&&(e=H(e,n)),"string"==typeof t?t=H(D(t,n),n):"object"===i(t)&&(t=H(t,n)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?a.ESCAPE:o.ESCAPE,C)},e.unescapeComponent=V,Object.defineProperty(e,"__esModule",{value:!0})}(t)},69951:()=>{},68892:(e,t,n)=>{"use strict";n(54747),n(49337),Object.defineProperty(t,"__esModule",{value:!0}),t.DATETIME=function(e,t){var n=e[0];if(n instanceof i.FluentNone)return new i.FluentNone("DATETIME(".concat(n.valueOf(),")"));if(n instanceof i.FluentDateTime)return new i.FluentDateTime(n.valueOf(),s(s({},n.opts),a(t,c)));if(n instanceof i.FluentNumber)return new i.FluentDateTime(n.valueOf(),s({},a(t,c)));throw new TypeError("Invalid argument to DATETIME")},t.NUMBER=function(e,t){var n=e[0];if(n instanceof i.FluentNone)return new i.FluentNone("NUMBER(".concat(n.valueOf(),")"));if(n instanceof i.FluentNumber)return new i.FluentNumber(n.valueOf(),s(s({},n.opts),a(t,l)));if(n instanceof i.FluentDateTime)return new i.FluentNumber(n.valueOf(),s({},a(t,l)));throw new TypeError("Invalid argument to NUMBER")},n(66992),n(33948),n(69720),n(26699);var i=n(56477);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.create(null);for(var[i,r]of Object.entries(e))t.includes(i)&&(n[i]=r.valueOf());return n}var l=["unitDisplay","currencyDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits"],c=["dateStyle","timeStyle","fractionalSecondDigits","dayPeriod","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName"]},53286:(e,t,n)=>{"use strict";n(54747),n(49337),Object.defineProperty(t,"__esModule",{value:!0}),t.FluentBundle=void 0,n(66992),n(33948);var i=n(59732),r=n(5820),s=n(56477),o=n(68892);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.FluentBundle=class{constructor(e){var{functions:t,useIsolating:n=!0,transform:i=(e=>e)}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._terms=new Map,this._messages=new Map,this._intls=new WeakMap,this.locales=Array.isArray(e)?e:[e],this._functions=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({NUMBER:o.NUMBER,DATETIME:o.DATETIME},t),this._useIsolating=n,this._transform=i}hasMessage(e){return this._messages.has(e)}getMessage(e){return this._messages.get(e)}addResource(e){for(var{allowOverrides:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],i=0;i<e.body.length;i++){var r=e.body[i];if(r.id.startsWith("-")){if(!1===t&&this._terms.has(r.id)){n.push(new Error('Attempt to override an existing term: "'.concat(r.id,'"')));continue}this._terms.set(r.id,r)}else{if(!1===t&&this._messages.has(r.id)){n.push(new Error('Attempt to override an existing message: "'.concat(r.id,'"')));continue}this._messages.set(r.id,r)}}return n}formatPattern(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("string"==typeof e)return this._transform(e);var o=new r.Scope(this,n,t);try{return(0,i.resolveComplexPattern)(o,e).toString(o)}catch(e){if(o.errors)return o.errors.push(e),(new s.FluentNone).toString(o);throw e}}}},78309:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"FluentBundle",{enumerable:!0,get:function(){return i.FluentBundle}}),Object.defineProperty(t,"FluentDateTime",{enumerable:!0,get:function(){return s.FluentDateTime}}),Object.defineProperty(t,"FluentNone",{enumerable:!0,get:function(){return s.FluentNone}}),Object.defineProperty(t,"FluentNumber",{enumerable:!0,get:function(){return s.FluentNumber}}),Object.defineProperty(t,"FluentResource",{enumerable:!0,get:function(){return r.FluentResource}}),Object.defineProperty(t,"FluentType",{enumerable:!0,get:function(){return s.FluentType}});var i=n(53286),r=n(77640),s=n(56477)},59732:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveComplexPattern=l,n(66992),n(33948);var i=n(56477);function r(e,t,n){return n===t||(n instanceof i.FluentNumber&&t instanceof i.FluentNumber&&n.value===t.value||t instanceof i.FluentNumber&&"string"==typeof n&&n===e.memoizeIntlObject(Intl.PluralRules,t.opts).select(t.value))}function s(e,t,n){return t[n]?c(e,t[n].value):(e.reportError(new RangeError("No default")),new i.FluentNone)}function o(e,t){var n=[],i=Object.create(null);for(var r of t)"narg"===r.type?i[r.name]=a(e,r.value):n.push(a(e,r));return{positional:n,named:i}}function a(e,t){switch(t.type){case"str":return t.value;case"num":return new i.FluentNumber(t.value,{minimumFractionDigits:t.precision});case"var":return function(e,t){var n,{name:r}=t;if(e.params){if(!Object.prototype.hasOwnProperty.call(e.params,r))return new i.FluentNone("$".concat(r));n=e.params[r]}else{if(!e.args||!Object.prototype.hasOwnProperty.call(e.args,r))return e.reportError(new ReferenceError("Unknown variable: $".concat(r))),new i.FluentNone("$".concat(r));n=e.args[r]}if(n instanceof i.FluentType)return n;switch(typeof n){case"string":return n;case"number":return new i.FluentNumber(n);case"object":if(n instanceof Date)return new i.FluentDateTime(n.getTime());default:return e.reportError(new TypeError("Variable type not supported: $".concat(r,", ").concat(typeof n))),new i.FluentNone("$".concat(r))}}(e,t);case"mesg":return function(e,t){var{name:n,attr:r}=t,s=e.bundle._messages.get(n);if(!s)return e.reportError(new ReferenceError("Unknown message: ".concat(n))),new i.FluentNone(n);if(r){var o=s.attributes[r];return o?c(e,o):(e.reportError(new ReferenceError("Unknown attribute: ".concat(r))),new i.FluentNone("".concat(n,".").concat(r)))}return s.value?c(e,s.value):(e.reportError(new ReferenceError("No value: ".concat(n))),new i.FluentNone(n))}(e,t);case"term":return function(e,t){var{name:n,attr:r,args:s}=t,a="-".concat(n),l=e.bundle._terms.get(a);if(!l)return e.reportError(new ReferenceError("Unknown term: ".concat(a))),new i.FluentNone(a);if(r){var u=l.attributes[r];if(u){e.params=o(e,s).named;var h=c(e,u);return e.params=null,h}return e.reportError(new ReferenceError("Unknown attribute: ".concat(r))),new i.FluentNone("".concat(a,".").concat(r))}e.params=o(e,s).named;var d=c(e,l.value);return e.params=null,d}(e,t);case"func":return function(e,t){var{name:n,args:r}=t,s=e.bundle._functions[n];if(!s)return e.reportError(new ReferenceError("Unknown function: ".concat(n,"()"))),new i.FluentNone("".concat(n,"()"));if("function"!=typeof s)return e.reportError(new TypeError("Function ".concat(n,"() is not callable"))),new i.FluentNone("".concat(n,"()"));try{var a=o(e,r);return s(a.positional,a.named)}catch(t){return e.reportError(t),new i.FluentNone("".concat(n,"()"))}}(e,t);case"select":return function(e,t){var{selector:n,variants:o,star:l}=t,u=a(e,n);if(u instanceof i.FluentNone)return s(e,o,l);for(var h of o)if(r(e,u,a(e,h.key)))return c(e,h.value);return s(e,o,l)}(e,t);default:return new i.FluentNone}}function l(e,t){if(e.dirty.has(t))return e.reportError(new RangeError("Cyclic reference")),new i.FluentNone;e.dirty.add(t);var n=[],r=e.bundle._useIsolating&&t.length>1;for(var s of t)if("string"!=typeof s){if(e.placeables++,e.placeables>100)throw e.dirty.delete(t),new RangeError("Too many placeables expanded: ".concat(e.placeables,", ")+"max allowed is ".concat(100));r&&n.push("⁨"),n.push(a(e,s).toString(e)),r&&n.push("⁩")}else n.push(e.bundle._transform(s));return e.dirty.delete(t),n.join("")}function c(e,t){return"string"==typeof t?e.bundle._transform(t):l(e,t)}},77640:(e,t,n)=>{"use strict";function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(54747),n(49337),Object.defineProperty(t,"__esModule",{value:!0}),t.FluentResource=void 0,n(74916),n(66992),n(33948),n(15306);var s=/^(-?[a-zA-Z][\w-]*) *= */gm,o=/\.([a-zA-Z][\w-]*) *= */y,a=/\*?\[/y,l=/(-?[0-9]+(?:\.([0-9]+))?)/y,c=/([a-zA-Z][\w-]*)/y,u=/([$-])?([a-zA-Z][\w-]*)(?:\.([a-zA-Z][\w-]*))?/y,h=/^[A-Z][A-Z0-9_-]*$/,d=/([^{}\n\r]+)/y,p=/([^\\"\n\r]*)/y,f=/\\([\\"])/y,m=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{6})/y,g=/^\n+/,v=/ +$/,y=/ *\r?\n/g,b=/( *)$/,w=/{\s*/y,E=/\s*}/y,_=/\[\s*/y,x=/\s*] */y,S=/\s*\(\s*/y,T=/\s*->\s*/y,k=/\s*:\s*/y,C=/\s*,?\s*/y,P=/\s+/y;t.FluentResource=class{constructor(e){this.body=[],s.lastIndex=0;for(var t=0;;){var n=s.exec(e);if(null===n)break;t=s.lastIndex;try{this.body.push(D(n[1]))}catch(e){if(e instanceof SyntaxError)continue;throw e}}function L(n){return n.lastIndex=t,n.test(e)}function A(n,i){if(e[t]===n)return t++,!0;if(i)throw new i("Expected ".concat(n));return!1}function M(e,n){if(L(e))return t=e.lastIndex,!0;if(n)throw new n("Expected ".concat(e.toString()));return!1}function O(n){n.lastIndex=t;var i=n.exec(e);if(null===i)throw new SyntaxError("Expected ".concat(n.toString()));return t=n.lastIndex,i}function N(e){return O(e)[1]}function D(e){var t=R(),n=function(){for(var e=Object.create(null);L(o);){var t=N(o),n=R();if(null===n)throw new SyntaxError("Expected attribute value");e[t]=n}return e}();if(null===t&&0===Object.keys(n).length)throw new SyntaxError("Expected message value or attributes");return{id:e,value:t,attributes:n}}function R(){var n;if(L(d)&&(n=N(d)),"{"===e[t]||"}"===e[t])return j(n?[n]:[],1/0);var i=V();return i?n?j([n,i],i.length):(i.value=z(i.value,g),j([i],i.length)):n?z(n,v):null}function j(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1?arguments[1]:void 0;;)if(L(d))n.push(N(d));else if("{"!==e[t]){if("}"===e[t])throw new SyntaxError("Unbalanced closing brace");var r=V();if(!r)break;n.push(r),i=Math.min(i,r.length)}else n.push(B());var s=n.length-1,o=n[s];"string"==typeof o&&(n[s]=z(o,v));var a=[];for(var l of n)l instanceof I&&(l=l.value.slice(0,l.value.length-i)),l&&a.push(l);return a}function B(){M(w,SyntaxError);var e=U();if(M(E))return e;if(M(T)){var t=function(){for(var e,t=[],n=0;L(a);){A("*")&&(e=n);var i=$(),r=R();if(null===r)throw new SyntaxError("Expected variant value");t[n++]={key:i,value:r}}if(0===n)return null;if(void 0===e)throw new SyntaxError("Expected default variant");return{variants:t,star:e}}();return M(E,SyntaxError),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"select",selector:e},t)}throw new SyntaxError("Unclosed placeable")}function U(){if("{"===e[t])return B();if(L(u)){var[,n,i,r=null]=O(u);if("$"===n)return{type:"var",name:i};if(M(S)){var s=function(){for(var n,i=[];;){switch(e[t]){case")":return t++,i;case void 0:throw new SyntaxError("Unclosed argument list")}i.push((n=void 0,"mesg"!==(n=U()).type?n:M(k)?{type:"narg",name:n.name,value:F()}:n)),M(C)}}();if("-"===n)return{type:"term",name:i,attr:r,args:s};if(h.test(i))return{type:"func",name:i,args:s};throw new SyntaxError("Function names must be all upper-case")}return"-"===n?{type:"term",name:i,attr:r,args:[]}:{type:"mesg",name:i,attr:r}}return F()}function $(){var e;return M(_,SyntaxError),e=L(l)?H():{type:"str",value:N(c)},M(x,SyntaxError),e}function F(){if(L(l))return H();if('"'===e[t])return function(){A('"',SyntaxError);for(var n="";;){if(n+=N(p),"\\"!==e[t]){if(A('"'))return{type:"str",value:n};throw new SyntaxError("Unclosed string literal")}n+=q()}}();throw new SyntaxError("Invalid expression")}function H(){var[,e,t=""]=O(l),n=t.length;return{type:"num",value:parseFloat(e),precision:n}}function q(){if(L(f))return N(f);if(L(m)){var[,e,t]=O(m),n=parseInt(e||t,16);return n<=55295||57344<=n?String.fromCodePoint(n):"�"}throw new SyntaxError("Unknown escape sequence")}function V(){var n=t;switch(M(P),e[t]){case".":case"[":case"*":case"}":case void 0:return!1;case"{":return G(e.slice(n,t))}return" "===e[t-1]&&G(e.slice(n,t))}function z(e,t){return e.replace(t,"")}function G(e){var t=e.replace(y,"\n"),n=b.exec(e)[1].length;return new I(t,n)}}};class I{constructor(e,t){this.value=e,this.length=t}}},5820:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Scope=void 0,n(66992),n(33948),t.Scope=class{constructor(e,t,n){this.dirty=new WeakSet,this.params=null,this.placeables=0,this.bundle=e,this.errors=t,this.args=n}reportError(e){if(!this.errors)throw e;this.errors.push(e)}memoizeIntlObject(e,t){var n=this.bundle._intls.get(e);n||(n={},this.bundle._intls.set(e,n));var i=JSON.stringify(t);return n[i]||(n[i]=new e(this.bundle.locales,t)),n[i]}}},56477:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FluentType=t.FluentNumber=t.FluentNone=t.FluentDateTime=void 0;class n{constructor(e){this.value=e}valueOf(){return this.value}}t.FluentType=n,t.FluentNone=class extends n{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"???")}toString(e){return"{".concat(this.value,"}")}},t.FluentNumber=class extends n{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),this.opts=t}toString(e){try{return e.memoizeIntlObject(Intl.NumberFormat,this.opts).format(this.value)}catch(t){return e.reportError(t),this.value.toString(10)}}},t.FluentDateTime=class extends n{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),this.opts=t}toString(e){try{return e.memoizeIntlObject(Intl.DateTimeFormat,this.opts).format(this.value)}catch(t){return e.reportError(t),new Date(this.value).toISOString()}}}},20371:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(66992),n(33948),n(88674);var i=s(n(57289)),r=s(n(65072));function s(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,i,r,s,o){try{var a=e[s](o),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(i,r)}var a="data-l10n-id",l="data-l10n-args",c="[".concat(a,"]");class u extends r.default{constructor(e,t){super(e,t),this.roots=new Set,this.pendingrAF=null,this.pendingElements=new Set,this.windowElement=null,this.mutationObserver=null,this.observerConfig={attributes:!0,characterData:!1,childList:!0,subtree:!0,attributeFilter:[a,l]}}onChange(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];super.onChange(e),this.roots&&this.translateRoots()}setAttributes(e,t,n){return e.setAttribute(a,t),n?e.setAttribute(l,JSON.stringify(n)):e.removeAttribute(l),e}getAttributes(e){return{id:e.getAttribute(a),args:JSON.parse(e.getAttribute(l)||null)}}connectRoot(e){for(var t of this.roots)if(t===e||t.contains(e)||e.contains(t))throw new Error("Cannot add a root that overlaps with existing root.");if(this.windowElement){if(this.windowElement!==e.ownerDocument.defaultView)throw new Error("Cannot connect a root:\n          DOMLocalization already has a root from a different window.")}else this.windowElement=e.ownerDocument.defaultView,this.mutationObserver=new this.windowElement.MutationObserver((e=>this.translateMutations(e)));this.roots.add(e),this.mutationObserver.observe(e,this.observerConfig)}disconnectRoot(e){return this.roots.delete(e),this.pauseObserving(),0===this.roots.size?(this.mutationObserver=null,this.windowElement=null,this.pendingrAF=null,this.pendingElements.clear(),!0):(this.resumeObserving(),!1)}translateRoots(){var e=Array.from(this.roots);return Promise.all(e.map((e=>this.translateFragment(e))))}pauseObserving(){this.mutationObserver&&(this.translateMutations(this.mutationObserver.takeRecords()),this.mutationObserver.disconnect())}resumeObserving(){if(this.mutationObserver)for(var e of this.roots)this.mutationObserver.observe(e,this.observerConfig)}translateMutations(e){for(var t of e)switch(t.type){case"attributes":t.target.hasAttribute("data-l10n-id")&&this.pendingElements.add(t.target);break;case"childList":for(var n of t.addedNodes)if(n.nodeType===n.ELEMENT_NODE)if(n.childElementCount)for(var i of this.getTranslatables(n))this.pendingElements.add(i);else n.hasAttribute(a)&&this.pendingElements.add(n)}this.pendingElements.size>0&&null===this.pendingrAF&&(this.pendingrAF=this.windowElement.requestAnimationFrame((()=>{this.translateElements(Array.from(this.pendingElements)),this.pendingElements.clear(),this.pendingrAF=null})))}translateFragment(e){return this.translateElements(this.getTranslatables(e))}translateElements(e){var t,n=this;return(t=function*(){if(e.length){var t=e.map(n.getKeysForElement),i=yield n.formatMessages(t);return n.applyTranslations(e,i)}},function(){var e=this,n=arguments;return new Promise((function(i,r){var s=t.apply(e,n);function a(e){o(s,i,r,a,l,"next",e)}function l(e){o(s,i,r,a,l,"throw",e)}a(void 0)}))})()}applyTranslations(e,t){this.pauseObserving();for(var n=0;n<e.length;n++)void 0!==t[n]&&(0,i.default)(e[n],t[n]);this.resumeObserving()}getTranslatables(e){var t=Array.from(e.querySelectorAll(c));return"function"==typeof e.hasAttribute&&e.hasAttribute(a)&&t.push(e),t}getKeysForElement(e){return{id:e.getAttribute(a),args:JSON.parse(e.getAttribute(l)||null)}}}t.default=u},66170:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DOMLocalization",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"Localization",{enumerable:!0,get:function(){return r.default}});var i=s(n(20371)),r=s(n(65072));function s(e){return e&&e.__esModule?e:{default:e}}},65072:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(41817),n(72443),n(66992),n(33948),n(88674),n(26699),n(54747);var i=n(20719);function r(e,t,n,i,r,s,o){try{var a=e[s](o),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(i,r)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(i,s){var o=e.apply(t,n);function a(e){r(o,i,s,a,l,"next",e)}function l(e){r(o,i,s,a,l,"throw",e)}a(void 0)}))}}function o(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return o=function(e){this.s=e,this.n=e.next},o.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new o(e)}function a(e,t,n,i){return n.value?e.formatPattern(n.value,i,t):null}function l(e,t,n,i){var r={value:null,attributes:null};n.value&&(r.value=e.formatPattern(n.value,i,t));var s=Object.keys(n.attributes);if(s.length>0)for(var[o,a]of(r.attributes=new Array(s.length),s.entries())){var l=e.formatPattern(n.attributes[a],i,t);r.attributes[o]={name:a,value:l}}return r}function c(e,t,n,i){var r=[],s=new Set;return n.forEach(((n,o)=>{var{id:a,args:l}=n;if(void 0===i[o]){var c=t.getMessage(a);if(c){if(r.length=0,i[o]=e(t,r,c,l),r.length>0&&"undefined"!=typeof console){var u=t.locales[0],h=r.join(", ");console.warn("[fluent][resolver] errors in ".concat(u,"/").concat(a,": ").concat(h,"."))}}else s.add(a)}})),s}t.default=class{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;this.resourceIds=e,this.generateBundles=t,this.onChange(!0)}addResourceIds(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.resourceIds.push(...e),this.onChange(t),this.resourceIds.length}removeResourceIds(e){return this.resourceIds=this.resourceIds.filter((t=>!e.includes(t))),this.onChange(),this.resourceIds.length}formatWithFallback(e,t){var n=this;return s((function*(){var i,r=[],s=!1,a=!1,l=!1;try{for(var u,h=function(e){var t,n,i,r=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,i=Symbol.iterator);r--;){if(n&&null!=(t=e[n]))return t.call(e);if(i&&null!=(t=e[i]))return new o(t.call(e));n="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}(n.bundles);a=!(u=yield h.next()).done;a=!1){var d=u.value;s=!0;var p=c(t,d,e,r);if(0===p.size)break;if("undefined"!=typeof console){var f=d.locales[0],m=Array.from(p).join(", ");console.warn("[fluent] Missing translations in ".concat(f,": ").concat(m))}}}catch(e){l=!0,i=e}finally{try{a&&null!=h.return&&(yield h.return())}finally{if(l)throw i}}return s||"undefined"==typeof console||console.warn("[fluent] Request for keys failed because no resource bundles got generated.\n  keys: ".concat(JSON.stringify(e),".\n  resourceIds: ").concat(JSON.stringify(n.resourceIds),".")),r}))()}formatMessages(e){return this.formatWithFallback(e,l)}formatValues(e){return this.formatWithFallback(e,a)}formatValue(e,t){var n=this;return s((function*(){var[i]=yield n.formatValues([{id:e,args:t}]);return i}))()}handleEvent(){this.onChange()}onChange(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.bundles=i.CachedAsyncIterable.from(this.generateBundles(this.resourceIds)),e&&this.bundles.touchNext(2)}}},57289:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var{value:n}=t;if("string"==typeof n)if("title"===e.localName&&"http://www.w3.org/1999/xhtml"===e.namespaceURI)e.textContent=n;else if(i.test(n)){var r=e.ownerDocument.createElementNS("http://www.w3.org/1999/xhtml","template");r.innerHTML=n,function(e,t){for(var n of e.childNodes)if(n.nodeType!==n.TEXT_NODE)if(n.hasAttribute("data-l10n-name")){var i=(s=t,a=void 0,h=void 0,a=(o=n).getAttribute("data-l10n-name"),(h=s.querySelector('[data-l10n-name="'.concat(a,'"]')))?h.localName!==o.localName?(console.warn('An element named "'.concat(a,'" was found in the translation ')+"but its type ".concat(o.localName," didn't match the ")+"element found in the source (".concat(h.localName,").")),c(o)):(s.removeChild(h),d(o,h.cloneNode(!1))):(console.warn('An element named "'.concat(a,"\" wasn't found in the source.")),c(o)));e.replaceChild(i,n)}else if(u(n)){var r=l(n);e.replaceChild(r,n)}else console.warn('An element of forbidden type "'.concat(n.localName,'" was found in ')+"the translation. Only safe text-level elements and elements with data-l10n-name are allowed."),e.replaceChild(c(n),n);var s,o,a,h;t.textContent="",t.appendChild(e)}(r.content,e)}else e.textContent=n;a(t,e)},n(74916),n(66992),n(33948),n(73210),n(26699);var i=/<|&#?\w+;/,r={"http://www.w3.org/1999/xhtml":["em","strong","small","s","cite","q","dfn","abbr","data","time","code","var","samp","kbd","sub","sup","i","b","u","mark","bdi","bdo","span","br","wbr"]},s={"http://www.w3.org/1999/xhtml":{global:["title","aria-label","aria-valuetext"],a:["download"],area:["download","alt"],input:["alt","placeholder"],menuitem:["label"],menu:["label"],optgroup:["label"],option:["label"],track:["label"],img:["alt"],textarea:["placeholder"],th:["abbr"]},"http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul":{global:["accesskey","aria-label","aria-valuetext","label","title","tooltiptext"],description:["value"],key:["key","keycode"],label:["value"],textbox:["placeholder","value"]}};function o(e,t){if(!e)return!1;for(var n of e)if(n.name===t)return!0;return!1}function a(e,t){var n=t.hasAttribute("data-l10n-attrs")?t.getAttribute("data-l10n-attrs").split(",").map((e=>e.trim())):null;for(var i of Array.from(t.attributes))h(i.name,t,n)&&!o(e.attributes,i.name)&&t.removeAttribute(i.name);if(e.attributes)for(var r of Array.from(e.attributes))h(r.name,t,n)&&t.getAttribute(r.name)!==r.value&&t.setAttribute(r.name,r.value)}function l(e){var t=e.ownerDocument.createElement(e.localName);return d(e,t)}function c(e){return e.ownerDocument.createTextNode(e.textContent)}function u(e){var t=r[e.namespaceURI];return t&&t.includes(e.localName)}function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(n&&n.includes(e))return!0;var i=s[t.namespaceURI];if(!i)return!1;var r=e.toLowerCase(),o=t.localName;if(i.global.includes(r))return!0;if(!i[o])return!1;if(i[o].includes(r))return!0;if("http://www.w3.org/1999/xhtml"===t.namespaceURI&&"input"===o&&"value"===r){var a=t.type.toLowerCase();if("submit"===a||"button"===a||"reset"===a)return!0}return!1}function d(e,t){return t.textContent=e.textContent,a(e,t),t}},76020:(e,t,n)=>{"use strict";var i=n(35129),r=n(29321);function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=s(i),a=s(r);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self&&self;var u={exports:{}};!function(e,t){var n=function(e,t){return t?"other":1==e?"one":"other"},i=function(e,t){return t?"other":0==e||1==e?"one":"other"},r=function(e,t){return t?"other":e>=0&&e<=1?"one":"other"},s=function(e,t){var n=!String(e).split(".")[1];return t?"other":1==e&&n?"one":"other"},o=function(e,t){return"other"},a=function(e,t){return t?"other":1==e?"one":2==e?"two":"other"};!function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),e.exports=n}(0,{_in:o,af:n,ak:i,am:r,an:n,ar:function(e,t){var n=String(e).split("."),i=Number(n[0])==e&&n[0].slice(-2);return t?"other":0==e?"zero":1==e?"one":2==e?"two":i>=3&&i<=10?"few":i>=11&&i<=99?"many":"other"},ars:function(e,t){var n=String(e).split("."),i=Number(n[0])==e&&n[0].slice(-2);return t?"other":0==e?"zero":1==e?"one":2==e?"two":i>=3&&i<=10?"few":i>=11&&i<=99?"many":"other"},as:function(e,t){return t?1==e||5==e||7==e||8==e||9==e||10==e?"one":2==e||3==e?"two":4==e?"few":6==e?"many":"other":e>=0&&e<=1?"one":"other"},asa:n,ast:s,az:function(e,t){var n=String(e).split(".")[0],i=n.slice(-1),r=n.slice(-2),s=n.slice(-3);return t?1==i||2==i||5==i||7==i||8==i||20==r||50==r||70==r||80==r?"one":3==i||4==i||100==s||200==s||300==s||400==s||500==s||600==s||700==s||800==s||900==s?"few":0==n||6==i||40==r||60==r||90==r?"many":"other":1==e?"one":"other"},be:function(e,t){var n=String(e).split("."),i=Number(n[0])==e,r=i&&n[0].slice(-1),s=i&&n[0].slice(-2);return t?2!=r&&3!=r||12==s||13==s?"other":"few":1==r&&11!=s?"one":r>=2&&r<=4&&(s<12||s>14)?"few":i&&0==r||r>=5&&r<=9||s>=11&&s<=14?"many":"other"},bem:n,bez:n,bg:n,bho:i,bm:o,bn:function(e,t){return t?1==e||5==e||7==e||8==e||9==e||10==e?"one":2==e||3==e?"two":4==e?"few":6==e?"many":"other":e>=0&&e<=1?"one":"other"},bo:o,br:function(e,t){var n=String(e).split("."),i=Number(n[0])==e,r=i&&n[0].slice(-1),s=i&&n[0].slice(-2),o=i&&n[0].slice(-6);return t?"other":1==r&&11!=s&&71!=s&&91!=s?"one":2==r&&12!=s&&72!=s&&92!=s?"two":(3==r||4==r||9==r)&&(s<10||s>19)&&(s<70||s>79)&&(s<90||s>99)?"few":0!=e&&i&&0==o?"many":"other"},brx:n,bs:function(e,t){var n=String(e).split("."),i=n[0],r=n[1]||"",s=!n[1],o=i.slice(-1),a=i.slice(-2),l=r.slice(-1),c=r.slice(-2);return t?"other":s&&1==o&&11!=a||1==l&&11!=c?"one":s&&o>=2&&o<=4&&(a<12||a>14)||l>=2&&l<=4&&(c<12||c>14)?"few":"other"},ca:function(e,t){var n=!String(e).split(".")[1];return t?1==e||3==e?"one":2==e?"two":4==e?"few":"other":1==e&&n?"one":"other"},ce:n,ceb:function(e,t){var n=String(e).split("."),i=n[0],r=n[1]||"",s=!n[1],o=i.slice(-1),a=r.slice(-1);return t?"other":s&&(1==i||2==i||3==i)||s&&4!=o&&6!=o&&9!=o||!s&&4!=a&&6!=a&&9!=a?"one":"other"},cgg:n,chr:n,ckb:n,cs:function(e,t){var n=String(e).split("."),i=n[0],r=!n[1];return t?"other":1==e&&r?"one":i>=2&&i<=4&&r?"few":r?"other":"many"},cy:function(e,t){return t?0==e||7==e||8==e||9==e?"zero":1==e?"one":2==e?"two":3==e||4==e?"few":5==e||6==e?"many":"other":0==e?"zero":1==e?"one":2==e?"two":3==e?"few":6==e?"many":"other"},da:function(e,t){var n=String(e).split("."),i=n[0],r=Number(n[0])==e;return t||1!=e&&(r||0!=i&&1!=i)?"other":"one"},de:s,doi:r,dsb:function(e,t){var n=String(e).split("."),i=n[0],r=n[1]||"",s=!n[1],o=i.slice(-2),a=r.slice(-2);return t?"other":s&&1==o||1==a?"one":s&&2==o||2==a?"two":s&&(3==o||4==o)||3==a||4==a?"few":"other"},dv:n,dz:o,ee:n,el:n,en:function(e,t){var n=String(e).split("."),i=!n[1],r=Number(n[0])==e,s=r&&n[0].slice(-1),o=r&&n[0].slice(-2);return t?1==s&&11!=o?"one":2==s&&12!=o?"two":3==s&&13!=o?"few":"other":1==e&&i?"one":"other"},eo:n,es:n,et:s,eu:n,fa:r,ff:function(e,t){return t?"other":e>=0&&e<2?"one":"other"},fi:s,fil:function(e,t){var n=String(e).split("."),i=n[0],r=n[1]||"",s=!n[1],o=i.slice(-1),a=r.slice(-1);return t?1==e?"one":"other":s&&(1==i||2==i||3==i)||s&&4!=o&&6!=o&&9!=o||!s&&4!=a&&6!=a&&9!=a?"one":"other"},fo:n,fr:function(e,t){var n=String(e).split("."),i=n[0],r=!n[1],s=i.slice(-6);return t?1==e?"one":"other":e>=0&&e<2?"one":0!=i&&0==s&&r?"many":"other"},fur:n,fy:s,ga:function(e,t){var n=String(e).split("."),i=Number(n[0])==e;return t?1==e?"one":"other":1==e?"one":2==e?"two":i&&e>=3&&e<=6?"few":i&&e>=7&&e<=10?"many":"other"},gd:function(e,t){var n=String(e).split("."),i=Number(n[0])==e;return t?1==e||11==e?"one":2==e||12==e?"two":3==e||13==e?"few":"other":1==e||11==e?"one":2==e||12==e?"two":i&&e>=3&&e<=10||i&&e>=13&&e<=19?"few":"other"},gl:s,gsw:n,gu:function(e,t){return t?1==e?"one":2==e||3==e?"two":4==e?"few":6==e?"many":"other":e>=0&&e<=1?"one":"other"},guw:i,gv:function(e,t){var n=String(e).split("."),i=n[0],r=!n[1],s=i.slice(-1),o=i.slice(-2);return t?"other":r&&1==s?"one":r&&2==s?"two":!r||0!=o&&20!=o&&40!=o&&60!=o&&80!=o?r?"other":"many":"few"},ha:n,haw:n,he:function(e,t){var n=String(e).split("."),i=n[0],r=!n[1],s=Number(n[0])==e,o=s&&n[0].slice(-1);return t?"other":1==e&&r?"one":2==i&&r?"two":r&&(e<0||e>10)&&s&&0==o?"many":"other"},hi:function(e,t){return t?1==e?"one":2==e||3==e?"two":4==e?"few":6==e?"many":"other":e>=0&&e<=1?"one":"other"},hr:function(e,t){var n=String(e).split("."),i=n[0],r=n[1]||"",s=!n[1],o=i.slice(-1),a=i.slice(-2),l=r.slice(-1),c=r.slice(-2);return t?"other":s&&1==o&&11!=a||1==l&&11!=c?"one":s&&o>=2&&o<=4&&(a<12||a>14)||l>=2&&l<=4&&(c<12||c>14)?"few":"other"},hsb:function(e,t){var n=String(e).split("."),i=n[0],r=n[1]||"",s=!n[1],o=i.slice(-2),a=r.slice(-2);return t?"other":s&&1==o||1==a?"one":s&&2==o||2==a?"two":s&&(3==o||4==o)||3==a||4==a?"few":"other"},hu:function(e,t){return t?1==e||5==e?"one":"other":1==e?"one":"other"},hy:function(e,t){return t?1==e?"one":"other":e>=0&&e<2?"one":"other"},ia:s,id:o,ig:o,ii:o,io:s,is:function(e,t){var n=String(e).split("."),i=n[0],r=Number(n[0])==e,s=i.slice(-1),o=i.slice(-2);return t?"other":r&&1==s&&11!=o||!r?"one":"other"},it:function(e,t){var n=!String(e).split(".")[1];return t?11==e||8==e||80==e||800==e?"many":"other":1==e&&n?"one":"other"},iu:a,iw:function(e,t){var n=String(e).split("."),i=n[0],r=!n[1],s=Number(n[0])==e,o=s&&n[0].slice(-1);return t?"other":1==e&&r?"one":2==i&&r?"two":r&&(e<0||e>10)&&s&&0==o?"many":"other"},ja:o,jbo:o,jgo:n,ji:s,jmc:n,jv:o,jw:o,ka:function(e,t){var n=String(e).split(".")[0],i=n.slice(-2);return t?1==n?"one":0==n||i>=2&&i<=20||40==i||60==i||80==i?"many":"other":1==e?"one":"other"},kab:function(e,t){return t?"other":e>=0&&e<2?"one":"other"},kaj:n,kcg:n,kde:o,kea:o,kk:function(e,t){var n=String(e).split("."),i=Number(n[0])==e,r=i&&n[0].slice(-1);return t?6==r||9==r||i&&0==r&&0!=e?"many":"other":1==e?"one":"other"},kkj:n,kl:n,km:o,kn:r,ko:o,ks:n,ksb:n,ksh:function(e,t){return t?"other":0==e?"zero":1==e?"one":"other"},ku:n,kw:function(e,t){var n=String(e).split("."),i=Number(n[0])==e,r=i&&n[0].slice(-2),s=i&&n[0].slice(-3),o=i&&n[0].slice(-5),a=i&&n[0].slice(-6);return t?i&&e>=1&&e<=4||r>=1&&r<=4||r>=21&&r<=24||r>=41&&r<=44||r>=61&&r<=64||r>=81&&r<=84?"one":5==e||5==r?"many":"other":0==e?"zero":1==e?"one":2==r||22==r||42==r||62==r||82==r||i&&0==s&&(o>=1e3&&o<=2e4||4e4==o||6e4==o||8e4==o)||0!=e&&1e5==a?"two":3==r||23==r||43==r||63==r||83==r?"few":1==e||1!=r&&21!=r&&41!=r&&61!=r&&81!=r?"other":"many"},ky:n,lag:function(e,t){var n=String(e).split(".")[0];return t?"other":0==e?"zero":0!=n&&1!=n||0==e?"other":"one"},lb:n,lg:n,lij:function(e,t){var n=String(e).split("."),i=!n[1],r=Number(n[0])==e;return t?11==e||8==e||r&&e>=80&&e<=89||r&&e>=800&&e<=899?"many":"other":1==e&&i?"one":"other"},lkt:o,ln:i,lo:function(e,t){return t&&1==e?"one":"other"},lt:function(e,t){var n=String(e).split("."),i=n[1]||"",r=Number(n[0])==e,s=r&&n[0].slice(-1),o=r&&n[0].slice(-2);return t?"other":1==s&&(o<11||o>19)?"one":s>=2&&s<=9&&(o<11||o>19)?"few":0!=i?"many":"other"},lv:function(e,t){var n=String(e).split("."),i=n[1]||"",r=i.length,s=Number(n[0])==e,o=s&&n[0].slice(-1),a=s&&n[0].slice(-2),l=i.slice(-2),c=i.slice(-1);return t?"other":s&&0==o||a>=11&&a<=19||2==r&&l>=11&&l<=19?"zero":1==o&&11!=a||2==r&&1==c&&11!=l||2!=r&&1==c?"one":"other"},mas:n,mg:i,mgo:n,mk:function(e,t){var n=String(e).split("."),i=n[0],r=n[1]||"",s=!n[1],o=i.slice(-1),a=i.slice(-2),l=r.slice(-1),c=r.slice(-2);return t?1==o&&11!=a?"one":2==o&&12!=a?"two":7!=o&&8!=o||17==a||18==a?"other":"many":s&&1==o&&11!=a||1==l&&11!=c?"one":"other"},ml:n,mn:n,mo:function(e,t){var n=String(e).split("."),i=!n[1],r=Number(n[0])==e&&n[0].slice(-2);return t?1==e?"one":"other":1==e&&i?"one":!i||0==e||r>=2&&r<=19?"few":"other"},mr:function(e,t){return t?1==e?"one":2==e||3==e?"two":4==e?"few":"other":1==e?"one":"other"},ms:function(e,t){return t&&1==e?"one":"other"},mt:function(e,t){var n=String(e).split("."),i=Number(n[0])==e&&n[0].slice(-2);return t?"other":1==e?"one":0==e||i>=2&&i<=10?"few":i>=11&&i<=19?"many":"other"},my:o,nah:n,naq:a,nb:n,nd:n,ne:function(e,t){var n=String(e).split("."),i=Number(n[0])==e;return t?i&&e>=1&&e<=4?"one":"other":1==e?"one":"other"},nl:s,nn:n,nnh:n,no:n,nqo:o,nr:n,nso:i,ny:n,nyn:n,om:n,or:function(e,t){var n=String(e).split("."),i=Number(n[0])==e;return t?1==e||5==e||i&&e>=7&&e<=9?"one":2==e||3==e?"two":4==e?"few":6==e?"many":"other":1==e?"one":"other"},os:n,osa:o,pa:i,pap:n,pcm:r,pl:function(e,t){var n=String(e).split("."),i=n[0],r=!n[1],s=i.slice(-1),o=i.slice(-2);return t?"other":1==e&&r?"one":r&&s>=2&&s<=4&&(o<12||o>14)?"few":r&&1!=i&&(0==s||1==s)||r&&s>=5&&s<=9||r&&o>=12&&o<=14?"many":"other"},prg:function(e,t){var n=String(e).split("."),i=n[1]||"",r=i.length,s=Number(n[0])==e,o=s&&n[0].slice(-1),a=s&&n[0].slice(-2),l=i.slice(-2),c=i.slice(-1);return t?"other":s&&0==o||a>=11&&a<=19||2==r&&l>=11&&l<=19?"zero":1==o&&11!=a||2==r&&1==c&&11!=l||2!=r&&1==c?"one":"other"},ps:n,pt:function(e,t){var n=String(e).split(".")[0];return t?"other":0==n||1==n?"one":"other"},pt_PT:s,rm:n,ro:function(e,t){var n=String(e).split("."),i=!n[1],r=Number(n[0])==e&&n[0].slice(-2);return t?1==e?"one":"other":1==e&&i?"one":!i||0==e||r>=2&&r<=19?"few":"other"},rof:n,root:o,ru:function(e,t){var n=String(e).split("."),i=n[0],r=!n[1],s=i.slice(-1),o=i.slice(-2);return t?"other":r&&1==s&&11!=o?"one":r&&s>=2&&s<=4&&(o<12||o>14)?"few":r&&0==s||r&&s>=5&&s<=9||r&&o>=11&&o<=14?"many":"other"},rwk:n,sah:o,saq:n,sat:a,sc:function(e,t){var n=!String(e).split(".")[1];return t?11==e||8==e||80==e||800==e?"many":"other":1==e&&n?"one":"other"},scn:function(e,t){var n=!String(e).split(".")[1];return t?11==e||8==e||80==e||800==e?"many":"other":1==e&&n?"one":"other"},sd:n,sdh:n,se:a,seh:n,ses:o,sg:o,sh:function(e,t){var n=String(e).split("."),i=n[0],r=n[1]||"",s=!n[1],o=i.slice(-1),a=i.slice(-2),l=r.slice(-1),c=r.slice(-2);return t?"other":s&&1==o&&11!=a||1==l&&11!=c?"one":s&&o>=2&&o<=4&&(a<12||a>14)||l>=2&&l<=4&&(c<12||c>14)?"few":"other"},shi:function(e,t){var n=String(e).split("."),i=Number(n[0])==e;return t?"other":e>=0&&e<=1?"one":i&&e>=2&&e<=10?"few":"other"},si:function(e,t){var n=String(e).split("."),i=n[0],r=n[1]||"";return t?"other":0==e||1==e||0==i&&1==r?"one":"other"},sk:function(e,t){var n=String(e).split("."),i=n[0],r=!n[1];return t?"other":1==e&&r?"one":i>=2&&i<=4&&r?"few":r?"other":"many"},sl:function(e,t){var n=String(e).split("."),i=n[0],r=!n[1],s=i.slice(-2);return t?"other":r&&1==s?"one":r&&2==s?"two":r&&(3==s||4==s)||!r?"few":"other"},sma:a,smi:a,smj:a,smn:a,sms:a,sn:n,so:n,sq:function(e,t){var n=String(e).split("."),i=Number(n[0])==e,r=i&&n[0].slice(-1),s=i&&n[0].slice(-2);return t?1==e?"one":4==r&&14!=s?"many":"other":1==e?"one":"other"},sr:function(e,t){var n=String(e).split("."),i=n[0],r=n[1]||"",s=!n[1],o=i.slice(-1),a=i.slice(-2),l=r.slice(-1),c=r.slice(-2);return t?"other":s&&1==o&&11!=a||1==l&&11!=c?"one":s&&o>=2&&o<=4&&(a<12||a>14)||l>=2&&l<=4&&(c<12||c>14)?"few":"other"},ss:n,ssy:n,st:n,su:o,sv:function(e,t){var n=String(e).split("."),i=!n[1],r=Number(n[0])==e,s=r&&n[0].slice(-1),o=r&&n[0].slice(-2);return t?1!=s&&2!=s||11==o||12==o?"other":"one":1==e&&i?"one":"other"},sw:s,syr:n,ta:n,te:n,teo:n,th:o,ti:i,tig:n,tk:function(e,t){var n=String(e).split("."),i=Number(n[0])==e&&n[0].slice(-1);return t?6==i||9==i||10==e?"few":"other":1==e?"one":"other"},tl:function(e,t){var n=String(e).split("."),i=n[0],r=n[1]||"",s=!n[1],o=i.slice(-1),a=r.slice(-1);return t?1==e?"one":"other":s&&(1==i||2==i||3==i)||s&&4!=o&&6!=o&&9!=o||!s&&4!=a&&6!=a&&9!=a?"one":"other"},tn:n,to:o,tr:n,ts:n,tzm:function(e,t){var n=String(e).split("."),i=Number(n[0])==e;return t?"other":0==e||1==e||i&&e>=11&&e<=99?"one":"other"},ug:n,uk:function(e,t){var n=String(e).split("."),i=n[0],r=!n[1],s=Number(n[0])==e,o=s&&n[0].slice(-1),a=s&&n[0].slice(-2),l=i.slice(-1),c=i.slice(-2);return t?3==o&&13!=a?"few":"other":r&&1==l&&11!=c?"one":r&&l>=2&&l<=4&&(c<12||c>14)?"few":r&&0==l||r&&l>=5&&l<=9||r&&c>=11&&c<=14?"many":"other"},ur:s,uz:n,ve:n,vi:function(e,t){return t&&1==e?"one":"other"},vo:n,vun:n,wa:i,wae:n,wo:o,xh:n,xog:n,yi:s,yo:o,yue:o,zh:o,zu:r})}(u);var h=c(u.exports),d=Object.freeze(Object.assign(Object.create(null),u.exports,{default:h})),p={exports:{}};!function(e,t){var n="zero",i="one",r="two",s="few",o="many",a="other",l={cardinal:[i,a],ordinal:[a]},c={cardinal:[a],ordinal:[a]},u={cardinal:[i,s,o,a],ordinal:[a]},h={cardinal:[i,a],ordinal:[i,a]},d={cardinal:[i,r,a],ordinal:[a]};!function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),e.exports=n}(0,{_in:c,af:l,ak:l,am:l,an:l,ar:{cardinal:[n,i,r,s,o,a],ordinal:[a]},ars:{cardinal:[n,i,r,s,o,a],ordinal:[a]},as:{cardinal:[i,a],ordinal:[i,r,s,o,a]},asa:l,ast:l,az:{cardinal:[i,a],ordinal:[i,s,o,a]},be:{cardinal:[i,s,o,a],ordinal:[s,a]},bem:l,bez:l,bg:l,bho:l,bm:c,bn:{cardinal:[i,a],ordinal:[i,r,s,o,a]},bo:c,br:{cardinal:[i,r,s,o,a],ordinal:[a]},brx:l,bs:{cardinal:[i,s,a],ordinal:[a]},ca:{cardinal:[i,a],ordinal:[i,r,s,a]},ce:l,ceb:l,cgg:l,chr:l,ckb:l,cs:u,cy:{cardinal:[n,i,r,s,o,a],ordinal:[n,i,r,s,o,a]},da:l,de:l,doi:l,dsb:{cardinal:[i,r,s,a],ordinal:[a]},dv:l,dz:c,ee:l,el:l,en:{cardinal:[i,a],ordinal:[i,r,s,a]},eo:l,es:l,et:l,eu:l,fa:l,ff:l,fi:l,fil:h,fo:l,fr:{cardinal:[i,o,a],ordinal:[i,a]},fur:l,fy:l,ga:{cardinal:[i,r,s,o,a],ordinal:[i,a]},gd:{cardinal:[i,r,s,a],ordinal:[i,r,s,a]},gl:l,gsw:l,gu:{cardinal:[i,a],ordinal:[i,r,s,o,a]},guw:l,gv:{cardinal:[i,r,s,o,a],ordinal:[a]},ha:l,haw:l,he:{cardinal:[i,r,o,a],ordinal:[a]},hi:{cardinal:[i,a],ordinal:[i,r,s,o,a]},hr:{cardinal:[i,s,a],ordinal:[a]},hsb:{cardinal:[i,r,s,a],ordinal:[a]},hu:h,hy:h,ia:l,id:c,ig:c,ii:c,io:l,is:l,it:{cardinal:[i,a],ordinal:[o,a]},iu:d,iw:{cardinal:[i,r,o,a],ordinal:[a]},ja:c,jbo:c,jgo:l,ji:l,jmc:l,jv:c,jw:c,ka:{cardinal:[i,a],ordinal:[i,o,a]},kab:l,kaj:l,kcg:l,kde:c,kea:c,kk:{cardinal:[i,a],ordinal:[o,a]},kkj:l,kl:l,km:c,kn:l,ko:c,ks:l,ksb:l,ksh:{cardinal:[n,i,a],ordinal:[a]},ku:l,kw:{cardinal:[n,i,r,s,o,a],ordinal:[i,o,a]},ky:l,lag:{cardinal:[n,i,a],ordinal:[a]},lb:l,lg:l,lij:{cardinal:[i,a],ordinal:[o,a]},lkt:c,ln:l,lo:{cardinal:[a],ordinal:[i,a]},lt:u,lv:{cardinal:[n,i,a],ordinal:[a]},mas:l,mg:l,mgo:l,mk:{cardinal:[i,a],ordinal:[i,r,o,a]},ml:l,mn:l,mo:{cardinal:[i,s,a],ordinal:[i,a]},mr:{cardinal:[i,a],ordinal:[i,r,s,a]},ms:{cardinal:[a],ordinal:[i,a]},mt:u,my:c,nah:l,naq:d,nb:l,nd:l,ne:h,nl:l,nn:l,nnh:l,no:l,nqo:c,nr:l,nso:l,ny:l,nyn:l,om:l,or:{cardinal:[i,a],ordinal:[i,r,s,o,a]},os:l,osa:c,pa:l,pap:l,pcm:l,pl:u,prg:{cardinal:[n,i,a],ordinal:[a]},ps:l,pt:l,pt_PT:l,rm:l,ro:{cardinal:[i,s,a],ordinal:[i,a]},rof:l,root:c,ru:u,rwk:l,sah:c,saq:l,sat:d,sc:{cardinal:[i,a],ordinal:[o,a]},scn:{cardinal:[i,a],ordinal:[o,a]},sd:l,sdh:l,se:d,seh:l,ses:c,sg:c,sh:{cardinal:[i,s,a],ordinal:[a]},shi:{cardinal:[i,s,a],ordinal:[a]},si:l,sk:u,sl:{cardinal:[i,r,s,a],ordinal:[a]},sma:d,smi:d,smj:d,smn:d,sms:d,sn:l,so:l,sq:{cardinal:[i,a],ordinal:[i,o,a]},sr:{cardinal:[i,s,a],ordinal:[a]},ss:l,ssy:l,st:l,su:c,sv:h,sw:l,syr:l,ta:l,te:l,teo:l,th:c,ti:l,tig:l,tk:{cardinal:[i,a],ordinal:[s,a]},tl:h,tn:l,to:c,tr:l,ts:l,tzm:l,ug:l,uk:{cardinal:[i,s,o,a],ordinal:[s,a]},ur:l,uz:l,ve:l,vi:{cardinal:[a],ordinal:[i,a]},vo:l,vun:l,wa:l,wae:l,wo:c,xh:l,xog:l,yi:l,yo:c,yue:c,zh:c,zu:l})}(p);var f=c(p.exports),m=h||d,g=f||Object.freeze(Object.assign(Object.create(null),p.exports,{default:f})),v="object"===("undefined"==typeof Intl?"undefined":l(Intl))&&Intl.NumberFormat||a.default,y=function(e){return"in"===e?"_in":"pt-PT"===e?"pt_PT":e},b=o.default(v,(function(e){return m[y(e)]}),(function(e,t){return g[y(e)][t?"ordinal":"cardinal"]}));e.exports=b},43033:function(e,t,n){"use strict";function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=i(n(76020));if("undefined"==typeof Intl)void 0!==n.g?n.g.Intl={PluralRules:r.default}:"undefined"!=typeof window?window.Intl={PluralRules:r.default}:this.Intl={PluralRules:r.default},r.default.polyfill=!0;else if(Intl.PluralRules){var s=["en","es","ru","zh"];Intl.PluralRules.supportedLocalesOf(s).length<s.length&&(Intl.PluralRules=r.default,r.default.polyfill=!0)}else Intl.PluralRules=r.default,r.default.polyfill=!0},29321:e=>{"use strict";function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var n=function(){function e(t,n){var i=n.minimumIntegerDigits,r=n.minimumFractionDigits,s=n.maximumFractionDigits,o=n.minimumSignificantDigits,a=n.maximumSignificantDigits;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._minID="number"==typeof i?i:1,this._minFD="number"==typeof r?r:0,this._maxFD="number"==typeof s?s:Math.max(this._minFD,3),"number"!=typeof o&&"number"!=typeof a||(this._minSD="number"==typeof o?o:1,this._maxSD="number"==typeof a?a:21)}var n,i;return n=e,(i=[{key:"resolvedOptions",value:function(){var e={minimumIntegerDigits:this._minID,minimumFractionDigits:this._minFD,maximumFractionDigits:this._maxFD};return"number"==typeof this._minSD&&(e.minimumSignificantDigits=this._minSD,e.maximumSignificantDigits=this._maxSD),e}},{key:"format",value:function(e){if(this._minSD){for(var t=String(e),n=0,i=0;i<t.length;++i){var r=t[i];r>="0"&&r<="9"&&++n}return n<this._minSD?e.toPrecision(this._minSD):n>this._maxSD?e.toPrecision(this._maxSD):t}return this._minFD>0?e.toFixed(this._minFD):0===this._maxFD?e.toFixed(0):String(e)}}])&&t(n.prototype,i),e}();e.exports=n},20719:(e,t,n)=>{"use strict";n.r(t),n.d(t,{CachedAsyncIterable:()=>s,CachedSyncIterable:()=>r});class i extends Array{static from(e){return e instanceof this?e:new this(e)}}class r extends i{constructor(e){if(super(),!(Symbol.iterator in Object(e)))throw new TypeError("Argument must implement the iteration protocol.");this.iterator=e[Symbol.iterator]()}[Symbol.iterator](){const e=this;let t=0;return{next:()=>(e.length<=t&&e.push(e.iterator.next()),e[t++])}}touchNext(e=1){let t=0;for(;t++<e;){const e=this[this.length-1];if(e&&e.done)break;this.push(this.iterator.next())}return this[this.length-1]}}class s extends i{constructor(e){if(super(),Symbol.asyncIterator in Object(e))this.iterator=e[Symbol.asyncIterator]();else{if(!(Symbol.iterator in Object(e)))throw new TypeError("Argument must implement the iteration protocol.");this.iterator=e[Symbol.iterator]()}}[Symbol.asyncIterator](){const e=this;let t=0;return{next:async()=>(e.length<=t&&e.push(e.iterator.next()),e[t++])}}async touchNext(e=1){let t=0;for(;t++<e;){const e=this[this.length-1];if(e&&(await e).done)break;this.push(this.iterator.next())}return this[this.length-1]}}},35129:(e,t,n)=>{"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.r(t),n.d(t,{default:()=>l});var o=function(e){if(!e)return[];Array.isArray(e)||(e=[e]);for(var t={},n=0;n<e.length;++n){var r=e[n];if(r&&"object"===i(r)&&(r=String(r)),"string"!=typeof r){var s="Locales should be strings, ".concat(JSON.stringify(r)," isn't.");throw new TypeError(s)}if("*"!==r[0]){if(!r.split("-").every((function(e){return/[a-z0-9]+/i.test(e)}))){var o=JSON.stringify(r),a="The locale ".concat(o," is not a structurally valid BCP 47 language tag.");throw new RangeError(a)}t[r]=!0}}return Object.keys(t)},a=function(e){if(!e)return"cardinal";if("cardinal"===e||"ordinal"===e)return e;throw new RangeError("Not a valid plural type: "+JSON.stringify(e))};function l(e,t,n){var i=function(e){do{if(t(e))return e;e=e.replace(/-?[^-]*$/,"")}while(e);return null},l=function(e){for(var t=o(e),n=0;n<t.length;++n){var r=i(t[n]);if(r)return r}return i("undefined"!=typeof navigator&&navigator&&(navigator.userLanguage||navigator.language)||"en-US")},c=function(){function c(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,c),this._locale=l(n),this._select=t(this._locale),this._type=a(i.type),this._nf=new e("en",i)}var u,h,d;return u=c,d=[{key:"supportedLocalesOf",value:function(e){return o(e).filter(i)}}],(h=[{key:"resolvedOptions",value:function(){var e=this._nf.resolvedOptions(),t=e.minimumIntegerDigits,i=e.minimumFractionDigits,r=e.maximumFractionDigits,s=e.minimumSignificantDigits,o=e.maximumSignificantDigits,a={locale:this._locale,minimumIntegerDigits:t,minimumFractionDigits:i,maximumFractionDigits:r,pluralCategories:n(this._locale,"ordinal"===this._type),type:this._type};return"number"==typeof s&&(a.minimumSignificantDigits=s,a.maximumSignificantDigits=o),a}},{key:"select",value:function(e){if(!(this instanceof c))throw new TypeError("select() called on incompatible ".concat(this));if("number"!=typeof e&&(e=Number(e)),!isFinite(e))return"other";var t=this._nf.format(Math.abs(e));return this._select(t,"ordinal"===this._type)}}])&&s(u.prototype,h),d&&s(u,d),c}();return Object.defineProperty(c,"prototype",{writable:!1}),c}},64775:e=>{"use strict";e.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON AnySchema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},98:e=>{"use strict";e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i].call(s.exports,s,s.exports,n),s.exports}n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(59006),n(96710)})();
//# sourceMappingURL=61306ce4438d1e592477-app.js.map